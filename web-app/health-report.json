{
  "timestamp": "2025-07-27T02:48:24.686Z",
  "checks": [
    {
      "name": "Project Structure",
      "critical": true,
      "status": "failed",
      "startTime": 1753584504688,
      "endTime": 1753584504689,
      "duration": 1,
      "result": {
        "status": "failed",
        "details": {
          "requiredDirs": 7,
          "existingDirs": [
            "src/features",
            "src/shared",
            "src/pages",
            "src/lib",
            "src/utils",
            "docs"
          ],
          "missingDirs": [
            ".config"
          ]
        }
      },
      "error": null,
      "details": {
        "requiredDirs": 7,
        "existingDirs": [
          "src/features",
          "src/shared",
          "src/pages",
          "src/lib",
          "src/utils",
          "docs"
        ],
        "missingDirs": [
          ".config"
        ]
      }
    },
    {
      "name": "Feature Structure",
      "critical": true,
      "status": "passed",
      "startTime": 1753584504689,
      "endTime": 1753584504690,
      "duration": 1,
      "result": {
        "status": "passed",
        "details": {
          "totalFeatures": 9,
          "healthyFeatures": 9,
          "featureHealth": [
            {
              "name": "analytics",
              "hasIndex": true,
              "hasReadme": true,
              "hasComponents": true,
              "hasServices": true,
              "score": 4
            },
            {
              "name": "auth",
              "hasIndex": true,
              "hasReadme": true,
              "hasComponents": true,
              "hasServices": true,
              "score": 4
            },
            {
              "name": "calendar",
              "hasIndex": true,
              "hasReadme": true,
              "hasComponents": true,
              "hasServices": true,
              "score": 4
            },
            {
              "name": "clients",
              "hasIndex": true,
              "hasReadme": true,
              "hasComponents": true,
              "hasServices": true,
              "score": 4
            },
            {
              "name": "dashboard",
              "hasIndex": true,
              "hasReadme": true,
              "hasComponents": true,
              "hasServices": true,
              "score": 4
            },
            {
              "name": "documents",
              "hasIndex": true,
              "hasReadme": true,
              "hasComponents": true,
              "hasServices": true,
              "score": 4
            },
            {
              "name": "email",
              "hasIndex": true,
              "hasReadme": true,
              "hasComponents": true,
              "hasServices": true,
              "score": 4
            },
            {
              "name": "financial",
              "hasIndex": true,
              "hasReadme": true,
              "hasComponents": true,
              "hasServices": true,
              "score": 4
            },
            {
              "name": "scanner",
              "hasIndex": true,
              "hasReadme": true,
              "hasComponents": true,
              "hasServices": true,
              "score": 4
            }
          ]
        }
      },
      "error": null,
      "details": {
        "totalFeatures": 9,
        "healthyFeatures": 9,
        "featureHealth": [
          {
            "name": "analytics",
            "hasIndex": true,
            "hasReadme": true,
            "hasComponents": true,
            "hasServices": true,
            "score": 4
          },
          {
            "name": "auth",
            "hasIndex": true,
            "hasReadme": true,
            "hasComponents": true,
            "hasServices": true,
            "score": 4
          },
          {
            "name": "calendar",
            "hasIndex": true,
            "hasReadme": true,
            "hasComponents": true,
            "hasServices": true,
            "score": 4
          },
          {
            "name": "clients",
            "hasIndex": true,
            "hasReadme": true,
            "hasComponents": true,
            "hasServices": true,
            "score": 4
          },
          {
            "name": "dashboard",
            "hasIndex": true,
            "hasReadme": true,
            "hasComponents": true,
            "hasServices": true,
            "score": 4
          },
          {
            "name": "documents",
            "hasIndex": true,
            "hasReadme": true,
            "hasComponents": true,
            "hasServices": true,
            "score": 4
          },
          {
            "name": "email",
            "hasIndex": true,
            "hasReadme": true,
            "hasComponents": true,
            "hasServices": true,
            "score": 4
          },
          {
            "name": "financial",
            "hasIndex": true,
            "hasReadme": true,
            "hasComponents": true,
            "hasServices": true,
            "score": 4
          },
          {
            "name": "scanner",
            "hasIndex": true,
            "hasReadme": true,
            "hasComponents": true,
            "hasServices": true,
            "score": 4
          }
        ]
      }
    },
    {
      "name": "Dependencies",
      "critical": false,
      "status": "warning",
      "startTime": 1753584504690,
      "endTime": 1753584505888,
      "duration": 1198,
      "result": {
        "status": "warning",
        "details": {
          "error": "Could not check dependencies",
          "message": "Command failed: npm audit --json"
        }
      },
      "error": null,
      "details": {
        "error": "Could not check dependencies",
        "message": "Command failed: npm audit --json"
      }
    },
    {
      "name": "Code Quality",
      "critical": false,
      "status": "failed",
      "startTime": 1753584505888,
      "endTime": 1753584510366,
      "duration": 4478,
      "result": {
        "status": "failed",
        "details": {
          "error": "Code quality check failed",
          "message": "Command failed: npm run type-check\nnpm error Lifecycle script `type-check` failed with error:\nnpm error code 2\nnpm error path E:\\AlexVenturesStudio\\Nexa_Manager_whit_Task_Master\\web-app\nnpm error workspace web-app@0.0.0\nnpm error location E:\\AlexVenturesStudio\\Nexa_Manager_whit_Task_Master\\web-app\nnpm error command failed\nnpm error command C:\\WINDOWS\\system32\\cmd.exe /d /s /c tsc --noEmit\n"
        }
      },
      "error": null,
      "details": {
        "error": "Code quality check failed",
        "message": "Command failed: npm run type-check\nnpm error Lifecycle script `type-check` failed with error:\nnpm error code 2\nnpm error path E:\\AlexVenturesStudio\\Nexa_Manager_whit_Task_Master\\web-app\nnpm error workspace web-app@0.0.0\nnpm error location E:\\AlexVenturesStudio\\Nexa_Manager_whit_Task_Master\\web-app\nnpm error command failed\nnpm error command C:\\WINDOWS\\system32\\cmd.exe /d /s /c tsc --noEmit\n"
      }
    },
    {
      "name": "Test Coverage",
      "critical": false,
      "status": "warning",
      "startTime": 1753584510366,
      "endTime": 1753584589167,
      "duration": 78801,
      "result": {
        "status": "warning",
        "details": {
          "error": "Test coverage check failed",
          "message": "Command failed: npm run test:coverage -- --silent\nFAIL src/features/email/components/__tests__/EmailTemplateEditor.test.jsx\n  ● Test suite failed to run\n\n    Configuration error:\n\n    Could not locate module @lib/emailTemplateService mapped as:\n    E:\\AlexVenturesStudio\\Nexa_Manager_whit_Task_Master\\web-app\\src\\lib\\$1.\n\n    Please check your configuration for these entries:\n    {\n      \"moduleNameMapper\": {\n        \"/^@lib\\/(.*)$/\": \"E:\\AlexVenturesStudio\\Nexa_Manager_whit_Task_Master\\web-app\\src\\lib\\$1\"\n      },\n      \"resolver\": undefined\n    }\n\n    \u001b[0m \u001b[90m  9 |\u001b[39m\n     \u001b[90m 10 |\u001b[39m \u001b[90m// Mock the emailTemplateService - Jest will automatically use the __mocks__ version\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 11 |\u001b[39m jest\u001b[33m.\u001b[39mmock(\u001b[32m'@lib/emailTemplateService'\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m    |\u001b[39m      \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 12 |\u001b[39m\n     \u001b[90m 13 |\u001b[39m \u001b[90m// Mock the email attachment service\u001b[39m\n     \u001b[90m 14 |\u001b[39m jest\u001b[33m.\u001b[39mmock(\u001b[32m'@lib/emailAttachmentService'\u001b[39m)\u001b[33m;\u001b[39m\u001b[0m\n\n      at createNoMappedModuleFoundError (../node_modules/jest-resolve/build/index.js:1117:17)\n      at Object.mock (src/features/email/components/__tests__/EmailTemplateEditor.test.jsx:11:6)\n\nPASS src/features/scanner/__tests__/services/ocrProviderFactory.test.ts\nFAIL src/features/email/components/__tests__/VirtualEmailList.test.jsx\n  ● Test suite failed to run\n\n    Cannot find module '../../EmailSecurityIndicator' from 'src/features/email/components/__tests__/VirtualEmailList.test.jsx'\n\n    \u001b[0m \u001b[90m 35 |\u001b[39m }))\u001b[33m;\u001b[39m\n     \u001b[90m 36 |\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 37 |\u001b[39m jest\u001b[33m.\u001b[39mmock(\u001b[32m'../../EmailSecurityIndicator'\u001b[39m\u001b[33m,\u001b[39m () \u001b[33m=>\u001b[39m {\n     \u001b[90m    |\u001b[39m      \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 38 |\u001b[39m   \u001b[36mreturn\u001b[39m \u001b[36mfunction\u001b[39m \u001b[33mMockEmailSecurityIndicator\u001b[39m() {\n     \u001b[90m 39 |\u001b[39m     \u001b[36mreturn\u001b[39m \u001b[33m<\u001b[39m\u001b[33mdiv\u001b[39m data\u001b[33m-\u001b[39mtestid\u001b[33m=\u001b[39m\u001b[32m\"security-indicator\"\u001b[39m \u001b[33m/\u001b[39m\u001b[33m>\u001b[39m\u001b[33m;\u001b[39m\n     \u001b[90m 40 |\u001b[39m   }\u001b[33m;\u001b[39m\u001b[0m\n\n      at Resolver._throwModNotFoundError (../node_modules/jest-resolve/build/index.js:863:11)\n      at Object.mock (src/features/email/components/__tests__/VirtualEmailList.test.jsx:37:6)\n\nPASS src/features/scanner/__tests__/integration/ocrProviderFallback.simplified.test.ts\nFAIL src/features/email/components/__tests__/EmailTemplateSelector.test.jsx\n  ● Test suite failed to run\n\n    Configuration error:\n\n    Could not locate module @hooks/useEmailTemplates mapped as:\n    E:\\AlexVenturesStudio\\Nexa_Manager_whit_Task_Master\\web-app\\src\\hooks\\$1.\n\n    Please check your configuration for these entries:\n    {\n      \"moduleNameMapper\": {\n        \"/^@hooks\\/(.*)$/\": \"E:\\AlexVenturesStudio\\Nexa_Manager_whit_Task_Master\\web-app\\src\\hooks\\$1\"\n      },\n      \"resolver\": undefined\n    }\n\n    \u001b[0m \u001b[90m 85 |\u001b[39m }\u001b[33m;\u001b[39m\n     \u001b[90m 86 |\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 87 |\u001b[39m jest\u001b[33m.\u001b[39mmock(\u001b[32m'@hooks/useEmailTemplates'\u001b[39m\u001b[33m,\u001b[39m () \u001b[33m=>\u001b[39m ({\n     \u001b[90m    |\u001b[39m      \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 88 |\u001b[39m   useEmailTemplates\u001b[33m:\u001b[39m () \u001b[33m=>\u001b[39m mockUseEmailTemplates\u001b[33m,\u001b[39m\n     \u001b[90m 89 |\u001b[39m }))\u001b[33m;\u001b[39m\n     \u001b[90m 90 |\u001b[39m\u001b[0m\n\n      at createNoMappedModuleFoundError (../node_modules/jest-resolve/build/index.js:1117:17)\n      at Object.mock (src/features/email/components/__tests__/EmailTemplateSelector.test.jsx:87:6)\n\nFAIL src/features/email/components/__tests__/EmailViewerContainer.test.jsx\n  ● Test suite failed to run\n\n    Configuration error:\n\n    Could not locate module @hooks/useEmailViewer mapped as:\n    E:\\AlexVenturesStudio\\Nexa_Manager_whit_Task_Master\\web-app\\src\\hooks\\$1.\n\n    Please check your configuration for these entries:\n    {\n      \"moduleNameMapper\": {\n        \"/^@hooks\\/(.*)$/\": \"E:\\AlexVenturesStudio\\Nexa_Manager_whit_Task_Master\\web-app\\src\\hooks\\$1\"\n      },\n      \"resolver\": undefined\n    }\n\n    \u001b[0m \u001b[90m 29 |\u001b[39m }\u001b[33m;\u001b[39m\n     \u001b[90m 30 |\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 31 |\u001b[39m jest\u001b[33m.\u001b[39mmock(\u001b[32m'@hooks/useEmailViewer'\u001b[39m\u001b[33m,\u001b[39m () \u001b[33m=>\u001b[39m ({\n     \u001b[90m    |\u001b[39m      \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 32 |\u001b[39m   __esModule\u001b[33m:\u001b[39m \u001b[36mtrue\u001b[39m\u001b[33m,\u001b[39m\n     \u001b[90m 33 |\u001b[39m   \u001b[36mdefault\u001b[39m\u001b[33m:\u001b[39m () \u001b[33m=>\u001b[39m mockEmailViewerReturn\u001b[33m,\u001b[39m\n     \u001b[90m 34 |\u001b[39m }))\u001b[33m;\u001b[39m\u001b[0m\n\n      at createNoMappedModuleFoundError (../node_modules/jest-resolve/build/index.js:1117:17)\n      at Object.mock (src/features/email/components/__tests__/EmailViewerContainer.test.jsx:31:6)\n\nFAIL src/features/email/components/__tests__/EmailTemplateManager.test.jsx\n  ● Test suite failed to run\n\n    Configuration error:\n\n    Could not locate module @lib/emailTemplateService mapped as:\n    E:\\AlexVenturesStudio\\Nexa_Manager_whit_Task_Master\\web-app\\src\\lib\\$1.\n\n    Please check your configuration for these entries:\n    {\n      \"moduleNameMapper\": {\n        \"/^@lib\\/(.*)$/\": \"E:\\AlexVenturesStudio\\Nexa_Manager_whit_Task_Master\\web-app\\src\\lib\\$1\"\n      },\n      \"resolver\": undefined\n    }\n\n    \u001b[0m \u001b[90m 17 |\u001b[39m\n     \u001b[90m 18 |\u001b[39m \u001b[90m// Mock emailTemplateService\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 19 |\u001b[39m jest\u001b[33m.\u001b[39mmock(\u001b[32m'@lib/emailTemplateService'\u001b[39m\u001b[33m,\u001b[39m () \u001b[33m=>\u001b[39m ({\n     \u001b[90m    |\u001b[39m      \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 20 |\u001b[39m   getTemplates\u001b[33m:\u001b[39m jest\u001b[33m.\u001b[39mfn()\u001b[33m,\u001b[39m\n     \u001b[90m 21 |\u001b[39m   saveTemplate\u001b[33m:\u001b[39m jest\u001b[33m.\u001b[39mfn()\u001b[33m,\u001b[39m\n     \u001b[90m 22 |\u001b[39m   deleteTemplate\u001b[33m:\u001b[39m jest\u001b[33m.\u001b[39mfn()\u001b[0m\n\n      at createNoMappedModuleFoundError (../node_modules/jest-resolve/build/index.js:1117:17)\n      at Object.mock (src/features/email/components/__tests__/EmailTemplateManager.test.jsx:19:6)\n\nFAIL src/lib/__tests__/emailManagementService.integration.test.js\n  ● EmailManagementService Integration › service should be defined\n\n    Cannot find module '../emailManagementService' from 'src/lib/__tests__/emailManagementService.integration.test.js'\n\n    \u001b[0m \u001b[90m  9 |\u001b[39m   beforeAll(\u001b[36masync\u001b[39m () \u001b[33m=>\u001b[39m {\n     \u001b[90m 10 |\u001b[39m     \u001b[90m// Import the service\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 11 |\u001b[39m     \u001b[36mconst\u001b[39m module \u001b[33m=\u001b[39m \u001b[36mawait\u001b[39m \u001b[36mimport\u001b[39m(\u001b[32m'../emailManagementService'\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m    |\u001b[39m                    \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 12 |\u001b[39m     emailManagementService \u001b[33m=\u001b[39m module\u001b[33m.\u001b[39m\u001b[36mdefault\u001b[39m\u001b[33m;\u001b[39m\n     \u001b[90m 13 |\u001b[39m   })\u001b[33m;\u001b[39m\n     \u001b[90m 14 |\u001b[39m\u001b[0m\n\n      at Resolver._throwModNotFoundError (../node_modules/jest-resolve/build/index.js:863:11)\n      at require (src/lib/__tests__/emailManagementService.integration.test.js:11:20)\n      at Object.<anonymous> (src/lib/__tests__/emailManagementService.integration.test.js:11:20)\n\n  ● EmailManagementService Integration › should have required methods\n\n    Cannot find module '../emailManagementService' from 'src/lib/__tests__/emailManagementService.integration.test.js'\n\n    \u001b[0m \u001b[90m  9 |\u001b[39m   beforeAll(\u001b[36masync\u001b[39m () \u001b[33m=>\u001b[39m {\n     \u001b[90m 10 |\u001b[39m     \u001b[90m// Import the service\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 11 |\u001b[39m     \u001b[36mconst\u001b[39m module \u001b[33m=\u001b[39m \u001b[36mawait\u001b[39m \u001b[36mimport\u001b[39m(\u001b[32m'../emailManagementService'\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m    |\u001b[39m                    \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 12 |\u001b[39m     emailManagementService \u001b[33m=\u001b[39m module\u001b[33m.\u001b[39m\u001b[36mdefault\u001b[39m\u001b[33m;\u001b[39m\n     \u001b[90m 13 |\u001b[39m   })\u001b[33m;\u001b[39m\n     \u001b[90m 14 |\u001b[39m\u001b[0m\n\n      at Resolver._throwModNotFoundError (../node_modules/jest-resolve/build/index.js:863:11)\n      at require (src/lib/__tests__/emailManagementService.integration.test.js:11:20)\n      at Object.<anonymous> (src/lib/__tests__/emailManagementService.integration.test.js:11:20)\n\n  ● EmailManagementService Integration › should validate email data correctly\n\n    Cannot find module '../emailManagementService' from 'src/lib/__tests__/emailManagementService.integration.test.js'\n\n    \u001b[0m \u001b[90m  9 |\u001b[39m   beforeAll(\u001b[36masync\u001b[39m () \u001b[33m=>\u001b[39m {\n     \u001b[90m 10 |\u001b[39m     \u001b[90m// Import the service\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 11 |\u001b[39m     \u001b[36mconst\u001b[39m module \u001b[33m=\u001b[39m \u001b[36mawait\u001b[39m \u001b[36mimport\u001b[39m(\u001b[32m'../emailManagementService'\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m    |\u001b[39m                    \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 12 |\u001b[39m     emailManagementService \u001b[33m=\u001b[39m module\u001b[33m.\u001b[39m\u001b[36mdefault\u001b[39m\u001b[33m;\u001b[39m\n     \u001b[90m 13 |\u001b[39m   })\u001b[33m;\u001b[39m\n     \u001b[90m 14 |\u001b[39m\u001b[0m\n\n      at Resolver._throwModNotFoundError (../node_modules/jest-resolve/build/index.js:863:11)\n      at require (src/lib/__tests__/emailManagementService.integration.test.js:11:20)\n      at Object.<anonymous> (src/lib/__tests__/emailManagementService.integration.test.js:11:20)\n\n  ● EmailManagementService Integration › should detect invalid email data\n\n    Cannot find module '../emailManagementService' from 'src/lib/__tests__/emailManagementService.integration.test.js'\n\n    \u001b[0m \u001b[90m  9 |\u001b[39m   beforeAll(\u001b[36masync\u001b[39m () \u001b[33m=>\u001b[39m {\n     \u001b[90m 10 |\u001b[39m     \u001b[90m// Import the service\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 11 |\u001b[39m     \u001b[36mconst\u001b[39m module \u001b[33m=\u001b[39m \u001b[36mawait\u001b[39m \u001b[36mimport\u001b[39m(\u001b[32m'../emailManagementService'\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m    |\u001b[39m                    \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 12 |\u001b[39m     emailManagementService \u001b[33m=\u001b[39m module\u001b[33m.\u001b[39m\u001b[36mdefault\u001b[39m\u001b[33m;\u001b[39m\n     \u001b[90m 13 |\u001b[39m   })\u001b[33m;\u001b[39m\n     \u001b[90m 14 |\u001b[39m\u001b[0m\n\n      at Resolver._throwModNotFoundError (../node_modules/jest-resolve/build/index.js:863:11)\n      at require (src/lib/__tests__/emailManagementService.integration.test.js:11:20)\n      at Object.<anonymous> (src/lib/__tests__/emailManagementService.integration.test.js:11:20)\n\n  ● EmailManagementService Integration › should validate email addresses correctly\n\n    Cannot find module '../emailManagementService' from 'src/lib/__tests__/emailManagementService.integration.test.js'\n\n    \u001b[0m \u001b[90m  9 |\u001b[39m   beforeAll(\u001b[36masync\u001b[39m () \u001b[33m=>\u001b[39m {\n     \u001b[90m 10 |\u001b[39m     \u001b[90m// Import the service\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 11 |\u001b[39m     \u001b[36mconst\u001b[39m module \u001b[33m=\u001b[39m \u001b[36mawait\u001b[39m \u001b[36mimport\u001b[39m(\u001b[32m'../emailManagementService'\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m    |\u001b[39m                    \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 12 |\u001b[39m     emailManagementService \u001b[33m=\u001b[39m module\u001b[33m.\u001b[39m\u001b[36mdefault\u001b[39m\u001b[33m;\u001b[39m\n     \u001b[90m 13 |\u001b[39m   })\u001b[33m;\u001b[39m\n     \u001b[90m 14 |\u001b[39m\u001b[0m\n\n      at Resolver._throwModNotFoundError (../node_modules/jest-resolve/build/index.js:863:11)\n      at require (src/lib/__tests__/emailManagementService.integration.test.js:11:20)\n      at Object.<anonymous> (src/lib/__tests__/emailManagementService.integration.test.js:11:20)\n\n  ● EmailManagementService Integration › should handle event listeners\n\n    Cannot find module '../emailManagementService' from 'src/lib/__tests__/emailManagementService.integration.test.js'\n\n    \u001b[0m \u001b[90m  9 |\u001b[39m   beforeAll(\u001b[36masync\u001b[39m () \u001b[33m=>\u001b[39m {\n     \u001b[90m 10 |\u001b[39m     \u001b[90m// Import the service\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 11 |\u001b[39m     \u001b[36mconst\u001b[39m module \u001b[33m=\u001b[39m \u001b[36mawait\u001b[39m \u001b[36mimport\u001b[39m(\u001b[32m'../emailManagementService'\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m    |\u001b[39m                    \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 12 |\u001b[39m     emailManagementService \u001b[33m=\u001b[39m module\u001b[33m.\u001b[39m\u001b[36mdefault\u001b[39m\u001b[33m;\u001b[39m\n     \u001b[90m 13 |\u001b[39m   })\u001b[33m;\u001b[39m\n     \u001b[90m 14 |\u001b[39m\u001b[0m\n\n      at Resolver._throwModNotFoundError (../node_modules/jest-resolve/build/index.js:863:11)\n      at require (src/lib/__tests__/emailManagementService.integration.test.js:11:20)\n      at Object.<anonymous> (src/lib/__tests__/emailManagementService.integration.test.js:11:20)\n\nPASS src/__tests__/shared/basic.test.ts\nFAIL src/lib/__tests__/uiUtils.test.ts\n  ● uiUtils › notify › dismiss › should call toast.dismiss without arguments\n\n    expect(jest.fn()).toHaveBeenCalledWith(...expected)\n\n    Expected: called with 0 arguments\n    Received: undefined\n\n    Number of calls: 1\n\n    \u001b[0m \u001b[90m 209 |\u001b[39m       it(\u001b[32m'should call toast.dismiss without arguments'\u001b[39m\u001b[33m,\u001b[39m () \u001b[33m=>\u001b[39m {\n     \u001b[90m 210 |\u001b[39m         notify\u001b[33m.\u001b[39mdismiss()\u001b[33m;\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 211 |\u001b[39m         expect(toast\u001b[33m.\u001b[39mdismiss)\u001b[33m.\u001b[39mtoHaveBeenCalledWith()\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                               \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 212 |\u001b[39m       })\u001b[33m;\u001b[39m\n     \u001b[90m 213 |\u001b[39m     })\u001b[33m;\u001b[39m\n     \u001b[90m 214 |\u001b[39m   })\u001b[33m;\u001b[39m\u001b[0m\n\n      at Object.toHaveBeenCalledWith (src/lib/__tests__/uiUtils.test.ts:211:31)\n\n  ● uiUtils › errorHandler › should handle generic error\n\n    expect(jest.fn()).toHaveBeenCalledWith(...expected)\n\n    Expected: \"Error in test context:\", [Error: Test error]\n\n    Number of calls: 0\n\n    \u001b[0m \u001b[90m 259 |\u001b[39m       \u001b[36mconst\u001b[39m result \u001b[33m=\u001b[39m errorHandler\u001b[33m.\u001b[39mhandle(error\u001b[33m,\u001b[39m \u001b[32m'test context'\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m 260 |\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 261 |\u001b[39m       expect(\u001b[33mLogger\u001b[39m\u001b[33m.\u001b[39merror)\u001b[33m.\u001b[39mtoHaveBeenCalledWith(\u001b[32m'Error in test context:'\u001b[39m\u001b[33m,\u001b[39m error)\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                            \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 262 |\u001b[39m       expect(toast\u001b[33m.\u001b[39merror)\u001b[33m.\u001b[39mtoHaveBeenCalledWith(\u001b[32m'Test error'\u001b[39m\u001b[33m,\u001b[39m expect\u001b[33m.\u001b[39many(\u001b[33mObject\u001b[39m))\u001b[33m;\u001b[39m\n     \u001b[90m 263 |\u001b[39m       expect(result)\u001b[33m.\u001b[39mtoBe(\u001b[32m'Test error'\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m 264 |\u001b[39m     })\u001b[33m;\u001b[39m\u001b[0m\n\n      at Object.toHaveBeenCalledWith (src/lib/__tests__/uiUtils.test.ts:261:28)\n\n  ● uiUtils › errorHandler › should handle string error\n\n    expect(jest.fn()).toHaveBeenCalledWith(...expected)\n\n    Expected: \"Error in test context:\", \"String error message\"\n\n    Number of calls: 0\n\n    \u001b[0m \u001b[90m 269 |\u001b[39m       \u001b[36mconst\u001b[39m result \u001b[33m=\u001b[39m errorHandler\u001b[33m.\u001b[39mhandle(error\u001b[33m,\u001b[39m \u001b[32m'test context'\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m 270 |\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 271 |\u001b[39m       expect(\u001b[33mLogger\u001b[39m\u001b[33m.\u001b[39merror)\u001b[33m.\u001b[39mtoHaveBeenCalledWith(\u001b[32m'Error in test context:'\u001b[39m\u001b[33m,\u001b[39m error)\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                            \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 272 |\u001b[39m       expect(toast\u001b[33m.\u001b[39merror)\u001b[33m.\u001b[39mtoHaveBeenCalledWith(\u001b[32m'String error message'\u001b[39m\u001b[33m,\u001b[39m expect\u001b[33m.\u001b[39many(\u001b[33mObject\u001b[39m))\u001b[33m;\u001b[39m\n     \u001b[90m 273 |\u001b[39m       expect(result)\u001b[33m.\u001b[39mtoBe(\u001b[32m'String error message'\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m 274 |\u001b[39m     })\u001b[33m;\u001b[39m\u001b[0m\n\n      at Object.toHaveBeenCalledWith (src/lib/__tests__/uiUtils.test.ts:271:28)\n\n  ● uiUtils › errorHandler › should handle API error with response data\n\n    expect(jest.fn()).toHaveBeenCalledWith(...expected)\n\n    Expected: \"API Error:\", {\"response\": {\"data\": {\"message\": \"API error message\"}}}\n\n    Number of calls: 0\n\n    \u001b[0m \u001b[90m 285 |\u001b[39m       errorHandler\u001b[33m.\u001b[39mhandleApiError(apiError)\u001b[33m;\u001b[39m\n     \u001b[90m 286 |\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 287 |\u001b[39m       expect(\u001b[33mLogger\u001b[39m\u001b[33m.\u001b[39merror)\u001b[33m.\u001b[39mtoHaveBeenCalledWith(\u001b[32m'API Error:'\u001b[39m\u001b[33m,\u001b[39m apiError)\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                            \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 288 |\u001b[39m       expect(toast\u001b[33m.\u001b[39merror)\u001b[33m.\u001b[39mtoHaveBeenCalledWith(\u001b[32m'API error message'\u001b[39m\u001b[33m,\u001b[39m expect\u001b[33m.\u001b[39many(\u001b[33mObject\u001b[39m))\u001b[33m;\u001b[39m\n     \u001b[90m 289 |\u001b[39m     })\u001b[33m;\u001b[39m\n     \u001b[90m 290 |\u001b[39m\u001b[0m\n\n      at Object.toHaveBeenCalledWith (src/lib/__tests__/uiUtils.test.ts:287:28)\n\n  ● uiUtils › errorHandler › should handle Supabase error\n\n    expect(jest.fn()).toHaveBeenCalledWith(...expected)\n\n    Expected: \"Supabase error in test context:\", {\"message\": \"duplicate key value violates unique constraint\"}\n\n    Number of calls: 0\n\n    \u001b[0m \u001b[90m 296 |\u001b[39m       \u001b[36mconst\u001b[39m result \u001b[33m=\u001b[39m errorHandler\u001b[33m.\u001b[39mhandleSupabaseError(supabaseError\u001b[33m,\u001b[39m \u001b[32m'test context'\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m 297 |\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 298 |\u001b[39m       expect(\u001b[33mLogger\u001b[39m\u001b[33m.\u001b[39merror)\u001b[33m.\u001b[39mtoHaveBeenCalledWith(\u001b[32m'Supabase error in test context:'\u001b[39m\u001b[33m,\u001b[39m supabaseError)\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                            \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 299 |\u001b[39m       expect(toast\u001b[33m.\u001b[39merror)\u001b[33m.\u001b[39mtoHaveBeenCalledWith(\u001b[32m'This item already exists'\u001b[39m\u001b[33m,\u001b[39m expect\u001b[33m.\u001b[39many(\u001b[33mObject\u001b[39m))\u001b[33m;\u001b[39m\n     \u001b[90m 300 |\u001b[39m       expect(result)\u001b[33m.\u001b[39mtoBe(\u001b[32m'This item already exists'\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m 301 |\u001b[39m     })\u001b[33m;\u001b[39m\u001b[0m\n\n      at Object.toHaveBeenCalledWith (src/lib/__tests__/uiUtils.test.ts:298:28)\n\n  ● uiUtils › validation › should validate email format\n\n    expect(received).toBeNull()\n\n    Received: true\n\n    \u001b[0m \u001b[90m 311 |\u001b[39m\n     \u001b[90m 312 |\u001b[39m     it(\u001b[32m'should validate email format'\u001b[39m\u001b[33m,\u001b[39m () \u001b[33m=>\u001b[39m {\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 313 |\u001b[39m       expect(validation\u001b[33m.\u001b[39memail(\u001b[32m'test@example.com'\u001b[39m))\u001b[33m.\u001b[39mtoBeNull()\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                                                    \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 314 |\u001b[39m       expect(validation\u001b[33m.\u001b[39memail(\u001b[32m'invalid-email'\u001b[39m))\u001b[33m.\u001b[39mtoBe(\u001b[32m'Invalid email'\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m 315 |\u001b[39m       expect(validation\u001b[33m.\u001b[39memail(\u001b[32m''\u001b[39m))\u001b[33m.\u001b[39mtoBeNull()\u001b[33m;\u001b[39m \u001b[90m// Empty email is valid (use required for required validation)\u001b[39m\n     \u001b[90m 316 |\u001b[39m     })\u001b[33m;\u001b[39m\u001b[0m\n\n      at Object.toBeNull (src/lib/__tests__/uiUtils.test.ts:313:52)\n\n  ● uiUtils › validation › should validate maximum length\n\n    expect(received).toBe(expected) // Object.is equality\n\n    Expected: \"Test Field can be at most 5 characters long\"\n    Received: \"Test Field must be at most 5 characters long\"\n\n    \u001b[0m \u001b[90m 325 |\u001b[39m     it(\u001b[32m'should validate maximum length'\u001b[39m\u001b[33m,\u001b[39m () \u001b[33m=>\u001b[39m {\n     \u001b[90m 326 |\u001b[39m       expect(validation\u001b[33m.\u001b[39mmaxLength(\u001b[32m'test'\u001b[39m\u001b[33m,\u001b[39m \u001b[35m5\u001b[39m\u001b[33m,\u001b[39m \u001b[32m'Test Field'\u001b[39m))\u001b[33m.\u001b[39mtoBeNull()\u001b[33m;\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 327 |\u001b[39m       expect(validation\u001b[33m.\u001b[39mmaxLength(\u001b[32m'toolong'\u001b[39m\u001b[33m,\u001b[39m \u001b[35m5\u001b[39m\u001b[33m,\u001b[39m \u001b[32m'Test Field'\u001b[39m))\u001b[33m.\u001b[39mtoBe(\n     \u001b[90m     |\u001b[39m                                                                \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 328 |\u001b[39m         \u001b[32m'Test Field can be at most 5 characters long'\u001b[39m\u001b[33m,\u001b[39m\n     \u001b[90m 329 |\u001b[39m       )\u001b[33m;\u001b[39m\n     \u001b[90m 330 |\u001b[39m     })\u001b[33m;\u001b[39m\u001b[0m\n\n      at Object.toBe (src/lib/__tests__/uiUtils.test.ts:327:64)\n\n  ● uiUtils › formatters › should format currency\n\n    expect(received).toMatch(expected)\n\n    Expected pattern: /1\\.234,56/\n    Received string:  \"$1,234.56\"\n\n    \u001b[0m \u001b[90m 385 |\u001b[39m     it(\u001b[32m'should format currency'\u001b[39m\u001b[33m,\u001b[39m () \u001b[33m=>\u001b[39m {\n     \u001b[90m 386 |\u001b[39m       \u001b[36mconst\u001b[39m result \u001b[33m=\u001b[39m formatters\u001b[33m.\u001b[39mcurrency(\u001b[35m1234.56\u001b[39m)\u001b[33m;\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 387 |\u001b[39m       expect(result)\u001b[33m.\u001b[39mtoMatch(\u001b[35m/1\\.234,56/\u001b[39m)\u001b[33m;\u001b[39m \u001b[90m// Italian format\u001b[39m\n     \u001b[90m     |\u001b[39m                      \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 388 |\u001b[39m     })\u001b[33m;\u001b[39m\n     \u001b[90m 389 |\u001b[39m\n     \u001b[90m 390 |\u001b[39m     it(\u001b[32m'should format numbers'\u001b[39m\u001b[33m,\u001b[39m () \u001b[33m=>\u001b[39m {\u001b[0m\n\n      at Object.toMatch (src/lib/__tests__/uiUtils.test.ts:387:22)\n\n  ● uiUtils › formatters › should format numbers\n\n    expect(received).toMatch(expected)\n\n    Expected pattern: /1\\.234,57/\n    Received string:  \"1,234.57\"\n\n    \u001b[0m \u001b[90m 390 |\u001b[39m     it(\u001b[32m'should format numbers'\u001b[39m\u001b[33m,\u001b[39m () \u001b[33m=>\u001b[39m {\n     \u001b[90m 391 |\u001b[39m       \u001b[36mconst\u001b[39m result \u001b[33m=\u001b[39m formatters\u001b[33m.\u001b[39mnumber(\u001b[35m1234.567\u001b[39m\u001b[33m,\u001b[39m \u001b[35m2\u001b[39m)\u001b[33m;\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 392 |\u001b[39m       expect(result)\u001b[33m.\u001b[39mtoMatch(\u001b[35m/1\\.234,57/\u001b[39m)\u001b[33m;\u001b[39m \u001b[90m// Italian format with 2 decimals\u001b[39m\n     \u001b[90m     |\u001b[39m                      \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 393 |\u001b[39m     })\u001b[33m;\u001b[39m\n     \u001b[90m 394 |\u001b[39m\n     \u001b[90m 395 |\u001b[39m     it(\u001b[32m'should format percentage'\u001b[39m\u001b[33m,\u001b[39m () \u001b[33m=>\u001b[39m {\u001b[0m\n\n      at Object.toMatch (src/lib/__tests__/uiUtils.test.ts:392:22)\n\n  ● uiUtils › formatters › should format percentage\n\n    expect(received).toMatch(expected)\n\n    Expected pattern: /25,0/\n    Received string:  \"25.0%\"\n\n    \u001b[0m \u001b[90m 395 |\u001b[39m     it(\u001b[32m'should format percentage'\u001b[39m\u001b[33m,\u001b[39m () \u001b[33m=>\u001b[39m {\n     \u001b[90m 396 |\u001b[39m       \u001b[36mconst\u001b[39m result \u001b[33m=\u001b[39m formatters\u001b[33m.\u001b[39mpercentage(\u001b[35m25\u001b[39m\u001b[33m,\u001b[39m \u001b[35m1\u001b[39m)\u001b[33m;\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 397 |\u001b[39m       expect(result)\u001b[33m.\u001b[39mtoMatch(\u001b[35m/25,0/\u001b[39m)\u001b[33m;\u001b[39m \u001b[90m// 25% in Italian format\u001b[39m\n     \u001b[90m     |\u001b[39m                      \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 398 |\u001b[39m     })\u001b[33m;\u001b[39m\n     \u001b[90m 399 |\u001b[39m\n     \u001b[90m 400 |\u001b[39m     it(\u001b[32m'should format file size'\u001b[39m\u001b[33m,\u001b[39m () \u001b[33m=>\u001b[39m {\u001b[0m\n\n      at Object.toMatch (src/lib/__tests__/uiUtils.test.ts:397:22)\n\n  ● uiUtils › formatters › should truncate text\n\n    expect(received).toBe(expected) // Object.is equality\n\n    Expected: \"This is a very long ...\"\n    Received: \"This is a very lo...\"\n\n    \u001b[0m \u001b[90m 406 |\u001b[39m     it(\u001b[32m'should truncate text'\u001b[39m\u001b[33m,\u001b[39m () \u001b[33m=>\u001b[39m {\n     \u001b[90m 407 |\u001b[39m       expect(formatters\u001b[33m.\u001b[39mtruncate(\u001b[32m'Short text'\u001b[39m\u001b[33m,\u001b[39m \u001b[35m20\u001b[39m))\u001b[33m.\u001b[39mtoBe(\u001b[32m'Short text'\u001b[39m)\u001b[33m;\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 408 |\u001b[39m       expect(formatters\u001b[33m.\u001b[39mtruncate(\u001b[32m'This is a very long text that should be truncated'\u001b[39m\u001b[33m,\u001b[39m \u001b[35m20\u001b[39m))\u001b[33m.\u001b[39mtoBe(\n     \u001b[90m     |\u001b[39m                                                                                            \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 409 |\u001b[39m         \u001b[32m'This is a very long ...'\u001b[39m\u001b[33m,\u001b[39m\n     \u001b[90m 410 |\u001b[39m       )\u001b[33m;\u001b[39m\n     \u001b[90m 411 |\u001b[39m     })\u001b[33m;\u001b[39m\u001b[0m\n\n      at Object.toBe (src/lib/__tests__/uiUtils.test.ts:408:92)\n\nFAIL src/services/__tests__/imageProcessingService.test.js\n  ● ImageProcessingService › PDF Handling › should parse PDF and extract pages\n\n    TypeError: pdfBlob.arrayBuffer is not a function\n\n    \u001b[0m \u001b[90m 316 |\u001b[39m     pdfjsLib\u001b[33m.\u001b[39m\u001b[33mGlobalWorkerOptions\u001b[39m\u001b[33m.\u001b[39mworkerSrc \u001b[33m=\u001b[39m \u001b[32m`https://cdnjs.cloudflare.com/ajax/libs/pdf.js/${pdfjsLib.version}/pdf.worker.min.js`\u001b[39m\u001b[33m;\u001b[39m\n     \u001b[90m 317 |\u001b[39m     \n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 318 |\u001b[39m     \u001b[36mconst\u001b[39m arrayBuffer \u001b[33m=\u001b[39m \u001b[36mawait\u001b[39m pdfBlob\u001b[33m.\u001b[39marrayBuffer()\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                                       \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 319 |\u001b[39m     \u001b[36mconst\u001b[39m pdf \u001b[33m=\u001b[39m \u001b[36mawait\u001b[39m pdfjsLib\u001b[33m.\u001b[39mgetDocument({ data\u001b[33m:\u001b[39m arrayBuffer })\u001b[33m.\u001b[39mpromise\u001b[33m;\u001b[39m\n     \u001b[90m 320 |\u001b[39m     \n     \u001b[90m 321 |\u001b[39m     \u001b[36mconst\u001b[39m images\u001b[33m:\u001b[39m \u001b[33mBlob\u001b[39m[] \u001b[33m=\u001b[39m []\u001b[33m;\u001b[39m\u001b[0m\n\n      at ImageProcessingService.arrayBuffer [as parsePDF] (src/features/scanner/services/imageProcessingService.ts:318:39)\n      at Object.<anonymous> (src/services/__tests__/imageProcessingService.test.js:134:22)\n\n  ● ImageProcessingService › PDF Handling › should extract PDF pages with page numbers\n\n    TypeError: pdfBlob.arrayBuffer is not a function\n\n    \u001b[0m \u001b[90m 316 |\u001b[39m     pdfjsLib\u001b[33m.\u001b[39m\u001b[33mGlobalWorkerOptions\u001b[39m\u001b[33m.\u001b[39mworkerSrc \u001b[33m=\u001b[39m \u001b[32m`https://cdnjs.cloudflare.com/ajax/libs/pdf.js/${pdfjsLib.version}/pdf.worker.min.js`\u001b[39m\u001b[33m;\u001b[39m\n     \u001b[90m 317 |\u001b[39m     \n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 318 |\u001b[39m     \u001b[36mconst\u001b[39m arrayBuffer \u001b[33m=\u001b[39m \u001b[36mawait\u001b[39m pdfBlob\u001b[33m.\u001b[39marrayBuffer()\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                                       \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 319 |\u001b[39m     \u001b[36mconst\u001b[39m pdf \u001b[33m=\u001b[39m \u001b[36mawait\u001b[39m pdfjsLib\u001b[33m.\u001b[39mgetDocument({ data\u001b[33m:\u001b[39m arrayBuffer })\u001b[33m.\u001b[39mpromise\u001b[33m;\u001b[39m\n     \u001b[90m 320 |\u001b[39m     \n     \u001b[90m 321 |\u001b[39m     \u001b[36mconst\u001b[39m images\u001b[33m:\u001b[39m \u001b[33mBlob\u001b[39m[] \u001b[33m=\u001b[39m []\u001b[33m;\u001b[39m\u001b[0m\n\n      at ImageProcessingService.arrayBuffer [as parsePDF] (src/features/scanner/services/imageProcessingService.ts:318:39)\n      at ImageProcessingService.extractPDFPages (src/features/scanner/services/imageProcessingService.ts:356:20)\n      at Object.<anonymous> (src/services/__tests__/imageProcessingService.test.js:142:22)\n\nFAIL src/features/scanner/__tests__/services/resultCacheService.test.ts\n  ● ResultCacheService › initialization › should load cache from localStorage on initialization\n\n    expect(received).toBe(expected) // Object.is equality\n\n    Expected: true\n    Received: false\n\n    \u001b[0m \u001b[90m 130 |\u001b[39m       \u001b[36mconst\u001b[39m newService \u001b[33m=\u001b[39m \u001b[33mResultCacheService\u001b[39m\u001b[33m.\u001b[39mgetInstance()\u001b[33m;\u001b[39m\n     \u001b[90m 131 |\u001b[39m       \n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 132 |\u001b[39m       expect(newService\u001b[33m.\u001b[39mhas(\u001b[32m'test-key'\u001b[39m))\u001b[33m.\u001b[39mtoBe(\u001b[36mtrue\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                                          \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 133 |\u001b[39m     })\u001b[33m;\u001b[39m\n     \u001b[90m 134 |\u001b[39m\n     \u001b[90m 135 |\u001b[39m     it(\u001b[32m'should handle corrupted localStorage data gracefully'\u001b[39m\u001b[33m,\u001b[39m () \u001b[33m=>\u001b[39m {\u001b[0m\n\n      at Object.toBe (src/features/scanner/__tests__/services/resultCacheService.test.ts:132:42)\n\n  ● ResultCacheService › initialization › should handle corrupted localStorage data gracefully\n\n    expect(jest.fn()).toHaveBeenCalledWith(...expected)\n\n    Expected: \"scanner_cache\"\n\n    Number of calls: 0\n\n    \u001b[0m \u001b[90m 140 |\u001b[39m       })\u001b[33m.\u001b[39mnot\u001b[33m.\u001b[39mtoThrow()\u001b[33m;\u001b[39m\n     \u001b[90m 141 |\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 142 |\u001b[39m       expect(mockLocalStorage\u001b[33m.\u001b[39mremoveItem)\u001b[33m.\u001b[39mtoHaveBeenCalledWith(\u001b[32m'scanner_cache'\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                                           \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 143 |\u001b[39m     })\u001b[33m;\u001b[39m\n     \u001b[90m 144 |\u001b[39m   })\u001b[33m;\u001b[39m\n     \u001b[90m 145 |\u001b[39m\u001b[0m\n\n      at Object.toHaveBeenCalledWith (src/features/scanner/__tests__/services/resultCacheService.test.ts:142:43)\n\n  ● ResultCacheService › error handling › should handle hash generation errors\n\n    expect(received).not.toThrow()\n\n    Error name:    \"Error\"\n    Error message: \"Stringify error\"\n\n        \u001b[0m \u001b[90m 554 |\u001b[39m       \u001b[36mconst\u001b[39m originalStringify \u001b[33m=\u001b[39m \u001b[33mJSON\u001b[39m\u001b[33m.\u001b[39mstringify\u001b[33m;\u001b[39m\n         \u001b[90m 555 |\u001b[39m       \u001b[33mJSON\u001b[39m\u001b[33m.\u001b[39mstringify \u001b[33m=\u001b[39m jest\u001b[33m.\u001b[39mfn()\u001b[33m.\u001b[39mmockImplementation(() \u001b[33m=>\u001b[39m {\n        \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 556 |\u001b[39m         \u001b[36mthrow\u001b[39m \u001b[36mnew\u001b[39m \u001b[33mError\u001b[39m(\u001b[32m'Stringify error'\u001b[39m)\u001b[33m;\u001b[39m\n         \u001b[90m     |\u001b[39m               \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n         \u001b[90m 557 |\u001b[39m       })\u001b[33m;\u001b[39m\n         \u001b[90m 558 |\u001b[39m\n         \u001b[90m 559 |\u001b[39m       \u001b[36mconst\u001b[39m blob \u001b[33m=\u001b[39m \u001b[36mnew\u001b[39m \u001b[33mBlob\u001b[39m([\u001b[32m'test'\u001b[39m]\u001b[33m,\u001b[39m { type\u001b[33m:\u001b[39m \u001b[32m'image/jpeg'\u001b[39m })\u001b[33m;\u001b[39m\u001b[0m\n\n      at JSON.<anonymous> (src/features/scanner/__tests__/services/resultCacheService.test.ts:556:15)\n      at ResultCacheService.stringify [as hashObject] (src/features/scanner/services/resultCacheService.ts:427:22)\n      at ResultCacheService.hashObject [as generateOCRKey] (src/features/scanner/services/resultCacheService.ts:68:40)\n      at generateOCRKey (src/features/scanner/__tests__/services/resultCacheService.test.ts:563:17)\n      at Object.<anonymous> (../node_modules/expect/build/index.js:1824:9)\n      at Object.throwingMatcher [as toThrow] (../node_modules/expect/build/index.js:2231:93)\n      at Object.toThrow (src/features/scanner/__tests__/services/resultCacheService.test.ts:564:14)\n      at Object.toThrow (src/features/scanner/__tests__/services/resultCacheService.test.ts:564:14)\n\nFAIL src/features/email/components/__tests__/EmailSearchDashboard.minimal.test.jsx\n  ● Test suite failed to run\n\n    Cannot find module '../../../hooks/useEmailSearch' from 'src/features/email/components/__tests__/EmailSearchDashboard.minimal.test.jsx'\n\n    \u001b[0m \u001b[90m 4 |\u001b[39m\n     \u001b[90m 5 |\u001b[39m \u001b[90m// Mock all dependencies first\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 6 |\u001b[39m jest\u001b[33m.\u001b[39mmock(\u001b[32m'../../../hooks/useEmailSearch'\u001b[39m\u001b[33m,\u001b[39m () \u001b[33m=>\u001b[39m ({\n     \u001b[90m   |\u001b[39m      \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 7 |\u001b[39m   useEmailSearch\u001b[33m:\u001b[39m jest\u001b[33m.\u001b[39mfn(() \u001b[33m=>\u001b[39m ({\n     \u001b[90m 8 |\u001b[39m     searchResults\u001b[33m:\u001b[39m []\u001b[33m,\u001b[39m\n     \u001b[90m 9 |\u001b[39m     totalResults\u001b[33m:\u001b[39m \u001b[35m0\u001b[39m\u001b[33m,\u001b[39m\u001b[0m\n\n      at Resolver._throwModNotFoundError (../node_modules/jest-resolve/build/index.js:863:11)\n      at Object.mock (src/features/email/components/__tests__/EmailSearchDashboard.minimal.test.jsx:6:6)\n\nFAIL src/features/email/components/__tests__/EmailSearch.test.jsx\n  ● Test suite failed to run\n\n    Configuration error:\n\n    Could not locate module @hooks/useEmailSearch mapped as:\n    E:\\AlexVenturesStudio\\Nexa_Manager_whit_Task_Master\\web-app\\src\\hooks\\$1.\n\n    Please check your configuration for these entries:\n    {\n      \"moduleNameMapper\": {\n        \"/^@hooks\\/(.*)$/\": \"E:\\AlexVenturesStudio\\Nexa_Manager_whit_Task_Master\\web-app\\src\\hooks\\$1\"\n      },\n      \"resolver\": undefined\n    }\n\n    \u001b[0m \u001b[90m 10 |\u001b[39m\n     \u001b[90m 11 |\u001b[39m \u001b[90m// Mock dependencies\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 12 |\u001b[39m jest\u001b[33m.\u001b[39mmock(\u001b[32m'@hooks/useEmailSearch'\u001b[39m\u001b[33m,\u001b[39m () \u001b[33m=>\u001b[39m ({\n     \u001b[90m    |\u001b[39m      \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 13 |\u001b[39m   useEmailSearch\u001b[33m:\u001b[39m jest\u001b[33m.\u001b[39mfn()\u001b[33m,\u001b[39m\n     \u001b[90m 14 |\u001b[39m }))\u001b[33m;\u001b[39m\n     \u001b[90m 15 |\u001b[39m\u001b[0m\n\n      at createNoMappedModuleFoundError (../node_modules/jest-resolve/build/index.js:1117:17)\n      at Object.mock (src/features/email/components/__tests__/EmailSearch.test.jsx:12:6)\n\nFAIL src/features/email/components/__tests__/EmailRecipientInput.test.jsx\n  ● Test suite failed to run\n\n    Configuration error:\n\n    Could not locate module @hooks/useClients mapped as:\n    E:\\AlexVenturesStudio\\Nexa_Manager_whit_Task_Master\\web-app\\src\\hooks\\$1.\n\n    Please check your configuration for these entries:\n    {\n      \"moduleNameMapper\": {\n        \"/^@hooks\\/(.*)$/\": \"E:\\AlexVenturesStudio\\Nexa_Manager_whit_Task_Master\\web-app\\src\\hooks\\$1\"\n      },\n      \"resolver\": undefined\n    }\n\n    \u001b[0m \u001b[90m  5 |\u001b[39m\n     \u001b[90m  6 |\u001b[39m \u001b[90m// Mock the useClients hook\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m  7 |\u001b[39m jest\u001b[33m.\u001b[39mmock(\u001b[32m'@hooks/useClients'\u001b[39m\u001b[33m,\u001b[39m () \u001b[33m=>\u001b[39m ({\n     \u001b[90m    |\u001b[39m      \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m  8 |\u001b[39m   useClients\u001b[33m:\u001b[39m () \u001b[33m=>\u001b[39m ({\n     \u001b[90m  9 |\u001b[39m     clients\u001b[33m:\u001b[39m [\n     \u001b[90m 10 |\u001b[39m       {\u001b[0m\n\n      at createNoMappedModuleFoundError (../node_modules/jest-resolve/build/index.js:1117:17)\n      at Object.mock (src/features/email/components/__tests__/EmailRecipientInput.test.jsx:7:6)\n\nFAIL src/features/email/components/__tests__/EmailListContainer.test.jsx\n  ● Test suite failed to run\n\n    Configuration error:\n\n    Could not locate module @hooks/useEmailList mapped as:\n    E:\\AlexVenturesStudio\\Nexa_Manager_whit_Task_Master\\web-app\\src\\hooks\\$1.\n\n    Please check your configuration for these entries:\n    {\n      \"moduleNameMapper\": {\n        \"/^@hooks\\/(.*)$/\": \"E:\\AlexVenturesStudio\\Nexa_Manager_whit_Task_Master\\web-app\\src\\hooks\\$1\"\n      },\n      \"resolver\": undefined\n    }\n\n    \u001b[0m \u001b[90m  5 |\u001b[39m\n     \u001b[90m  6 |\u001b[39m \u001b[90m// Mock hooks\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m  7 |\u001b[39m jest\u001b[33m.\u001b[39mmock(\u001b[32m'@hooks/useEmailList'\u001b[39m\u001b[33m,\u001b[39m () \u001b[33m=>\u001b[39m ({\n     \u001b[90m    |\u001b[39m      \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m  8 |\u001b[39m   __esModule\u001b[33m:\u001b[39m \u001b[36mtrue\u001b[39m\u001b[33m,\u001b[39m\n     \u001b[90m  9 |\u001b[39m   \u001b[36mdefault\u001b[39m\u001b[33m:\u001b[39m jest\u001b[33m.\u001b[39mfn()\u001b[33m,\u001b[39m\n     \u001b[90m 10 |\u001b[39m }))\u001b[33m;\u001b[39m\u001b[0m\n\n      at createNoMappedModuleFoundError (../node_modules/jest-resolve/build/index.js:1117:17)\n      at Object.mock (src/features/email/components/__tests__/EmailListContainer.test.jsx:7:6)\n\nFAIL src/features/email/components/__tests__/EmailSearchResults.test.jsx\n  ● Test suite failed to run\n\n    Cannot find module '../../ui/Button' from 'src/features/email/components/__tests__/EmailSearchResults.test.jsx'\n\n    \u001b[0m \u001b[90m 25 |\u001b[39m\n     \u001b[90m 26 |\u001b[39m \u001b[90m// Mock UI components\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 27 |\u001b[39m jest\u001b[33m.\u001b[39mmock(\u001b[32m'../../ui/Button'\u001b[39m\u001b[33m,\u001b[39m () \u001b[33m=>\u001b[39m ({\n     \u001b[90m    |\u001b[39m      \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 28 |\u001b[39m   \u001b[33mButton\u001b[39m\u001b[33m:\u001b[39m ({ children\u001b[33m,\u001b[39m onClick\u001b[33m,\u001b[39m disabled\u001b[33m,\u001b[39m \u001b[33m...\u001b[39mprops }) \u001b[33m=>\u001b[39m (\n     \u001b[90m 29 |\u001b[39m     \u001b[33m<\u001b[39m\u001b[33mbutton\u001b[39m onClick\u001b[33m=\u001b[39m{onClick} disabled\u001b[33m=\u001b[39m{disabled} {\u001b[33m...\u001b[39mprops}\u001b[33m>\u001b[39m\n     \u001b[90m 30 |\u001b[39m       {children}\u001b[0m\n\n      at Resolver._throwModNotFoundError (../node_modules/jest-resolve/build/index.js:863:11)\n      at Object.mock (src/features/email/components/__tests__/EmailSearchResults.test.jsx:27:6)\n\nFAIL src/features/email/components/__tests__/EmailPerformanceMonitor.test.jsx\n  ● Test suite failed to run\n\n    Configuration error:\n\n    Could not locate module @lib/emailCacheService mapped as:\n    E:\\AlexVenturesStudio\\Nexa_Manager_whit_Task_Master\\web-app\\src\\lib\\$1.\n\n    Please check your configuration for these entries:\n    {\n      \"moduleNameMapper\": {\n        \"/^@lib\\/(.*)$/\": \"E:\\AlexVenturesStudio\\Nexa_Manager_whit_Task_Master\\web-app\\src\\lib\\$1\"\n      },\n      \"resolver\": undefined\n    }\n\n    \u001b[0m \u001b[90m  7 |\u001b[39m\n     \u001b[90m  8 |\u001b[39m \u001b[90m// Mock the services\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m  9 |\u001b[39m jest\u001b[33m.\u001b[39mmock(\u001b[32m'@lib/emailCacheService'\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m    |\u001b[39m      \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 10 |\u001b[39m jest\u001b[33m.\u001b[39mmock(\u001b[32m'@lib/emailSyncService'\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m 11 |\u001b[39m\n     \u001b[90m 12 |\u001b[39m \u001b[90m// Mock Logger to prevent import issues\u001b[39m\u001b[0m\n\n      at createNoMappedModuleFoundError (../node_modules/jest-resolve/build/index.js:1117:17)\n      at Object.mock (src/features/email/components/__tests__/EmailPerformanceMonitor.test.jsx:9:6)\n\nFAIL src/features/email/components/__tests__/EmailErrorBoundary.test.jsx\n  ● Test suite failed to run\n\n    Configuration error:\n\n    Could not locate module @lib/logger mapped as:\n    E:\\AlexVenturesStudio\\Nexa_Manager_whit_Task_Master\\web-app\\src\\lib\\$1.\n\n    Please check your configuration for these entries:\n    {\n      \"moduleNameMapper\": {\n        \"/^@lib\\/(.*)$/\": \"E:\\AlexVenturesStudio\\Nexa_Manager_whit_Task_Master\\web-app\\src\\lib\\$1\"\n      },\n      \"resolver\": undefined\n    }\n\n    \u001b[0m \u001b[90m 10 |\u001b[39m\n     \u001b[90m 11 |\u001b[39m \u001b[90m// Mock dependencies\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 12 |\u001b[39m jest\u001b[33m.\u001b[39mmock(\u001b[32m'@lib/logger'\u001b[39m\u001b[33m,\u001b[39m () \u001b[33m=>\u001b[39m ({\n     \u001b[90m    |\u001b[39m      \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 13 |\u001b[39m   __esModule\u001b[33m:\u001b[39m \u001b[36mtrue\u001b[39m\u001b[33m,\u001b[39m\n     \u001b[90m 14 |\u001b[39m   \u001b[36mdefault\u001b[39m\u001b[33m:\u001b[39m {\n     \u001b[90m 15 |\u001b[39m     error\u001b[33m:\u001b[39m jest\u001b[33m.\u001b[39mfn()\u001b[33m,\u001b[39m\u001b[0m\n\n      at createNoMappedModuleFoundError (../node_modules/jest-resolve/build/index.js:1117:17)\n      at Object.mock (src/features/email/components/__tests__/EmailErrorBoundary.test.jsx:12:6)\n\nFAIL src/features/email/components/__tests__/EmailComposer.test.jsx\n  ● Test suite failed to run\n\n    Configuration error:\n\n    Could not locate module @hooks/useEmailComposer mapped as:\n    E:\\AlexVenturesStudio\\Nexa_Manager_whit_Task_Master\\web-app\\src\\hooks\\$1.\n\n    Please check your configuration for these entries:\n    {\n      \"moduleNameMapper\": {\n        \"/^@hooks\\/(.*)$/\": \"E:\\AlexVenturesStudio\\Nexa_Manager_whit_Task_Master\\web-app\\src\\hooks\\$1\"\n      },\n      \"resolver\": undefined\n    }\n\n    \u001b[0m \u001b[90m  5 |\u001b[39m\n     \u001b[90m  6 |\u001b[39m \u001b[90m// Mock the hooks and services\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m  7 |\u001b[39m jest\u001b[33m.\u001b[39mmock(\u001b[32m'@hooks/useEmailComposer'\u001b[39m\u001b[33m,\u001b[39m () \u001b[33m=>\u001b[39m ({\n     \u001b[90m    |\u001b[39m      \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m  8 |\u001b[39m   useEmailComposer\u001b[33m:\u001b[39m () \u001b[33m=>\u001b[39m ({\n     \u001b[90m  9 |\u001b[39m     emailData\u001b[33m:\u001b[39m {\n     \u001b[90m 10 |\u001b[39m       to\u001b[33m:\u001b[39m \u001b[32m''\u001b[39m\u001b[33m,\u001b[39m\u001b[0m\n\n      at createNoMappedModuleFoundError (../node_modules/jest-resolve/build/index.js:1117:17)\n      at Object.mock (src/features/email/components/__tests__/EmailComposer.test.jsx:7:6)\n\nFAIL src/features/email/components/__tests__/debug-final.test.js\n  ● Test suite failed to run\n\n    Configuration error:\n\n    Could not locate module @lib/logger mapped as:\n    E:\\AlexVenturesStudio\\Nexa_Manager_whit_Task_Master\\web-app\\src\\lib\\$1.\n\n    Please check your configuration for these entries:\n    {\n      \"moduleNameMapper\": {\n        \"/^@lib\\/(.*)$/\": \"E:\\AlexVenturesStudio\\Nexa_Manager_whit_Task_Master\\web-app\\src\\lib\\$1\"\n      },\n      \"resolver\": undefined\n    }\n\n    \u001b[0m \u001b[90m  9 |\u001b[39m\n     \u001b[90m 10 |\u001b[39m \u001b[90m// Mock dependencies\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 11 |\u001b[39m jest\u001b[33m.\u001b[39mmock(\u001b[32m'@lib/logger'\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m    |\u001b[39m      \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 12 |\u001b[39m jest\u001b[33m.\u001b[39mmock(\u001b[32m'@lib/errorReportingService'\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m 13 |\u001b[39m jest\u001b[33m.\u001b[39mmock(\u001b[32m'react-i18next'\u001b[39m\u001b[33m,\u001b[39m () \u001b[33m=>\u001b[39m ({\n     \u001b[90m 14 |\u001b[39m   useTranslation\u001b[33m:\u001b[39m () \u001b[33m=>\u001b[39m ({\u001b[0m\n\n      at createNoMappedModuleFoundError (../node_modules/jest-resolve/build/index.js:1117:17)\n      at Object.mock (src/features/email/components/__tests__/debug-final.test.js:11:6)\n\nFAIL src/features/scanner/__tests__/services/ocrService.test.ts\n  ● AIOCRService › initialization › should handle initialization failure\n\n    expect(received).rejects.toThrow()\n\n    Received promise resolved instead of rejected\n    Resolved to value: undefined\n\n    \u001b[0m \u001b[90m 131 |\u001b[39m       mockOCRProviderFactory\u001b[33m.\u001b[39minitialize\u001b[33m.\u001b[39mmockRejectedValue(\u001b[36mnew\u001b[39m \u001b[33mError\u001b[39m(\u001b[32m'Init failed'\u001b[39m))\u001b[33m;\u001b[39m\n     \u001b[90m 132 |\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 133 |\u001b[39m       \u001b[36mawait\u001b[39m expect(service\u001b[33m.\u001b[39mextractText(mockBlob))\u001b[33m.\u001b[39mrejects\u001b[33m.\u001b[39mtoThrow(\u001b[32m'OCR service initialization failed'\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m             \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 134 |\u001b[39m     })\u001b[33m;\u001b[39m\n     \u001b[90m 135 |\u001b[39m   })\u001b[33m;\u001b[39m\n     \u001b[90m 136 |\u001b[39m\u001b[0m\n\n      at expect (../node_modules/expect/build/index.js:2113:15)\n      at Object.expect (src/features/scanner/__tests__/services/ocrService.test.ts:133:13)\n\n  ● AIOCRService › extractText › should handle fallback service failure with basic extraction\n\n    expect(received).toEqual(expected) // deep equality\n\n    - Expected  - 1\n    + Received  + 4\n\n    @@ -10,9 +10,12 @@\n            \"confidence\": 0.95,\n            \"text\": \"Extracted text content\",\n          },\n        ],\n        \"confidence\": 0.95,\n    -   \"processingTime\": 1500,\n    +   \"error\": undefined,\n    +   \"processingTime\": 0,\n        \"provider\": \"openai\",\n    +   \"rawResponse\": undefined,\n    +   \"tables\": undefined,\n        \"text\": \"Extracted text content\",\n      }\n\n    \u001b[0m \u001b[90m 215 |\u001b[39m       \u001b[36mconst\u001b[39m result \u001b[33m=\u001b[39m \u001b[36mawait\u001b[39m service\u001b[33m.\u001b[39mextractText(mockBlob)\u001b[33m;\u001b[39m\n     \u001b[90m 216 |\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 217 |\u001b[39m       expect(result)\u001b[33m.\u001b[39mtoEqual(mockOCRResult)\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                      \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 218 |\u001b[39m     })\u001b[33m;\u001b[39m\n     \u001b[90m 219 |\u001b[39m\n     \u001b[90m 220 |\u001b[39m     it(\u001b[32m'should return fallback result when all providers fail'\u001b[39m\u001b[33m,\u001b[39m \u001b[36masync\u001b[39m () \u001b[33m=>\u001b[39m {\u001b[0m\n\n      at Object.toEqual (src/features/scanner/__tests__/services/ocrService.test.ts:217:22)\n\n  ● AIOCRService › error scenarios › should handle provider timeout\n\n    TypeError: Cannot read properties of undefined (reading 'error')\n\n    \u001b[0m \u001b[90m 342 |\u001b[39m       \u001b[36mconst\u001b[39m result \u001b[33m=\u001b[39m \u001b[36mawait\u001b[39m service\u001b[33m.\u001b[39mextractText(mockBlob\u001b[33m,\u001b[39m options)\u001b[33m;\u001b[39m\n     \u001b[90m 343 |\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 344 |\u001b[39m       expect(result\u001b[33m.\u001b[39merror\u001b[33m?\u001b[39m\u001b[33m.\u001b[39mcode)\u001b[33m.\u001b[39mtoBe(\u001b[32m'ALL_PROVIDERS_FAILED'\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                     \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 345 |\u001b[39m     })\u001b[33m;\u001b[39m\n     \u001b[90m 346 |\u001b[39m\n     \u001b[90m 347 |\u001b[39m     it(\u001b[32m'should handle provider not found'\u001b[39m\u001b[33m,\u001b[39m \u001b[36masync\u001b[39m () \u001b[33m=>\u001b[39m {\u001b[0m\n\n      at Object.error (src/features/scanner/__tests__/services/ocrService.test.ts:344:21)\n\n  ● AIOCRService › error scenarios › should handle provider not found\n\n    TypeError: Cannot read properties of undefined (reading 'error')\n\n    \u001b[0m \u001b[90m 351 |\u001b[39m       \u001b[36mconst\u001b[39m result \u001b[33m=\u001b[39m \u001b[36mawait\u001b[39m service\u001b[33m.\u001b[39mextractText(mockBlob)\u001b[33m;\u001b[39m\n     \u001b[90m 352 |\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 353 |\u001b[39m       expect(result\u001b[33m.\u001b[39merror\u001b[33m?\u001b[39m\u001b[33m.\u001b[39mcode)\u001b[33m.\u001b[39mtoBe(\u001b[32m'ALL_PROVIDERS_FAILED'\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                     \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 354 |\u001b[39m     })\u001b[33m;\u001b[39m\n     \u001b[90m 355 |\u001b[39m\n     \u001b[90m 356 |\u001b[39m     it(\u001b[32m'should handle provider unavailable'\u001b[39m\u001b[33m,\u001b[39m \u001b[36masync\u001b[39m () \u001b[33m=>\u001b[39m {\u001b[0m\n\n      at Object.error (src/features/scanner/__tests__/services/ocrService.test.ts:353:21)\n\n  ● AIOCRService › error scenarios › should handle provider unavailable\n\n    TypeError: Cannot read properties of undefined (reading 'error')\n\n    \u001b[0m \u001b[90m 365 |\u001b[39m       \u001b[36mconst\u001b[39m result \u001b[33m=\u001b[39m \u001b[36mawait\u001b[39m service\u001b[33m.\u001b[39mextractText(mockBlob)\u001b[33m;\u001b[39m\n     \u001b[90m 366 |\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 367 |\u001b[39m       expect(result\u001b[33m.\u001b[39merror\u001b[33m?\u001b[39m\u001b[33m.\u001b[39mcode)\u001b[33m.\u001b[39mtoBe(\u001b[32m'ALL_PROVIDERS_FAILED'\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                     \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 368 |\u001b[39m     })\u001b[33m;\u001b[39m\n     \u001b[90m 369 |\u001b[39m   })\u001b[33m;\u001b[39m\n     \u001b[90m 370 |\u001b[39m\u001b[0m\n\n      at Object.error (src/features/scanner/__tests__/services/ocrService.test.ts:367:21)\n\n  ● AIOCRService › caching behavior › should skip caching on cache service failure\n\n    expect(received).toEqual(expected) // deep equality\n\n    Expected: {\"blocks\": [{\"bounds\": {\"height\": 20, \"width\": 100, \"x\": 0, \"y\": 0}, \"confidence\": 0.95, \"text\": \"Extracted text content\"}], \"confidence\": 0.95, \"processingTime\": 1500, \"provider\": \"openai\", \"text\": \"Extracted text content\"}\n    Received: undefined\n\n    \u001b[0m \u001b[90m 387 |\u001b[39m\n     \u001b[90m 388 |\u001b[39m       \u001b[90m// Should still return result even if caching fails\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 389 |\u001b[39m       expect(result)\u001b[33m.\u001b[39mtoEqual(mockOCRResult)\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                      \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 390 |\u001b[39m     })\u001b[33m;\u001b[39m\n     \u001b[90m 391 |\u001b[39m   })\u001b[33m;\u001b[39m\n     \u001b[90m 392 |\u001b[39m\u001b[0m\n\n      at Object.toEqual (src/features/scanner/__tests__/services/ocrService.test.ts:389:22)\n\nFAIL src/features/scanner/__tests__/integration/errorHandlingRecovery.test.ts\n  ● Test suite failed to run\n\n    Missing Supabase environment variables - check deployment configuration\n\n    \u001b[0m \u001b[90m 38 |\u001b[39m\n     \u001b[90m 39 |\u001b[39m   \u001b[33mLogger\u001b[39m\u001b[33m.\u001b[39merror(errorMessage)\u001b[33m;\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 40 |\u001b[39m   \u001b[36mthrow\u001b[39m \u001b[36mnew\u001b[39m \u001b[33mError\u001b[39m(\u001b[32m'Missing Supabase environment variables - check deployment configuration'\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m    |\u001b[39m         \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 41 |\u001b[39m }\n     \u001b[90m 42 |\u001b[39m\n     \u001b[90m 43 |\u001b[39m \u001b[90m// Regular client with anon key\u001b[39m\u001b[0m\n\n      at Object.<anonymous> (src/lib/supabaseClient.js:40:9)\n      at Object.require (src/features/scanner/services/documentStorageService.ts:2:1)\n      at Object.require (src/features/scanner/services/index.ts:7:1)\n      at Object.require (src/features/scanner/__tests__/integration/errorHandlingRecovery.test.ts:1:1)\n\nFAIL src/features/scanner/__tests__/services/imageProcessingService.test.ts\n  ● Test suite failed to run\n\n    Missing Supabase environment variables - check deployment configuration\n\n    \u001b[0m \u001b[90m 38 |\u001b[39m\n     \u001b[90m 39 |\u001b[39m   \u001b[33mLogger\u001b[39m\u001b[33m.\u001b[39merror(errorMessage)\u001b[33m;\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 40 |\u001b[39m   \u001b[36mthrow\u001b[39m \u001b[36mnew\u001b[39m \u001b[33mError\u001b[39m(\u001b[32m'Missing Supabase environment variables - check deployment configuration'\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m    |\u001b[39m         \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 41 |\u001b[39m }\n     \u001b[90m 42 |\u001b[39m\n     \u001b[90m 43 |\u001b[39m \u001b[90m// Regular client with anon key\u001b[39m\u001b[0m\n\n      at Object.<anonymous> (src/lib/supabaseClient.js:40:9)\n      at Object.require (src/features/scanner/services/documentStorageService.ts:2:1)\n      at Object.require (src/features/scanner/services/index.ts:7:1)\n      at Object.require (src/features/scanner/__tests__/services/imageProcessingService.test.ts:1:1)\n\nFAIL src/features/scanner/__tests__/integration/documentScannerFlow.test.ts\n  ● Test suite failed to run\n\n    Missing Supabase environment variables - check deployment configuration\n\n    \u001b[0m \u001b[90m 38 |\u001b[39m\n     \u001b[90m 39 |\u001b[39m   \u001b[33mLogger\u001b[39m\u001b[33m.\u001b[39merror(errorMessage)\u001b[33m;\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 40 |\u001b[39m   \u001b[36mthrow\u001b[39m \u001b[36mnew\u001b[39m \u001b[33mError\u001b[39m(\u001b[32m'Missing Supabase environment variables - check deployment configuration'\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m    |\u001b[39m         \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 41 |\u001b[39m }\n     \u001b[90m 42 |\u001b[39m\n     \u001b[90m 43 |\u001b[39m \u001b[90m// Regular client with anon key\u001b[39m\u001b[0m\n\n      at Object.<anonymous> (src/lib/supabaseClient.js:40:9)\n      at Object.require (src/features/scanner/services/documentStorageService.ts:2:1)\n      at Object.require (src/features/scanner/services/index.ts:7:1)\n      at Object.require (src/features/scanner/__tests__/integration/documentScannerFlow.test.ts:1:1)\n\nFAIL src/features/financial/components/QuoteEmailSender.test.jsx\n  ● Test suite failed to run\n\n    Cannot find module '../lib/emailService' from 'src/features/financial/components/QuoteEmailSender.test.jsx'\n\n    \u001b[0m \u001b[90m  5 |\u001b[39m\n     \u001b[90m  6 |\u001b[39m \u001b[90m// Mock emailService\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m  7 |\u001b[39m jest\u001b[33m.\u001b[39mmock(\u001b[32m'../lib/emailService'\u001b[39m\u001b[33m,\u001b[39m () \u001b[33m=>\u001b[39m ({\n     \u001b[90m    |\u001b[39m      \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m  8 |\u001b[39m   isValidEmail\u001b[33m:\u001b[39m email \u001b[33m=>\u001b[39m \u001b[35m/^[^\\s@]+@[^\\s@]+\\.[^\\s@]+$/\u001b[39m\u001b[33m.\u001b[39mtest(email)\u001b[33m,\u001b[39m\n     \u001b[90m  9 |\u001b[39m   sendQuoteEmail\u001b[33m:\u001b[39m jest\u001b[33m.\u001b[39mfn(() \u001b[33m=>\u001b[39m\n     \u001b[90m 10 |\u001b[39m     \u001b[33mPromise\u001b[39m\u001b[33m.\u001b[39mresolve({\u001b[0m\n\n      at Resolver._throwModNotFoundError (../node_modules/jest-resolve/build/index.js:863:11)\n      at Object.mock (src/features/financial/components/QuoteEmailSender.test.jsx:7:6)\n\nFAIL src/features/email/components/__tests__/EmailSearchDashboard.test.jsx\n  ● Test suite failed to run\n\n    Jest encountered an unexpected token\n\n    Jest failed to parse a file. This happens e.g. when your code or its dependencies use non-standard JavaScript syntax, or when Jest is not configured to support such syntax.\n\n    Out of the box Jest supports Babel, which will be used to transform your files into valid JS based on your Babel configuration.\n\n    By default \"node_modules\" folder is ignored by transformers.\n\n    Here's what you can do:\n     • If you are trying to use ECMAScript Modules, see https://jestjs.io/docs/ecmascript-modules for how to enable it.\n     • If you are trying to use TypeScript, see https://jestjs.io/docs/getting-started#using-typescript\n     • To have some of your \"node_modules\" files transformed, you can specify a custom \"transformIgnorePatterns\" in your config.\n     • If you need a custom transformation, specify a \"transform\" option in your config.\n     • If you simply want to mock your non-JS modules (e.g. binary assets) you can stub them out with the \"moduleNameMapper\" config option.\n\n    You'll find more details and examples of these config options in the docs:\n    https://jestjs.io/docs/configuration\n    For information about custom transformations, see:\n    https://jestjs.io/docs/code-transformation\n\n    Details:\n\n    SyntaxError: E:\\AlexVenturesStudio\\Nexa_Manager_whit_Task_Master\\web-app\\src\\features\\email\\components\\__tests__\\EmailSearchDashboard.test.jsx: Bad character escape sequence. (119:50)\n\n    \u001b[0m \u001b[90m 117 |\u001b[39m\n     \u001b[90m 118 |\u001b[39m \u001b[90m// Import the mocked hooks\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 119 |\u001b[39m \u001b[36mimport\u001b[39m { useEmailSearch } \u001b[36mfrom\u001b[39m \u001b[32m'@/features\\hooks\\useEmailSearch'\u001b[39m\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                                                   \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 120 |\u001b[39m \u001b[36mimport\u001b[39m { useEmails } \u001b[36mfrom\u001b[39m \u001b[32m'@/features\\hooks\\useEmails'\u001b[39m\u001b[33m;\u001b[39m\n     \u001b[90m 121 |\u001b[39m\n     \u001b[90m 122 |\u001b[39m describe(\u001b[32m'EmailSearchDashboard'\u001b[39m\u001b[33m,\u001b[39m () \u001b[33m=>\u001b[39m {\u001b[0m\n\n      at constructor (../node_modules/@babel/parser/src/parse-error.ts:95:45)\n      at JSXParserMixin.toParseError [as raise] (../node_modules/@babel/parser/src/tokenizer/index.ts:1503:19)\n      at Object.raise [as invalidEscapeSequence] (../node_modules/@babel/parser/src/tokenizer/index.ts:1576:12)\n      at invalidEscapeSequence (../node_modules/@babel/babel-helper-string-parser/src/index.ts:293:14)\n      at readHexChar (../node_modules/@babel/babel-helper-string-parser/src/index.ts:449:22)\n      at readCodePoint (../node_modules/@babel/babel-helper-string-parser/src/index.ts:191:24)\n      at readEscapedChar (../node_modules/@babel/babel-helper-string-parser/src/index.ts:80:19)\n      at JSXParserMixin.readStringContents [as readString] (../node_modules/@babel/parser/src/tokenizer/index.ts:1336:46)\n      at JSXParserMixin.readString (../node_modules/@babel/parser/src/tokenizer/index.ts:991:14)\n      at JSXParserMixin.getTokenFromCode (../node_modules/@babel/parser/src/plugins/jsx/index.ts:631:13)\n      at JSXParserMixin.getTokenFromCode [as nextToken] (../node_modules/@babel/parser/src/tokenizer/index.ts:278:10)\n      at JSXParserMixin.nextToken [as next] (../node_modules/@babel/parser/src/tokenizer/index.ts:121:10)\n      at JSXParserMixin.next [as eatContextual] (../node_modules/@babel/parser/src/parser/util.ts:98:12)\n      at JSXParserMixin.eatContextual [as expectContextual] (../node_modules/@babel/parser/src/parser/util.ts:110:15)\n      at JSXParserMixin.expectContextual [as parseImportSpecifiersAndAfter] (../node_modules/@babel/parser/src/parser/statement.ts:3174:10)\n      at JSXParserMixin.parseImportSpecifiersAndAfter [as parseImport] (../node_modules/@babel/parser/src/parser/statement.ts:3142:17)\n      at JSXParserMixin.parseImport [as parseStatementContent] (../node_modules/@babel/parser/src/parser/statement.ts:642:25)\n      at JSXParserMixin.parseStatementContent [as parseStatementLike] (../node_modules/@babel/parser/src/parser/statement.ts:477:17)\n      at JSXParserMixin.parseStatementLike [as parseModuleItem] (../node_modules/@babel/parser/src/parser/statement.ts:414:17)\n      at JSXParserMixin.parseModuleItem [as parseBlockOrModuleBlockBody] (../node_modules/@babel/parser/src/parser/statement.ts:1438:16)\n      at JSXParserMixin.parseBlockOrModuleBlockBody [as parseBlockBody] (../node_modules/@babel/parser/src/parser/statement.ts:1412:10)\n      at JSXParserMixin.parseBlockBody [as parseProgram] (../node_modules/@babel/parser/src/parser/statement.ts:229:10)\n      at JSXParserMixin.parseProgram [as parseTopLevel] (../node_modules/@babel/parser/src/parser/statement.ts:203:25)\n      at JSXParserMixin.parseTopLevel [as parse] (../node_modules/@babel/parser/src/parser/index.ts:93:10)\n      at parse (../node_modules/@babel/parser/src/index.ts:92:38)\n      at parser (../node_modules/@babel/core/src/parser/index.ts:28:19)\n          at parser.next (<anonymous>)\n      at normalizeFile (../node_modules/@babel/core/src/transformation/normalize-file.ts:49:24)\n          at normalizeFile.next (<anonymous>)\n      at run (../node_modules/@babel/core/src/transformation/index.ts:40:36)\n          at run.next (<anonymous>)\n      at transform (../node_modules/@babel/core/src/transform.ts:29:20)\n          at transform.next (<anonymous>)\n      at evaluateSync (../node_modules/gensync/index.js:251:28)\n      at sync (../node_modules/gensync/index.js:89:14)\n      at fn (../node_modules/@babel/core/src/errors/rewrite-stack-trace.ts:99:14)\n      at transformSync (../node_modules/@babel/core/src/transform.ts:66:52)\n      at ScriptTransformer.transformSource (../node_modules/@jest/transform/build/index.js:422:31)\n      at ScriptTransformer._transformAndBuildScript (../node_modules/@jest/transform/build/index.js:519:40)\n      at ScriptTransformer.transform (../node_modules/@jest/transform/build/index.js:558:19)\n\nFAIL src/features/analytics/components/ComparativeAnalytics.test.jsx\n  ● Test suite failed to run\n\n    Configuration error:\n\n    Could not locate module @lib/financialService mapped as:\n    E:\\AlexVenturesStudio\\Nexa_Manager_whit_Task_Master\\web-app\\src\\lib\\$1.\n\n    Please check your configuration for these entries:\n    {\n      \"moduleNameMapper\": {\n        \"/^@lib\\/(.*)$/\": \"E:\\AlexVenturesStudio\\Nexa_Manager_whit_Task_Master\\web-app\\src\\lib\\$1\"\n      },\n      \"resolver\": undefined\n    }\n\n    \u001b[0m \u001b[90m  6 |\u001b[39m\n     \u001b[90m  7 |\u001b[39m \u001b[90m// Mock the services\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m  8 |\u001b[39m jest\u001b[33m.\u001b[39mmock(\u001b[32m'@lib/financialService'\u001b[39m\u001b[33m,\u001b[39m () \u001b[33m=>\u001b[39m ({\n     \u001b[90m    |\u001b[39m      \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m  9 |\u001b[39m   getFinancialOverview\u001b[33m:\u001b[39m jest\u001b[33m.\u001b[39mfn(() \u001b[33m=>\u001b[39m\n     \u001b[90m 10 |\u001b[39m     \u001b[33mPromise\u001b[39m\u001b[33m.\u001b[39mresolve({\n     \u001b[90m 11 |\u001b[39m       success\u001b[33m:\u001b[39m \u001b[36mtrue\u001b[39m\u001b[33m,\u001b[39m\u001b[0m\n\n      at createNoMappedModuleFoundError (../node_modules/jest-resolve/build/index.js:1117:17)\n      at Object.mock (src/features/analytics/components/ComparativeAnalytics.test.jsx:8:6)\n\nFAIL src/features/analytics/components/ClientAnalyticsWidgets.test.jsx\n  ● Test suite failed to run\n\n    Configuration error:\n\n    Could not locate module @lib/clientService mapped as:\n    E:\\AlexVenturesStudio\\Nexa_Manager_whit_Task_Master\\web-app\\src\\lib\\$1.\n\n    Please check your configuration for these entries:\n    {\n      \"moduleNameMapper\": {\n        \"/^@lib\\/(.*)$/\": \"E:\\AlexVenturesStudio\\Nexa_Manager_whit_Task_Master\\web-app\\src\\lib\\$1\"\n      },\n      \"resolver\": undefined\n    }\n\n    \u001b[0m \u001b[90m  6 |\u001b[39m\n     \u001b[90m  7 |\u001b[39m \u001b[90m// Mock the services\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m  8 |\u001b[39m jest\u001b[33m.\u001b[39mmock(\u001b[32m'@lib/clientService'\u001b[39m\u001b[33m,\u001b[39m () \u001b[33m=>\u001b[39m ({\n     \u001b[90m    |\u001b[39m      \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m  9 |\u001b[39m   getClients\u001b[33m:\u001b[39m jest\u001b[33m.\u001b[39mfn(() \u001b[33m=>\u001b[39m\n     \u001b[90m 10 |\u001b[39m     \u001b[33mPromise\u001b[39m\u001b[33m.\u001b[39mresolve({\n     \u001b[90m 11 |\u001b[39m       data\u001b[33m:\u001b[39m [\u001b[0m\n\n      at createNoMappedModuleFoundError (../node_modules/jest-resolve/build/index.js:1117:17)\n      at Object.mock (src/features/analytics/components/ClientAnalyticsWidgets.test.jsx:8:6)\n\nFAIL src/features/scanner/__tests__/services/batchProcessingService.test.ts\n  ● Test suite failed to run\n\n    Missing Supabase environment variables - check deployment configuration\n\n    \u001b[0m \u001b[90m 38 |\u001b[39m\n     \u001b[90m 39 |\u001b[39m   \u001b[33mLogger\u001b[39m\u001b[33m.\u001b[39merror(errorMessage)\u001b[33m;\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 40 |\u001b[39m   \u001b[36mthrow\u001b[39m \u001b[36mnew\u001b[39m \u001b[33mError\u001b[39m(\u001b[32m'Missing Supabase environment variables - check deployment configuration'\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m    |\u001b[39m         \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 41 |\u001b[39m }\n     \u001b[90m 42 |\u001b[39m\n     \u001b[90m 43 |\u001b[39m \u001b[90m// Regular client with anon key\u001b[39m\u001b[0m\n\n      at Object.<anonymous> (src/lib/supabaseClient.js:40:9)\n      at Object.require (src/features/scanner/services/documentStorageService.ts:2:1)\n      at Object.require (src/features/scanner/services/index.ts:7:1)\n      at Object.require (src/features/scanner/__tests__/services/batchProcessingService.test.ts:1:1)\n\nFAIL src/__tests__/architecture/structure-validation.test.js\n  ● Test suite failed to run\n\n    Jest encountered an unexpected token\n\n    Jest failed to parse a file. This happens e.g. when your code or its dependencies use non-standard JavaScript syntax, or when Jest is not configured to support such syntax.\n\n    Out of the box Jest supports Babel, which will be used to transform your files into valid JS based on your Babel configuration.\n\n    By default \"node_modules\" folder is ignored by transformers.\n\n    Here's what you can do:\n     • If you are trying to use ECMAScript Modules, see https://jestjs.io/docs/ecmascript-modules for how to enable it.\n     • If you are trying to use TypeScript, see https://jestjs.io/docs/getting-started#using-typescript\n     • To have some of your \"node_modules\" files transformed, you can specify a custom \"transformIgnorePatterns\" in your config.\n     • If you need a custom transformation, specify a \"transform\" option in your config.\n     • If you simply want to mock your non-JS modules (e.g. binary assets) you can stub them out with the \"moduleNameMapper\" config option.\n\n    You'll find more details and examples of these config options in the docs:\n    https://jestjs.io/docs/configuration\n    For information about custom transformations, see:\n    https://jestjs.io/docs/code-transformation\n\n    Details:\n\n    E:\\AlexVenturesStudio\\Nexa_Manager_whit_Task_Master\\web-app\\src\\__tests__\\architecture\\structure-validation.test.js:14\n    const _filename = (0, _url.fileURLToPath)(import.meta.url);\n                                                     ^^^^\n\n    SyntaxError: Cannot use 'import.meta' outside a module\n\n      at Runtime.createScriptFromCode (../node_modules/jest-runtime/build/index.js:1314:40)\n\nFAIL src/components/notifications/NotificationCenter.test.jsx\n  ● NotificationCenter › renders notification bell with unread count\n\n    No QueryClient set, use QueryClientProvider to set one\n\n    \u001b[0m \u001b[90m 26 |\u001b[39m   \u001b[36mconst\u001b[39m [connectionError\u001b[33m,\u001b[39m setConnectionError] \u001b[33m=\u001b[39m useState(\u001b[36mnull\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m 27 |\u001b[39m   \u001b[36mconst\u001b[39m [lastMessage\u001b[33m,\u001b[39m setLastMessage] \u001b[33m=\u001b[39m useState(\u001b[36mnull\u001b[39m)\u001b[33m;\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 28 |\u001b[39m   \u001b[36mconst\u001b[39m queryClient \u001b[33m=\u001b[39m useQueryClient()\u001b[33m;\u001b[39m\n     \u001b[90m    |\u001b[39m                                     \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 29 |\u001b[39m   \u001b[36mconst\u001b[39m listenersRef \u001b[33m=\u001b[39m useRef(\u001b[36mnew\u001b[39m \u001b[33mMap\u001b[39m())\u001b[33m;\u001b[39m\n     \u001b[90m 30 |\u001b[39m\n     \u001b[90m 31 |\u001b[39m   \u001b[90m/**\u001b[39m\u001b[0m\n\n      at useQueryClient (../node_modules/@tanstack/react-query/src/QueryClientProvider.tsx:18:11)\n      at useWebSocket (src/hooks/useWebSocket.js:28:37)\n      at useRealtimeNotifications (src/hooks/useRealtimeNotifications.js:20:63)\n      at NotificationCenter (src/components/notifications/NotificationCenter.jsx:39:31)\n      at Object.react-stack-bottom-frame (../node_modules/react-dom/cjs/react-dom-client.development.js:23863:20)\n      at renderWithHooks (../node_modules/react-dom/cjs/react-dom-client.development.js:5529:22)\n      at updateFunctionComponent (../node_modules/react-dom/cjs/react-dom-client.development.js:8897:19)\n      at beginWork (../node_modules/react-dom/cjs/react-dom-client.development.js:10522:18)\n      at runWithFiberInDEV (../node_modules/react-dom/cjs/react-dom-client.development.js:1522:13)\n      at performUnitOfWork (../node_modules/react-dom/cjs/react-dom-client.development.js:15140:22)\n      at workLoopSync (../node_modules/react-dom/cjs/react-dom-client.development.js:14956:41)\n      at renderRootSync (../node_modules/react-dom/cjs/react-dom-client.development.js:14936:11)\n      at performWorkOnRoot (../node_modules/react-dom/cjs/react-dom-client.development.js:14462:44)\n      at performWorkOnRootViaSchedulerTask (../node_modules/react-dom/cjs/react-dom-client.development.js:16216:7)\n      at flushActQueue (../node_modules/react/cjs/react.development.js:566:34)\n      at process.env.NODE_ENV.exports.act (../node_modules/react/cjs/react.development.js:859:10)\n      at ../node_modules/@testing-library/react/dist/act-compat.js:47:25\n      at renderRoot (../node_modules/@testing-library/react/dist/pure.js:190:26)\n      at render (../node_modules/@testing-library/react/dist/pure.js:292:10)\n      at Object.<anonymous> (src/components/notifications/NotificationCenter.test.jsx:61:11)\n\n  ● NotificationCenter › opens notification panel when bell is clicked\n\n    No QueryClient set, use QueryClientProvider to set one\n\n    \u001b[0m \u001b[90m 26 |\u001b[39m   \u001b[36mconst\u001b[39m [connectionError\u001b[33m,\u001b[39m setConnectionError] \u001b[33m=\u001b[39m useState(\u001b[36mnull\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m 27 |\u001b[39m   \u001b[36mconst\u001b[39m [lastMessage\u001b[33m,\u001b[39m setLastMessage] \u001b[33m=\u001b[39m useState(\u001b[36mnull\u001b[39m)\u001b[33m;\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 28 |\u001b[39m   \u001b[36mconst\u001b[39m queryClient \u001b[33m=\u001b[39m useQueryClient()\u001b[33m;\u001b[39m\n     \u001b[90m    |\u001b[39m                                     \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 29 |\u001b[39m   \u001b[36mconst\u001b[39m listenersRef \u001b[33m=\u001b[39m useRef(\u001b[36mnew\u001b[39m \u001b[33mMap\u001b[39m())\u001b[33m;\u001b[39m\n     \u001b[90m 30 |\u001b[39m\n     \u001b[90m 31 |\u001b[39m   \u001b[90m/**\u001b[39m\u001b[0m\n\n      at useQueryClient (../node_modules/@tanstack/react-query/src/QueryClientProvider.tsx:18:11)\n      at useWebSocket (src/hooks/useWebSocket.js:28:37)\n      at useRealtimeNotifications (src/hooks/useRealtimeNotifications.js:20:63)\n      at NotificationCenter (src/components/notifications/NotificationCenter.jsx:39:31)\n      at Object.react-stack-bottom-frame (../node_modules/react-dom/cjs/react-dom-client.development.js:23863:20)\n      at renderWithHooks (../node_modules/react-dom/cjs/react-dom-client.development.js:5529:22)\n      at updateFunctionComponent (../node_modules/react-dom/cjs/react-dom-client.development.js:8897:19)\n      at beginWork (../node_modules/react-dom/cjs/react-dom-client.development.js:10522:18)\n      at runWithFiberInDEV (../node_modules/react-dom/cjs/react-dom-client.development.js:1522:13)\n      at performUnitOfWork (../node_modules/react-dom/cjs/react-dom-client.development.js:15140:22)\n      at workLoopSync (../node_modules/react-dom/cjs/react-dom-client.development.js:14956:41)\n      at renderRootSync (../node_modules/react-dom/cjs/react-dom-client.development.js:14936:11)\n      at performWorkOnRoot (../node_modules/react-dom/cjs/react-dom-client.development.js:14462:44)\n      at performWorkOnRootViaSchedulerTask (../node_modules/react-dom/cjs/react-dom-client.development.js:16216:7)\n      at flushActQueue (../node_modules/react/cjs/react.development.js:566:34)\n      at process.env.NODE_ENV.exports.act (../node_modules/react/cjs/react.development.js:859:10)\n      at ../node_modules/@testing-library/react/dist/act-compat.js:47:25\n      at renderRoot (../node_modules/@testing-library/react/dist/pure.js:190:26)\n      at render (../node_modules/@testing-library/react/dist/pure.js:292:10)\n      at Object.<anonymous> (src/components/notifications/NotificationCenter.test.jsx:71:11)\n\n  ● NotificationCenter › displays correct number of notifications\n\n    No QueryClient set, use QueryClientProvider to set one\n\n    \u001b[0m \u001b[90m 26 |\u001b[39m   \u001b[36mconst\u001b[39m [connectionError\u001b[33m,\u001b[39m setConnectionError] \u001b[33m=\u001b[39m useState(\u001b[36mnull\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m 27 |\u001b[39m   \u001b[36mconst\u001b[39m [lastMessage\u001b[33m,\u001b[39m setLastMessage] \u001b[33m=\u001b[39m useState(\u001b[36mnull\u001b[39m)\u001b[33m;\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 28 |\u001b[39m   \u001b[36mconst\u001b[39m queryClient \u001b[33m=\u001b[39m useQueryClient()\u001b[33m;\u001b[39m\n     \u001b[90m    |\u001b[39m                                     \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 29 |\u001b[39m   \u001b[36mconst\u001b[39m listenersRef \u001b[33m=\u001b[39m useRef(\u001b[36mnew\u001b[39m \u001b[33mMap\u001b[39m())\u001b[33m;\u001b[39m\n     \u001b[90m 30 |\u001b[39m\n     \u001b[90m 31 |\u001b[39m   \u001b[90m/**\u001b[39m\u001b[0m\n\n      at useQueryClient (../node_modules/@tanstack/react-query/src/QueryClientProvider.tsx:18:11)\n      at useWebSocket (src/hooks/useWebSocket.js:28:37)\n      at useRealtimeNotifications (src/hooks/useRealtimeNotifications.js:20:63)\n      at NotificationCenter (src/components/notifications/NotificationCenter.jsx:39:31)\n      at Object.react-stack-bottom-frame (../node_modules/react-dom/cjs/react-dom-client.development.js:23863:20)\n      at renderWithHooks (../node_modules/react-dom/cjs/react-dom-client.development.js:5529:22)\n      at updateFunctionComponent (../node_modules/react-dom/cjs/react-dom-client.development.js:8897:19)\n      at beginWork (../node_modules/react-dom/cjs/react-dom-client.development.js:10522:18)\n      at runWithFiberInDEV (../node_modules/react-dom/cjs/react-dom-client.development.js:1522:13)\n      at performUnitOfWork (../node_modules/react-dom/cjs/react-dom-client.development.js:15140:22)\n      at workLoopSync (../node_modules/react-dom/cjs/react-dom-client.development.js:14956:41)\n      at renderRootSync (../node_modules/react-dom/cjs/react-dom-client.development.js:14936:11)\n      at performWorkOnRoot (../node_modules/react-dom/cjs/react-dom-client.development.js:14462:44)\n      at performWorkOnRootViaSchedulerTask (../node_modules/react-dom/cjs/react-dom-client.development.js:16216:7)\n      at flushActQueue (../node_modules/react/cjs/react.development.js:566:34)\n      at process.env.NODE_ENV.exports.act (../node_modules/react/cjs/react.development.js:859:10)\n      at ../node_modules/@testing-library/react/dist/act-compat.js:47:25\n      at renderRoot (../node_modules/@testing-library/react/dist/pure.js:190:26)\n      at render (../node_modules/@testing-library/react/dist/pure.js:292:10)\n      at Object.<anonymous> (src/components/notifications/NotificationCenter.test.jsx:81:11)\n\n  ● NotificationCenter › filters notifications by type\n\n    No QueryClient set, use QueryClientProvider to set one\n\n    \u001b[0m \u001b[90m 26 |\u001b[39m   \u001b[36mconst\u001b[39m [connectionError\u001b[33m,\u001b[39m setConnectionError] \u001b[33m=\u001b[39m useState(\u001b[36mnull\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m 27 |\u001b[39m   \u001b[36mconst\u001b[39m [lastMessage\u001b[33m,\u001b[39m setLastMessage] \u001b[33m=\u001b[39m useState(\u001b[36mnull\u001b[39m)\u001b[33m;\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 28 |\u001b[39m   \u001b[36mconst\u001b[39m queryClient \u001b[33m=\u001b[39m useQueryClient()\u001b[33m;\u001b[39m\n     \u001b[90m    |\u001b[39m                                     \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 29 |\u001b[39m   \u001b[36mconst\u001b[39m listenersRef \u001b[33m=\u001b[39m useRef(\u001b[36mnew\u001b[39m \u001b[33mMap\u001b[39m())\u001b[33m;\u001b[39m\n     \u001b[90m 30 |\u001b[39m\n     \u001b[90m 31 |\u001b[39m   \u001b[90m/**\u001b[39m\u001b[0m\n\n      at useQueryClient (../node_modules/@tanstack/react-query/src/QueryClientProvider.tsx:18:11)\n      at useWebSocket (src/hooks/useWebSocket.js:28:37)\n      at useRealtimeNotifications (src/hooks/useRealtimeNotifications.js:20:63)\n      at NotificationCenter (src/components/notifications/NotificationCenter.jsx:39:31)\n      at Object.react-stack-bottom-frame (../node_modules/react-dom/cjs/react-dom-client.development.js:23863:20)\n      at renderWithHooks (../node_modules/react-dom/cjs/react-dom-client.development.js:5529:22)\n      at updateFunctionComponent (../node_modules/react-dom/cjs/react-dom-client.development.js:8897:19)\n      at beginWork (../node_modules/react-dom/cjs/react-dom-client.development.js:10522:18)\n      at runWithFiberInDEV (../node_modules/react-dom/cjs/react-dom-client.development.js:1522:13)\n      at performUnitOfWork (../node_modules/react-dom/cjs/react-dom-client.development.js:15140:22)\n      at workLoopSync (../node_modules/react-dom/cjs/react-dom-client.development.js:14956:41)\n      at renderRootSync (../node_modules/react-dom/cjs/react-dom-client.development.js:14936:11)\n      at performWorkOnRoot (../node_modules/react-dom/cjs/react-dom-client.development.js:14462:44)\n      at performWorkOnRootViaSchedulerTask (../node_modules/react-dom/cjs/react-dom-client.development.js:16216:7)\n      at flushActQueue (../node_modules/react/cjs/react.development.js:566:34)\n      at process.env.NODE_ENV.exports.act (../node_modules/react/cjs/react.development.js:859:10)\n      at ../node_modules/@testing-library/react/dist/act-compat.js:47:25\n      at renderRoot (../node_modules/@testing-library/react/dist/pure.js:190:26)\n      at render (../node_modules/@testing-library/react/dist/pure.js:292:10)\n      at Object.<anonymous> (src/components/notifications/NotificationCenter.test.jsx:91:11)\n\n  ● NotificationCenter › filters unread notifications\n\n    No QueryClient set, use QueryClientProvider to set one\n\n    \u001b[0m \u001b[90m 26 |\u001b[39m   \u001b[36mconst\u001b[39m [connectionError\u001b[33m,\u001b[39m setConnectionError] \u001b[33m=\u001b[39m useState(\u001b[36mnull\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m 27 |\u001b[39m   \u001b[36mconst\u001b[39m [lastMessage\u001b[33m,\u001b[39m setLastMessage] \u001b[33m=\u001b[39m useState(\u001b[36mnull\u001b[39m)\u001b[33m;\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 28 |\u001b[39m   \u001b[36mconst\u001b[39m queryClient \u001b[33m=\u001b[39m useQueryClient()\u001b[33m;\u001b[39m\n     \u001b[90m    |\u001b[39m                                     \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 29 |\u001b[39m   \u001b[36mconst\u001b[39m listenersRef \u001b[33m=\u001b[39m useRef(\u001b[36mnew\u001b[39m \u001b[33mMap\u001b[39m())\u001b[33m;\u001b[39m\n     \u001b[90m 30 |\u001b[39m\n     \u001b[90m 31 |\u001b[39m   \u001b[90m/**\u001b[39m\u001b[0m\n\n      at useQueryClient (../node_modules/@tanstack/react-query/src/QueryClientProvider.tsx:18:11)\n      at useWebSocket (src/hooks/useWebSocket.js:28:37)\n      at useRealtimeNotifications (src/hooks/useRealtimeNotifications.js:20:63)\n      at NotificationCenter (src/components/notifications/NotificationCenter.jsx:39:31)\n      at Object.react-stack-bottom-frame (../node_modules/react-dom/cjs/react-dom-client.development.js:23863:20)\n      at renderWithHooks (../node_modules/react-dom/cjs/react-dom-client.development.js:5529:22)\n      at updateFunctionComponent (../node_modules/react-dom/cjs/react-dom-client.development.js:8897:19)\n      at beginWork (../node_modules/react-dom/cjs/react-dom-client.development.js:10522:18)\n      at runWithFiberInDEV (../node_modules/react-dom/cjs/react-dom-client.development.js:1522:13)\n      at performUnitOfWork (../node_modules/react-dom/cjs/react-dom-client.development.js:15140:22)\n      at workLoopSync (../node_modules/react-dom/cjs/react-dom-client.development.js:14956:41)\n      at renderRootSync (../node_modules/react-dom/cjs/react-dom-client.development.js:14936:11)\n      at performWorkOnRoot (../node_modules/react-dom/cjs/react-dom-client.development.js:14462:44)\n      at performWorkOnRootViaSchedulerTask (../node_modules/react-dom/cjs/react-dom-client.development.js:16216:7)\n      at flushActQueue (../node_modules/react/cjs/react.development.js:566:34)\n      at process.env.NODE_ENV.exports.act (../node_modules/react/cjs/react.development.js:859:10)\n      at ../node_modules/@testing-library/react/dist/act-compat.js:47:25\n      at renderRoot (../node_modules/@testing-library/react/dist/pure.js:190:26)\n      at render (../node_modules/@testing-library/react/dist/pure.js:292:10)\n      at Object.<anonymous> (src/components/notifications/NotificationCenter.test.jsx:107:11)\n\n  ● NotificationCenter › marks notification as read when clicked\n\n    No QueryClient set, use QueryClientProvider to set one\n\n    \u001b[0m \u001b[90m 26 |\u001b[39m   \u001b[36mconst\u001b[39m [connectionError\u001b[33m,\u001b[39m setConnectionError] \u001b[33m=\u001b[39m useState(\u001b[36mnull\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m 27 |\u001b[39m   \u001b[36mconst\u001b[39m [lastMessage\u001b[33m,\u001b[39m setLastMessage] \u001b[33m=\u001b[39m useState(\u001b[36mnull\u001b[39m)\u001b[33m;\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 28 |\u001b[39m   \u001b[36mconst\u001b[39m queryClient \u001b[33m=\u001b[39m useQueryClient()\u001b[33m;\u001b[39m\n     \u001b[90m    |\u001b[39m                                     \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 29 |\u001b[39m   \u001b[36mconst\u001b[39m listenersRef \u001b[33m=\u001b[39m useRef(\u001b[36mnew\u001b[39m \u001b[33mMap\u001b[39m())\u001b[33m;\u001b[39m\n     \u001b[90m 30 |\u001b[39m\n     \u001b[90m 31 |\u001b[39m   \u001b[90m/**\u001b[39m\u001b[0m\n\n      at useQueryClient (../node_modules/@tanstack/react-query/src/QueryClientProvider.tsx:18:11)\n      at useWebSocket (src/hooks/useWebSocket.js:28:37)\n      at useRealtimeNotifications (src/hooks/useRealtimeNotifications.js:20:63)\n      at NotificationCenter (src/components/notifications/NotificationCenter.jsx:39:31)\n      at Object.react-stack-bottom-frame (../node_modules/react-dom/cjs/react-dom-client.development.js:23863:20)\n      at renderWithHooks (../node_modules/react-dom/cjs/react-dom-client.development.js:5529:22)\n      at updateFunctionComponent (../node_modules/react-dom/cjs/react-dom-client.development.js:8897:19)\n      at beginWork (../node_modules/react-dom/cjs/react-dom-client.development.js:10522:18)\n      at runWithFiberInDEV (../node_modules/react-dom/cjs/react-dom-client.development.js:1522:13)\n      at performUnitOfWork (../node_modules/react-dom/cjs/react-dom-client.development.js:15140:22)\n      at workLoopSync (../node_modules/react-dom/cjs/react-dom-client.development.js:14956:41)\n      at renderRootSync (../node_modules/react-dom/cjs/react-dom-client.development.js:14936:11)\n      at performWorkOnRoot (../node_modules/react-dom/cjs/react-dom-client.development.js:14462:44)\n      at performWorkOnRootViaSchedulerTask (../node_modules/react-dom/cjs/react-dom-client.development.js:16216:7)\n      at flushActQueue (../node_modules/react/cjs/react.development.js:566:34)\n      at process.env.NODE_ENV.exports.act (../node_modules/react/cjs/react.development.js:859:10)\n      at ../node_modules/@testing-library/react/dist/act-compat.js:47:25\n      at renderRoot (../node_modules/@testing-library/react/dist/pure.js:190:26)\n      at render (../node_modules/@testing-library/react/dist/pure.js:292:10)\n      at Object.<anonymous> (src/components/notifications/NotificationCenter.test.jsx:122:11)\n\n  ● NotificationCenter › marks all notifications as read\n\n    No QueryClient set, use QueryClientProvider to set one\n\n    \u001b[0m \u001b[90m 26 |\u001b[39m   \u001b[36mconst\u001b[39m [connectionError\u001b[33m,\u001b[39m setConnectionError] \u001b[33m=\u001b[39m useState(\u001b[36mnull\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m 27 |\u001b[39m   \u001b[36mconst\u001b[39m [lastMessage\u001b[33m,\u001b[39m setLastMessage] \u001b[33m=\u001b[39m useState(\u001b[36mnull\u001b[39m)\u001b[33m;\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 28 |\u001b[39m   \u001b[36mconst\u001b[39m queryClient \u001b[33m=\u001b[39m useQueryClient()\u001b[33m;\u001b[39m\n     \u001b[90m    |\u001b[39m                                     \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 29 |\u001b[39m   \u001b[36mconst\u001b[39m listenersRef \u001b[33m=\u001b[39m useRef(\u001b[36mnew\u001b[39m \u001b[33mMap\u001b[39m())\u001b[33m;\u001b[39m\n     \u001b[90m 30 |\u001b[39m\n     \u001b[90m 31 |\u001b[39m   \u001b[90m/**\u001b[39m\u001b[0m\n\n      at useQueryClient (../node_modules/@tanstack/react-query/src/QueryClientProvider.tsx:18:11)\n      at useWebSocket (src/hooks/useWebSocket.js:28:37)\n      at useRealtimeNotifications (src/hooks/useRealtimeNotifications.js:20:63)\n      at NotificationCenter (src/components/notifications/NotificationCenter.jsx:39:31)\n      at Object.react-stack-bottom-frame (../node_modules/react-dom/cjs/react-dom-client.development.js:23863:20)\n      at renderWithHooks (../node_modules/react-dom/cjs/react-dom-client.development.js:5529:22)\n      at updateFunctionComponent (../node_modules/react-dom/cjs/react-dom-client.development.js:8897:19)\n      at beginWork (../node_modules/react-dom/cjs/react-dom-client.development.js:10522:18)\n      at runWithFiberInDEV (../node_modules/react-dom/cjs/react-dom-client.development.js:1522:13)\n      at performUnitOfWork (../node_modules/react-dom/cjs/react-dom-client.development.js:15140:22)\n      at workLoopSync (../node_modules/react-dom/cjs/react-dom-client.development.js:14956:41)\n      at renderRootSync (../node_modules/react-dom/cjs/react-dom-client.development.js:14936:11)\n      at performWorkOnRoot (../node_modules/react-dom/cjs/react-dom-client.development.js:14462:44)\n      at performWorkOnRootViaSchedulerTask (../node_modules/react-dom/cjs/react-dom-client.development.js:16216:7)\n      at flushActQueue (../node_modules/react/cjs/react.development.js:566:34)\n      at process.env.NODE_ENV.exports.act (../node_modules/react/cjs/react.development.js:859:10)\n      at ../node_modules/@testing-library/react/dist/act-compat.js:47:25\n      at renderRoot (../node_modules/@testing-library/react/dist/pure.js:190:26)\n      at render (../node_modules/@testing-library/react/dist/pure.js:292:10)\n      at Object.<anonymous> (src/components/notifications/NotificationCenter.test.jsx:134:11)\n\n  ● NotificationCenter › removes notification when delete button is clicked\n\n    No QueryClient set, use QueryClientProvider to set one\n\n    \u001b[0m \u001b[90m 26 |\u001b[39m   \u001b[36mconst\u001b[39m [connectionError\u001b[33m,\u001b[39m setConnectionError] \u001b[33m=\u001b[39m useState(\u001b[36mnull\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m 27 |\u001b[39m   \u001b[36mconst\u001b[39m [lastMessage\u001b[33m,\u001b[39m setLastMessage] \u001b[33m=\u001b[39m useState(\u001b[36mnull\u001b[39m)\u001b[33m;\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 28 |\u001b[39m   \u001b[36mconst\u001b[39m queryClient \u001b[33m=\u001b[39m useQueryClient()\u001b[33m;\u001b[39m\n     \u001b[90m    |\u001b[39m                                     \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 29 |\u001b[39m   \u001b[36mconst\u001b[39m listenersRef \u001b[33m=\u001b[39m useRef(\u001b[36mnew\u001b[39m \u001b[33mMap\u001b[39m())\u001b[33m;\u001b[39m\n     \u001b[90m 30 |\u001b[39m\n     \u001b[90m 31 |\u001b[39m   \u001b[90m/**\u001b[39m\u001b[0m\n\n      at useQueryClient (../node_modules/@tanstack/react-query/src/QueryClientProvider.tsx:18:11)\n      at useWebSocket (src/hooks/useWebSocket.js:28:37)\n      at useRealtimeNotifications (src/hooks/useRealtimeNotifications.js:20:63)\n      at NotificationCenter (src/components/notifications/NotificationCenter.jsx:39:31)\n      at Object.react-stack-bottom-frame (../node_modules/react-dom/cjs/react-dom-client.development.js:23863:20)\n      at renderWithHooks (../node_modules/react-dom/cjs/react-dom-client.development.js:5529:22)\n      at updateFunctionComponent (../node_modules/react-dom/cjs/react-dom-client.development.js:8897:19)\n      at beginWork (../node_modules/react-dom/cjs/react-dom-client.development.js:10522:18)\n      at runWithFiberInDEV (../node_modules/react-dom/cjs/react-dom-client.development.js:1522:13)\n      at performUnitOfWork (../node_modules/react-dom/cjs/react-dom-client.development.js:15140:22)\n      at workLoopSync (../node_modules/react-dom/cjs/react-dom-client.development.js:14956:41)\n      at renderRootSync (../node_modules/react-dom/cjs/react-dom-client.development.js:14936:11)\n      at performWorkOnRoot (../node_modules/react-dom/cjs/react-dom-client.development.js:14462:44)\n      at performWorkOnRootViaSchedulerTask (../node_modules/react-dom/cjs/react-dom-client.development.js:16216:7)\n      at flushActQueue (../node_modules/react/cjs/react.development.js:566:34)\n      at process.env.NODE_ENV.exports.act (../node_modules/react/cjs/react.development.js:859:10)\n      at ../node_modules/@testing-library/react/dist/act-compat.js:47:25\n      at renderRoot (../node_modules/@testing-library/react/dist/pure.js:190:26)\n      at render (../node_modules/@testing-library/react/dist/pure.js:292:10)\n      at Object.<anonymous> (src/components/notifications/NotificationCenter.test.jsx:146:11)\n\n  ● NotificationCenter › clears all notifications\n\n    No QueryClient set, use QueryClientProvider to set one\n\n    \u001b[0m \u001b[90m 26 |\u001b[39m   \u001b[36mconst\u001b[39m [connectionError\u001b[33m,\u001b[39m setConnectionError] \u001b[33m=\u001b[39m useState(\u001b[36mnull\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m 27 |\u001b[39m   \u001b[36mconst\u001b[39m [lastMessage\u001b[33m,\u001b[39m setLastMessage] \u001b[33m=\u001b[39m useState(\u001b[36mnull\u001b[39m)\u001b[33m;\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 28 |\u001b[39m   \u001b[36mconst\u001b[39m queryClient \u001b[33m=\u001b[39m useQueryClient()\u001b[33m;\u001b[39m\n     \u001b[90m    |\u001b[39m                                     \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 29 |\u001b[39m   \u001b[36mconst\u001b[39m listenersRef \u001b[33m=\u001b[39m useRef(\u001b[36mnew\u001b[39m \u001b[33mMap\u001b[39m())\u001b[33m;\u001b[39m\n     \u001b[90m 30 |\u001b[39m\n     \u001b[90m 31 |\u001b[39m   \u001b[90m/**\u001b[39m\u001b[0m\n\n      at useQueryClient (../node_modules/@tanstack/react-query/src/QueryClientProvider.tsx:18:11)\n      at useWebSocket (src/hooks/useWebSocket.js:28:37)\n      at useRealtimeNotifications (src/hooks/useRealtimeNotifications.js:20:63)\n      at NotificationCenter (src/components/notifications/NotificationCenter.jsx:39:31)\n      at Object.react-stack-bottom-frame (../node_modules/react-dom/cjs/react-dom-client.development.js:23863:20)\n      at renderWithHooks (../node_modules/react-dom/cjs/react-dom-client.development.js:5529:22)\n      at updateFunctionComponent (../node_modules/react-dom/cjs/react-dom-client.development.js:8897:19)\n      at beginWork (../node_modules/react-dom/cjs/react-dom-client.development.js:10522:18)\n      at runWithFiberInDEV (../node_modules/react-dom/cjs/react-dom-client.development.js:1522:13)\n      at performUnitOfWork (../node_modules/react-dom/cjs/react-dom-client.development.js:15140:22)\n      at workLoopSync (../node_modules/react-dom/cjs/react-dom-client.development.js:14956:41)\n      at renderRootSync (../node_modules/react-dom/cjs/react-dom-client.development.js:14936:11)\n      at performWorkOnRoot (../node_modules/react-dom/cjs/react-dom-client.development.js:14462:44)\n      at performWorkOnRootViaSchedulerTask (../node_modules/react-dom/cjs/react-dom-client.development.js:16216:7)\n      at flushActQueue (../node_modules/react/cjs/react.development.js:566:34)\n      at process.env.NODE_ENV.exports.act (../node_modules/react/cjs/react.development.js:859:10)\n      at ../node_modules/@testing-library/react/dist/act-compat.js:47:25\n      at renderRoot (../node_modules/@testing-library/react/dist/pure.js:190:26)\n      at render (../node_modules/@testing-library/react/dist/pure.js:292:10)\n      at Object.<anonymous> (src/components/notifications/NotificationCenter.test.jsx:158:11)\n\n  ● NotificationCenter › displays correct notification icons\n\n    No QueryClient set, use QueryClientProvider to set one\n\n    \u001b[0m \u001b[90m 26 |\u001b[39m   \u001b[36mconst\u001b[39m [connectionError\u001b[33m,\u001b[39m setConnectionError] \u001b[33m=\u001b[39m useState(\u001b[36mnull\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m 27 |\u001b[39m   \u001b[36mconst\u001b[39m [lastMessage\u001b[33m,\u001b[39m setLastMessage] \u001b[33m=\u001b[39m useState(\u001b[36mnull\u001b[39m)\u001b[33m;\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 28 |\u001b[39m   \u001b[36mconst\u001b[39m queryClient \u001b[33m=\u001b[39m useQueryClient()\u001b[33m;\u001b[39m\n     \u001b[90m    |\u001b[39m                                     \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 29 |\u001b[39m   \u001b[36mconst\u001b[39m listenersRef \u001b[33m=\u001b[39m useRef(\u001b[36mnew\u001b[39m \u001b[33mMap\u001b[39m())\u001b[33m;\u001b[39m\n     \u001b[90m 30 |\u001b[39m\n     \u001b[90m 31 |\u001b[39m   \u001b[90m/**\u001b[39m\u001b[0m\n\n      at useQueryClient (../node_modules/@tanstack/react-query/src/QueryClientProvider.tsx:18:11)\n      at useWebSocket (src/hooks/useWebSocket.js:28:37)\n      at useRealtimeNotifications (src/hooks/useRealtimeNotifications.js:20:63)\n      at NotificationCenter (src/components/notifications/NotificationCenter.jsx:39:31)\n      at Object.react-stack-bottom-frame (../node_modules/react-dom/cjs/react-dom-client.development.js:23863:20)\n      at renderWithHooks (../node_modules/react-dom/cjs/react-dom-client.development.js:5529:22)\n      at updateFunctionComponent (../node_modules/react-dom/cjs/react-dom-client.development.js:8897:19)\n      at beginWork (../node_modules/react-dom/cjs/react-dom-client.development.js:10522:18)\n      at runWithFiberInDEV (../node_modules/react-dom/cjs/react-dom-client.development.js:1522:13)\n      at performUnitOfWork (../node_modules/react-dom/cjs/react-dom-client.development.js:15140:22)\n      at workLoopSync (../node_modules/react-dom/cjs/react-dom-client.development.js:14956:41)\n      at renderRootSync (../node_modules/react-dom/cjs/react-dom-client.development.js:14936:11)\n      at performWorkOnRoot (../node_modules/react-dom/cjs/react-dom-client.development.js:14462:44)\n      at performWorkOnRootViaSchedulerTask (../node_modules/react-dom/cjs/react-dom-client.development.js:16216:7)\n      at flushActQueue (../node_modules/react/cjs/react.development.js:566:34)\n      at process.env.NODE_ENV.exports.act (../node_modules/react/cjs/react.development.js:859:10)\n      at ../node_modules/@testing-library/react/dist/act-compat.js:47:25\n      at renderRoot (../node_modules/@testing-library/react/dist/pure.js:190:26)\n      at render (../node_modules/@testing-library/react/dist/pure.js:292:10)\n      at Object.<anonymous> (src/components/notifications/NotificationCenter.test.jsx:170:11)\n\n  ● NotificationCenter › displays relative time correctly\n\n    No QueryClient set, use QueryClientProvider to set one\n\n    \u001b[0m \u001b[90m 26 |\u001b[39m   \u001b[36mconst\u001b[39m [connectionError\u001b[33m,\u001b[39m setConnectionError] \u001b[33m=\u001b[39m useState(\u001b[36mnull\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m 27 |\u001b[39m   \u001b[36mconst\u001b[39m [lastMessage\u001b[33m,\u001b[39m setLastMessage] \u001b[33m=\u001b[39m useState(\u001b[36mnull\u001b[39m)\u001b[33m;\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 28 |\u001b[39m   \u001b[36mconst\u001b[39m queryClient \u001b[33m=\u001b[39m useQueryClient()\u001b[33m;\u001b[39m\n     \u001b[90m    |\u001b[39m                                     \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 29 |\u001b[39m   \u001b[36mconst\u001b[39m listenersRef \u001b[33m=\u001b[39m useRef(\u001b[36mnew\u001b[39m \u001b[33mMap\u001b[39m())\u001b[33m;\u001b[39m\n     \u001b[90m 30 |\u001b[39m\n     \u001b[90m 31 |\u001b[39m   \u001b[90m/**\u001b[39m\u001b[0m\n\n      at useQueryClient (../node_modules/@tanstack/react-query/src/QueryClientProvider.tsx:18:11)\n      at useWebSocket (src/hooks/useWebSocket.js:28:37)\n      at useRealtimeNotifications (src/hooks/useRealtimeNotifications.js:20:63)\n      at NotificationCenter (src/components/notifications/NotificationCenter.jsx:39:31)\n      at Object.react-stack-bottom-frame (../node_modules/react-dom/cjs/react-dom-client.development.js:23863:20)\n      at renderWithHooks (../node_modules/react-dom/cjs/react-dom-client.development.js:5529:22)\n      at updateFunctionComponent (../node_modules/react-dom/cjs/react-dom-client.development.js:8897:19)\n      at beginWork (../node_modules/react-dom/cjs/react-dom-client.development.js:10522:18)\n      at runWithFiberInDEV (../node_modules/react-dom/cjs/react-dom-client.development.js:1522:13)\n      at performUnitOfWork (../node_modules/react-dom/cjs/react-dom-client.development.js:15140:22)\n      at workLoopSync (../node_modules/react-dom/cjs/react-dom-client.development.js:14956:41)\n      at renderRootSync (../node_modules/react-dom/cjs/react-dom-client.development.js:14936:11)\n      at performWorkOnRoot (../node_modules/react-dom/cjs/react-dom-client.development.js:14462:44)\n      at performWorkOnRootViaSchedulerTask (../node_modules/react-dom/cjs/react-dom-client.development.js:16216:7)\n      at flushActQueue (../node_modules/react/cjs/react.development.js:566:34)\n      at process.env.NODE_ENV.exports.act (../node_modules/react/cjs/react.development.js:859:10)\n      at ../node_modules/@testing-library/react/dist/act-compat.js:47:25\n      at renderRoot (../node_modules/@testing-library/react/dist/pure.js:190:26)\n      at render (../node_modules/@testing-library/react/dist/pure.js:292:10)\n      at Object.<anonymous> (src/components/notifications/NotificationCenter.test.jsx:182:11)\n\n  ● NotificationCenter › shows empty state when no notifications\n\n    No QueryClient set, use QueryClientProvider to set one\n\n    \u001b[0m \u001b[90m 26 |\u001b[39m   \u001b[36mconst\u001b[39m [connectionError\u001b[33m,\u001b[39m setConnectionError] \u001b[33m=\u001b[39m useState(\u001b[36mnull\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m 27 |\u001b[39m   \u001b[36mconst\u001b[39m [lastMessage\u001b[33m,\u001b[39m setLastMessage] \u001b[33m=\u001b[39m useState(\u001b[36mnull\u001b[39m)\u001b[33m;\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 28 |\u001b[39m   \u001b[36mconst\u001b[39m queryClient \u001b[33m=\u001b[39m useQueryClient()\u001b[33m;\u001b[39m\n     \u001b[90m    |\u001b[39m                                     \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 29 |\u001b[39m   \u001b[36mconst\u001b[39m listenersRef \u001b[33m=\u001b[39m useRef(\u001b[36mnew\u001b[39m \u001b[33mMap\u001b[39m())\u001b[33m;\u001b[39m\n     \u001b[90m 30 |\u001b[39m\n     \u001b[90m 31 |\u001b[39m   \u001b[90m/**\u001b[39m\u001b[0m\n\n      at useQueryClient (../node_modules/@tanstack/react-query/src/QueryClientProvider.tsx:18:11)\n      at useWebSocket (src/hooks/useWebSocket.js:28:37)\n      at useRealtimeNotifications (src/hooks/useRealtimeNotifications.js:20:63)\n      at NotificationCenter (src/components/notifications/NotificationCenter.jsx:39:31)\n      at Object.react-stack-bottom-frame (../node_modules/react-dom/cjs/react-dom-client.development.js:23863:20)\n      at renderWithHooks (../node_modules/react-dom/cjs/react-dom-client.development.js:5529:22)\n      at updateFunctionComponent (../node_modules/react-dom/cjs/react-dom-client.development.js:8897:19)\n      at beginWork (../node_modules/react-dom/cjs/react-dom-client.development.js:10522:18)\n      at runWithFiberInDEV (../node_modules/react-dom/cjs/react-dom-client.development.js:1522:13)\n      at performUnitOfWork (../node_modules/react-dom/cjs/react-dom-client.development.js:15140:22)\n      at workLoopSync (../node_modules/react-dom/cjs/react-dom-client.development.js:14956:41)\n      at renderRootSync (../node_modules/react-dom/cjs/react-dom-client.development.js:14936:11)\n      at performWorkOnRoot (../node_modules/react-dom/cjs/react-dom-client.development.js:14462:44)\n      at performWorkOnRootViaSchedulerTask (../node_modules/react-dom/cjs/react-dom-client.development.js:16216:7)\n      at flushActQueue (../node_modules/react/cjs/react.development.js:566:34)\n      at process.env.NODE_ENV.exports.act (../node_modules/react/cjs/react.development.js:859:10)\n      at ../node_modules/@testing-library/react/dist/act-compat.js:47:25\n      at renderRoot (../node_modules/@testing-library/react/dist/pure.js:190:26)\n      at render (../node_modules/@testing-library/react/dist/pure.js:292:10)\n      at Object.<anonymous> (src/components/notifications/NotificationCenter.test.jsx:199:11)\n\n  ● NotificationCenter › closes panel when clicking outside\n\n    No QueryClient set, use QueryClientProvider to set one\n\n    \u001b[0m \u001b[90m 26 |\u001b[39m   \u001b[36mconst\u001b[39m [connectionError\u001b[33m,\u001b[39m setConnectionError] \u001b[33m=\u001b[39m useState(\u001b[36mnull\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m 27 |\u001b[39m   \u001b[36mconst\u001b[39m [lastMessage\u001b[33m,\u001b[39m setLastMessage] \u001b[33m=\u001b[39m useState(\u001b[36mnull\u001b[39m)\u001b[33m;\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 28 |\u001b[39m   \u001b[36mconst\u001b[39m queryClient \u001b[33m=\u001b[39m useQueryClient()\u001b[33m;\u001b[39m\n     \u001b[90m    |\u001b[39m                                     \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 29 |\u001b[39m   \u001b[36mconst\u001b[39m listenersRef \u001b[33m=\u001b[39m useRef(\u001b[36mnew\u001b[39m \u001b[33mMap\u001b[39m())\u001b[33m;\u001b[39m\n     \u001b[90m 30 |\u001b[39m\n     \u001b[90m 31 |\u001b[39m   \u001b[90m/**\u001b[39m\u001b[0m\n\n      at useQueryClient (../node_modules/@tanstack/react-query/src/QueryClientProvider.tsx:18:11)\n      at useWebSocket (src/hooks/useWebSocket.js:28:37)\n      at useRealtimeNotifications (src/hooks/useRealtimeNotifications.js:20:63)\n      at NotificationCenter (src/components/notifications/NotificationCenter.jsx:39:31)\n      at Object.react-stack-bottom-frame (../node_modules/react-dom/cjs/react-dom-client.development.js:23863:20)\n      at renderWithHooks (../node_modules/react-dom/cjs/react-dom-client.development.js:5529:22)\n      at updateFunctionComponent (../node_modules/react-dom/cjs/react-dom-client.development.js:8897:19)\n      at beginWork (../node_modules/react-dom/cjs/react-dom-client.development.js:10522:18)\n      at runWithFiberInDEV (../node_modules/react-dom/cjs/react-dom-client.development.js:1522:13)\n      at performUnitOfWork (../node_modules/react-dom/cjs/react-dom-client.development.js:15140:22)\n      at workLoopSync (../node_modules/react-dom/cjs/react-dom-client.development.js:14956:41)\n      at renderRootSync (../node_modules/react-dom/cjs/react-dom-client.development.js:14936:11)\n      at performWorkOnRoot (../node_modules/react-dom/cjs/react-dom-client.development.js:14462:44)\n      at performWorkOnRootViaSchedulerTask (../node_modules/react-dom/cjs/react-dom-client.development.js:16216:7)\n      at flushActQueue (../node_modules/react/cjs/react.development.js:566:34)\n      at process.env.NODE_ENV.exports.act (../node_modules/react/cjs/react.development.js:859:10)\n      at ../node_modules/@testing-library/react/dist/act-compat.js:47:25\n      at renderRoot (../node_modules/@testing-library/react/dist/pure.js:190:26)\n      at render (../node_modules/@testing-library/react/dist/pure.js:292:10)\n      at Object.<anonymous> (src/components/notifications/NotificationCenter.test.jsx:208:11)\n\n  ● NotificationCenter › handles keyboard navigation\n\n    No QueryClient set, use QueryClientProvider to set one\n\n    \u001b[0m \u001b[90m 26 |\u001b[39m   \u001b[36mconst\u001b[39m [connectionError\u001b[33m,\u001b[39m setConnectionError] \u001b[33m=\u001b[39m useState(\u001b[36mnull\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m 27 |\u001b[39m   \u001b[36mconst\u001b[39m [lastMessage\u001b[33m,\u001b[39m setLastMessage] \u001b[33m=\u001b[39m useState(\u001b[36mnull\u001b[39m)\u001b[33m;\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 28 |\u001b[39m   \u001b[36mconst\u001b[39m queryClient \u001b[33m=\u001b[39m useQueryClient()\u001b[33m;\u001b[39m\n     \u001b[90m    |\u001b[39m                                     \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 29 |\u001b[39m   \u001b[36mconst\u001b[39m listenersRef \u001b[33m=\u001b[39m useRef(\u001b[36mnew\u001b[39m \u001b[33mMap\u001b[39m())\u001b[33m;\u001b[39m\n     \u001b[90m 30 |\u001b[39m\n     \u001b[90m 31 |\u001b[39m   \u001b[90m/**\u001b[39m\u001b[0m\n\n      at useQueryClient (../node_modules/@tanstack/react-query/src/QueryClientProvider.tsx:18:11)\n      at useWebSocket (src/hooks/useWebSocket.js:28:37)\n      at useRealtimeNotifications (src/hooks/useRealtimeNotifications.js:20:63)\n      at NotificationCenter (src/components/notifications/NotificationCenter.jsx:39:31)\n      at Object.react-stack-bottom-frame (../node_modules/react-dom/cjs/react-dom-client.development.js:23863:20)\n      at renderWithHooks (../node_modules/react-dom/cjs/react-dom-client.development.js:5529:22)\n      at updateFunctionComponent (../node_modules/react-dom/cjs/react-dom-client.development.js:8897:19)\n      at beginWork (../node_modules/react-dom/cjs/react-dom-client.development.js:10522:18)\n      at runWithFiberInDEV (../node_modules/react-dom/cjs/react-dom-client.development.js:1522:13)\n      at performUnitOfWork (../node_modules/react-dom/cjs/react-dom-client.development.js:15140:22)\n      at workLoopSync (../node_modules/react-dom/cjs/react-dom-client.development.js:14956:41)\n      at renderRootSync (../node_modules/react-dom/cjs/react-dom-client.development.js:14936:11)\n      at performWorkOnRoot (../node_modules/react-dom/cjs/react-dom-client.development.js:14462:44)\n      at performWorkOnRootViaSchedulerTask (../node_modules/react-dom/cjs/react-dom-client.development.js:16216:7)\n      at flushActQueue (../node_modules/react/cjs/react.development.js:566:34)\n      at process.env.NODE_ENV.exports.act (../node_modules/react/cjs/react.development.js:859:10)\n      at ../node_modules/@testing-library/react/dist/act-compat.js:47:25\n      at renderRoot (../node_modules/@testing-library/react/dist/pure.js:190:26)\n      at render (../node_modules/@testing-library/react/dist/pure.js:292:10)\n      at Object.<anonymous> (src/components/notifications/NotificationCenter.test.jsx:227:11)\n\n  ● NotificationCenter › applies correct CSS classes for read/unread notifications\n\n    No QueryClient set, use QueryClientProvider to set one\n\n    \u001b[0m \u001b[90m 26 |\u001b[39m   \u001b[36mconst\u001b[39m [connectionError\u001b[33m,\u001b[39m setConnectionError] \u001b[33m=\u001b[39m useState(\u001b[36mnull\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m 27 |\u001b[39m   \u001b[36mconst\u001b[39m [lastMessage\u001b[33m,\u001b[39m setLastMessage] \u001b[33m=\u001b[39m useState(\u001b[36mnull\u001b[39m)\u001b[33m;\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 28 |\u001b[39m   \u001b[36mconst\u001b[39m queryClient \u001b[33m=\u001b[39m useQueryClient()\u001b[33m;\u001b[39m\n     \u001b[90m    |\u001b[39m                                     \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 29 |\u001b[39m   \u001b[36mconst\u001b[39m listenersRef \u001b[33m=\u001b[39m useRef(\u001b[36mnew\u001b[39m \u001b[33mMap\u001b[39m())\u001b[33m;\u001b[39m\n     \u001b[90m 30 |\u001b[39m\n     \u001b[90m 31 |\u001b[39m   \u001b[90m/**\u001b[39m\u001b[0m\n\n      at useQueryClient (../node_modules/@tanstack/react-query/src/QueryClientProvider.tsx:18:11)\n      at useWebSocket (src/hooks/useWebSocket.js:28:37)\n      at useRealtimeNotifications (src/hooks/useRealtimeNotifications.js:20:63)\n      at NotificationCenter (src/components/notifications/NotificationCenter.jsx:39:31)\n      at Object.react-stack-bottom-frame (../node_modules/react-dom/cjs/react-dom-client.development.js:23863:20)\n      at renderWithHooks (../node_modules/react-dom/cjs/react-dom-client.development.js:5529:22)\n      at updateFunctionComponent (../node_modules/react-dom/cjs/react-dom-client.development.js:8897:19)\n      at beginWork (../node_modules/react-dom/cjs/react-dom-client.development.js:10522:18)\n      at runWithFiberInDEV (../node_modules/react-dom/cjs/react-dom-client.development.js:1522:13)\n      at performUnitOfWork (../node_modules/react-dom/cjs/react-dom-client.development.js:15140:22)\n      at workLoopSync (../node_modules/react-dom/cjs/react-dom-client.development.js:14956:41)\n      at renderRootSync (../node_modules/react-dom/cjs/react-dom-client.development.js:14936:11)\n      at performWorkOnRoot (../node_modules/react-dom/cjs/react-dom-client.development.js:14462:44)\n      at performWorkOnRootViaSchedulerTask (../node_modules/react-dom/cjs/react-dom-client.development.js:16216:7)\n      at flushActQueue (../node_modules/react/cjs/react.development.js:566:34)\n      at process.env.NODE_ENV.exports.act (../node_modules/react/cjs/react.development.js:859:10)\n      at ../node_modules/@testing-library/react/dist/act-compat.js:47:25\n      at renderRoot (../node_modules/@testing-library/react/dist/pure.js:190:26)\n      at render (../node_modules/@testing-library/react/dist/pure.js:292:10)\n      at Object.<anonymous> (src/components/notifications/NotificationCenter.test.jsx:241:11)\n\n  ● NotificationCenter › displays correct priority colors\n\n    No QueryClient set, use QueryClientProvider to set one\n\n    \u001b[0m \u001b[90m 26 |\u001b[39m   \u001b[36mconst\u001b[39m [connectionError\u001b[33m,\u001b[39m setConnectionError] \u001b[33m=\u001b[39m useState(\u001b[36mnull\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m 27 |\u001b[39m   \u001b[36mconst\u001b[39m [lastMessage\u001b[33m,\u001b[39m setLastMessage] \u001b[33m=\u001b[39m useState(\u001b[36mnull\u001b[39m)\u001b[33m;\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 28 |\u001b[39m   \u001b[36mconst\u001b[39m queryClient \u001b[33m=\u001b[39m useQueryClient()\u001b[33m;\u001b[39m\n     \u001b[90m    |\u001b[39m                                     \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 29 |\u001b[39m   \u001b[36mconst\u001b[39m listenersRef \u001b[33m=\u001b[39m useRef(\u001b[36mnew\u001b[39m \u001b[33mMap\u001b[39m())\u001b[33m;\u001b[39m\n     \u001b[90m 30 |\u001b[39m\n     \u001b[90m 31 |\u001b[39m   \u001b[90m/**\u001b[39m\u001b[0m\n\n      at useQueryClient (../node_modules/@tanstack/react-query/src/QueryClientProvider.tsx:18:11)\n      at useWebSocket (src/hooks/useWebSocket.js:28:37)\n      at useRealtimeNotifications (src/hooks/useRealtimeNotifications.js:20:63)\n      at NotificationCenter (src/components/notifications/NotificationCenter.jsx:39:31)\n      at Object.react-stack-bottom-frame (../node_modules/react-dom/cjs/react-dom-client.development.js:23863:20)\n      at renderWithHooks (../node_modules/react-dom/cjs/react-dom-client.development.js:5529:22)\n      at updateFunctionComponent (../node_modules/react-dom/cjs/react-dom-client.development.js:8897:19)\n      at beginWork (../node_modules/react-dom/cjs/react-dom-client.development.js:10522:18)\n      at runWithFiberInDEV (../node_modules/react-dom/cjs/react-dom-client.development.js:1522:13)\n      at performUnitOfWork (../node_modules/react-dom/cjs/react-dom-client.development.js:15140:22)\n      at workLoopSync (../node_modules/react-dom/cjs/react-dom-client.development.js:14956:41)\n      at renderRootSync (../node_modules/react-dom/cjs/react-dom-client.development.js:14936:11)\n      at performWorkOnRoot (../node_modules/react-dom/cjs/react-dom-client.development.js:14462:44)\n      at performWorkOnRootViaSchedulerTask (../node_modules/react-dom/cjs/react-dom-client.development.js:16216:7)\n      at flushActQueue (../node_modules/react/cjs/react.development.js:566:34)\n      at process.env.NODE_ENV.exports.act (../node_modules/react/cjs/react.development.js:859:10)\n      at ../node_modules/@testing-library/react/dist/act-compat.js:47:25\n      at renderRoot (../node_modules/@testing-library/react/dist/pure.js:190:26)\n      at render (../node_modules/@testing-library/react/dist/pure.js:292:10)\n      at Object.<anonymous> (src/components/notifications/NotificationCenter.test.jsx:254:11)\n\n  ● NotificationCenter › handles long notification messages\n\n    No QueryClient set, use QueryClientProvider to set one\n\n    \u001b[0m \u001b[90m 26 |\u001b[39m   \u001b[36mconst\u001b[39m [connectionError\u001b[33m,\u001b[39m setConnectionError] \u001b[33m=\u001b[39m useState(\u001b[36mnull\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m 27 |\u001b[39m   \u001b[36mconst\u001b[39m [lastMessage\u001b[33m,\u001b[39m setLastMessage] \u001b[33m=\u001b[39m useState(\u001b[36mnull\u001b[39m)\u001b[33m;\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 28 |\u001b[39m   \u001b[36mconst\u001b[39m queryClient \u001b[33m=\u001b[39m useQueryClient()\u001b[33m;\u001b[39m\n     \u001b[90m    |\u001b[39m                                     \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 29 |\u001b[39m   \u001b[36mconst\u001b[39m listenersRef \u001b[33m=\u001b[39m useRef(\u001b[36mnew\u001b[39m \u001b[33mMap\u001b[39m())\u001b[33m;\u001b[39m\n     \u001b[90m 30 |\u001b[39m\n     \u001b[90m 31 |\u001b[39m   \u001b[90m/**\u001b[39m\u001b[0m\n\n      at useQueryClient (../node_modules/@tanstack/react-query/src/QueryClientProvider.tsx:18:11)\n      at useWebSocket (src/hooks/useWebSocket.js:28:37)\n      at useRealtimeNotifications (src/hooks/useRealtimeNotifications.js:20:63)\n      at NotificationCenter (src/components/notifications/NotificationCenter.jsx:39:31)\n      at Object.react-stack-bottom-frame (../node_modules/react-dom/cjs/react-dom-client.development.js:23863:20)\n      at renderWithHooks (../node_modules/react-dom/cjs/react-dom-client.development.js:5529:22)\n      at updateFunctionComponent (../node_modules/react-dom/cjs/react-dom-client.development.js:8897:19)\n      at beginWork (../node_modules/react-dom/cjs/react-dom-client.development.js:10522:18)\n      at runWithFiberInDEV (../node_modules/react-dom/cjs/react-dom-client.development.js:1522:13)\n      at performUnitOfWork (../node_modules/react-dom/cjs/react-dom-client.development.js:15140:22)\n      at workLoopSync (../node_modules/react-dom/cjs/react-dom-client.development.js:14956:41)\n      at renderRootSync (../node_modules/react-dom/cjs/react-dom-client.development.js:14936:11)\n      at performWorkOnRoot (../node_modules/react-dom/cjs/react-dom-client.development.js:14462:44)\n      at performWorkOnRootViaSchedulerTask (../node_modules/react-dom/cjs/react-dom-client.development.js:16216:7)\n      at flushActQueue (../node_modules/react/cjs/react.development.js:566:34)\n      at process.env.NODE_ENV.exports.act (../node_modules/react/cjs/react.development.js:859:10)\n      at ../node_modules/@testing-library/react/dist/act-compat.js:47:25\n      at renderRoot (../node_modules/@testing-library/react/dist/pure.js:190:26)\n      at render (../node_modules/@testing-library/react/dist/pure.js:292:10)\n      at Object.<anonymous> (src/components/notifications/NotificationCenter.test.jsx:274:11)\n\n  ● NotificationCenter › updates unread count when notifications change\n\n    No QueryClient set, use QueryClientProvider to set one\n\n    \u001b[0m \u001b[90m 26 |\u001b[39m   \u001b[36mconst\u001b[39m [connectionError\u001b[33m,\u001b[39m setConnectionError] \u001b[33m=\u001b[39m useState(\u001b[36mnull\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m 27 |\u001b[39m   \u001b[36mconst\u001b[39m [lastMessage\u001b[33m,\u001b[39m setLastMessage] \u001b[33m=\u001b[39m useState(\u001b[36mnull\u001b[39m)\u001b[33m;\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 28 |\u001b[39m   \u001b[36mconst\u001b[39m queryClient \u001b[33m=\u001b[39m useQueryClient()\u001b[33m;\u001b[39m\n     \u001b[90m    |\u001b[39m                                     \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 29 |\u001b[39m   \u001b[36mconst\u001b[39m listenersRef \u001b[33m=\u001b[39m useRef(\u001b[36mnew\u001b[39m \u001b[33mMap\u001b[39m())\u001b[33m;\u001b[39m\n     \u001b[90m 30 |\u001b[39m\n     \u001b[90m 31 |\u001b[39m   \u001b[90m/**\u001b[39m\u001b[0m\n\n      at useQueryClient (../node_modules/@tanstack/react-query/src/QueryClientProvider.tsx:18:11)\n      at useWebSocket (src/hooks/useWebSocket.js:28:37)\n      at useRealtimeNotifications (src/hooks/useRealtimeNotifications.js:20:63)\n      at NotificationCenter (src/components/notifications/NotificationCenter.jsx:39:31)\n      at Object.react-stack-bottom-frame (../node_modules/react-dom/cjs/react-dom-client.development.js:23863:20)\n      at renderWithHooks (../node_modules/react-dom/cjs/react-dom-client.development.js:5529:22)\n      at updateFunctionComponent (../node_modules/react-dom/cjs/react-dom-client.development.js:8897:19)\n      at beginWork (../node_modules/react-dom/cjs/react-dom-client.development.js:10522:18)\n      at runWithFiberInDEV (../node_modules/react-dom/cjs/react-dom-client.development.js:1522:13)\n      at performUnitOfWork (../node_modules/react-dom/cjs/react-dom-client.development.js:15140:22)\n      at workLoopSync (../node_modules/react-dom/cjs/react-dom-client.development.js:14956:41)\n      at renderRootSync (../node_modules/react-dom/cjs/react-dom-client.development.js:14936:11)\n      at performWorkOnRoot (../node_modules/react-dom/cjs/react-dom-client.development.js:14462:44)\n      at performWorkOnRootViaSchedulerTask (../node_modules/react-dom/cjs/react-dom-client.development.js:16216:7)\n      at flushActQueue (../node_modules/react/cjs/react.development.js:566:34)\n      at process.env.NODE_ENV.exports.act (../node_modules/react/cjs/react.development.js:859:10)\n      at ../node_modules/@testing-library/react/dist/act-compat.js:47:25\n      at renderRoot (../node_modules/@testing-library/react/dist/pure.js:190:26)\n      at render (../node_modules/@testing-library/react/dist/pure.js:292:10)\n      at Object.<anonymous> (src/components/notifications/NotificationCenter.test.jsx:284:32)\n\n  ● NotificationCenter › handles notification with missing data gracefully\n\n    No QueryClient set, use QueryClientProvider to set one\n\n    \u001b[0m \u001b[90m 26 |\u001b[39m   \u001b[36mconst\u001b[39m [connectionError\u001b[33m,\u001b[39m setConnectionError] \u001b[33m=\u001b[39m useState(\u001b[36mnull\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m 27 |\u001b[39m   \u001b[36mconst\u001b[39m [lastMessage\u001b[33m,\u001b[39m setLastMessage] \u001b[33m=\u001b[39m useState(\u001b[36mnull\u001b[39m)\u001b[33m;\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 28 |\u001b[39m   \u001b[36mconst\u001b[39m queryClient \u001b[33m=\u001b[39m useQueryClient()\u001b[33m;\u001b[39m\n     \u001b[90m    |\u001b[39m                                     \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 29 |\u001b[39m   \u001b[36mconst\u001b[39m listenersRef \u001b[33m=\u001b[39m useRef(\u001b[36mnew\u001b[39m \u001b[33mMap\u001b[39m())\u001b[33m;\u001b[39m\n     \u001b[90m 30 |\u001b[39m\n     \u001b[90m 31 |\u001b[39m   \u001b[90m/**\u001b[39m\u001b[0m\n\n      at useQueryClient (../node_modules/@tanstack/react-query/src/QueryClientProvider.tsx:18:11)\n      at useWebSocket (src/hooks/useWebSocket.js:28:37)\n      at useRealtimeNotifications (src/hooks/useRealtimeNotifications.js:20:63)\n      at NotificationCenter (src/components/notifications/NotificationCenter.jsx:39:31)\n      at Object.react-stack-bottom-frame (../node_modules/react-dom/cjs/react-dom-client.development.js:23863:20)\n      at renderWithHooks (../node_modules/react-dom/cjs/react-dom-client.development.js:5529:22)\n      at updateFunctionComponent (../node_modules/react-dom/cjs/react-dom-client.development.js:8897:19)\n      at beginWork (../node_modules/react-dom/cjs/react-dom-client.development.js:10522:18)\n      at runWithFiberInDEV (../node_modules/react-dom/cjs/react-dom-client.development.js:1522:13)\n      at performUnitOfWork (../node_modules/react-dom/cjs/react-dom-client.development.js:15140:22)\n      at workLoopSync (../node_modules/react-dom/cjs/react-dom-client.development.js:14956:41)\n      at renderRootSync (../node_modules/react-dom/cjs/react-dom-client.development.js:14936:11)\n      at performWorkOnRoot (../node_modules/react-dom/cjs/react-dom-client.development.js:14462:44)\n      at performWorkOnRootViaSchedulerTask (../node_modules/react-dom/cjs/react-dom-client.development.js:16216:7)\n      at flushActQueue (../node_modules/react/cjs/react.development.js:566:34)\n      at process.env.NODE_ENV.exports.act (../node_modules/react/cjs/react.development.js:859:10)\n      at ../node_modules/@testing-library/react/dist/act-compat.js:47:25\n      at renderRoot (../node_modules/@testing-library/react/dist/pure.js:190:26)\n      at render (../node_modules/@testing-library/react/dist/pure.js:292:10)\n      at Object.<anonymous> (src/components/notifications/NotificationCenter.test.jsx:314:11)\n\n  ● NotificationCenter Integration › integrates correctly with useRealtimeNotifications hook\n\n    No QueryClient set, use QueryClientProvider to set one\n\n    \u001b[0m \u001b[90m 26 |\u001b[39m   \u001b[36mconst\u001b[39m [connectionError\u001b[33m,\u001b[39m setConnectionError] \u001b[33m=\u001b[39m useState(\u001b[36mnull\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m 27 |\u001b[39m   \u001b[36mconst\u001b[39m [lastMessage\u001b[33m,\u001b[39m setLastMessage] \u001b[33m=\u001b[39m useState(\u001b[36mnull\u001b[39m)\u001b[33m;\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 28 |\u001b[39m   \u001b[36mconst\u001b[39m queryClient \u001b[33m=\u001b[39m useQueryClient()\u001b[33m;\u001b[39m\n     \u001b[90m    |\u001b[39m                                     \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 29 |\u001b[39m   \u001b[36mconst\u001b[39m listenersRef \u001b[33m=\u001b[39m useRef(\u001b[36mnew\u001b[39m \u001b[33mMap\u001b[39m())\u001b[33m;\u001b[39m\n     \u001b[90m 30 |\u001b[39m\n     \u001b[90m 31 |\u001b[39m   \u001b[90m/**\u001b[39m\u001b[0m\n\n      at useQueryClient (../node_modules/@tanstack/react-query/src/QueryClientProvider.tsx:18:11)\n      at useWebSocket (src/hooks/useWebSocket.js:28:37)\n      at useRealtimeNotifications (src/hooks/useRealtimeNotifications.js:20:63)\n      at NotificationCenter (src/components/notifications/NotificationCenter.jsx:39:31)\n      at Object.react-stack-bottom-frame (../node_modules/react-dom/cjs/react-dom-client.development.js:23863:20)\n      at renderWithHooks (../node_modules/react-dom/cjs/react-dom-client.development.js:5529:22)\n      at updateFunctionComponent (../node_modules/react-dom/cjs/react-dom-client.development.js:8897:19)\n      at beginWork (../node_modules/react-dom/cjs/react-dom-client.development.js:10522:18)\n      at runWithFiberInDEV (../node_modules/react-dom/cjs/react-dom-client.development.js:1522:13)\n      at performUnitOfWork (../node_modules/react-dom/cjs/react-dom-client.development.js:15140:22)\n      at workLoopSync (../node_modules/react-dom/cjs/react-dom-client.development.js:14956:41)\n      at renderRootSync (../node_modules/react-dom/cjs/react-dom-client.development.js:14936:11)\n      at performWorkOnRoot (../node_modules/react-dom/cjs/react-dom-client.development.js:14462:44)\n      at performWorkOnRootViaSchedulerTask (../node_modules/react-dom/cjs/react-dom-client.development.js:16216:7)\n      at flushActQueue (../node_modules/react/cjs/react.development.js:566:34)\n      at process.env.NODE_ENV.exports.act (../node_modules/react/cjs/react.development.js:859:10)\n      at ../node_modules/@testing-library/react/dist/act-compat.js:47:25\n      at renderRoot (../node_modules/@testing-library/react/dist/pure.js:190:26)\n      at render (../node_modules/@testing-library/react/dist/pure.js:292:10)\n      at Object.<anonymous> (src/components/notifications/NotificationCenter.test.jsx:326:11)\n\n  ● NotificationCenter Integration › passes correct parameters to hook functions\n\n    No QueryClient set, use QueryClientProvider to set one\n\n    \u001b[0m \u001b[90m 26 |\u001b[39m   \u001b[36mconst\u001b[39m [connectionError\u001b[33m,\u001b[39m setConnectionError] \u001b[33m=\u001b[39m useState(\u001b[36mnull\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m 27 |\u001b[39m   \u001b[36mconst\u001b[39m [lastMessage\u001b[33m,\u001b[39m setLastMessage] \u001b[33m=\u001b[39m useState(\u001b[36mnull\u001b[39m)\u001b[33m;\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 28 |\u001b[39m   \u001b[36mconst\u001b[39m queryClient \u001b[33m=\u001b[39m useQueryClient()\u001b[33m;\u001b[39m\n     \u001b[90m    |\u001b[39m                                     \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 29 |\u001b[39m   \u001b[36mconst\u001b[39m listenersRef \u001b[33m=\u001b[39m useRef(\u001b[36mnew\u001b[39m \u001b[33mMap\u001b[39m())\u001b[33m;\u001b[39m\n     \u001b[90m 30 |\u001b[39m\n     \u001b[90m 31 |\u001b[39m   \u001b[90m/**\u001b[39m\u001b[0m\n\n      at useQueryClient (../node_modules/@tanstack/react-query/src/QueryClientProvider.tsx:18:11)\n      at useWebSocket (src/hooks/useWebSocket.js:28:37)\n      at useRealtimeNotifications (src/hooks/useRealtimeNotifications.js:20:63)\n      at NotificationCenter (src/components/notifications/NotificationCenter.jsx:39:31)\n      at Object.react-stack-bottom-frame (../node_modules/react-dom/cjs/react-dom-client.development.js:23863:20)\n      at renderWithHooks (../node_modules/react-dom/cjs/react-dom-client.development.js:5529:22)\n      at updateFunctionComponent (../node_modules/react-dom/cjs/react-dom-client.development.js:8897:19)\n      at beginWork (../node_modules/react-dom/cjs/react-dom-client.development.js:10522:18)\n      at runWithFiberInDEV (../node_modules/react-dom/cjs/react-dom-client.development.js:1522:13)\n      at performUnitOfWork (../node_modules/react-dom/cjs/react-dom-client.development.js:15140:22)\n      at workLoopSync (../node_modules/react-dom/cjs/react-dom-client.development.js:14956:41)\n      at renderRootSync (../node_modules/react-dom/cjs/react-dom-client.development.js:14936:11)\n      at performWorkOnRoot (../node_modules/react-dom/cjs/react-dom-client.development.js:14462:44)\n      at performWorkOnRootViaSchedulerTask (../node_modules/react-dom/cjs/react-dom-client.development.js:16216:7)\n      at flushActQueue (../node_modules/react/cjs/react.development.js:566:34)\n      at process.env.NODE_ENV.exports.act (../node_modules/react/cjs/react.development.js:859:10)\n      at ../node_modules/@testing-library/react/dist/act-compat.js:47:25\n      at renderRoot (../node_modules/@testing-library/react/dist/pure.js:190:26)\n      at render (../node_modules/@testing-library/react/dist/pure.js:292:10)\n      at Object.<anonymous> (src/components/notifications/NotificationCenter.test.jsx:332:11)\n\nFAIL src/utils/__tests__/env.test.js\n  ● Test suite failed to run\n\n    Jest encountered an unexpected token\n\n    Jest failed to parse a file. This happens e.g. when your code or its dependencies use non-standard JavaScript syntax, or when Jest is not configured to support such syntax.\n\n    Out of the box Jest supports Babel, which will be used to transform your files into valid JS based on your Babel configuration.\n\n    By default \"node_modules\" folder is ignored by transformers.\n\n    Here's what you can do:\n     • If you are trying to use ECMAScript Modules, see https://jestjs.io/docs/ecmascript-modules for how to enable it.\n     • If you are trying to use TypeScript, see https://jestjs.io/docs/getting-started#using-typescript\n     • To have some of your \"node_modules\" files transformed, you can specify a custom \"transformIgnorePatterns\" in your config.\n     • If you need a custom transformation, specify a \"transform\" option in your config.\n     • If you simply want to mock your non-JS modules (e.g. binary assets) you can stub them out with the \"moduleNameMapper\" config option.\n\n    You'll find more details and examples of these config options in the docs:\n    https://jestjs.io/docs/configuration\n    For information about custom transformations, see:\n    https://jestjs.io/docs/code-transformation\n\n    Details:\n\n    E:\\AlexVenturesStudio\\Nexa_Manager_whit_Task_Master\\web-app\\src\\utils\\env.ts:23\n      if (typeof import.meta !== 'undefined' && import.meta.env) {\n                        ^^^^\n\n    SyntaxError: Cannot use 'import.meta' outside a module\n\n    \u001b[0m\u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 1 |\u001b[39m \u001b[36mconst\u001b[39m { getEnvVar\u001b[33m,\u001b[39m isDevelopment\u001b[33m,\u001b[39m isProduction } \u001b[33m=\u001b[39m require(\u001b[32m'../env'\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m   |\u001b[39m                                                    \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 2 |\u001b[39m\n     \u001b[90m 3 |\u001b[39m describe(\u001b[32m'Environment Utility'\u001b[39m\u001b[33m,\u001b[39m () \u001b[33m=>\u001b[39m {\n     \u001b[90m 4 |\u001b[39m   beforeEach(() \u001b[33m=>\u001b[39m {\u001b[0m\n\n      at Runtime.createScriptFromCode (../node_modules/jest-runtime/build/index.js:1314:40)\n      at Object.require (src/utils/__tests__/env.test.js:1:52)\n\nFAIL src/lib/__tests__/taxCalculationService.test.js\n  ● Test suite failed to run\n\n    Configuration error:\n\n    Could not locate module @lib/taxCalculationService mapped as:\n    E:\\AlexVenturesStudio\\Nexa_Manager_whit_Task_Master\\web-app\\src\\lib\\$1.\n\n    Please check your configuration for these entries:\n    {\n      \"moduleNameMapper\": {\n        \"/^@lib\\/(.*)$/\": \"E:\\AlexVenturesStudio\\Nexa_Manager_whit_Task_Master\\web-app\\src\\lib\\$1\"\n      },\n      \"resolver\": undefined\n    }\n\n    \u001b[0m\u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 1 |\u001b[39m \u001b[36mimport\u001b[39m {\n     \u001b[90m   |\u001b[39m \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 2 |\u001b[39m   \u001b[33mTaxCalculationService\u001b[39m\u001b[33m,\u001b[39m\n     \u001b[90m 3 |\u001b[39m   \u001b[33mIVA_RATES\u001b[39m\u001b[33m,\u001b[39m\n     \u001b[90m 4 |\u001b[39m   \u001b[33mWITHHOLDING_RATES\u001b[39m\u001b[33m,\u001b[39m\u001b[0m\n\n      at createNoMappedModuleFoundError (../node_modules/jest-resolve/build/index.js:1117:17)\n      at Object.require (src/lib/__tests__/taxCalculationService.test.js:1:1)\n\nFAIL src/services/__tests__/reportingService.test.js\n  ● Test suite failed to run\n\n    Cannot find module 'vitest' from 'src/services/__tests__/reportingService.test.js'\n\n    \u001b[0m\u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 1 |\u001b[39m \u001b[36mimport\u001b[39m { vi } \u001b[36mfrom\u001b[39m \u001b[32m'vitest'\u001b[39m\u001b[33m;\u001b[39m\n     \u001b[90m   |\u001b[39m \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 2 |\u001b[39m \u001b[36mimport\u001b[39m \u001b[33m*\u001b[39m \u001b[36mas\u001b[39m reportingService \u001b[36mfrom\u001b[39m \u001b[32m'../reportingService'\u001b[39m\u001b[33m;\u001b[39m\n     \u001b[90m 3 |\u001b[39m \u001b[36mimport\u001b[39m { supabase } \u001b[36mfrom\u001b[39m \u001b[32m'../supabase'\u001b[39m\u001b[33m;\u001b[39m\n     \u001b[90m 4 |\u001b[39m\u001b[0m\n\n      at Resolver._throwModNotFoundError (../node_modules/jest-resolve/build/index.js:863:11)\n      at Object.require (src/services/__tests__/reportingService.test.js:1:1)\n\nFAIL src/lib/__tests__/financialService.test.js\n  ● Test suite failed to run\n\n    Cannot find module '../incomeService' from 'src/lib/__tests__/financialService.test.js'\n\n    \u001b[0m \u001b[90m 28 |\u001b[39m\n     \u001b[90m 29 |\u001b[39m \u001b[90m// Mock incomeService and expenseService\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 30 |\u001b[39m jest\u001b[33m.\u001b[39mmock(\u001b[32m'../incomeService'\u001b[39m\u001b[33m,\u001b[39m () \u001b[33m=>\u001b[39m ({\n     \u001b[90m    |\u001b[39m      \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 31 |\u001b[39m   getIncomeStats\u001b[33m:\u001b[39m jest\u001b[33m.\u001b[39mfn()\u001b[33m,\u001b[39m\n     \u001b[90m 32 |\u001b[39m   getIncomeTrend\u001b[33m:\u001b[39m jest\u001b[33m.\u001b[39mfn()\u001b[33m,\u001b[39m\n     \u001b[90m 33 |\u001b[39m }))\u001b[33m;\u001b[39m\u001b[0m\n\n      at Resolver._throwModNotFoundError (../node_modules/jest-resolve/build/index.js:863:11)\n      at Object.mock (src/lib/__tests__/financialService.test.js:30:6)\n\nFAIL src/lib/__tests__/emailSearchService.test.js\n  ● Test suite failed to run\n\n    Cannot find module '../emailSearchService' from 'src/lib/__tests__/emailSearchService.test.js'\n\n    \u001b[0m \u001b[90m 3 |\u001b[39m \u001b[90m */\u001b[39m\n     \u001b[90m 4 |\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 5 |\u001b[39m \u001b[36mimport\u001b[39m emailSearchService \u001b[36mfrom\u001b[39m \u001b[32m'../emailSearchService'\u001b[39m\u001b[33m;\u001b[39m\n     \u001b[90m   |\u001b[39m \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 6 |\u001b[39m \u001b[36mimport\u001b[39m { supabase } \u001b[36mfrom\u001b[39m \u001b[32m'../supabaseClient'\u001b[39m\u001b[33m;\u001b[39m\n     \u001b[90m 7 |\u001b[39m \u001b[36mimport\u001b[39m \u001b[33mLogger\u001b[39m \u001b[36mfrom\u001b[39m \u001b[32m'@utils/Logger'\u001b[39m\u001b[33m;\u001b[39m\n     \u001b[90m 8 |\u001b[39m\u001b[0m\n\n      at Resolver._throwModNotFoundError (../node_modules/jest-resolve/build/index.js:863:11)\n      at Object.require (src/lib/__tests__/emailSearchService.test.js:5:1)\n\nFAIL src/components/reports/__tests__/Reports.test.jsx\n  ● Test suite failed to run\n\n    Configuration error:\n\n    Could not locate module @lib/invoiceAnalyticsService mapped as:\n    E:\\AlexVenturesStudio\\Nexa_Manager_whit_Task_Master\\web-app\\src\\lib\\$1.\n\n    Please check your configuration for these entries:\n    {\n      \"moduleNameMapper\": {\n        \"/^@lib\\/(.*)$/\": \"E:\\AlexVenturesStudio\\Nexa_Manager_whit_Task_Master\\web-app\\src\\lib\\$1\"\n      },\n      \"resolver\": undefined\n    }\n\n    \u001b[0m \u001b[90m 25 |\u001b[39m\n     \u001b[90m 26 |\u001b[39m \u001b[90m// Mock other aliases\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 27 |\u001b[39m jest\u001b[33m.\u001b[39mmock(\u001b[32m'@lib/invoiceAnalyticsService'\u001b[39m\u001b[33m,\u001b[39m () \u001b[33m=>\u001b[39m ({\n     \u001b[90m    |\u001b[39m      \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 28 |\u001b[39m   \u001b[36mdefault\u001b[39m\u001b[33m:\u001b[39m {\n     \u001b[90m 29 |\u001b[39m     getRevenueAnalytics\u001b[33m:\u001b[39m jest\u001b[33m.\u001b[39mfn()\u001b[33m,\u001b[39m\n     \u001b[90m 30 |\u001b[39m     getClientAnalytics\u001b[33m:\u001b[39m jest\u001b[33m.\u001b[39mfn()\u001b[33m,\u001b[39m\u001b[0m\n\n      at createNoMappedModuleFoundError (../node_modules/jest-resolve/build/index.js:1117:17)\n      at Object.mock (src/components/reports/__tests__/Reports.test.jsx:27:6)\n\nFAIL src/lib/__tests__/emailStorageService.test.js\n  ● Test suite failed to run\n\n    Cannot find module '../emailStorageService' from 'src/lib/__tests__/emailStorageService.test.js'\n\n    \u001b[0m \u001b[90m 3 |\u001b[39m \u001b[90m */\u001b[39m\n     \u001b[90m 4 |\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 5 |\u001b[39m \u001b[36mimport\u001b[39m emailStorageService \u001b[36mfrom\u001b[39m \u001b[32m'../emailStorageService'\u001b[39m\u001b[33m;\u001b[39m\n     \u001b[90m   |\u001b[39m \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 6 |\u001b[39m \u001b[36mimport\u001b[39m { supabase } \u001b[36mfrom\u001b[39m \u001b[32m'../supabaseClient'\u001b[39m\u001b[33m;\u001b[39m\n     \u001b[90m 7 |\u001b[39m \u001b[36mimport\u001b[39m \u001b[33mLogger\u001b[39m \u001b[36mfrom\u001b[39m \u001b[32m'@utils/Logger'\u001b[39m\u001b[33m;\u001b[39m\n     \u001b[90m 8 |\u001b[39m\u001b[0m\n\n      at Resolver._throwModNotFoundError (../node_modules/jest-resolve/build/index.js:863:11)\n      at Object.require (src/lib/__tests__/emailStorageService.test.js:5:1)\n\nFAIL src/lib/__tests__/emailService.test.js\n  ● Test suite failed to run\n\n    Cannot find module '../quotePdfService' from 'src/lib/__tests__/emailService.test.js'\n\n    \u001b[0m \u001b[90m 10 |\u001b[39m\n     \u001b[90m 11 |\u001b[39m \u001b[90m// Mock quotePdfService completely\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 12 |\u001b[39m jest\u001b[33m.\u001b[39mmock(\u001b[32m'../quotePdfService'\u001b[39m\u001b[33m,\u001b[39m () \u001b[33m=>\u001b[39m ({\n     \u001b[90m    |\u001b[39m      \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 13 |\u001b[39m   \u001b[36mdefault\u001b[39m\u001b[33m:\u001b[39m {\n     \u001b[90m 14 |\u001b[39m     generateBlob\u001b[33m:\u001b[39m jest\u001b[33m.\u001b[39mfn()\u001b[33m.\u001b[39mmockResolvedValue(\u001b[36mnew\u001b[39m \u001b[33mBlob\u001b[39m([\u001b[32m'mock-pdf'\u001b[39m]\u001b[33m,\u001b[39m { type\u001b[33m:\u001b[39m \u001b[32m'application/pdf'\u001b[39m }))\u001b[33m,\u001b[39m\n     \u001b[90m 15 |\u001b[39m   }\u001b[33m,\u001b[39m\u001b[0m\n\n      at Resolver._throwModNotFoundError (../node_modules/jest-resolve/build/index.js:863:11)\n      at Object.mock (src/lib/__tests__/emailService.test.js:12:6)\n\nFAIL src/lib/__tests__/emailTemplateService.test.js\n  ● Test suite failed to run\n\n    Cannot find module '../emailTemplateService' from 'src/lib/__tests__/emailTemplateService.test.js'\n\n    \u001b[0m\u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 1 |\u001b[39m \u001b[36mimport\u001b[39m emailTemplateService \u001b[36mfrom\u001b[39m \u001b[32m'../emailTemplateService'\u001b[39m\u001b[33m;\u001b[39m\n     \u001b[90m   |\u001b[39m \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 2 |\u001b[39m\n     \u001b[90m 3 |\u001b[39m \u001b[90m// Mock Supabase\u001b[39m\n     \u001b[90m 4 |\u001b[39m \u001b[36mconst\u001b[39m mockSupabase \u001b[33m=\u001b[39m {\u001b[0m\n\n      at Resolver._throwModNotFoundError (../node_modules/jest-resolve/build/index.js:863:11)\n      at Object.require (src/lib/__tests__/emailTemplateService.test.js:1:1)\n\nFAIL src/features/email/components/__tests__/EmailAttachmentManager.test.jsx\n  ● Test suite failed to run\n\n    Configuration error:\n\n    Could not locate module @lib/emailAttachmentService mapped as:\n    E:\\AlexVenturesStudio\\Nexa_Manager_whit_Task_Master\\web-app\\src\\lib\\$1.\n\n    Please check your configuration for these entries:\n    {\n      \"moduleNameMapper\": {\n        \"/^@lib\\/(.*)$/\": \"E:\\AlexVenturesStudio\\Nexa_Manager_whit_Task_Master\\web-app\\src\\lib\\$1\"\n      },\n      \"resolver\": undefined\n    }\n\n    \u001b[0m \u001b[90m 19 |\u001b[39m\n     \u001b[90m 20 |\u001b[39m \u001b[36mimport\u001b[39m \u001b[33mEmailAttachmentManager\u001b[39m \u001b[36mfrom\u001b[39m \u001b[32m'../EmailAttachmentManager'\u001b[39m\u001b[33m;\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 21 |\u001b[39m \u001b[36mimport\u001b[39m emailAttachmentService \u001b[36mfrom\u001b[39m \u001b[32m'@lib/emailAttachmentService'\u001b[39m\u001b[33m;\u001b[39m\n     \u001b[90m    |\u001b[39m \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 22 |\u001b[39m \u001b[36mimport\u001b[39m { \u001b[33mLogger\u001b[39m } \u001b[36mfrom\u001b[39m \u001b[32m'@utils/Logger'\u001b[39m\u001b[33m;\u001b[39m\n     \u001b[90m 23 |\u001b[39m\n     \u001b[90m 24 |\u001b[39m \u001b[90m// Setup user-event with clipboard disabled to avoid conflicts\u001b[39m\u001b[0m\n\n      at createNoMappedModuleFoundError (../node_modules/jest-resolve/build/index.js:1117:17)\n      at Object.require (src/features/email/components/__tests__/EmailAttachmentManager.test.jsx:21:1)\n\nFAIL src/lib/__tests__/emailRecoveryService.test.js\n  ● Test suite failed to run\n\n    Cannot find module '../emailRecoveryService' from 'src/lib/__tests__/emailRecoveryService.test.js'\n\n    \u001b[0m \u001b[90m 3 |\u001b[39m \u001b[90m */\u001b[39m\n     \u001b[90m 4 |\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 5 |\u001b[39m \u001b[36mimport\u001b[39m emailRecoveryService \u001b[36mfrom\u001b[39m \u001b[32m'../emailRecoveryService'\u001b[39m\u001b[33m;\u001b[39m\n     \u001b[90m   |\u001b[39m \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 6 |\u001b[39m \u001b[36mimport\u001b[39m { supabase } \u001b[36mfrom\u001b[39m \u001b[32m'../supabaseClient'\u001b[39m\u001b[33m;\u001b[39m\n     \u001b[90m 7 |\u001b[39m \u001b[36mimport\u001b[39m \u001b[33mLogger\u001b[39m \u001b[36mfrom\u001b[39m \u001b[32m'@utils/Logger'\u001b[39m\u001b[33m;\u001b[39m\n     \u001b[90m 8 |\u001b[39m\u001b[0m\n\n      at Resolver._throwModNotFoundError (../node_modules/jest-resolve/build/index.js:863:11)\n      at Object.require (src/lib/__tests__/emailRecoveryService.test.js:5:1)\n\nFAIL src/lib/__tests__/emailSettingsService.test.js\n  ● Test suite failed to run\n\n    Cannot find module '../emailSettingsService' from 'src/lib/__tests__/emailSettingsService.test.js'\n\n    \u001b[0m \u001b[90m 3 |\u001b[39m \u001b[90m */\u001b[39m\n     \u001b[90m 4 |\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 5 |\u001b[39m \u001b[36mimport\u001b[39m emailSettingsService \u001b[36mfrom\u001b[39m \u001b[32m'../emailSettingsService'\u001b[39m\u001b[33m;\u001b[39m\n     \u001b[90m   |\u001b[39m \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 6 |\u001b[39m \u001b[36mimport\u001b[39m { supabase } \u001b[36mfrom\u001b[39m \u001b[32m'../supabaseClient'\u001b[39m\u001b[33m;\u001b[39m\n     \u001b[90m 7 |\u001b[39m \u001b[36mimport\u001b[39m \u001b[33mLogger\u001b[39m \u001b[36mfrom\u001b[39m \u001b[32m'@utils/Logger'\u001b[39m\u001b[33m;\u001b[39m\n     \u001b[90m 8 |\u001b[39m\u001b[0m\n\n      at Resolver._throwModNotFoundError (../node_modules/jest-resolve/build/index.js:863:11)\n      at Object.require (src/lib/__tests__/emailSettingsService.test.js:5:1)\n\nFAIL src/features/documents/components/__tests__/ArchiveDocumentsModal.test.jsx\n  ● Test suite failed to run\n\n    Configuration error:\n\n    Could not locate module @/featuresi18n mapped as:\n    E:\\AlexVenturesStudio\\Nexa_Manager_whit_Task_Master\\web-app\\src\\$1.\n\n    Please check your configuration for these entries:\n    {\n      \"moduleNameMapper\": {\n        \"/^@\\/(.*)$/\": \"E:\\AlexVenturesStudio\\Nexa_Manager_whit_Task_Master\\web-app\\src\\$1\"\n      },\n      \"resolver\": undefined\n    }\n\n    \u001b[0m \u001b[90m 2 |\u001b[39m \u001b[36mimport\u001b[39m { render\u001b[33m,\u001b[39m screen\u001b[33m,\u001b[39m fireEvent\u001b[33m,\u001b[39m waitFor } \u001b[36mfrom\u001b[39m \u001b[32m'@testing-library/react'\u001b[39m\u001b[33m;\u001b[39m\n     \u001b[90m 3 |\u001b[39m \u001b[36mimport\u001b[39m { \u001b[33mI18nextProvider\u001b[39m } \u001b[36mfrom\u001b[39m \u001b[32m'react-i18next'\u001b[39m\u001b[33m;\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 4 |\u001b[39m \u001b[36mimport\u001b[39m i18n \u001b[36mfrom\u001b[39m \u001b[32m'@/features\\i18n'\u001b[39m\u001b[33m;\u001b[39m\n     \u001b[90m   |\u001b[39m \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 5 |\u001b[39m \u001b[36mimport\u001b[39m \u001b[33mArchiveDocumentsModal\u001b[39m \u001b[36mfrom\u001b[39m \u001b[32m'../ArchiveDocumentsModal'\u001b[39m\u001b[33m;\u001b[39m\n     \u001b[90m 6 |\u001b[39m\n     \u001b[90m 7 |\u001b[39m \u001b[90m// Mock documents data\u001b[39m\u001b[0m\n\n      at createNoMappedModuleFoundError (../node_modules/jest-resolve/build/index.js:1117:17)\n      at Object.require (src/features/documents/components/__tests__/ArchiveDocumentsModal.test.jsx:4:1)\n\nFAIL src/lib/__tests__/emailProviderService.test.js\n  ● Test suite failed to run\n\n    Cannot find module '../emailProviderService' from 'src/lib/__tests__/emailProviderService.test.js'\n\n    \u001b[0m \u001b[90m 3 |\u001b[39m \u001b[90m */\u001b[39m\n     \u001b[90m 4 |\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 5 |\u001b[39m \u001b[36mimport\u001b[39m emailProviderService \u001b[36mfrom\u001b[39m \u001b[32m'../emailProviderService'\u001b[39m\u001b[33m;\u001b[39m\n     \u001b[90m   |\u001b[39m \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 6 |\u001b[39m \u001b[36mimport\u001b[39m { supabase } \u001b[36mfrom\u001b[39m \u001b[32m'../supabaseClient'\u001b[39m\u001b[33m;\u001b[39m\n     \u001b[90m 7 |\u001b[39m \u001b[36mimport\u001b[39m \u001b[33mLogger\u001b[39m \u001b[36mfrom\u001b[39m \u001b[32m'@utils/Logger'\u001b[39m\u001b[33m;\u001b[39m\n     \u001b[90m 8 |\u001b[39m\u001b[0m\n\n      at Resolver._throwModNotFoundError (../node_modules/jest-resolve/build/index.js:863:11)\n      at Object.require (src/lib/__tests__/emailProviderService.test.js:5:1)\n\nFAIL src/lib/__tests__/emailManagementService.test.js\n  ● Test suite failed to run\n\n    Cannot find module '../emailStorageService' from 'src/lib/__tests__/emailManagementService.test.js'\n\n    \u001b[0m \u001b[90m 4 |\u001b[39m\n     \u001b[90m 5 |\u001b[39m \u001b[90m// Mock the dependencies\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 6 |\u001b[39m jest\u001b[33m.\u001b[39mmock(\u001b[32m'../emailStorageService'\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m   |\u001b[39m      \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 7 |\u001b[39m jest\u001b[33m.\u001b[39mmock(\u001b[32m'../emailProviderService'\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m 8 |\u001b[39m jest\u001b[33m.\u001b[39mmock(\u001b[32m'../supabaseClient'\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m 9 |\u001b[39m\u001b[0m\n\n      at Resolver._throwModNotFoundError (../node_modules/jest-resolve/build/index.js:863:11)\n      at Object.mock (src/lib/__tests__/emailManagementService.test.js:6:6)\n\nFAIL src/lib/__tests__/emailAttachmentService.test.js\n  ● Test suite failed to run\n\n    Cannot find module '../emailAttachmentService' from 'src/lib/__tests__/emailAttachmentService.test.js'\n\n    \u001b[0m \u001b[90m 3 |\u001b[39m \u001b[90m */\u001b[39m\n     \u001b[90m 4 |\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 5 |\u001b[39m \u001b[36mimport\u001b[39m emailAttachmentService \u001b[36mfrom\u001b[39m \u001b[32m'../emailAttachmentService'\u001b[39m\u001b[33m;\u001b[39m\n     \u001b[90m   |\u001b[39m \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 6 |\u001b[39m \u001b[36mimport\u001b[39m { supabase } \u001b[36mfrom\u001b[39m \u001b[32m'../supabaseClient'\u001b[39m\u001b[33m;\u001b[39m\n     \u001b[90m 7 |\u001b[39m \u001b[36mimport\u001b[39m \u001b[33mLogger\u001b[39m \u001b[36mfrom\u001b[39m \u001b[32m'@utils/Logger'\u001b[39m\u001b[33m;\u001b[39m\n     \u001b[90m 8 |\u001b[39m\u001b[0m\n\n      at Resolver._throwModNotFoundError (../node_modules/jest-resolve/build/index.js:863:11)\n      at Object.require (src/lib/__tests__/emailAttachmentService.test.js:5:1)\n\nPASS src/features/email/components/__tests__/EmailList.test.jsx\nFAIL src/lib/__tests__/businessEmailIntegration.test.js\n  ● Test suite failed to run\n\n    Cannot find module '../businessEmailIntegration.js' from 'src/lib/__tests__/businessEmailIntegration.test.js'\n\n    \u001b[0m \u001b[90m 3 |\u001b[39m \u001b[90m */\u001b[39m\n     \u001b[90m 4 |\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 5 |\u001b[39m \u001b[36mimport\u001b[39m businessEmailIntegration \u001b[36mfrom\u001b[39m \u001b[32m'../businessEmailIntegration.js'\u001b[39m\u001b[33m;\u001b[39m\n     \u001b[90m   |\u001b[39m \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 6 |\u001b[39m \u001b[36mimport\u001b[39m { \u001b[33mInvoiceService\u001b[39m } \u001b[36mfrom\u001b[39m \u001b[32m'../invoiceService.js'\u001b[39m\u001b[33m;\u001b[39m\n     \u001b[90m 7 |\u001b[39m \u001b[36mimport\u001b[39m { \u001b[33mQuoteService\u001b[39m } \u001b[36mfrom\u001b[39m \u001b[32m'../quoteService.js'\u001b[39m\u001b[33m;\u001b[39m\n     \u001b[90m 8 |\u001b[39m \u001b[36mimport\u001b[39m clientEmailService \u001b[36mfrom\u001b[39m \u001b[32m'../clientEmailService.js'\u001b[39m\u001b[33m;\u001b[39m\u001b[0m\n\n      at Resolver._throwModNotFoundError (../node_modules/jest-resolve/build/index.js:863:11)\n      at Object.require (src/lib/__tests__/businessEmailIntegration.test.js:5:1)\n\nPASS src/features/scanner/__tests__/services/documentStorageService.test.ts\nFAIL src/lib/__tests__/authService.test.js\n  ● Test suite failed to run\n\n    Configuration error:\n\n    Could not locate module @lib/authService mapped as:\n    E:\\AlexVenturesStudio\\Nexa_Manager_whit_Task_Master\\web-app\\src\\lib\\$1.\n\n    Please check your configuration for these entries:\n    {\n      \"moduleNameMapper\": {\n        \"/^@lib\\/(.*)$/\": \"E:\\AlexVenturesStudio\\Nexa_Manager_whit_Task_Master\\web-app\\src\\lib\\$1\"\n      },\n      \"resolver\": undefined\n    }\n\n    \u001b[0m\u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 1 |\u001b[39m \u001b[36mimport\u001b[39m { \u001b[33mAuthService\u001b[39m } \u001b[36mfrom\u001b[39m \u001b[32m'@lib/authService'\u001b[39m\u001b[33m;\u001b[39m\n     \u001b[90m   |\u001b[39m \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 2 |\u001b[39m \u001b[36mimport\u001b[39m { supabase } \u001b[36mfrom\u001b[39m \u001b[32m'@lib/supabaseClient'\u001b[39m\u001b[33m;\u001b[39m\n     \u001b[90m 3 |\u001b[39m \u001b[36mimport\u001b[39m \u001b[33mLogger\u001b[39m \u001b[36mfrom\u001b[39m \u001b[32m'@utils/Logger'\u001b[39m\u001b[33m;\u001b[39m\n     \u001b[90m 4 |\u001b[39m\u001b[0m\n\n      at createNoMappedModuleFoundError (../node_modules/jest-resolve/build/index.js:1117:17)\n      at Object.require (src/lib/__tests__/authService.test.js:1:1)\n\nFAIL src/lib/__tests__/emailAnalyticsService.test.js\n  ● Test suite failed to run\n\n    Cannot find module 'vitest' from 'src/lib/__tests__/emailAnalyticsService.test.js'\n\n    \u001b[0m\u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 1 |\u001b[39m \u001b[36mimport\u001b[39m { describe\u001b[33m,\u001b[39m it\u001b[33m,\u001b[39m expect\u001b[33m,\u001b[39m beforeEach\u001b[33m,\u001b[39m afterEach\u001b[33m,\u001b[39m vi } \u001b[36mfrom\u001b[39m \u001b[32m'vitest'\u001b[39m\u001b[33m;\u001b[39m\n     \u001b[90m   |\u001b[39m \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 2 |\u001b[39m \u001b[36mimport\u001b[39m emailAnalyticsService \u001b[36mfrom\u001b[39m \u001b[32m'@lib/emailAnalyticsService'\u001b[39m\u001b[33m;\u001b[39m\n     \u001b[90m 3 |\u001b[39m \u001b[36mimport\u001b[39m emailErrorHandler \u001b[36mfrom\u001b[39m \u001b[32m'@features/email'\u001b[39m\u001b[33m;\u001b[39m\n     \u001b[90m 4 |\u001b[39m \u001b[36mimport\u001b[39m { supabase } \u001b[36mfrom\u001b[39m \u001b[32m'@lib/supabaseClient'\u001b[39m\u001b[33m;\u001b[39m\u001b[0m\n\n      at Resolver._throwModNotFoundError (../node_modules/jest-resolve/build/index.js:863:11)\n      at Object.require (src/lib/__tests__/emailAnalyticsService.test.js:1:1)\n\nFAIL src/components/reports/__tests__/ReportGenerator.test.jsx\n  ● Test suite failed to run\n\n    Cannot find module '../ReportGenerator' from 'src/components/reports/__tests__/ReportGenerator.test.jsx'\n\n    \u001b[0m \u001b[90m 3 |\u001b[39m \u001b[36mimport\u001b[39m userEvent \u001b[36mfrom\u001b[39m \u001b[32m'@testing-library/user-event'\u001b[39m\u001b[33m;\u001b[39m\n     \u001b[90m 4 |\u001b[39m \u001b[36mimport\u001b[39m { \u001b[33mQueryClient\u001b[39m\u001b[33m,\u001b[39m \u001b[33mQueryProvider\u001b[39m } \u001b[36mfrom\u001b[39m \u001b[32m'@tanstack/react-query'\u001b[39m\u001b[33m;\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 5 |\u001b[39m \u001b[36mimport\u001b[39m \u001b[33mReportGenerator\u001b[39m \u001b[36mfrom\u001b[39m \u001b[32m'../ReportGenerator'\u001b[39m\u001b[33m;\u001b[39m\n     \u001b[90m   |\u001b[39m \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 6 |\u001b[39m \u001b[36mimport\u001b[39m \u001b[33m*\u001b[39m \u001b[36mas\u001b[39m reportingService \u001b[36mfrom\u001b[39m \u001b[32m'@/services\\reportingService'\u001b[39m\u001b[33m;\u001b[39m\n     \u001b[90m 7 |\u001b[39m\n     \u001b[90m 8 |\u001b[39m \u001b[90m// Mock services\u001b[39m\u001b[0m\n\n      at Resolver._throwModNotFoundError (../node_modules/jest-resolve/build/index.js:863:11)\n      at Object.require (src/components/reports/__tests__/ReportGenerator.test.jsx:5:1)\n\nPASS src/features/email/components/__tests__/EmailViewer.test.jsx\nFAIL src/components/__tests__/EmailAnalyticsDashboard.test.jsx\n  ● Test suite failed to run\n\n    Cannot find module 'vitest' from 'src/components/__tests__/EmailAnalyticsDashboard.test.jsx'\n\n    \u001b[0m\u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 1 |\u001b[39m \u001b[36mimport\u001b[39m { describe\u001b[33m,\u001b[39m it\u001b[33m,\u001b[39m expect\u001b[33m,\u001b[39m beforeEach\u001b[33m,\u001b[39m afterEach\u001b[33m,\u001b[39m vi } \u001b[36mfrom\u001b[39m \u001b[32m'vitest'\u001b[39m\u001b[33m;\u001b[39m\n     \u001b[90m   |\u001b[39m \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 2 |\u001b[39m \u001b[36mimport\u001b[39m { render\u001b[33m,\u001b[39m screen\u001b[33m,\u001b[39m fireEvent\u001b[33m,\u001b[39m waitFor } \u001b[36mfrom\u001b[39m \u001b[32m'@testing-library/react'\u001b[39m\u001b[33m;\u001b[39m\n     \u001b[90m 3 |\u001b[39m \u001b[36mimport\u001b[39m { \u001b[33mBrowserRouter\u001b[39m } \u001b[36mfrom\u001b[39m \u001b[32m'react-router-dom'\u001b[39m\u001b[33m;\u001b[39m\n     \u001b[90m 4 |\u001b[39m \u001b[36mimport\u001b[39m \u001b[33mEmailAnalyticsDashboard\u001b[39m \u001b[36mfrom\u001b[39m \u001b[32m'@components/EmailAnalyticsDashboard'\u001b[39m\u001b[33m;\u001b[39m\u001b[0m\n\n      at Resolver._throwModNotFoundError (../node_modules/jest-resolve/build/index.js:863:11)\n      at Object.require (src/components/__tests__/EmailAnalyticsDashboard.test.jsx:1:1)\n\nFAIL src/hooks/__tests__/useReports.test.js\n  ● Test suite failed to run\n\n    Cannot find module '../useReports' from 'src/hooks/__tests__/useReports.test.js'\n\n    \u001b[0m \u001b[90m 1 |\u001b[39m \u001b[36mimport\u001b[39m { renderHook\u001b[33m,\u001b[39m waitFor } \u001b[36mfrom\u001b[39m \u001b[32m'@testing-library/react'\u001b[39m\u001b[33m;\u001b[39m\n     \u001b[90m 2 |\u001b[39m \u001b[36mimport\u001b[39m { \u001b[33mQueryClient\u001b[39m\u001b[33m,\u001b[39m \u001b[33mQueryProvider\u001b[39m } \u001b[36mfrom\u001b[39m \u001b[32m'@tanstack/react-query'\u001b[39m\u001b[33m;\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 3 |\u001b[39m \u001b[36mimport\u001b[39m { useReports\u001b[33m,\u001b[39m useReportMetrics\u001b[33m,\u001b[39m useReportGeneration\u001b[33m,\u001b[39m useScheduledReports } \u001b[36mfrom\u001b[39m \u001b[32m'../useReports'\u001b[39m\u001b[33m;\u001b[39m\n     \u001b[90m   |\u001b[39m \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 4 |\u001b[39m \u001b[36mimport\u001b[39m \u001b[33m*\u001b[39m \u001b[36mas\u001b[39m reportingService \u001b[36mfrom\u001b[39m \u001b[32m'../../services/reportingService'\u001b[39m\u001b[33m;\u001b[39m\n     \u001b[90m 5 |\u001b[39m\n     \u001b[90m 6 |\u001b[39m \u001b[90m// Mock services\u001b[39m\u001b[0m\n\n      at Resolver._throwModNotFoundError (../node_modules/jest-resolve/build/index.js:863:11)\n      at Object.require (src/hooks/__tests__/useReports.test.js:3:1)\n\nFAIL src/components/reports/__tests__/ReportScheduler.test.jsx\n  ● Test suite failed to run\n\n    Cannot find module '@/services\r    eportingService' from 'src/components/reports/__tests__/ReportScheduler.test.jsx'\n\n    \u001b[0m \u001b[90m 4 |\u001b[39m \u001b[36mimport\u001b[39m { \u001b[33mQueryClient\u001b[39m\u001b[33m,\u001b[39m \u001b[33mQueryProvider\u001b[39m } \u001b[36mfrom\u001b[39m \u001b[32m'@tanstack/react-query'\u001b[39m\u001b[33m;\u001b[39m\n     \u001b[90m 5 |\u001b[39m \u001b[36mimport\u001b[39m \u001b[33mReportScheduler\u001b[39m \u001b[36mfrom\u001b[39m \u001b[32m'../ReportScheduler'\u001b[39m\u001b[33m;\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 6 |\u001b[39m \u001b[36mimport\u001b[39m \u001b[33m*\u001b[39m \u001b[36mas\u001b[39m reportingService \u001b[36mfrom\u001b[39m \u001b[32m'@/services\\reportingService'\u001b[39m\u001b[33m;\u001b[39m\n     \u001b[90m   |\u001b[39m \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 7 |\u001b[39m\n     \u001b[90m 8 |\u001b[39m \u001b[90m// Mock services\u001b[39m\n     \u001b[90m 9 |\u001b[39m jest\u001b[33m.\u001b[39mmock(\u001b[32m'../../../services/reportingService'\u001b[39m)\u001b[33m;\u001b[39m\u001b[0m\n\n      at Resolver._throwModNotFoundError (../node_modules/jest-resolve/build/index.js:863:11)\n      at Object.require (src/components/reports/__tests__/ReportScheduler.test.jsx:6:1)\n\nFAIL src/hooks/__tests__/useEmails.test.js\n  ● Test suite failed to run\n\n    Cannot find module '../useEmails' from 'src/hooks/__tests__/useEmails.test.js'\n\n    \u001b[0m \u001b[90m 1 |\u001b[39m \u001b[36mimport\u001b[39m { renderHook\u001b[33m,\u001b[39m act } \u001b[36mfrom\u001b[39m \u001b[32m'@testing-library/react'\u001b[39m\u001b[33m;\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 2 |\u001b[39m \u001b[36mimport\u001b[39m { useEmails } \u001b[36mfrom\u001b[39m \u001b[32m'../useEmails'\u001b[39m\u001b[33m;\u001b[39m\n     \u001b[90m   |\u001b[39m \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 3 |\u001b[39m \u001b[36mimport\u001b[39m { \u001b[33mEmailProvider\u001b[39m\u001b[33m,\u001b[39m \u001b[33mAuthProvider\u001b[39m } \u001b[36mfrom\u001b[39m \u001b[32m'@/shared/state/providers'\u001b[39m\u001b[33m;\u001b[39m\n     \u001b[90m 4 |\u001b[39m \u001b[36mimport\u001b[39m { \u001b[33mWebSocketProvider\u001b[39m } \u001b[36mfrom\u001b[39m \u001b[32m'@providers/WebSocketProvider'\u001b[39m\u001b[33m;\u001b[39m\n     \u001b[90m 5 |\u001b[39m \u001b[36mimport\u001b[39m emailManagementService \u001b[36mfrom\u001b[39m \u001b[32m'@features/email'\u001b[39m\u001b[33m;\u001b[39m\u001b[0m\n\n      at Resolver._throwModNotFoundError (../node_modules/jest-resolve/build/index.js:863:11)\n      at Object.require (src/hooks/__tests__/useEmails.test.js:2:1)\n\nE:\\AlexVenturesStudio\\Nexa_Manager_whit_Task_Master\\web-app\\src\\features\\scanner\\services\\rateLimitingService.ts:6062\r\n      req.reject(new Error('Queue cleared'));\r\n                 ^\r\n\r\n[Error: Queue cleared]\r\n\r\nNode.js v20.12.1\r\nE:\\AlexVenturesStudio\\Nexa_Manager_whit_Task_Master\\web-app\\src\\features\\scanner\\services\\rateLimitingService.ts:6062\r\n      req.reject(new Error('Queue cleared'));\r\n                 ^\r\n\r\n[Error: Queue cleared]\r\n\r\nNode.js v20.12.1\r\nE:\\AlexVenturesStudio\\Nexa_Manager_whit_Task_Master\\web-app\\src\\features\\scanner\\services\\rateLimitingService.ts:6062\r\n      req.reject(new Error('Queue cleared'));\r\n                 ^\r\n\r\n[Error: Queue cleared]\r\n\r\nNode.js v20.12.1\r\nE:\\AlexVenturesStudio\\Nexa_Manager_whit_Task_Master\\web-app\\src\\features\\scanner\\services\\rateLimitingService.ts:6062\r\n      req.reject(new Error('Queue cleared'));\r\n                 ^\r\n\r\n[Error: Queue cleared]\r\n\r\nNode.js v20.12.1\r\nFAIL src/features/scanner/__tests__/services/rateLimitingService.test.ts\n  ● Test suite failed to run\n\n    Jest worker encountered 4 child process exceptions, exceeding retry limit\n\n      at ChildProcessWorker.initialize (../node_modules/jest-worker/build/index.js:805:21)\n\nFAIL src/features/scanner/__tests__/integration/ocrProviderFallback.test.ts (71.558 s)\n  ● OCR Provider Fallback Integration Tests › Provider Availability and Fallback Chain › should fallback to secondary provider when primary fails\n\n    thrown: \"Exceeded timeout of 10000 ms for a test.\n    Add a timeout value to this test to increase the timeout, if this is a long-running test. See https://jestjs.io/docs/api#testname-fn-timeout.\"\n\n    \u001b[0m \u001b[90m 136 |\u001b[39m     })\u001b[33m;\u001b[39m\n     \u001b[90m 137 |\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 138 |\u001b[39m     it(\u001b[32m'should fallback to secondary provider when primary fails'\u001b[39m\u001b[33m,\u001b[39m \u001b[36masync\u001b[39m () \u001b[33m=>\u001b[39m {\n     \u001b[90m     |\u001b[39m     \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 139 |\u001b[39m       \u001b[36mconst\u001b[39m mockOpenAIProvider \u001b[33m=\u001b[39m {\n     \u001b[90m 140 |\u001b[39m         isAvailable\u001b[33m:\u001b[39m jest\u001b[33m.\u001b[39mfn(() \u001b[33m=>\u001b[39m \u001b[36mtrue\u001b[39m)\u001b[33m,\u001b[39m\n     \u001b[90m 141 |\u001b[39m         extractText\u001b[33m:\u001b[39m jest\u001b[33m.\u001b[39mfn()\u001b[33m.\u001b[39mmockRejectedValue(\u001b[36mnew\u001b[39m \u001b[33mError\u001b[39m(\u001b[32m'OpenAI API error'\u001b[39m))\u001b[33m,\u001b[39m\u001b[0m\n\n      at it (src/features/scanner/__tests__/integration/ocrProviderFallback.test.ts:138:5)\n      at describe (src/features/scanner/__tests__/integration/ocrProviderFallback.test.ts:108:3)\n      at Object.describe (src/features/scanner/__tests__/integration/ocrProviderFallback.test.ts:47:1)\n\n  ● OCR Provider Fallback Integration Tests › Provider Availability and Fallback Chain › should use manual fallback when all AI providers fail\n\n    thrown: \"Exceeded timeout of 10000 ms for a test.\n    Add a timeout value to this test to increase the timeout, if this is a long-running test. See https://jestjs.io/docs/api#testname-fn-timeout.\"\n\n    \u001b[0m \u001b[90m 188 |\u001b[39m     })\u001b[33m;\u001b[39m\n     \u001b[90m 189 |\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 190 |\u001b[39m     it(\u001b[32m'should use manual fallback when all AI providers fail'\u001b[39m\u001b[33m,\u001b[39m \u001b[36masync\u001b[39m () \u001b[33m=>\u001b[39m {\n     \u001b[90m     |\u001b[39m     \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 191 |\u001b[39m       \u001b[36mconst\u001b[39m mockFailingProvider \u001b[33m=\u001b[39m {\n     \u001b[90m 192 |\u001b[39m         isAvailable\u001b[33m:\u001b[39m jest\u001b[33m.\u001b[39mfn(() \u001b[33m=>\u001b[39m \u001b[36mtrue\u001b[39m)\u001b[33m,\u001b[39m\n     \u001b[90m 193 |\u001b[39m         extractText\u001b[33m:\u001b[39m jest\u001b[33m.\u001b[39mfn()\u001b[33m.\u001b[39mmockRejectedValue(\u001b[36mnew\u001b[39m \u001b[33mError\u001b[39m(\u001b[32m'Provider failed'\u001b[39m))\u001b[33m,\u001b[39m\u001b[0m\n\n      at it (src/features/scanner/__tests__/integration/ocrProviderFallback.test.ts:190:5)\n      at describe (src/features/scanner/__tests__/integration/ocrProviderFallback.test.ts:108:3)\n      at Object.describe (src/features/scanner/__tests__/integration/ocrProviderFallback.test.ts:47:1)\n\n  ● OCR Provider Fallback Integration Tests › Rate Limiting Integration › should respect rate limits and queue requests\n\n    thrown: \"Exceeded timeout of 10000 ms for a test.\n    Add a timeout value to this test to increase the timeout, if this is a long-running test. See https://jestjs.io/docs/api#testname-fn-timeout.\"\n\n    \u001b[0m \u001b[90m 271 |\u001b[39m\n     \u001b[90m 272 |\u001b[39m   describe(\u001b[32m'Rate Limiting Integration'\u001b[39m\u001b[33m,\u001b[39m () \u001b[33m=>\u001b[39m {\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 273 |\u001b[39m     it(\u001b[32m'should respect rate limits and queue requests'\u001b[39m\u001b[33m,\u001b[39m \u001b[36masync\u001b[39m () \u001b[33m=>\u001b[39m {\n     \u001b[90m     |\u001b[39m     \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 274 |\u001b[39m       \u001b[90m// Mock rate limiting\u001b[39m\n     \u001b[90m 275 |\u001b[39m       \u001b[36mlet\u001b[39m rateLimitCallCount \u001b[33m=\u001b[39m \u001b[35m0\u001b[39m\u001b[33m;\u001b[39m\n     \u001b[90m 276 |\u001b[39m       jest\u001b[33m.\u001b[39mspyOn(rateLimitingService\u001b[33m,\u001b[39m \u001b[32m'checkRateLimit'\u001b[39m)\u001b[33m.\u001b[39mmockImplementation(\u001b[36masync\u001b[39m () \u001b[33m=>\u001b[39m {\u001b[0m\n\n      at it (src/features/scanner/__tests__/integration/ocrProviderFallback.test.ts:273:5)\n      at describe (src/features/scanner/__tests__/integration/ocrProviderFallback.test.ts:272:3)\n      at Object.describe (src/features/scanner/__tests__/integration/ocrProviderFallback.test.ts:47:1)\n\n  ● OCR Provider Fallback Integration Tests › Error Recovery and Retry Logic › should retry failed requests with exponential backoff\n\n    thrown: \"Exceeded timeout of 10000 ms for a test.\n    Add a timeout value to this test to increase the timeout, if this is a long-running test. See https://jestjs.io/docs/api#testname-fn-timeout.\"\n\n    \u001b[0m \u001b[90m 367 |\u001b[39m\n     \u001b[90m 368 |\u001b[39m   describe(\u001b[32m'Error Recovery and Retry Logic'\u001b[39m\u001b[33m,\u001b[39m () \u001b[33m=>\u001b[39m {\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 369 |\u001b[39m     it(\u001b[32m'should retry failed requests with exponential backoff'\u001b[39m\u001b[33m,\u001b[39m \u001b[36masync\u001b[39m () \u001b[33m=>\u001b[39m {\n     \u001b[90m     |\u001b[39m     \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 370 |\u001b[39m       \u001b[36mlet\u001b[39m attemptCount \u001b[33m=\u001b[39m \u001b[35m0\u001b[39m\u001b[33m;\u001b[39m\n     \u001b[90m 371 |\u001b[39m       \u001b[36mconst\u001b[39m mockProvider \u001b[33m=\u001b[39m {\n     \u001b[90m 372 |\u001b[39m         isAvailable\u001b[33m:\u001b[39m jest\u001b[33m.\u001b[39mfn(() \u001b[33m=>\u001b[39m \u001b[36mtrue\u001b[39m)\u001b[33m,\u001b[39m\u001b[0m\n\n      at it (src/features/scanner/__tests__/integration/ocrProviderFallback.test.ts:369:5)\n      at describe (src/features/scanner/__tests__/integration/ocrProviderFallback.test.ts:368:3)\n      at Object.describe (src/features/scanner/__tests__/integration/ocrProviderFallback.test.ts:47:1)\n\n  ● OCR Provider Fallback Integration Tests › Error Recovery and Retry Logic › should handle timeout errors with appropriate fallback\n\n    thrown: \"Exceeded timeout of 10000 ms for a test.\n    Add a timeout value to this test to increase the timeout, if this is a long-running test. See https://jestjs.io/docs/api#testname-fn-timeout.\"\n\n    \u001b[0m \u001b[90m 402 |\u001b[39m     })\u001b[33m;\u001b[39m\n     \u001b[90m 403 |\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 404 |\u001b[39m     it(\u001b[32m'should handle timeout errors with appropriate fallback'\u001b[39m\u001b[33m,\u001b[39m \u001b[36masync\u001b[39m () \u001b[33m=>\u001b[39m {\n     \u001b[90m     |\u001b[39m     \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 405 |\u001b[39m       \u001b[36mconst\u001b[39m mockTimeoutProvider \u001b[33m=\u001b[39m {\n     \u001b[90m 406 |\u001b[39m         isAvailable\u001b[33m:\u001b[39m jest\u001b[33m.\u001b[39mfn(() \u001b[33m=>\u001b[39m \u001b[36mtrue\u001b[39m)\u001b[33m,\u001b[39m\n     \u001b[90m 407 |\u001b[39m         extractText\u001b[33m:\u001b[39m jest\u001b[33m.\u001b[39mfn()\u001b[33m.\u001b[39mmockImplementation(\u001b[36masync\u001b[39m () \u001b[33m=>\u001b[39m {\u001b[0m\n\n      at it (src/features/scanner/__tests__/integration/ocrProviderFallback.test.ts:404:5)\n      at describe (src/features/scanner/__tests__/integration/ocrProviderFallback.test.ts:368:3)\n      at Object.describe (src/features/scanner/__tests__/integration/ocrProviderFallback.test.ts:47:1)\n\n  ● OCR Provider Fallback Integration Tests › Error Recovery and Retry Logic › should handle network connectivity issues\n\n    thrown: \"Exceeded timeout of 10000 ms for a test.\n    Add a timeout value to this test to increase the timeout, if this is a long-running test. See https://jestjs.io/docs/api#testname-fn-timeout.\"\n\n    \u001b[0m \u001b[90m 449 |\u001b[39m     })\u001b[33m;\u001b[39m\n     \u001b[90m 450 |\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 451 |\u001b[39m     it(\u001b[32m'should handle network connectivity issues'\u001b[39m\u001b[33m,\u001b[39m \u001b[36masync\u001b[39m () \u001b[33m=>\u001b[39m {\n     \u001b[90m     |\u001b[39m     \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 452 |\u001b[39m       \u001b[36mconst\u001b[39m mockNetworkErrorProvider \u001b[33m=\u001b[39m {\n     \u001b[90m 453 |\u001b[39m         isAvailable\u001b[33m:\u001b[39m jest\u001b[33m.\u001b[39mfn(() \u001b[33m=>\u001b[39m \u001b[36mtrue\u001b[39m)\u001b[33m,\u001b[39m\n     \u001b[90m 454 |\u001b[39m         extractText\u001b[33m:\u001b[39m jest\u001b[33m.\u001b[39mfn()\u001b[33m.\u001b[39mmockRejectedValue(\u001b[36mnew\u001b[39m \u001b[33mError\u001b[39m(\u001b[32m'Network error: ECONNREFUSED'\u001b[39m))\u001b[33m,\u001b[39m\u001b[0m\n\n      at it (src/features/scanner/__tests__/integration/ocrProviderFallback.test.ts:451:5)\n      at describe (src/features/scanner/__tests__/integration/ocrProviderFallback.test.ts:368:3)\n      at Object.describe (src/features/scanner/__tests__/integration/ocrProviderFallback.test.ts:47:1)\n\n  ● OCR Provider Fallback Integration Tests › Provider Health Monitoring › should monitor provider health and adjust fallback strategy\n\n    expect(received).toBe(expected) // Object.is equality\n\n    Expected: true\n    Received: false\n\n    \u001b[0m \u001b[90m 509 |\u001b[39m       \u001b[36mconst\u001b[39m healthCheck \u001b[33m=\u001b[39m \u001b[36mawait\u001b[39m fallbackService\u001b[33m.\u001b[39mhealthCheck()\u001b[33m;\u001b[39m\n     \u001b[90m 510 |\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 511 |\u001b[39m       expect(healthCheck\u001b[33m.\u001b[39mhealthy)\u001b[33m.\u001b[39mtoBe(\u001b[36mtrue\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                                   \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 512 |\u001b[39m       expect(healthCheck\u001b[33m.\u001b[39mavailableProviders)\u001b[33m.\u001b[39mtoContain(\u001b[33mOCRProvider\u001b[39m\u001b[33m.\u001b[39m\u001b[33mOpenAI\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m 513 |\u001b[39m       expect(healthCheck\u001b[33m.\u001b[39mavailableProviders)\u001b[33m.\u001b[39mtoContain(\u001b[33mOCRProvider\u001b[39m\u001b[33m.\u001b[39m\u001b[33mFallback\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m 514 |\u001b[39m       expect(healthCheck\u001b[33m.\u001b[39mavailableProviders)\u001b[33m.\u001b[39mnot\u001b[33m.\u001b[39mtoContain(\u001b[33mOCRProvider\u001b[39m\u001b[33m.\u001b[39m\u001b[33mQwen\u001b[39m)\u001b[33m;\u001b[39m\u001b[0m\n\n      at Object.toBe (src/features/scanner/__tests__/integration/ocrProviderFallback.test.ts:511:35)\n\n  ● OCR Provider Fallback Integration Tests › Provider Health Monitoring › should detect unhealthy system state\n\n    expect(received).toContain(expected) // indexOf\n\n    Expected value: \"Only fallback provider available\"\n    Received array: [\"Provider openai is not available: Unknown reason\", \"Provider qwen is not available: Unknown reason\"]\n\n    \u001b[0m \u001b[90m 547 |\u001b[39m       expect(healthCheck\u001b[33m.\u001b[39mhealthy)\u001b[33m.\u001b[39mtoBe(\u001b[36mfalse\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m 548 |\u001b[39m       expect(healthCheck\u001b[33m.\u001b[39mavailableProviders)\u001b[33m.\u001b[39mtoEqual([\u001b[33mOCRProvider\u001b[39m\u001b[33m.\u001b[39m\u001b[33mFallback\u001b[39m])\u001b[33m;\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 549 |\u001b[39m       expect(healthCheck\u001b[33m.\u001b[39missues)\u001b[33m.\u001b[39mtoContain(\u001b[32m'Only fallback provider available'\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                                  \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 550 |\u001b[39m       expect(healthCheck\u001b[33m.\u001b[39missues)\u001b[33m.\u001b[39mtoContain(\u001b[32m'OpenAI provider is rate limited or unavailable'\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m 551 |\u001b[39m       expect(healthCheck\u001b[33m.\u001b[39missues)\u001b[33m.\u001b[39mtoContain(\u001b[32m'Qwen provider is rate limited or unavailable'\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m 552 |\u001b[39m     })\u001b[33m;\u001b[39m\u001b[0m\n\n      at Object.toContain (src/features/scanner/__tests__/integration/ocrProviderFallback.test.ts:549:34)\n\n  ● OCR Provider Fallback Integration Tests › Integration with Main OCR Service › should integrate fallback mechanism with main OCR service\n\n    expect(received).toEqual(expected) // deep equality\n\n    - Expected  - 1\n    + Received  + 4\n\n    @@ -10,9 +10,12 @@\n            \"confidence\": 0.95,\n            \"text\": \"Successfully extracted text content\",\n          },\n        ],\n        \"confidence\": 0.95,\n    -   \"processingTime\": 1500,\n    +   \"error\": undefined,\n    +   \"processingTime\": 0,\n        \"provider\": \"openai\",\n    +   \"rawResponse\": undefined,\n    +   \"tables\": undefined,\n        \"text\": \"Successfully extracted text content\",\n      }\n\n    \u001b[0m \u001b[90m 624 |\u001b[39m       \u001b[36mconst\u001b[39m result \u001b[33m=\u001b[39m \u001b[36mawait\u001b[39m ocrService\u001b[33m.\u001b[39mextractText(imageBlob)\u001b[33m;\u001b[39m\n     \u001b[90m 625 |\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 626 |\u001b[39m       expect(result)\u001b[33m.\u001b[39mtoEqual(mockSuccessResult)\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                      \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 627 |\u001b[39m       expect(\u001b[33mOCRProviderFactory\u001b[39m\u001b[33m.\u001b[39minitialize)\u001b[33m.\u001b[39mtoHaveBeenCalled()\u001b[33m;\u001b[39m\n     \u001b[90m 628 |\u001b[39m       expect(mockProvider\u001b[33m.\u001b[39mextractText)\u001b[33m.\u001b[39mtoHaveBeenCalledWith(imageBlob\u001b[33m,\u001b[39m undefined)\u001b[33m;\u001b[39m\n     \u001b[90m 629 |\u001b[39m     })\u001b[33m;\u001b[39m\u001b[0m\n\n      at Object.toEqual (src/features/scanner/__tests__/integration/ocrProviderFallback.test.ts:626:22)\n\n  ● OCR Provider Fallback Integration Tests › Integration with Main OCR Service › should handle service initialization failures gracefully\n\n    expect(received).rejects.toThrow()\n\n    Received promise resolved instead of rejected\n    Resolved to value: {\"blocks\": [{\"bounds\": {\"height\": 30, \"width\": 200, \"x\": 0, \"y\": 0}, \"confidence\": 0.95, \"text\": \"Successfully extracted text content\"}], \"confidence\": 0.95, \"error\": undefined, \"processingTime\": 0, \"provider\": \"openai\", \"rawResponse\": undefined, \"tables\": undefined, \"text\": \"Successfully extracted text content\"}\n\n    \u001b[0m \u001b[90m 636 |\u001b[39m       \u001b[36mconst\u001b[39m imageBlob \u001b[33m=\u001b[39m createMockBlob()\u001b[33m;\u001b[39m\n     \u001b[90m 637 |\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 638 |\u001b[39m       \u001b[36mawait\u001b[39m expect(ocrService\u001b[33m.\u001b[39mextractText(imageBlob))\n     \u001b[90m     |\u001b[39m             \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 639 |\u001b[39m         \u001b[33m.\u001b[39mrejects\u001b[33m.\u001b[39mtoThrow(\u001b[32m'OCR service initialization failed'\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m 640 |\u001b[39m     })\u001b[33m;\u001b[39m\n     \u001b[90m 641 |\u001b[39m   })\u001b[33m;\u001b[39m\u001b[0m\n\n      at expect (../node_modules/expect/build/index.js:2113:15)\n      at Object.expect (src/features/scanner/__tests__/integration/ocrProviderFallback.test.ts:638:13)\n\n  ● OCR Provider Fallback Integration Tests › Performance Under Load › should handle concurrent requests with proper fallback\n\n    thrown: \"Exceeded timeout of 10000 ms for a test.\n    Add a timeout value to this test to increase the timeout, if this is a long-running test. See https://jestjs.io/docs/api#testname-fn-timeout.\"\n\n    \u001b[0m \u001b[90m 642 |\u001b[39m\n     \u001b[90m 643 |\u001b[39m   describe(\u001b[32m'Performance Under Load'\u001b[39m\u001b[33m,\u001b[39m () \u001b[33m=>\u001b[39m {\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 644 |\u001b[39m     it(\u001b[32m'should handle concurrent requests with proper fallback'\u001b[39m\u001b[33m,\u001b[39m \u001b[36masync\u001b[39m () \u001b[33m=>\u001b[39m {\n     \u001b[90m     |\u001b[39m     \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 645 |\u001b[39m       \u001b[36mlet\u001b[39m requestCount \u001b[33m=\u001b[39m \u001b[35m0\u001b[39m\u001b[33m;\u001b[39m\n     \u001b[90m 646 |\u001b[39m       \u001b[36mconst\u001b[39m mockProvider \u001b[33m=\u001b[39m {\n     \u001b[90m 647 |\u001b[39m         isAvailable\u001b[33m:\u001b[39m jest\u001b[33m.\u001b[39mfn(() \u001b[33m=>\u001b[39m \u001b[36mtrue\u001b[39m)\u001b[33m,\u001b[39m\u001b[0m\n\n      at it (src/features/scanner/__tests__/integration/ocrProviderFallback.test.ts:644:5)\n      at describe (src/features/scanner/__tests__/integration/ocrProviderFallback.test.ts:643:3)\n      at Object.describe (src/features/scanner/__tests__/integration/ocrProviderFallback.test.ts:47:1)\n\n  ● OCR Provider Fallback Integration Tests › Performance Under Load › should handle concurrent requests with proper fallback\n\n    OCR service initialization failed\n\n    \u001b[0m \u001b[90m 44 |\u001b[39m     } \u001b[36mcatch\u001b[39m (error) {\n     \u001b[90m 45 |\u001b[39m       console\u001b[33m.\u001b[39merror(\u001b[32m'Failed to initialize OCR service:'\u001b[39m\u001b[33m,\u001b[39m error)\u001b[33m;\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 46 |\u001b[39m       \u001b[36mthrow\u001b[39m \u001b[36mnew\u001b[39m \u001b[33mError\u001b[39m(\u001b[32m'OCR service initialization failed'\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m    |\u001b[39m             \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 47 |\u001b[39m     }\n     \u001b[90m 48 |\u001b[39m   }\n     \u001b[90m 49 |\u001b[39m\u001b[0m\n\n      at AIOCRService.initialize (src/features/scanner/services/ocrService.ts:46:13)\n\n  ● OCR Provider Fallback Integration Tests › Performance Under Load › should handle concurrent requests with proper fallback\n\n    OCR service initialization failed\n\n    \u001b[0m \u001b[90m 44 |\u001b[39m     } \u001b[36mcatch\u001b[39m (error) {\n     \u001b[90m 45 |\u001b[39m       console\u001b[33m.\u001b[39merror(\u001b[32m'Failed to initialize OCR service:'\u001b[39m\u001b[33m,\u001b[39m error)\u001b[33m;\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 46 |\u001b[39m       \u001b[36mthrow\u001b[39m \u001b[36mnew\u001b[39m \u001b[33mError\u001b[39m(\u001b[32m'OCR service initialization failed'\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m    |\u001b[39m             \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 47 |\u001b[39m     }\n     \u001b[90m 48 |\u001b[39m   }\n     \u001b[90m 49 |\u001b[39m\u001b[0m\n\n      at AIOCRService.initialize (src/features/scanner/services/ocrService.ts:46:13)\n\n  ● OCR Provider Fallback Integration Tests › Performance Under Load › should handle concurrent requests with proper fallback\n\n    OCR service initialization failed\n\n    \u001b[0m \u001b[90m 44 |\u001b[39m     } \u001b[36mcatch\u001b[39m (error) {\n     \u001b[90m 45 |\u001b[39m       console\u001b[33m.\u001b[39merror(\u001b[32m'Failed to initialize OCR service:'\u001b[39m\u001b[33m,\u001b[39m error)\u001b[33m;\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 46 |\u001b[39m       \u001b[36mthrow\u001b[39m \u001b[36mnew\u001b[39m \u001b[33mError\u001b[39m(\u001b[32m'OCR service initialization failed'\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m    |\u001b[39m             \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 47 |\u001b[39m     }\n     \u001b[90m 48 |\u001b[39m   }\n     \u001b[90m 49 |\u001b[39m\u001b[0m\n\n      at AIOCRService.initialize (src/features/scanner/services/ocrService.ts:46:13)\n\nJest: \"global\" coverage threshold for statements (70%) not met: 3.63%\nJest: \"global\" coverage threshold for branches (70%) not met: 2.48%\nJest: \"global\" coverage threshold for lines (70%) not met: 3.71%\nJest: \"global\" coverage threshold for functions (70%) not met: 3.41%\nJest: Coverage data for ./src/features/*/services/ was not found.\nJest: \"./src/shared/services/\" coverage threshold for statements (80%) not met: 0%\nJest: \"./src/shared/services/\" coverage threshold for branches (80%) not met: 0%\nJest: \"./src/shared/services/\" coverage threshold for lines (80%) not met: 0%\nJest: \"./src/shared/services/\" coverage threshold for functions (80%) not met: 0%\nJest: \"./src/shared/utils/\" coverage threshold for statements (75%) not met: 0%\nJest: \"./src/shared/utils/\" coverage threshold for branches (75%) not met: 0%\nJest: \"./src/shared/utils/\" coverage threshold for lines (75%) not met: 0%\nJest: \"./src/shared/utils/\" coverage threshold for functions (75%) not met: 0%\nSummary of all failing tests\nFAIL src/features/email/components/__tests__/EmailTemplateEditor.test.jsx\n  ● Test suite failed to run\n\n    Configuration error:\n\n    Could not locate module @lib/emailTemplateService mapped as:\n    E:\\AlexVenturesStudio\\Nexa_Manager_whit_Task_Master\\web-app\\src\\lib\\$1.\n\n    Please check your configuration for these entries:\n    {\n      \"moduleNameMapper\": {\n        \"/^@lib\\/(.*)$/\": \"E:\\AlexVenturesStudio\\Nexa_Manager_whit_Task_Master\\web-app\\src\\lib\\$1\"\n      },\n      \"resolver\": undefined\n    }\n\n    \u001b[0m \u001b[90m  9 |\u001b[39m\n     \u001b[90m 10 |\u001b[39m \u001b[90m// Mock the emailTemplateService - Jest will automatically use the __mocks__ version\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 11 |\u001b[39m jest\u001b[33m.\u001b[39mmock(\u001b[32m'@lib/emailTemplateService'\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m    |\u001b[39m      \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 12 |\u001b[39m\n     \u001b[90m 13 |\u001b[39m \u001b[90m// Mock the email attachment service\u001b[39m\n     \u001b[90m 14 |\u001b[39m jest\u001b[33m.\u001b[39mmock(\u001b[32m'@lib/emailAttachmentService'\u001b[39m)\u001b[33m;\u001b[39m\u001b[0m\n\n      at createNoMappedModuleFoundError (../node_modules/jest-resolve/build/index.js:1117:17)\n      at Object.mock (src/features/email/components/__tests__/EmailTemplateEditor.test.jsx:11:6)\n\nFAIL src/features/email/components/__tests__/VirtualEmailList.test.jsx\n  ● Test suite failed to run\n\n    Cannot find module '../../EmailSecurityIndicator' from 'src/features/email/components/__tests__/VirtualEmailList.test.jsx'\n\n    \u001b[0m \u001b[90m 35 |\u001b[39m }))\u001b[33m;\u001b[39m\n     \u001b[90m 36 |\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 37 |\u001b[39m jest\u001b[33m.\u001b[39mmock(\u001b[32m'../../EmailSecurityIndicator'\u001b[39m\u001b[33m,\u001b[39m () \u001b[33m=>\u001b[39m {\n     \u001b[90m    |\u001b[39m      \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 38 |\u001b[39m   \u001b[36mreturn\u001b[39m \u001b[36mfunction\u001b[39m \u001b[33mMockEmailSecurityIndicator\u001b[39m() {\n     \u001b[90m 39 |\u001b[39m     \u001b[36mreturn\u001b[39m \u001b[33m<\u001b[39m\u001b[33mdiv\u001b[39m data\u001b[33m-\u001b[39mtestid\u001b[33m=\u001b[39m\u001b[32m\"security-indicator\"\u001b[39m \u001b[33m/\u001b[39m\u001b[33m>\u001b[39m\u001b[33m;\u001b[39m\n     \u001b[90m 40 |\u001b[39m   }\u001b[33m;\u001b[39m\u001b[0m\n\n      at Resolver._throwModNotFoundError (../node_modules/jest-resolve/build/index.js:863:11)\n      at Object.mock (src/features/email/components/__tests__/VirtualEmailList.test.jsx:37:6)\n\nFAIL src/features/email/components/__tests__/EmailTemplateSelector.test.jsx\n  ● Test suite failed to run\n\n    Configuration error:\n\n    Could not locate module @hooks/useEmailTemplates mapped as:\n    E:\\AlexVenturesStudio\\Nexa_Manager_whit_Task_Master\\web-app\\src\\hooks\\$1.\n\n    Please check your configuration for these entries:\n    {\n      \"moduleNameMapper\": {\n        \"/^@hooks\\/(.*)$/\": \"E:\\AlexVenturesStudio\\Nexa_Manager_whit_Task_Master\\web-app\\src\\hooks\\$1\"\n      },\n      \"resolver\": undefined\n    }\n\n    \u001b[0m \u001b[90m 85 |\u001b[39m }\u001b[33m;\u001b[39m\n     \u001b[90m 86 |\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 87 |\u001b[39m jest\u001b[33m.\u001b[39mmock(\u001b[32m'@hooks/useEmailTemplates'\u001b[39m\u001b[33m,\u001b[39m () \u001b[33m=>\u001b[39m ({\n     \u001b[90m    |\u001b[39m      \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 88 |\u001b[39m   useEmailTemplates\u001b[33m:\u001b[39m () \u001b[33m=>\u001b[39m mockUseEmailTemplates\u001b[33m,\u001b[39m\n     \u001b[90m 89 |\u001b[39m }))\u001b[33m;\u001b[39m\n     \u001b[90m 90 |\u001b[39m\u001b[0m\n\n      at createNoMappedModuleFoundError (../node_modules/jest-resolve/build/index.js:1117:17)\n      at Object.mock (src/features/email/components/__tests__/EmailTemplateSelector.test.jsx:87:6)\n\nFAIL src/features/email/components/__tests__/EmailViewerContainer.test.jsx\n  ● Test suite failed to run\n\n    Configuration error:\n\n    Could not locate module @hooks/useEmailViewer mapped as:\n    E:\\AlexVenturesStudio\\Nexa_Manager_whit_Task_Master\\web-app\\src\\hooks\\$1.\n\n    Please check your configuration for these entries:\n    {\n      \"moduleNameMapper\": {\n        \"/^@hooks\\/(.*)$/\": \"E:\\AlexVenturesStudio\\Nexa_Manager_whit_Task_Master\\web-app\\src\\hooks\\$1\"\n      },\n      \"resolver\": undefined\n    }\n\n    \u001b[0m \u001b[90m 29 |\u001b[39m }\u001b[33m;\u001b[39m\n     \u001b[90m 30 |\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 31 |\u001b[39m jest\u001b[33m.\u001b[39mmock(\u001b[32m'@hooks/useEmailViewer'\u001b[39m\u001b[33m,\u001b[39m () \u001b[33m=>\u001b[39m ({\n     \u001b[90m    |\u001b[39m      \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 32 |\u001b[39m   __esModule\u001b[33m:\u001b[39m \u001b[36mtrue\u001b[39m\u001b[33m,\u001b[39m\n     \u001b[90m 33 |\u001b[39m   \u001b[36mdefault\u001b[39m\u001b[33m:\u001b[39m () \u001b[33m=>\u001b[39m mockEmailViewerReturn\u001b[33m,\u001b[39m\n     \u001b[90m 34 |\u001b[39m }))\u001b[33m;\u001b[39m\u001b[0m\n\n      at createNoMappedModuleFoundError (../node_modules/jest-resolve/build/index.js:1117:17)\n      at Object.mock (src/features/email/components/__tests__/EmailViewerContainer.test.jsx:31:6)\n\nFAIL src/features/email/components/__tests__/EmailTemplateManager.test.jsx\n  ● Test suite failed to run\n\n    Configuration error:\n\n    Could not locate module @lib/emailTemplateService mapped as:\n    E:\\AlexVenturesStudio\\Nexa_Manager_whit_Task_Master\\web-app\\src\\lib\\$1.\n\n    Please check your configuration for these entries:\n    {\n      \"moduleNameMapper\": {\n        \"/^@lib\\/(.*)$/\": \"E:\\AlexVenturesStudio\\Nexa_Manager_whit_Task_Master\\web-app\\src\\lib\\$1\"\n      },\n      \"resolver\": undefined\n    }\n\n    \u001b[0m \u001b[90m 17 |\u001b[39m\n     \u001b[90m 18 |\u001b[39m \u001b[90m// Mock emailTemplateService\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 19 |\u001b[39m jest\u001b[33m.\u001b[39mmock(\u001b[32m'@lib/emailTemplateService'\u001b[39m\u001b[33m,\u001b[39m () \u001b[33m=>\u001b[39m ({\n     \u001b[90m    |\u001b[39m      \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 20 |\u001b[39m   getTemplates\u001b[33m:\u001b[39m jest\u001b[33m.\u001b[39mfn()\u001b[33m,\u001b[39m\n     \u001b[90m 21 |\u001b[39m   saveTemplate\u001b[33m:\u001b[39m jest\u001b[33m.\u001b[39mfn()\u001b[33m,\u001b[39m\n     \u001b[90m 22 |\u001b[39m   deleteTemplate\u001b[33m:\u001b[39m jest\u001b[33m.\u001b[39mfn()\u001b[0m\n\n      at createNoMappedModuleFoundError (../node_modules/jest-resolve/build/index.js:1117:17)\n      at Object.mock (src/features/email/components/__tests__/EmailTemplateManager.test.jsx:19:6)\n\nFAIL src/lib/__tests__/emailManagementService.integration.test.js\n  ● EmailManagementService Integration › service should be defined\n\n    Cannot find module '../emailManagementService' from 'src/lib/__tests__/emailManagementService.integration.test.js'\n\n    \u001b[0m \u001b[90m  9 |\u001b[39m   beforeAll(\u001b[36masync\u001b[39m () \u001b[33m=>\u001b[39m {\n     \u001b[90m 10 |\u001b[39m     \u001b[90m// Import the service\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 11 |\u001b[39m     \u001b[36mconst\u001b[39m module \u001b[33m=\u001b[39m \u001b[36mawait\u001b[39m \u001b[36mimport\u001b[39m(\u001b[32m'../emailManagementService'\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m    |\u001b[39m                    \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 12 |\u001b[39m     emailManagementService \u001b[33m=\u001b[39m module\u001b[33m.\u001b[39m\u001b[36mdefault\u001b[39m\u001b[33m;\u001b[39m\n     \u001b[90m 13 |\u001b[39m   })\u001b[33m;\u001b[39m\n     \u001b[90m 14 |\u001b[39m\u001b[0m\n\n      at Resolver._throwModNotFoundError (../node_modules/jest-resolve/build/index.js:863:11)\n      at require (src/lib/__tests__/emailManagementService.integration.test.js:11:20)\n      at Object.<anonymous> (src/lib/__tests__/emailManagementService.integration.test.js:11:20)\n\n  ● EmailManagementService Integration › should have required methods\n\n    Cannot find module '../emailManagementService' from 'src/lib/__tests__/emailManagementService.integration.test.js'\n\n    \u001b[0m \u001b[90m  9 |\u001b[39m   beforeAll(\u001b[36masync\u001b[39m () \u001b[33m=>\u001b[39m {\n     \u001b[90m 10 |\u001b[39m     \u001b[90m// Import the service\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 11 |\u001b[39m     \u001b[36mconst\u001b[39m module \u001b[33m=\u001b[39m \u001b[36mawait\u001b[39m \u001b[36mimport\u001b[39m(\u001b[32m'../emailManagementService'\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m    |\u001b[39m                    \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 12 |\u001b[39m     emailManagementService \u001b[33m=\u001b[39m module\u001b[33m.\u001b[39m\u001b[36mdefault\u001b[39m\u001b[33m;\u001b[39m\n     \u001b[90m 13 |\u001b[39m   })\u001b[33m;\u001b[39m\n     \u001b[90m 14 |\u001b[39m\u001b[0m\n\n      at Resolver._throwModNotFoundError (../node_modules/jest-resolve/build/index.js:863:11)\n      at require (src/lib/__tests__/emailManagementService.integration.test.js:11:20)\n      at Object.<anonymous> (src/lib/__tests__/emailManagementService.integration.test.js:11:20)\n\n  ● EmailManagementService Integration › should validate email data correctly\n\n    Cannot find module '../emailManagementService' from 'src/lib/__tests__/emailManagementService.integration.test.js'\n\n    \u001b[0m \u001b[90m  9 |\u001b[39m   beforeAll(\u001b[36masync\u001b[39m () \u001b[33m=>\u001b[39m {\n     \u001b[90m 10 |\u001b[39m     \u001b[90m// Import the service\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 11 |\u001b[39m     \u001b[36mconst\u001b[39m module \u001b[33m=\u001b[39m \u001b[36mawait\u001b[39m \u001b[36mimport\u001b[39m(\u001b[32m'../emailManagementService'\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m    |\u001b[39m                    \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 12 |\u001b[39m     emailManagementService \u001b[33m=\u001b[39m module\u001b[33m.\u001b[39m\u001b[36mdefault\u001b[39m\u001b[33m;\u001b[39m\n     \u001b[90m 13 |\u001b[39m   })\u001b[33m;\u001b[39m\n     \u001b[90m 14 |\u001b[39m\u001b[0m\n\n      at Resolver._throwModNotFoundError (../node_modules/jest-resolve/build/index.js:863:11)\n      at require (src/lib/__tests__/emailManagementService.integration.test.js:11:20)\n      at Object.<anonymous> (src/lib/__tests__/emailManagementService.integration.test.js:11:20)\n\n  ● EmailManagementService Integration › should detect invalid email data\n\n    Cannot find module '../emailManagementService' from 'src/lib/__tests__/emailManagementService.integration.test.js'\n\n    \u001b[0m \u001b[90m  9 |\u001b[39m   beforeAll(\u001b[36masync\u001b[39m () \u001b[33m=>\u001b[39m {\n     \u001b[90m 10 |\u001b[39m     \u001b[90m// Import the service\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 11 |\u001b[39m     \u001b[36mconst\u001b[39m module \u001b[33m=\u001b[39m \u001b[36mawait\u001b[39m \u001b[36mimport\u001b[39m(\u001b[32m'../emailManagementService'\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m    |\u001b[39m                    \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 12 |\u001b[39m     emailManagementService \u001b[33m=\u001b[39m module\u001b[33m.\u001b[39m\u001b[36mdefault\u001b[39m\u001b[33m;\u001b[39m\n     \u001b[90m 13 |\u001b[39m   })\u001b[33m;\u001b[39m\n     \u001b[90m 14 |\u001b[39m\u001b[0m\n\n      at Resolver._throwModNotFoundError (../node_modules/jest-resolve/build/index.js:863:11)\n      at require (src/lib/__tests__/emailManagementService.integration.test.js:11:20)\n      at Object.<anonymous> (src/lib/__tests__/emailManagementService.integration.test.js:11:20)\n\n  ● EmailManagementService Integration › should validate email addresses correctly\n\n    Cannot find module '../emailManagementService' from 'src/lib/__tests__/emailManagementService.integration.test.js'\n\n    \u001b[0m \u001b[90m  9 |\u001b[39m   beforeAll(\u001b[36masync\u001b[39m () \u001b[33m=>\u001b[39m {\n     \u001b[90m 10 |\u001b[39m     \u001b[90m// Import the service\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 11 |\u001b[39m     \u001b[36mconst\u001b[39m module \u001b[33m=\u001b[39m \u001b[36mawait\u001b[39m \u001b[36mimport\u001b[39m(\u001b[32m'../emailManagementService'\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m    |\u001b[39m                    \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 12 |\u001b[39m     emailManagementService \u001b[33m=\u001b[39m module\u001b[33m.\u001b[39m\u001b[36mdefault\u001b[39m\u001b[33m;\u001b[39m\n     \u001b[90m 13 |\u001b[39m   })\u001b[33m;\u001b[39m\n     \u001b[90m 14 |\u001b[39m\u001b[0m\n\n      at Resolver._throwModNotFoundError (../node_modules/jest-resolve/build/index.js:863:11)\n      at require (src/lib/__tests__/emailManagementService.integration.test.js:11:20)\n      at Object.<anonymous> (src/lib/__tests__/emailManagementService.integration.test.js:11:20)\n\n  ● EmailManagementService Integration › should handle event listeners\n\n    Cannot find module '../emailManagementService' from 'src/lib/__tests__/emailManagementService.integration.test.js'\n\n    \u001b[0m \u001b[90m  9 |\u001b[39m   beforeAll(\u001b[36masync\u001b[39m () \u001b[33m=>\u001b[39m {\n     \u001b[90m 10 |\u001b[39m     \u001b[90m// Import the service\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 11 |\u001b[39m     \u001b[36mconst\u001b[39m module \u001b[33m=\u001b[39m \u001b[36mawait\u001b[39m \u001b[36mimport\u001b[39m(\u001b[32m'../emailManagementService'\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m    |\u001b[39m                    \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 12 |\u001b[39m     emailManagementService \u001b[33m=\u001b[39m module\u001b[33m.\u001b[39m\u001b[36mdefault\u001b[39m\u001b[33m;\u001b[39m\n     \u001b[90m 13 |\u001b[39m   })\u001b[33m;\u001b[39m\n     \u001b[90m 14 |\u001b[39m\u001b[0m\n\n      at Resolver._throwModNotFoundError (../node_modules/jest-resolve/build/index.js:863:11)\n      at require (src/lib/__tests__/emailManagementService.integration.test.js:11:20)\n      at Object.<anonymous> (src/lib/__tests__/emailManagementService.integration.test.js:11:20)\n\nFAIL src/lib/__tests__/uiUtils.test.ts\n  ● uiUtils › notify › dismiss › should call toast.dismiss without arguments\n\n    expect(jest.fn()).toHaveBeenCalledWith(...expected)\n\n    Expected: called with 0 arguments\n    Received: undefined\n\n    Number of calls: 1\n\n    \u001b[0m \u001b[90m 209 |\u001b[39m       it(\u001b[32m'should call toast.dismiss without arguments'\u001b[39m\u001b[33m,\u001b[39m () \u001b[33m=>\u001b[39m {\n     \u001b[90m 210 |\u001b[39m         notify\u001b[33m.\u001b[39mdismiss()\u001b[33m;\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 211 |\u001b[39m         expect(toast\u001b[33m.\u001b[39mdismiss)\u001b[33m.\u001b[39mtoHaveBeenCalledWith()\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                               \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 212 |\u001b[39m       })\u001b[33m;\u001b[39m\n     \u001b[90m 213 |\u001b[39m     })\u001b[33m;\u001b[39m\n     \u001b[90m 214 |\u001b[39m   })\u001b[33m;\u001b[39m\u001b[0m\n\n      at Object.toHaveBeenCalledWith (src/lib/__tests__/uiUtils.test.ts:211:31)\n\n  ● uiUtils › errorHandler › should handle generic error\n\n    expect(jest.fn()).toHaveBeenCalledWith(...expected)\n\n    Expected: \"Error in test context:\", [Error: Test error]\n\n    Number of calls: 0\n\n    \u001b[0m \u001b[90m 259 |\u001b[39m       \u001b[36mconst\u001b[39m result \u001b[33m=\u001b[39m errorHandler\u001b[33m.\u001b[39mhandle(error\u001b[33m,\u001b[39m \u001b[32m'test context'\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m 260 |\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 261 |\u001b[39m       expect(\u001b[33mLogger\u001b[39m\u001b[33m.\u001b[39merror)\u001b[33m.\u001b[39mtoHaveBeenCalledWith(\u001b[32m'Error in test context:'\u001b[39m\u001b[33m,\u001b[39m error)\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                            \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 262 |\u001b[39m       expect(toast\u001b[33m.\u001b[39merror)\u001b[33m.\u001b[39mtoHaveBeenCalledWith(\u001b[32m'Test error'\u001b[39m\u001b[33m,\u001b[39m expect\u001b[33m.\u001b[39many(\u001b[33mObject\u001b[39m))\u001b[33m;\u001b[39m\n     \u001b[90m 263 |\u001b[39m       expect(result)\u001b[33m.\u001b[39mtoBe(\u001b[32m'Test error'\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m 264 |\u001b[39m     })\u001b[33m;\u001b[39m\u001b[0m\n\n      at Object.toHaveBeenCalledWith (src/lib/__tests__/uiUtils.test.ts:261:28)\n\n  ● uiUtils › errorHandler › should handle string error\n\n    expect(jest.fn()).toHaveBeenCalledWith(...expected)\n\n    Expected: \"Error in test context:\", \"String error message\"\n\n    Number of calls: 0\n\n    \u001b[0m \u001b[90m 269 |\u001b[39m       \u001b[36mconst\u001b[39m result \u001b[33m=\u001b[39m errorHandler\u001b[33m.\u001b[39mhandle(error\u001b[33m,\u001b[39m \u001b[32m'test context'\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m 270 |\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 271 |\u001b[39m       expect(\u001b[33mLogger\u001b[39m\u001b[33m.\u001b[39merror)\u001b[33m.\u001b[39mtoHaveBeenCalledWith(\u001b[32m'Error in test context:'\u001b[39m\u001b[33m,\u001b[39m error)\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                            \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 272 |\u001b[39m       expect(toast\u001b[33m.\u001b[39merror)\u001b[33m.\u001b[39mtoHaveBeenCalledWith(\u001b[32m'String error message'\u001b[39m\u001b[33m,\u001b[39m expect\u001b[33m.\u001b[39many(\u001b[33mObject\u001b[39m))\u001b[33m;\u001b[39m\n     \u001b[90m 273 |\u001b[39m       expect(result)\u001b[33m.\u001b[39mtoBe(\u001b[32m'String error message'\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m 274 |\u001b[39m     })\u001b[33m;\u001b[39m\u001b[0m\n\n      at Object.toHaveBeenCalledWith (src/lib/__tests__/uiUtils.test.ts:271:28)\n\n  ● uiUtils › errorHandler › should handle API error with response data\n\n    expect(jest.fn()).toHaveBeenCalledWith(...expected)\n\n    Expected: \"API Error:\", {\"response\": {\"data\": {\"message\": \"API error message\"}}}\n\n    Number of calls: 0\n\n    \u001b[0m \u001b[90m 285 |\u001b[39m       errorHandler\u001b[33m.\u001b[39mhandleApiError(apiError)\u001b[33m;\u001b[39m\n     \u001b[90m 286 |\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 287 |\u001b[39m       expect(\u001b[33mLogger\u001b[39m\u001b[33m.\u001b[39merror)\u001b[33m.\u001b[39mtoHaveBeenCalledWith(\u001b[32m'API Error:'\u001b[39m\u001b[33m,\u001b[39m apiError)\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                            \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 288 |\u001b[39m       expect(toast\u001b[33m.\u001b[39merror)\u001b[33m.\u001b[39mtoHaveBeenCalledWith(\u001b[32m'API error message'\u001b[39m\u001b[33m,\u001b[39m expect\u001b[33m.\u001b[39many(\u001b[33mObject\u001b[39m))\u001b[33m;\u001b[39m\n     \u001b[90m 289 |\u001b[39m     })\u001b[33m;\u001b[39m\n     \u001b[90m 290 |\u001b[39m\u001b[0m\n\n      at Object.toHaveBeenCalledWith (src/lib/__tests__/uiUtils.test.ts:287:28)\n\n  ● uiUtils › errorHandler › should handle Supabase error\n\n    expect(jest.fn()).toHaveBeenCalledWith(...expected)\n\n    Expected: \"Supabase error in test context:\", {\"message\": \"duplicate key value violates unique constraint\"}\n\n    Number of calls: 0\n\n    \u001b[0m \u001b[90m 296 |\u001b[39m       \u001b[36mconst\u001b[39m result \u001b[33m=\u001b[39m errorHandler\u001b[33m.\u001b[39mhandleSupabaseError(supabaseError\u001b[33m,\u001b[39m \u001b[32m'test context'\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m 297 |\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 298 |\u001b[39m       expect(\u001b[33mLogger\u001b[39m\u001b[33m.\u001b[39merror)\u001b[33m.\u001b[39mtoHaveBeenCalledWith(\u001b[32m'Supabase error in test context:'\u001b[39m\u001b[33m,\u001b[39m supabaseError)\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                            \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 299 |\u001b[39m       expect(toast\u001b[33m.\u001b[39merror)\u001b[33m.\u001b[39mtoHaveBeenCalledWith(\u001b[32m'This item already exists'\u001b[39m\u001b[33m,\u001b[39m expect\u001b[33m.\u001b[39many(\u001b[33mObject\u001b[39m))\u001b[33m;\u001b[39m\n     \u001b[90m 300 |\u001b[39m       expect(result)\u001b[33m.\u001b[39mtoBe(\u001b[32m'This item already exists'\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m 301 |\u001b[39m     })\u001b[33m;\u001b[39m\u001b[0m\n\n      at Object.toHaveBeenCalledWith (src/lib/__tests__/uiUtils.test.ts:298:28)\n\n  ● uiUtils › validation › should validate email format\n\n    expect(received).toBeNull()\n\n    Received: true\n\n    \u001b[0m \u001b[90m 311 |\u001b[39m\n     \u001b[90m 312 |\u001b[39m     it(\u001b[32m'should validate email format'\u001b[39m\u001b[33m,\u001b[39m () \u001b[33m=>\u001b[39m {\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 313 |\u001b[39m       expect(validation\u001b[33m.\u001b[39memail(\u001b[32m'test@example.com'\u001b[39m))\u001b[33m.\u001b[39mtoBeNull()\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                                                    \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 314 |\u001b[39m       expect(validation\u001b[33m.\u001b[39memail(\u001b[32m'invalid-email'\u001b[39m))\u001b[33m.\u001b[39mtoBe(\u001b[32m'Invalid email'\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m 315 |\u001b[39m       expect(validation\u001b[33m.\u001b[39memail(\u001b[32m''\u001b[39m))\u001b[33m.\u001b[39mtoBeNull()\u001b[33m;\u001b[39m \u001b[90m// Empty email is valid (use required for required validation)\u001b[39m\n     \u001b[90m 316 |\u001b[39m     })\u001b[33m;\u001b[39m\u001b[0m\n\n      at Object.toBeNull (src/lib/__tests__/uiUtils.test.ts:313:52)\n\n  ● uiUtils › validation › should validate maximum length\n\n    expect(received).toBe(expected) // Object.is equality\n\n    Expected: \"Test Field can be at most 5 characters long\"\n    Received: \"Test Field must be at most 5 characters long\"\n\n    \u001b[0m \u001b[90m 325 |\u001b[39m     it(\u001b[32m'should validate maximum length'\u001b[39m\u001b[33m,\u001b[39m () \u001b[33m=>\u001b[39m {\n     \u001b[90m 326 |\u001b[39m       expect(validation\u001b[33m.\u001b[39mmaxLength(\u001b[32m'test'\u001b[39m\u001b[33m,\u001b[39m \u001b[35m5\u001b[39m\u001b[33m,\u001b[39m \u001b[32m'Test Field'\u001b[39m))\u001b[33m.\u001b[39mtoBeNull()\u001b[33m;\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 327 |\u001b[39m       expect(validation\u001b[33m.\u001b[39mmaxLength(\u001b[32m'toolong'\u001b[39m\u001b[33m,\u001b[39m \u001b[35m5\u001b[39m\u001b[33m,\u001b[39m \u001b[32m'Test Field'\u001b[39m))\u001b[33m.\u001b[39mtoBe(\n     \u001b[90m     |\u001b[39m                                                                \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 328 |\u001b[39m         \u001b[32m'Test Field can be at most 5 characters long'\u001b[39m\u001b[33m,\u001b[39m\n     \u001b[90m 329 |\u001b[39m       )\u001b[33m;\u001b[39m\n     \u001b[90m 330 |\u001b[39m     })\u001b[33m;\u001b[39m\u001b[0m\n\n      at Object.toBe (src/lib/__tests__/uiUtils.test.ts:327:64)\n\n  ● uiUtils › formatters › should format currency\n\n    expect(received).toMatch(expected)\n\n    Expected pattern: /1\\.234,56/\n    Received string:  \"$1,234.56\"\n\n    \u001b[0m \u001b[90m 385 |\u001b[39m     it(\u001b[32m'should format currency'\u001b[39m\u001b[33m,\u001b[39m () \u001b[33m=>\u001b[39m {\n     \u001b[90m 386 |\u001b[39m       \u001b[36mconst\u001b[39m result \u001b[33m=\u001b[39m formatters\u001b[33m.\u001b[39mcurrency(\u001b[35m1234.56\u001b[39m)\u001b[33m;\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 387 |\u001b[39m       expect(result)\u001b[33m.\u001b[39mtoMatch(\u001b[35m/1\\.234,56/\u001b[39m)\u001b[33m;\u001b[39m \u001b[90m// Italian format\u001b[39m\n     \u001b[90m     |\u001b[39m                      \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 388 |\u001b[39m     })\u001b[33m;\u001b[39m\n     \u001b[90m 389 |\u001b[39m\n     \u001b[90m 390 |\u001b[39m     it(\u001b[32m'should format numbers'\u001b[39m\u001b[33m,\u001b[39m () \u001b[33m=>\u001b[39m {\u001b[0m\n\n      at Object.toMatch (src/lib/__tests__/uiUtils.test.ts:387:22)\n\n  ● uiUtils › formatters › should format numbers\n\n    expect(received).toMatch(expected)\n\n    Expected pattern: /1\\.234,57/\n    Received string:  \"1,234.57\"\n\n    \u001b[0m \u001b[90m 390 |\u001b[39m     it(\u001b[32m'should format numbers'\u001b[39m\u001b[33m,\u001b[39m () \u001b[33m=>\u001b[39m {\n     \u001b[90m 391 |\u001b[39m       \u001b[36mconst\u001b[39m result \u001b[33m=\u001b[39m formatters\u001b[33m.\u001b[39mnumber(\u001b[35m1234.567\u001b[39m\u001b[33m,\u001b[39m \u001b[35m2\u001b[39m)\u001b[33m;\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 392 |\u001b[39m       expect(result)\u001b[33m.\u001b[39mtoMatch(\u001b[35m/1\\.234,57/\u001b[39m)\u001b[33m;\u001b[39m \u001b[90m// Italian format with 2 decimals\u001b[39m\n     \u001b[90m     |\u001b[39m                      \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 393 |\u001b[39m     })\u001b[33m;\u001b[39m\n     \u001b[90m 394 |\u001b[39m\n     \u001b[90m 395 |\u001b[39m     it(\u001b[32m'should format percentage'\u001b[39m\u001b[33m,\u001b[39m () \u001b[33m=>\u001b[39m {\u001b[0m\n\n      at Object.toMatch (src/lib/__tests__/uiUtils.test.ts:392:22)\n\n  ● uiUtils › formatters › should format percentage\n\n    expect(received).toMatch(expected)\n\n    Expected pattern: /25,0/\n    Received string:  \"25.0%\"\n\n    \u001b[0m \u001b[90m 395 |\u001b[39m     it(\u001b[32m'should format percentage'\u001b[39m\u001b[33m,\u001b[39m () \u001b[33m=>\u001b[39m {\n     \u001b[90m 396 |\u001b[39m       \u001b[36mconst\u001b[39m result \u001b[33m=\u001b[39m formatters\u001b[33m.\u001b[39mpercentage(\u001b[35m25\u001b[39m\u001b[33m,\u001b[39m \u001b[35m1\u001b[39m)\u001b[33m;\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 397 |\u001b[39m       expect(result)\u001b[33m.\u001b[39mtoMatch(\u001b[35m/25,0/\u001b[39m)\u001b[33m;\u001b[39m \u001b[90m// 25% in Italian format\u001b[39m\n     \u001b[90m     |\u001b[39m                      \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 398 |\u001b[39m     })\u001b[33m;\u001b[39m\n     \u001b[90m 399 |\u001b[39m\n     \u001b[90m 400 |\u001b[39m     it(\u001b[32m'should format file size'\u001b[39m\u001b[33m,\u001b[39m () \u001b[33m=>\u001b[39m {\u001b[0m\n\n      at Object.toMatch (src/lib/__tests__/uiUtils.test.ts:397:22)\n\n  ● uiUtils › formatters › should truncate text\n\n    expect(received).toBe(expected) // Object.is equality\n\n    Expected: \"This is a very long ...\"\n    Received: \"This is a very lo...\"\n\n    \u001b[0m \u001b[90m 406 |\u001b[39m     it(\u001b[32m'should truncate text'\u001b[39m\u001b[33m,\u001b[39m () \u001b[33m=>\u001b[39m {\n     \u001b[90m 407 |\u001b[39m       expect(formatters\u001b[33m.\u001b[39mtruncate(\u001b[32m'Short text'\u001b[39m\u001b[33m,\u001b[39m \u001b[35m20\u001b[39m))\u001b[33m.\u001b[39mtoBe(\u001b[32m'Short text'\u001b[39m)\u001b[33m;\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 408 |\u001b[39m       expect(formatters\u001b[33m.\u001b[39mtruncate(\u001b[32m'This is a very long text that should be truncated'\u001b[39m\u001b[33m,\u001b[39m \u001b[35m20\u001b[39m))\u001b[33m.\u001b[39mtoBe(\n     \u001b[90m     |\u001b[39m                                                                                            \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 409 |\u001b[39m         \u001b[32m'This is a very long ...'\u001b[39m\u001b[33m,\u001b[39m\n     \u001b[90m 410 |\u001b[39m       )\u001b[33m;\u001b[39m\n     \u001b[90m 411 |\u001b[39m     })\u001b[33m;\u001b[39m\u001b[0m\n\n      at Object.toBe (src/lib/__tests__/uiUtils.test.ts:408:92)\n\nFAIL src/services/__tests__/imageProcessingService.test.js\n  ● ImageProcessingService › PDF Handling › should parse PDF and extract pages\n\n    TypeError: pdfBlob.arrayBuffer is not a function\n\n    \u001b[0m \u001b[90m 316 |\u001b[39m     pdfjsLib\u001b[33m.\u001b[39m\u001b[33mGlobalWorkerOptions\u001b[39m\u001b[33m.\u001b[39mworkerSrc \u001b[33m=\u001b[39m \u001b[32m`https://cdnjs.cloudflare.com/ajax/libs/pdf.js/${pdfjsLib.version}/pdf.worker.min.js`\u001b[39m\u001b[33m;\u001b[39m\n     \u001b[90m 317 |\u001b[39m     \n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 318 |\u001b[39m     \u001b[36mconst\u001b[39m arrayBuffer \u001b[33m=\u001b[39m \u001b[36mawait\u001b[39m pdfBlob\u001b[33m.\u001b[39marrayBuffer()\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                                       \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 319 |\u001b[39m     \u001b[36mconst\u001b[39m pdf \u001b[33m=\u001b[39m \u001b[36mawait\u001b[39m pdfjsLib\u001b[33m.\u001b[39mgetDocument({ data\u001b[33m:\u001b[39m arrayBuffer })\u001b[33m.\u001b[39mpromise\u001b[33m;\u001b[39m\n     \u001b[90m 320 |\u001b[39m     \n     \u001b[90m 321 |\u001b[39m     \u001b[36mconst\u001b[39m images\u001b[33m:\u001b[39m \u001b[33mBlob\u001b[39m[] \u001b[33m=\u001b[39m []\u001b[33m;\u001b[39m\u001b[0m\n\n      at ImageProcessingService.arrayBuffer [as parsePDF] (src/features/scanner/services/imageProcessingService.ts:318:39)\n      at Object.<anonymous> (src/services/__tests__/imageProcessingService.test.js:134:22)\n\n  ● ImageProcessingService › PDF Handling › should extract PDF pages with page numbers\n\n    TypeError: pdfBlob.arrayBuffer is not a function\n\n    \u001b[0m \u001b[90m 316 |\u001b[39m     pdfjsLib\u001b[33m.\u001b[39m\u001b[33mGlobalWorkerOptions\u001b[39m\u001b[33m.\u001b[39mworkerSrc \u001b[33m=\u001b[39m \u001b[32m`https://cdnjs.cloudflare.com/ajax/libs/pdf.js/${pdfjsLib.version}/pdf.worker.min.js`\u001b[39m\u001b[33m;\u001b[39m\n     \u001b[90m 317 |\u001b[39m     \n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 318 |\u001b[39m     \u001b[36mconst\u001b[39m arrayBuffer \u001b[33m=\u001b[39m \u001b[36mawait\u001b[39m pdfBlob\u001b[33m.\u001b[39marrayBuffer()\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                                       \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 319 |\u001b[39m     \u001b[36mconst\u001b[39m pdf \u001b[33m=\u001b[39m \u001b[36mawait\u001b[39m pdfjsLib\u001b[33m.\u001b[39mgetDocument({ data\u001b[33m:\u001b[39m arrayBuffer })\u001b[33m.\u001b[39mpromise\u001b[33m;\u001b[39m\n     \u001b[90m 320 |\u001b[39m     \n     \u001b[90m 321 |\u001b[39m     \u001b[36mconst\u001b[39m images\u001b[33m:\u001b[39m \u001b[33mBlob\u001b[39m[] \u001b[33m=\u001b[39m []\u001b[33m;\u001b[39m\u001b[0m\n\n      at ImageProcessingService.arrayBuffer [as parsePDF] (src/features/scanner/services/imageProcessingService.ts:318:39)\n      at ImageProcessingService.extractPDFPages (src/features/scanner/services/imageProcessingService.ts:356:20)\n      at Object.<anonymous> (src/services/__tests__/imageProcessingService.test.js:142:22)\n\nFAIL src/features/scanner/__tests__/services/resultCacheService.test.ts\n  ● ResultCacheService › initialization › should load cache from localStorage on initialization\n\n    expect(received).toBe(expected) // Object.is equality\n\n    Expected: true\n    Received: false\n\n    \u001b[0m \u001b[90m 130 |\u001b[39m       \u001b[36mconst\u001b[39m newService \u001b[33m=\u001b[39m \u001b[33mResultCacheService\u001b[39m\u001b[33m.\u001b[39mgetInstance()\u001b[33m;\u001b[39m\n     \u001b[90m 131 |\u001b[39m       \n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 132 |\u001b[39m       expect(newService\u001b[33m.\u001b[39mhas(\u001b[32m'test-key'\u001b[39m))\u001b[33m.\u001b[39mtoBe(\u001b[36mtrue\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                                          \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 133 |\u001b[39m     })\u001b[33m;\u001b[39m\n     \u001b[90m 134 |\u001b[39m\n     \u001b[90m 135 |\u001b[39m     it(\u001b[32m'should handle corrupted localStorage data gracefully'\u001b[39m\u001b[33m,\u001b[39m () \u001b[33m=>\u001b[39m {\u001b[0m\n\n      at Object.toBe (src/features/scanner/__tests__/services/resultCacheService.test.ts:132:42)\n\n  ● ResultCacheService › initialization › should handle corrupted localStorage data gracefully\n\n    expect(jest.fn()).toHaveBeenCalledWith(...expected)\n\n    Expected: \"scanner_cache\"\n\n    Number of calls: 0\n\n    \u001b[0m \u001b[90m 140 |\u001b[39m       })\u001b[33m.\u001b[39mnot\u001b[33m.\u001b[39mtoThrow()\u001b[33m;\u001b[39m\n     \u001b[90m 141 |\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 142 |\u001b[39m       expect(mockLocalStorage\u001b[33m.\u001b[39mremoveItem)\u001b[33m.\u001b[39mtoHaveBeenCalledWith(\u001b[32m'scanner_cache'\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                                           \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 143 |\u001b[39m     })\u001b[33m;\u001b[39m\n     \u001b[90m 144 |\u001b[39m   })\u001b[33m;\u001b[39m\n     \u001b[90m 145 |\u001b[39m\u001b[0m\n\n      at Object.toHaveBeenCalledWith (src/features/scanner/__tests__/services/resultCacheService.test.ts:142:43)\n\n  ● ResultCacheService › error handling › should handle hash generation errors\n\n    expect(received).not.toThrow()\n\n    Error name:    \"Error\"\n    Error message: \"Stringify error\"\n\n        \u001b[0m \u001b[90m 554 |\u001b[39m       \u001b[36mconst\u001b[39m originalStringify \u001b[33m=\u001b[39m \u001b[33mJSON\u001b[39m\u001b[33m.\u001b[39mstringify\u001b[33m;\u001b[39m\n         \u001b[90m 555 |\u001b[39m       \u001b[33mJSON\u001b[39m\u001b[33m.\u001b[39mstringify \u001b[33m=\u001b[39m jest\u001b[33m.\u001b[39mfn()\u001b[33m.\u001b[39mmockImplementation(() \u001b[33m=>\u001b[39m {\n        \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 556 |\u001b[39m         \u001b[36mthrow\u001b[39m \u001b[36mnew\u001b[39m \u001b[33mError\u001b[39m(\u001b[32m'Stringify error'\u001b[39m)\u001b[33m;\u001b[39m\n         \u001b[90m     |\u001b[39m               \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n         \u001b[90m 557 |\u001b[39m       })\u001b[33m;\u001b[39m\n         \u001b[90m 558 |\u001b[39m\n         \u001b[90m 559 |\u001b[39m       \u001b[36mconst\u001b[39m blob \u001b[33m=\u001b[39m \u001b[36mnew\u001b[39m \u001b[33mBlob\u001b[39m([\u001b[32m'test'\u001b[39m]\u001b[33m,\u001b[39m { type\u001b[33m:\u001b[39m \u001b[32m'image/jpeg'\u001b[39m })\u001b[33m;\u001b[39m\u001b[0m\n\n      at JSON.<anonymous> (src/features/scanner/__tests__/services/resultCacheService.test.ts:556:15)\n      at ResultCacheService.stringify [as hashObject] (src/features/scanner/services/resultCacheService.ts:427:22)\n      at ResultCacheService.hashObject [as generateOCRKey] (src/features/scanner/services/resultCacheService.ts:68:40)\n      at generateOCRKey (src/features/scanner/__tests__/services/resultCacheService.test.ts:563:17)\n      at Object.<anonymous> (../node_modules/expect/build/index.js:1824:9)\n      at Object.throwingMatcher [as toThrow] (../node_modules/expect/build/index.js:2231:93)\n      at Object.toThrow (src/features/scanner/__tests__/services/resultCacheService.test.ts:564:14)\n      at Object.toThrow (src/features/scanner/__tests__/services/resultCacheService.test.ts:564:14)\n\nFAIL src/features/email/components/__tests__/EmailSearchDashboard.minimal.test.jsx\n  ● Test suite failed to run\n\n    Cannot find module '../../../hooks/useEmailSearch' from 'src/features/email/components/__tests__/EmailSearchDashboard.minimal.test.jsx'\n\n    \u001b[0m \u001b[90m 4 |\u001b[39m\n     \u001b[90m 5 |\u001b[39m \u001b[90m// Mock all dependencies first\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 6 |\u001b[39m jest\u001b[33m.\u001b[39mmock(\u001b[32m'../../../hooks/useEmailSearch'\u001b[39m\u001b[33m,\u001b[39m () \u001b[33m=>\u001b[39m ({\n     \u001b[90m   |\u001b[39m      \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 7 |\u001b[39m   useEmailSearch\u001b[33m:\u001b[39m jest\u001b[33m.\u001b[39mfn(() \u001b[33m=>\u001b[39m ({\n     \u001b[90m 8 |\u001b[39m     searchResults\u001b[33m:\u001b[39m []\u001b[33m,\u001b[39m\n     \u001b[90m 9 |\u001b[39m     totalResults\u001b[33m:\u001b[39m \u001b[35m0\u001b[39m\u001b[33m,\u001b[39m\u001b[0m\n\n      at Resolver._throwModNotFoundError (../node_modules/jest-resolve/build/index.js:863:11)\n      at Object.mock (src/features/email/components/__tests__/EmailSearchDashboard.minimal.test.jsx:6:6)\n\nFAIL src/features/email/components/__tests__/EmailSearch.test.jsx\n  ● Test suite failed to run\n\n    Configuration error:\n\n    Could not locate module @hooks/useEmailSearch mapped as:\n    E:\\AlexVenturesStudio\\Nexa_Manager_whit_Task_Master\\web-app\\src\\hooks\\$1.\n\n    Please check your configuration for these entries:\n    {\n      \"moduleNameMapper\": {\n        \"/^@hooks\\/(.*)$/\": \"E:\\AlexVenturesStudio\\Nexa_Manager_whit_Task_Master\\web-app\\src\\hooks\\$1\"\n      },\n      \"resolver\": undefined\n    }\n\n    \u001b[0m \u001b[90m 10 |\u001b[39m\n     \u001b[90m 11 |\u001b[39m \u001b[90m// Mock dependencies\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 12 |\u001b[39m jest\u001b[33m.\u001b[39mmock(\u001b[32m'@hooks/useEmailSearch'\u001b[39m\u001b[33m,\u001b[39m () \u001b[33m=>\u001b[39m ({\n     \u001b[90m    |\u001b[39m      \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 13 |\u001b[39m   useEmailSearch\u001b[33m:\u001b[39m jest\u001b[33m.\u001b[39mfn()\u001b[33m,\u001b[39m\n     \u001b[90m 14 |\u001b[39m }))\u001b[33m;\u001b[39m\n     \u001b[90m 15 |\u001b[39m\u001b[0m\n\n      at createNoMappedModuleFoundError (../node_modules/jest-resolve/build/index.js:1117:17)\n      at Object.mock (src/features/email/components/__tests__/EmailSearch.test.jsx:12:6)\n\nFAIL src/features/email/components/__tests__/EmailRecipientInput.test.jsx\n  ● Test suite failed to run\n\n    Configuration error:\n\n    Could not locate module @hooks/useClients mapped as:\n    E:\\AlexVenturesStudio\\Nexa_Manager_whit_Task_Master\\web-app\\src\\hooks\\$1.\n\n    Please check your configuration for these entries:\n    {\n      \"moduleNameMapper\": {\n        \"/^@hooks\\/(.*)$/\": \"E:\\AlexVenturesStudio\\Nexa_Manager_whit_Task_Master\\web-app\\src\\hooks\\$1\"\n      },\n      \"resolver\": undefined\n    }\n\n    \u001b[0m \u001b[90m  5 |\u001b[39m\n     \u001b[90m  6 |\u001b[39m \u001b[90m// Mock the useClients hook\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m  7 |\u001b[39m jest\u001b[33m.\u001b[39mmock(\u001b[32m'@hooks/useClients'\u001b[39m\u001b[33m,\u001b[39m () \u001b[33m=>\u001b[39m ({\n     \u001b[90m    |\u001b[39m      \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m  8 |\u001b[39m   useClients\u001b[33m:\u001b[39m () \u001b[33m=>\u001b[39m ({\n     \u001b[90m  9 |\u001b[39m     clients\u001b[33m:\u001b[39m [\n     \u001b[90m 10 |\u001b[39m       {\u001b[0m\n\n      at createNoMappedModuleFoundError (../node_modules/jest-resolve/build/index.js:1117:17)\n      at Object.mock (src/features/email/components/__tests__/EmailRecipientInput.test.jsx:7:6)\n\nFAIL src/features/email/components/__tests__/EmailListContainer.test.jsx\n  ● Test suite failed to run\n\n    Configuration error:\n\n    Could not locate module @hooks/useEmailList mapped as:\n    E:\\AlexVenturesStudio\\Nexa_Manager_whit_Task_Master\\web-app\\src\\hooks\\$1.\n\n    Please check your configuration for these entries:\n    {\n      \"moduleNameMapper\": {\n        \"/^@hooks\\/(.*)$/\": \"E:\\AlexVenturesStudio\\Nexa_Manager_whit_Task_Master\\web-app\\src\\hooks\\$1\"\n      },\n      \"resolver\": undefined\n    }\n\n    \u001b[0m \u001b[90m  5 |\u001b[39m\n     \u001b[90m  6 |\u001b[39m \u001b[90m// Mock hooks\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m  7 |\u001b[39m jest\u001b[33m.\u001b[39mmock(\u001b[32m'@hooks/useEmailList'\u001b[39m\u001b[33m,\u001b[39m () \u001b[33m=>\u001b[39m ({\n     \u001b[90m    |\u001b[39m      \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m  8 |\u001b[39m   __esModule\u001b[33m:\u001b[39m \u001b[36mtrue\u001b[39m\u001b[33m,\u001b[39m\n     \u001b[90m  9 |\u001b[39m   \u001b[36mdefault\u001b[39m\u001b[33m:\u001b[39m jest\u001b[33m.\u001b[39mfn()\u001b[33m,\u001b[39m\n     \u001b[90m 10 |\u001b[39m }))\u001b[33m;\u001b[39m\u001b[0m\n\n      at createNoMappedModuleFoundError (../node_modules/jest-resolve/build/index.js:1117:17)\n      at Object.mock (src/features/email/components/__tests__/EmailListContainer.test.jsx:7:6)\n\nFAIL src/features/email/components/__tests__/EmailSearchResults.test.jsx\n  ● Test suite failed to run\n\n    Cannot find module '../../ui/Button' from 'src/features/email/components/__tests__/EmailSearchResults.test.jsx'\n\n    \u001b[0m \u001b[90m 25 |\u001b[39m\n     \u001b[90m 26 |\u001b[39m \u001b[90m// Mock UI components\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 27 |\u001b[39m jest\u001b[33m.\u001b[39mmock(\u001b[32m'../../ui/Button'\u001b[39m\u001b[33m,\u001b[39m () \u001b[33m=>\u001b[39m ({\n     \u001b[90m    |\u001b[39m      \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 28 |\u001b[39m   \u001b[33mButton\u001b[39m\u001b[33m:\u001b[39m ({ children\u001b[33m,\u001b[39m onClick\u001b[33m,\u001b[39m disabled\u001b[33m,\u001b[39m \u001b[33m...\u001b[39mprops }) \u001b[33m=>\u001b[39m (\n     \u001b[90m 29 |\u001b[39m     \u001b[33m<\u001b[39m\u001b[33mbutton\u001b[39m onClick\u001b[33m=\u001b[39m{onClick} disabled\u001b[33m=\u001b[39m{disabled} {\u001b[33m...\u001b[39mprops}\u001b[33m>\u001b[39m\n     \u001b[90m 30 |\u001b[39m       {children}\u001b[0m\n\n      at Resolver._throwModNotFoundError (../node_modules/jest-resolve/build/index.js:863:11)\n      at Object.mock (src/features/email/components/__tests__/EmailSearchResults.test.jsx:27:6)\n\nFAIL src/features/email/components/__tests__/EmailPerformanceMonitor.test.jsx\n  ● Test suite failed to run\n\n    Configuration error:\n\n    Could not locate module @lib/emailCacheService mapped as:\n    E:\\AlexVenturesStudio\\Nexa_Manager_whit_Task_Master\\web-app\\src\\lib\\$1.\n\n    Please check your configuration for these entries:\n    {\n      \"moduleNameMapper\": {\n        \"/^@lib\\/(.*)$/\": \"E:\\AlexVenturesStudio\\Nexa_Manager_whit_Task_Master\\web-app\\src\\lib\\$1\"\n      },\n      \"resolver\": undefined\n    }\n\n    \u001b[0m \u001b[90m  7 |\u001b[39m\n     \u001b[90m  8 |\u001b[39m \u001b[90m// Mock the services\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m  9 |\u001b[39m jest\u001b[33m.\u001b[39mmock(\u001b[32m'@lib/emailCacheService'\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m    |\u001b[39m      \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 10 |\u001b[39m jest\u001b[33m.\u001b[39mmock(\u001b[32m'@lib/emailSyncService'\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m 11 |\u001b[39m\n     \u001b[90m 12 |\u001b[39m \u001b[90m// Mock Logger to prevent import issues\u001b[39m\u001b[0m\n\n      at createNoMappedModuleFoundError (../node_modules/jest-resolve/build/index.js:1117:17)\n      at Object.mock (src/features/email/components/__tests__/EmailPerformanceMonitor.test.jsx:9:6)\n\nFAIL src/features/email/components/__tests__/EmailErrorBoundary.test.jsx\n  ● Test suite failed to run\n\n    Configuration error:\n\n    Could not locate module @lib/logger mapped as:\n    E:\\AlexVenturesStudio\\Nexa_Manager_whit_Task_Master\\web-app\\src\\lib\\$1.\n\n    Please check your configuration for these entries:\n    {\n      \"moduleNameMapper\": {\n        \"/^@lib\\/(.*)$/\": \"E:\\AlexVenturesStudio\\Nexa_Manager_whit_Task_Master\\web-app\\src\\lib\\$1\"\n      },\n      \"resolver\": undefined\n    }\n\n    \u001b[0m \u001b[90m 10 |\u001b[39m\n     \u001b[90m 11 |\u001b[39m \u001b[90m// Mock dependencies\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 12 |\u001b[39m jest\u001b[33m.\u001b[39mmock(\u001b[32m'@lib/logger'\u001b[39m\u001b[33m,\u001b[39m () \u001b[33m=>\u001b[39m ({\n     \u001b[90m    |\u001b[39m      \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 13 |\u001b[39m   __esModule\u001b[33m:\u001b[39m \u001b[36mtrue\u001b[39m\u001b[33m,\u001b[39m\n     \u001b[90m 14 |\u001b[39m   \u001b[36mdefault\u001b[39m\u001b[33m:\u001b[39m {\n     \u001b[90m 15 |\u001b[39m     error\u001b[33m:\u001b[39m jest\u001b[33m.\u001b[39mfn()\u001b[33m,\u001b[39m\u001b[0m\n\n      at createNoMappedModuleFoundError (../node_modules/jest-resolve/build/index.js:1117:17)\n      at Object.mock (src/features/email/components/__tests__/EmailErrorBoundary.test.jsx:12:6)\n\nFAIL src/features/email/components/__tests__/EmailComposer.test.jsx\n  ● Test suite failed to run\n\n    Configuration error:\n\n    Could not locate module @hooks/useEmailComposer mapped as:\n    E:\\AlexVenturesStudio\\Nexa_Manager_whit_Task_Master\\web-app\\src\\hooks\\$1.\n\n    Please check your configuration for these entries:\n    {\n      \"moduleNameMapper\": {\n        \"/^@hooks\\/(.*)$/\": \"E:\\AlexVenturesStudio\\Nexa_Manager_whit_Task_Master\\web-app\\src\\hooks\\$1\"\n      },\n      \"resolver\": undefined\n    }\n\n    \u001b[0m \u001b[90m  5 |\u001b[39m\n     \u001b[90m  6 |\u001b[39m \u001b[90m// Mock the hooks and services\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m  7 |\u001b[39m jest\u001b[33m.\u001b[39mmock(\u001b[32m'@hooks/useEmailComposer'\u001b[39m\u001b[33m,\u001b[39m () \u001b[33m=>\u001b[39m ({\n     \u001b[90m    |\u001b[39m      \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m  8 |\u001b[39m   useEmailComposer\u001b[33m:\u001b[39m () \u001b[33m=>\u001b[39m ({\n     \u001b[90m  9 |\u001b[39m     emailData\u001b[33m:\u001b[39m {\n     \u001b[90m 10 |\u001b[39m       to\u001b[33m:\u001b[39m \u001b[32m''\u001b[39m\u001b[33m,\u001b[39m\u001b[0m\n\n      at createNoMappedModuleFoundError (../node_modules/jest-resolve/build/index.js:1117:17)\n      at Object.mock (src/features/email/components/__tests__/EmailComposer.test.jsx:7:6)\n\nFAIL src/features/email/components/__tests__/debug-final.test.js\n  ● Test suite failed to run\n\n    Configuration error:\n\n    Could not locate module @lib/logger mapped as:\n    E:\\AlexVenturesStudio\\Nexa_Manager_whit_Task_Master\\web-app\\src\\lib\\$1.\n\n    Please check your configuration for these entries:\n    {\n      \"moduleNameMapper\": {\n        \"/^@lib\\/(.*)$/\": \"E:\\AlexVenturesStudio\\Nexa_Manager_whit_Task_Master\\web-app\\src\\lib\\$1\"\n      },\n      \"resolver\": undefined\n    }\n\n    \u001b[0m \u001b[90m  9 |\u001b[39m\n     \u001b[90m 10 |\u001b[39m \u001b[90m// Mock dependencies\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 11 |\u001b[39m jest\u001b[33m.\u001b[39mmock(\u001b[32m'@lib/logger'\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m    |\u001b[39m      \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 12 |\u001b[39m jest\u001b[33m.\u001b[39mmock(\u001b[32m'@lib/errorReportingService'\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m 13 |\u001b[39m jest\u001b[33m.\u001b[39mmock(\u001b[32m'react-i18next'\u001b[39m\u001b[33m,\u001b[39m () \u001b[33m=>\u001b[39m ({\n     \u001b[90m 14 |\u001b[39m   useTranslation\u001b[33m:\u001b[39m () \u001b[33m=>\u001b[39m ({\u001b[0m\n\n      at createNoMappedModuleFoundError (../node_modules/jest-resolve/build/index.js:1117:17)\n      at Object.mock (src/features/email/components/__tests__/debug-final.test.js:11:6)\n\nFAIL src/features/scanner/__tests__/services/ocrService.test.ts\n  ● AIOCRService › initialization › should handle initialization failure\n\n    expect(received).rejects.toThrow()\n\n    Received promise resolved instead of rejected\n    Resolved to value: undefined\n\n    \u001b[0m \u001b[90m 131 |\u001b[39m       mockOCRProviderFactory\u001b[33m.\u001b[39minitialize\u001b[33m.\u001b[39mmockRejectedValue(\u001b[36mnew\u001b[39m \u001b[33mError\u001b[39m(\u001b[32m'Init failed'\u001b[39m))\u001b[33m;\u001b[39m\n     \u001b[90m 132 |\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 133 |\u001b[39m       \u001b[36mawait\u001b[39m expect(service\u001b[33m.\u001b[39mextractText(mockBlob))\u001b[33m.\u001b[39mrejects\u001b[33m.\u001b[39mtoThrow(\u001b[32m'OCR service initialization failed'\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m             \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 134 |\u001b[39m     })\u001b[33m;\u001b[39m\n     \u001b[90m 135 |\u001b[39m   })\u001b[33m;\u001b[39m\n     \u001b[90m 136 |\u001b[39m\u001b[0m\n\n      at expect (../node_modules/expect/build/index.js:2113:15)\n      at Object.expect (src/features/scanner/__tests__/services/ocrService.test.ts:133:13)\n\n  ● AIOCRService › extractText › should handle fallback service failure with basic extraction\n\n    expect(received).toEqual(expected) // deep equality\n\n    - Expected  - 1\n    + Received  + 4\n\n    @@ -10,9 +10,12 @@\n            \"confidence\": 0.95,\n            \"text\": \"Extracted text content\",\n          },\n        ],\n        \"confidence\": 0.95,\n    -   \"processingTime\": 1500,\n    +   \"error\": undefined,\n    +   \"processingTime\": 0,\n        \"provider\": \"openai\",\n    +   \"rawResponse\": undefined,\n    +   \"tables\": undefined,\n        \"text\": \"Extracted text content\",\n      }\n\n    \u001b[0m \u001b[90m 215 |\u001b[39m       \u001b[36mconst\u001b[39m result \u001b[33m=\u001b[39m \u001b[36mawait\u001b[39m service\u001b[33m.\u001b[39mextractText(mockBlob)\u001b[33m;\u001b[39m\n     \u001b[90m 216 |\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 217 |\u001b[39m       expect(result)\u001b[33m.\u001b[39mtoEqual(mockOCRResult)\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                      \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 218 |\u001b[39m     })\u001b[33m;\u001b[39m\n     \u001b[90m 219 |\u001b[39m\n     \u001b[90m 220 |\u001b[39m     it(\u001b[32m'should return fallback result when all providers fail'\u001b[39m\u001b[33m,\u001b[39m \u001b[36masync\u001b[39m () \u001b[33m=>\u001b[39m {\u001b[0m\n\n      at Object.toEqual (src/features/scanner/__tests__/services/ocrService.test.ts:217:22)\n\n  ● AIOCRService › error scenarios › should handle provider timeout\n\n    TypeError: Cannot read properties of undefined (reading 'error')\n\n    \u001b[0m \u001b[90m 342 |\u001b[39m       \u001b[36mconst\u001b[39m result \u001b[33m=\u001b[39m \u001b[36mawait\u001b[39m service\u001b[33m.\u001b[39mextractText(mockBlob\u001b[33m,\u001b[39m options)\u001b[33m;\u001b[39m\n     \u001b[90m 343 |\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 344 |\u001b[39m       expect(result\u001b[33m.\u001b[39merror\u001b[33m?\u001b[39m\u001b[33m.\u001b[39mcode)\u001b[33m.\u001b[39mtoBe(\u001b[32m'ALL_PROVIDERS_FAILED'\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                     \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 345 |\u001b[39m     })\u001b[33m;\u001b[39m\n     \u001b[90m 346 |\u001b[39m\n     \u001b[90m 347 |\u001b[39m     it(\u001b[32m'should handle provider not found'\u001b[39m\u001b[33m,\u001b[39m \u001b[36masync\u001b[39m () \u001b[33m=>\u001b[39m {\u001b[0m\n\n      at Object.error (src/features/scanner/__tests__/services/ocrService.test.ts:344:21)\n\n  ● AIOCRService › error scenarios › should handle provider not found\n\n    TypeError: Cannot read properties of undefined (reading 'error')\n\n    \u001b[0m \u001b[90m 351 |\u001b[39m       \u001b[36mconst\u001b[39m result \u001b[33m=\u001b[39m \u001b[36mawait\u001b[39m service\u001b[33m.\u001b[39mextractText(mockBlob)\u001b[33m;\u001b[39m\n     \u001b[90m 352 |\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 353 |\u001b[39m       expect(result\u001b[33m.\u001b[39merror\u001b[33m?\u001b[39m\u001b[33m.\u001b[39mcode)\u001b[33m.\u001b[39mtoBe(\u001b[32m'ALL_PROVIDERS_FAILED'\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                     \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 354 |\u001b[39m     })\u001b[33m;\u001b[39m\n     \u001b[90m 355 |\u001b[39m\n     \u001b[90m 356 |\u001b[39m     it(\u001b[32m'should handle provider unavailable'\u001b[39m\u001b[33m,\u001b[39m \u001b[36masync\u001b[39m () \u001b[33m=>\u001b[39m {\u001b[0m\n\n      at Object.error (src/features/scanner/__tests__/services/ocrService.test.ts:353:21)\n\n  ● AIOCRService › error scenarios › should handle provider unavailable\n\n    TypeError: Cannot read properties of undefined (reading 'error')\n\n    \u001b[0m \u001b[90m 365 |\u001b[39m       \u001b[36mconst\u001b[39m result \u001b[33m=\u001b[39m \u001b[36mawait\u001b[39m service\u001b[33m.\u001b[39mextractText(mockBlob)\u001b[33m;\u001b[39m\n     \u001b[90m 366 |\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 367 |\u001b[39m       expect(result\u001b[33m.\u001b[39merror\u001b[33m?\u001b[39m\u001b[33m.\u001b[39mcode)\u001b[33m.\u001b[39mtoBe(\u001b[32m'ALL_PROVIDERS_FAILED'\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                     \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 368 |\u001b[39m     })\u001b[33m;\u001b[39m\n     \u001b[90m 369 |\u001b[39m   })\u001b[33m;\u001b[39m\n     \u001b[90m 370 |\u001b[39m\u001b[0m\n\n      at Object.error (src/features/scanner/__tests__/services/ocrService.test.ts:367:21)\n\n  ● AIOCRService › caching behavior › should skip caching on cache service failure\n\n    expect(received).toEqual(expected) // deep equality\n\n    Expected: {\"blocks\": [{\"bounds\": {\"height\": 20, \"width\": 100, \"x\": 0, \"y\": 0}, \"confidence\": 0.95, \"text\": \"Extracted text content\"}], \"confidence\": 0.95, \"processingTime\": 1500, \"provider\": \"openai\", \"text\": \"Extracted text content\"}\n    Received: undefined\n\n    \u001b[0m \u001b[90m 387 |\u001b[39m\n     \u001b[90m 388 |\u001b[39m       \u001b[90m// Should still return result even if caching fails\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 389 |\u001b[39m       expect(result)\u001b[33m.\u001b[39mtoEqual(mockOCRResult)\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                      \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 390 |\u001b[39m     })\u001b[33m;\u001b[39m\n     \u001b[90m 391 |\u001b[39m   })\u001b[33m;\u001b[39m\n     \u001b[90m 392 |\u001b[39m\u001b[0m\n\n      at Object.toEqual (src/features/scanner/__tests__/services/ocrService.test.ts:389:22)\n\nFAIL src/features/scanner/__tests__/integration/errorHandlingRecovery.test.ts\n  ● Test suite failed to run\n\n    Missing Supabase environment variables - check deployment configuration\n\n    \u001b[0m \u001b[90m 38 |\u001b[39m\n     \u001b[90m 39 |\u001b[39m   \u001b[33mLogger\u001b[39m\u001b[33m.\u001b[39merror(errorMessage)\u001b[33m;\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 40 |\u001b[39m   \u001b[36mthrow\u001b[39m \u001b[36mnew\u001b[39m \u001b[33mError\u001b[39m(\u001b[32m'Missing Supabase environment variables - check deployment configuration'\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m    |\u001b[39m         \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 41 |\u001b[39m }\n     \u001b[90m 42 |\u001b[39m\n     \u001b[90m 43 |\u001b[39m \u001b[90m// Regular client with anon key\u001b[39m\u001b[0m\n\n      at Object.<anonymous> (src/lib/supabaseClient.js:40:9)\n      at Object.require (src/features/scanner/services/documentStorageService.ts:2:1)\n      at Object.require (src/features/scanner/services/index.ts:7:1)\n      at Object.require (src/features/scanner/__tests__/integration/errorHandlingRecovery.test.ts:1:1)\n\nFAIL src/features/scanner/__tests__/services/imageProcessingService.test.ts\n  ● Test suite failed to run\n\n    Missing Supabase environment variables - check deployment configuration\n\n    \u001b[0m \u001b[90m 38 |\u001b[39m\n     \u001b[90m 39 |\u001b[39m   \u001b[33mLogger\u001b[39m\u001b[33m.\u001b[39merror(errorMessage)\u001b[33m;\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 40 |\u001b[39m   \u001b[36mthrow\u001b[39m \u001b[36mnew\u001b[39m \u001b[33mError\u001b[39m(\u001b[32m'Missing Supabase environment variables - check deployment configuration'\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m    |\u001b[39m         \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 41 |\u001b[39m }\n     \u001b[90m 42 |\u001b[39m\n     \u001b[90m 43 |\u001b[39m \u001b[90m// Regular client with anon key\u001b[39m\u001b[0m\n\n      at Object.<anonymous> (src/lib/supabaseClient.js:40:9)\n      at Object.require (src/features/scanner/services/documentStorageService.ts:2:1)\n      at Object.require (src/features/scanner/services/index.ts:7:1)\n      at Object.require (src/features/scanner/__tests__/services/imageProcessingService.test.ts:1:1)\n\nFAIL src/features/scanner/__tests__/integration/documentScannerFlow.test.ts\n  ● Test suite failed to run\n\n    Missing Supabase environment variables - check deployment configuration\n\n    \u001b[0m \u001b[90m 38 |\u001b[39m\n     \u001b[90m 39 |\u001b[39m   \u001b[33mLogger\u001b[39m\u001b[33m.\u001b[39merror(errorMessage)\u001b[33m;\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 40 |\u001b[39m   \u001b[36mthrow\u001b[39m \u001b[36mnew\u001b[39m \u001b[33mError\u001b[39m(\u001b[32m'Missing Supabase environment variables - check deployment configuration'\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m    |\u001b[39m         \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 41 |\u001b[39m }\n     \u001b[90m 42 |\u001b[39m\n     \u001b[90m 43 |\u001b[39m \u001b[90m// Regular client with anon key\u001b[39m\u001b[0m\n\n      at Object.<anonymous> (src/lib/supabaseClient.js:40:9)\n      at Object.require (src/features/scanner/services/documentStorageService.ts:2:1)\n      at Object.require (src/features/scanner/services/index.ts:7:1)\n      at Object.require (src/features/scanner/__tests__/integration/documentScannerFlow.test.ts:1:1)\n\nFAIL src/features/financial/components/QuoteEmailSender.test.jsx\n  ● Test suite failed to run\n\n    Cannot find module '../lib/emailService' from 'src/features/financial/components/QuoteEmailSender.test.jsx'\n\n    \u001b[0m \u001b[90m  5 |\u001b[39m\n     \u001b[90m  6 |\u001b[39m \u001b[90m// Mock emailService\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m  7 |\u001b[39m jest\u001b[33m.\u001b[39mmock(\u001b[32m'../lib/emailService'\u001b[39m\u001b[33m,\u001b[39m () \u001b[33m=>\u001b[39m ({\n     \u001b[90m    |\u001b[39m      \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m  8 |\u001b[39m   isValidEmail\u001b[33m:\u001b[39m email \u001b[33m=>\u001b[39m \u001b[35m/^[^\\s@]+@[^\\s@]+\\.[^\\s@]+$/\u001b[39m\u001b[33m.\u001b[39mtest(email)\u001b[33m,\u001b[39m\n     \u001b[90m  9 |\u001b[39m   sendQuoteEmail\u001b[33m:\u001b[39m jest\u001b[33m.\u001b[39mfn(() \u001b[33m=>\u001b[39m\n     \u001b[90m 10 |\u001b[39m     \u001b[33mPromise\u001b[39m\u001b[33m.\u001b[39mresolve({\u001b[0m\n\n      at Resolver._throwModNotFoundError (../node_modules/jest-resolve/build/index.js:863:11)\n      at Object.mock (src/features/financial/components/QuoteEmailSender.test.jsx:7:6)\n\nFAIL src/features/email/components/__tests__/EmailSearchDashboard.test.jsx\n  ● Test suite failed to run\n\n    Jest encountered an unexpected token\n\n    Jest failed to parse a file. This happens e.g. when your code or its dependencies use non-standard JavaScript syntax, or when Jest is not configured to support such syntax.\n\n    Out of the box Jest supports Babel, which will be used to transform your files into valid JS based on your Babel configuration.\n\n    By default \"node_modules\" folder is ignored by transformers.\n\n    Here's what you can do:\n     • If you are trying to use ECMAScript Modules, see https://jestjs.io/docs/ecmascript-modules for how to enable it.\n     • If you are trying to use TypeScript, see https://jestjs.io/docs/getting-started#using-typescript\n     • To have some of your \"node_modules\" files transformed, you can specify a custom \"transformIgnorePatterns\" in your config.\n     • If you need a custom transformation, specify a \"transform\" option in your config.\n     • If you simply want to mock your non-JS modules (e.g. binary assets) you can stub them out with the \"moduleNameMapper\" config option.\n\n    You'll find more details and examples of these config options in the docs:\n    https://jestjs.io/docs/configuration\n    For information about custom transformations, see:\n    https://jestjs.io/docs/code-transformation\n\n    Details:\n\n    SyntaxError: E:\\AlexVenturesStudio\\Nexa_Manager_whit_Task_Master\\web-app\\src\\features\\email\\components\\__tests__\\EmailSearchDashboard.test.jsx: Bad character escape sequence. (119:50)\n\n    \u001b[0m \u001b[90m 117 |\u001b[39m\n     \u001b[90m 118 |\u001b[39m \u001b[90m// Import the mocked hooks\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 119 |\u001b[39m \u001b[36mimport\u001b[39m { useEmailSearch } \u001b[36mfrom\u001b[39m \u001b[32m'@/features\\hooks\\useEmailSearch'\u001b[39m\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                                                   \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 120 |\u001b[39m \u001b[36mimport\u001b[39m { useEmails } \u001b[36mfrom\u001b[39m \u001b[32m'@/features\\hooks\\useEmails'\u001b[39m\u001b[33m;\u001b[39m\n     \u001b[90m 121 |\u001b[39m\n     \u001b[90m 122 |\u001b[39m describe(\u001b[32m'EmailSearchDashboard'\u001b[39m\u001b[33m,\u001b[39m () \u001b[33m=>\u001b[39m {\u001b[0m\n\n      at constructor (../node_modules/@babel/parser/src/parse-error.ts:95:45)\n      at JSXParserMixin.toParseError [as raise] (../node_modules/@babel/parser/src/tokenizer/index.ts:1503:19)\n      at Object.raise [as invalidEscapeSequence] (../node_modules/@babel/parser/src/tokenizer/index.ts:1576:12)\n      at invalidEscapeSequence (../node_modules/@babel/babel-helper-string-parser/src/index.ts:293:14)\n      at readHexChar (../node_modules/@babel/babel-helper-string-parser/src/index.ts:449:22)\n      at readCodePoint (../node_modules/@babel/babel-helper-string-parser/src/index.ts:191:24)\n      at readEscapedChar (../node_modules/@babel/babel-helper-string-parser/src/index.ts:80:19)\n      at JSXParserMixin.readStringContents [as readString] (../node_modules/@babel/parser/src/tokenizer/index.ts:1336:46)\n      at JSXParserMixin.readString (../node_modules/@babel/parser/src/tokenizer/index.ts:991:14)\n      at JSXParserMixin.getTokenFromCode (../node_modules/@babel/parser/src/plugins/jsx/index.ts:631:13)\n      at JSXParserMixin.getTokenFromCode [as nextToken] (../node_modules/@babel/parser/src/tokenizer/index.ts:278:10)\n      at JSXParserMixin.nextToken [as next] (../node_modules/@babel/parser/src/tokenizer/index.ts:121:10)\n      at JSXParserMixin.next [as eatContextual] (../node_modules/@babel/parser/src/parser/util.ts:98:12)\n      at JSXParserMixin.eatContextual [as expectContextual] (../node_modules/@babel/parser/src/parser/util.ts:110:15)\n      at JSXParserMixin.expectContextual [as parseImportSpecifiersAndAfter] (../node_modules/@babel/parser/src/parser/statement.ts:3174:10)\n      at JSXParserMixin.parseImportSpecifiersAndAfter [as parseImport] (../node_modules/@babel/parser/src/parser/statement.ts:3142:17)\n      at JSXParserMixin.parseImport [as parseStatementContent] (../node_modules/@babel/parser/src/parser/statement.ts:642:25)\n      at JSXParserMixin.parseStatementContent [as parseStatementLike] (../node_modules/@babel/parser/src/parser/statement.ts:477:17)\n      at JSXParserMixin.parseStatementLike [as parseModuleItem] (../node_modules/@babel/parser/src/parser/statement.ts:414:17)\n      at JSXParserMixin.parseModuleItem [as parseBlockOrModuleBlockBody] (../node_modules/@babel/parser/src/parser/statement.ts:1438:16)\n      at JSXParserMixin.parseBlockOrModuleBlockBody [as parseBlockBody] (../node_modules/@babel/parser/src/parser/statement.ts:1412:10)\n      at JSXParserMixin.parseBlockBody [as parseProgram] (../node_modules/@babel/parser/src/parser/statement.ts:229:10)\n      at JSXParserMixin.parseProgram [as parseTopLevel] (../node_modules/@babel/parser/src/parser/statement.ts:203:25)\n      at JSXParserMixin.parseTopLevel [as parse] (../node_modules/@babel/parser/src/parser/index.ts:93:10)\n      at parse (../node_modules/@babel/parser/src/index.ts:92:38)\n      at parser (../node_modules/@babel/core/src/parser/index.ts:28:19)\n          at parser.next (<anonymous>)\n      at normalizeFile (../node_modules/@babel/core/src/transformation/normalize-file.ts:49:24)\n          at normalizeFile.next (<anonymous>)\n      at run (../node_modules/@babel/core/src/transformation/index.ts:40:36)\n          at run.next (<anonymous>)\n      at transform (../node_modules/@babel/core/src/transform.ts:29:20)\n          at transform.next (<anonymous>)\n      at evaluateSync (../node_modules/gensync/index.js:251:28)\n      at sync (../node_modules/gensync/index.js:89:14)\n      at fn (../node_modules/@babel/core/src/errors/rewrite-stack-trace.ts:99:14)\n      at transformSync (../node_modules/@babel/core/src/transform.ts:66:52)\n      at ScriptTransformer.transformSource (../node_modules/@jest/transform/build/index.js:422:31)\n      at ScriptTransformer._transformAndBuildScript (../node_modules/@jest/transform/build/index.js:519:40)\n      at ScriptTransformer.transform (../node_modules/@jest/transform/build/index.js:558:19)\n\nFAIL src/features/analytics/components/ComparativeAnalytics.test.jsx\n  ● Test suite failed to run\n\n    Configuration error:\n\n    Could not locate module @lib/financialService mapped as:\n    E:\\AlexVenturesStudio\\Nexa_Manager_whit_Task_Master\\web-app\\src\\lib\\$1.\n\n    Please check your configuration for these entries:\n    {\n      \"moduleNameMapper\": {\n        \"/^@lib\\/(.*)$/\": \"E:\\AlexVenturesStudio\\Nexa_Manager_whit_Task_Master\\web-app\\src\\lib\\$1\"\n      },\n      \"resolver\": undefined\n    }\n\n    \u001b[0m \u001b[90m  6 |\u001b[39m\n     \u001b[90m  7 |\u001b[39m \u001b[90m// Mock the services\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m  8 |\u001b[39m jest\u001b[33m.\u001b[39mmock(\u001b[32m'@lib/financialService'\u001b[39m\u001b[33m,\u001b[39m () \u001b[33m=>\u001b[39m ({\n     \u001b[90m    |\u001b[39m      \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m  9 |\u001b[39m   getFinancialOverview\u001b[33m:\u001b[39m jest\u001b[33m.\u001b[39mfn(() \u001b[33m=>\u001b[39m\n     \u001b[90m 10 |\u001b[39m     \u001b[33mPromise\u001b[39m\u001b[33m.\u001b[39mresolve({\n     \u001b[90m 11 |\u001b[39m       success\u001b[33m:\u001b[39m \u001b[36mtrue\u001b[39m\u001b[33m,\u001b[39m\u001b[0m\n\n      at createNoMappedModuleFoundError (../node_modules/jest-resolve/build/index.js:1117:17)\n      at Object.mock (src/features/analytics/components/ComparativeAnalytics.test.jsx:8:6)\n\nFAIL src/features/analytics/components/ClientAnalyticsWidgets.test.jsx\n  ● Test suite failed to run\n\n    Configuration error:\n\n    Could not locate module @lib/clientService mapped as:\n    E:\\AlexVenturesStudio\\Nexa_Manager_whit_Task_Master\\web-app\\src\\lib\\$1.\n\n    Please check your configuration for these entries:\n    {\n      \"moduleNameMapper\": {\n        \"/^@lib\\/(.*)$/\": \"E:\\AlexVenturesStudio\\Nexa_Manager_whit_Task_Master\\web-app\\src\\lib\\$1\"\n      },\n      \"resolver\": undefined\n    }\n\n    \u001b[0m \u001b[90m  6 |\u001b[39m\n     \u001b[90m  7 |\u001b[39m \u001b[90m// Mock the services\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m  8 |\u001b[39m jest\u001b[33m.\u001b[39mmock(\u001b[32m'@lib/clientService'\u001b[39m\u001b[33m,\u001b[39m () \u001b[33m=>\u001b[39m ({\n     \u001b[90m    |\u001b[39m      \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m  9 |\u001b[39m   getClients\u001b[33m:\u001b[39m jest\u001b[33m.\u001b[39mfn(() \u001b[33m=>\u001b[39m\n     \u001b[90m 10 |\u001b[39m     \u001b[33mPromise\u001b[39m\u001b[33m.\u001b[39mresolve({\n     \u001b[90m 11 |\u001b[39m       data\u001b[33m:\u001b[39m [\u001b[0m\n\n      at createNoMappedModuleFoundError (../node_modules/jest-resolve/build/index.js:1117:17)\n      at Object.mock (src/features/analytics/components/ClientAnalyticsWidgets.test.jsx:8:6)\n\nFAIL src/features/scanner/__tests__/services/batchProcessingService.test.ts\n  ● Test suite failed to run\n\n    Missing Supabase environment variables - check deployment configuration\n\n    \u001b[0m \u001b[90m 38 |\u001b[39m\n     \u001b[90m 39 |\u001b[39m   \u001b[33mLogger\u001b[39m\u001b[33m.\u001b[39merror(errorMessage)\u001b[33m;\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 40 |\u001b[39m   \u001b[36mthrow\u001b[39m \u001b[36mnew\u001b[39m \u001b[33mError\u001b[39m(\u001b[32m'Missing Supabase environment variables - check deployment configuration'\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m    |\u001b[39m         \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 41 |\u001b[39m }\n     \u001b[90m 42 |\u001b[39m\n     \u001b[90m 43 |\u001b[39m \u001b[90m// Regular client with anon key\u001b[39m\u001b[0m\n\n      at Object.<anonymous> (src/lib/supabaseClient.js:40:9)\n      at Object.require (src/features/scanner/services/documentStorageService.ts:2:1)\n      at Object.require (src/features/scanner/services/index.ts:7:1)\n      at Object.require (src/features/scanner/__tests__/services/batchProcessingService.test.ts:1:1)\n\nFAIL src/__tests__/architecture/structure-validation.test.js\n  ● Test suite failed to run\n\n    Jest encountered an unexpected token\n\n    Jest failed to parse a file. This happens e.g. when your code or its dependencies use non-standard JavaScript syntax, or when Jest is not configured to support such syntax.\n\n    Out of the box Jest supports Babel, which will be used to transform your files into valid JS based on your Babel configuration.\n\n    By default \"node_modules\" folder is ignored by transformers.\n\n    Here's what you can do:\n     • If you are trying to use ECMAScript Modules, see https://jestjs.io/docs/ecmascript-modules for how to enable it.\n     • If you are trying to use TypeScript, see https://jestjs.io/docs/getting-started#using-typescript\n     • To have some of your \"node_modules\" files transformed, you can specify a custom \"transformIgnorePatterns\" in your config.\n     • If you need a custom transformation, specify a \"transform\" option in your config.\n     • If you simply want to mock your non-JS modules (e.g. binary assets) you can stub them out with the \"moduleNameMapper\" config option.\n\n    You'll find more details and examples of these config options in the docs:\n    https://jestjs.io/docs/configuration\n    For information about custom transformations, see:\n    https://jestjs.io/docs/code-transformation\n\n    Details:\n\n    E:\\AlexVenturesStudio\\Nexa_Manager_whit_Task_Master\\web-app\\src\\__tests__\\architecture\\structure-validation.test.js:14\n    const _filename = (0, _url.fileURLToPath)(import.meta.url);\n                                                     ^^^^\n\n    SyntaxError: Cannot use 'import.meta' outside a module\n\n      at Runtime.createScriptFromCode (../node_modules/jest-runtime/build/index.js:1314:40)\n\nFAIL src/components/notifications/NotificationCenter.test.jsx\n  ● NotificationCenter › renders notification bell with unread count\n\n    No QueryClient set, use QueryClientProvider to set one\n\n    \u001b[0m \u001b[90m 26 |\u001b[39m   \u001b[36mconst\u001b[39m [connectionError\u001b[33m,\u001b[39m setConnectionError] \u001b[33m=\u001b[39m useState(\u001b[36mnull\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m 27 |\u001b[39m   \u001b[36mconst\u001b[39m [lastMessage\u001b[33m,\u001b[39m setLastMessage] \u001b[33m=\u001b[39m useState(\u001b[36mnull\u001b[39m)\u001b[33m;\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 28 |\u001b[39m   \u001b[36mconst\u001b[39m queryClient \u001b[33m=\u001b[39m useQueryClient()\u001b[33m;\u001b[39m\n     \u001b[90m    |\u001b[39m                                     \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 29 |\u001b[39m   \u001b[36mconst\u001b[39m listenersRef \u001b[33m=\u001b[39m useRef(\u001b[36mnew\u001b[39m \u001b[33mMap\u001b[39m())\u001b[33m;\u001b[39m\n     \u001b[90m 30 |\u001b[39m\n     \u001b[90m 31 |\u001b[39m   \u001b[90m/**\u001b[39m\u001b[0m\n\n      at useQueryClient (../node_modules/@tanstack/react-query/src/QueryClientProvider.tsx:18:11)\n      at useWebSocket (src/hooks/useWebSocket.js:28:37)\n      at useRealtimeNotifications (src/hooks/useRealtimeNotifications.js:20:63)\n      at NotificationCenter (src/components/notifications/NotificationCenter.jsx:39:31)\n      at Object.react-stack-bottom-frame (../node_modules/react-dom/cjs/react-dom-client.development.js:23863:20)\n      at renderWithHooks (../node_modules/react-dom/cjs/react-dom-client.development.js:5529:22)\n      at updateFunctionComponent (../node_modules/react-dom/cjs/react-dom-client.development.js:8897:19)\n      at beginWork (../node_modules/react-dom/cjs/react-dom-client.development.js:10522:18)\n      at runWithFiberInDEV (../node_modules/react-dom/cjs/react-dom-client.development.js:1522:13)\n      at performUnitOfWork (../node_modules/react-dom/cjs/react-dom-client.development.js:15140:22)\n      at workLoopSync (../node_modules/react-dom/cjs/react-dom-client.development.js:14956:41)\n      at renderRootSync (../node_modules/react-dom/cjs/react-dom-client.development.js:14936:11)\n      at performWorkOnRoot (../node_modules/react-dom/cjs/react-dom-client.development.js:14462:44)\n      at performWorkOnRootViaSchedulerTask (../node_modules/react-dom/cjs/react-dom-client.development.js:16216:7)\n      at flushActQueue (../node_modules/react/cjs/react.development.js:566:34)\n      at process.env.NODE_ENV.exports.act (../node_modules/react/cjs/react.development.js:859:10)\n      at ../node_modules/@testing-library/react/dist/act-compat.js:47:25\n      at renderRoot (../node_modules/@testing-library/react/dist/pure.js:190:26)\n      at render (../node_modules/@testing-library/react/dist/pure.js:292:10)\n      at Object.<anonymous> (src/components/notifications/NotificationCenter.test.jsx:61:11)\n\n  ● NotificationCenter › opens notification panel when bell is clicked\n\n    No QueryClient set, use QueryClientProvider to set one\n\n    \u001b[0m \u001b[90m 26 |\u001b[39m   \u001b[36mconst\u001b[39m [connectionError\u001b[33m,\u001b[39m setConnectionError] \u001b[33m=\u001b[39m useState(\u001b[36mnull\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m 27 |\u001b[39m   \u001b[36mconst\u001b[39m [lastMessage\u001b[33m,\u001b[39m setLastMessage] \u001b[33m=\u001b[39m useState(\u001b[36mnull\u001b[39m)\u001b[33m;\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 28 |\u001b[39m   \u001b[36mconst\u001b[39m queryClient \u001b[33m=\u001b[39m useQueryClient()\u001b[33m;\u001b[39m\n     \u001b[90m    |\u001b[39m                                     \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 29 |\u001b[39m   \u001b[36mconst\u001b[39m listenersRef \u001b[33m=\u001b[39m useRef(\u001b[36mnew\u001b[39m \u001b[33mMap\u001b[39m())\u001b[33m;\u001b[39m\n     \u001b[90m 30 |\u001b[39m\n     \u001b[90m 31 |\u001b[39m   \u001b[90m/**\u001b[39m\u001b[0m\n\n      at useQueryClient (../node_modules/@tanstack/react-query/src/QueryClientProvider.tsx:18:11)\n      at useWebSocket (src/hooks/useWebSocket.js:28:37)\n      at useRealtimeNotifications (src/hooks/useRealtimeNotifications.js:20:63)\n      at NotificationCenter (src/components/notifications/NotificationCenter.jsx:39:31)\n      at Object.react-stack-bottom-frame (../node_modules/react-dom/cjs/react-dom-client.development.js:23863:20)\n      at renderWithHooks (../node_modules/react-dom/cjs/react-dom-client.development.js:5529:22)\n      at updateFunctionComponent (../node_modules/react-dom/cjs/react-dom-client.development.js:8897:19)\n      at beginWork (../node_modules/react-dom/cjs/react-dom-client.development.js:10522:18)\n      at runWithFiberInDEV (../node_modules/react-dom/cjs/react-dom-client.development.js:1522:13)\n      at performUnitOfWork (../node_modules/react-dom/cjs/react-dom-client.development.js:15140:22)\n      at workLoopSync (../node_modules/react-dom/cjs/react-dom-client.development.js:14956:41)\n      at renderRootSync (../node_modules/react-dom/cjs/react-dom-client.development.js:14936:11)\n      at performWorkOnRoot (../node_modules/react-dom/cjs/react-dom-client.development.js:14462:44)\n      at performWorkOnRootViaSchedulerTask (../node_modules/react-dom/cjs/react-dom-client.development.js:16216:7)\n      at flushActQueue (../node_modules/react/cjs/react.development.js:566:34)\n      at process.env.NODE_ENV.exports.act (../node_modules/react/cjs/react.development.js:859:10)\n      at ../node_modules/@testing-library/react/dist/act-compat.js:47:25\n      at renderRoot (../node_modules/@testing-library/react/dist/pure.js:190:26)\n      at render (../node_modules/@testing-library/react/dist/pure.js:292:10)\n      at Object.<anonymous> (src/components/notifications/NotificationCenter.test.jsx:71:11)\n\n  ● NotificationCenter › displays correct number of notifications\n\n    No QueryClient set, use QueryClientProvider to set one\n\n    \u001b[0m \u001b[90m 26 |\u001b[39m   \u001b[36mconst\u001b[39m [connectionError\u001b[33m,\u001b[39m setConnectionError] \u001b[33m=\u001b[39m useState(\u001b[36mnull\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m 27 |\u001b[39m   \u001b[36mconst\u001b[39m [lastMessage\u001b[33m,\u001b[39m setLastMessage] \u001b[33m=\u001b[39m useState(\u001b[36mnull\u001b[39m)\u001b[33m;\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 28 |\u001b[39m   \u001b[36mconst\u001b[39m queryClient \u001b[33m=\u001b[39m useQueryClient()\u001b[33m;\u001b[39m\n     \u001b[90m    |\u001b[39m                                     \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 29 |\u001b[39m   \u001b[36mconst\u001b[39m listenersRef \u001b[33m=\u001b[39m useRef(\u001b[36mnew\u001b[39m \u001b[33mMap\u001b[39m())\u001b[33m;\u001b[39m\n     \u001b[90m 30 |\u001b[39m\n     \u001b[90m 31 |\u001b[39m   \u001b[90m/**\u001b[39m\u001b[0m\n\n      at useQueryClient (../node_modules/@tanstack/react-query/src/QueryClientProvider.tsx:18:11)\n      at useWebSocket (src/hooks/useWebSocket.js:28:37)\n      at useRealtimeNotifications (src/hooks/useRealtimeNotifications.js:20:63)\n      at NotificationCenter (src/components/notifications/NotificationCenter.jsx:39:31)\n      at Object.react-stack-bottom-frame (../node_modules/react-dom/cjs/react-dom-client.development.js:23863:20)\n      at renderWithHooks (../node_modules/react-dom/cjs/react-dom-client.development.js:5529:22)\n      at updateFunctionComponent (../node_modules/react-dom/cjs/react-dom-client.development.js:8897:19)\n      at beginWork (../node_modules/react-dom/cjs/react-dom-client.development.js:10522:18)\n      at runWithFiberInDEV (../node_modules/react-dom/cjs/react-dom-client.development.js:1522:13)\n      at performUnitOfWork (../node_modules/react-dom/cjs/react-dom-client.development.js:15140:22)\n      at workLoopSync (../node_modules/react-dom/cjs/react-dom-client.development.js:14956:41)\n      at renderRootSync (../node_modules/react-dom/cjs/react-dom-client.development.js:14936:11)\n      at performWorkOnRoot (../node_modules/react-dom/cjs/react-dom-client.development.js:14462:44)\n      at performWorkOnRootViaSchedulerTask (../node_modules/react-dom/cjs/react-dom-client.development.js:16216:7)\n      at flushActQueue (../node_modules/react/cjs/react.development.js:566:34)\n      at process.env.NODE_ENV.exports.act (../node_modules/react/cjs/react.development.js:859:10)\n      at ../node_modules/@testing-library/react/dist/act-compat.js:47:25\n      at renderRoot (../node_modules/@testing-library/react/dist/pure.js:190:26)\n      at render (../node_modules/@testing-library/react/dist/pure.js:292:10)\n      at Object.<anonymous> (src/components/notifications/NotificationCenter.test.jsx:81:11)\n\n  ● NotificationCenter › filters notifications by type\n\n    No QueryClient set, use QueryClientProvider to set one\n\n    \u001b[0m \u001b[90m 26 |\u001b[39m   \u001b[36mconst\u001b[39m [connectionError\u001b[33m,\u001b[39m setConnectionError] \u001b[33m=\u001b[39m useState(\u001b[36mnull\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m 27 |\u001b[39m   \u001b[36mconst\u001b[39m [lastMessage\u001b[33m,\u001b[39m setLastMessage] \u001b[33m=\u001b[39m useState(\u001b[36mnull\u001b[39m)\u001b[33m;\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 28 |\u001b[39m   \u001b[36mconst\u001b[39m queryClient \u001b[33m=\u001b[39m useQueryClient()\u001b[33m;\u001b[39m\n     \u001b[90m    |\u001b[39m                                     \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 29 |\u001b[39m   \u001b[36mconst\u001b[39m listenersRef \u001b[33m=\u001b[39m useRef(\u001b[36mnew\u001b[39m \u001b[33mMap\u001b[39m())\u001b[33m;\u001b[39m\n     \u001b[90m 30 |\u001b[39m\n     \u001b[90m 31 |\u001b[39m   \u001b[90m/**\u001b[39m\u001b[0m\n\n      at useQueryClient (../node_modules/@tanstack/react-query/src/QueryClientProvider.tsx:18:11)\n      at useWebSocket (src/hooks/useWebSocket.js:28:37)\n      at useRealtimeNotifications (src/hooks/useRealtimeNotifications.js:20:63)\n      at NotificationCenter (src/components/notifications/NotificationCenter.jsx:39:31)\n      at Object.react-stack-bottom-frame (../node_modules/react-dom/cjs/react-dom-client.development.js:23863:20)\n      at renderWithHooks (../node_modules/react-dom/cjs/react-dom-client.development.js:5529:22)\n      at updateFunctionComponent (../node_modules/react-dom/cjs/react-dom-client.development.js:8897:19)\n      at beginWork (../node_modules/react-dom/cjs/react-dom-client.development.js:10522:18)\n      at runWithFiberInDEV (../node_modules/react-dom/cjs/react-dom-client.development.js:1522:13)\n      at performUnitOfWork (../node_modules/react-dom/cjs/react-dom-client.development.js:15140:22)\n      at workLoopSync (../node_modules/react-dom/cjs/react-dom-client.development.js:14956:41)\n      at renderRootSync (../node_modules/react-dom/cjs/react-dom-client.development.js:14936:11)\n      at performWorkOnRoot (../node_modules/react-dom/cjs/react-dom-client.development.js:14462:44)\n      at performWorkOnRootViaSchedulerTask (../node_modules/react-dom/cjs/react-dom-client.development.js:16216:7)\n      at flushActQueue (../node_modules/react/cjs/react.development.js:566:34)\n      at process.env.NODE_ENV.exports.act (../node_modules/react/cjs/react.development.js:859:10)\n      at ../node_modules/@testing-library/react/dist/act-compat.js:47:25\n      at renderRoot (../node_modules/@testing-library/react/dist/pure.js:190:26)\n      at render (../node_modules/@testing-library/react/dist/pure.js:292:10)\n      at Object.<anonymous> (src/components/notifications/NotificationCenter.test.jsx:91:11)\n\n  ● NotificationCenter › filters unread notifications\n\n    No QueryClient set, use QueryClientProvider to set one\n\n    \u001b[0m \u001b[90m 26 |\u001b[39m   \u001b[36mconst\u001b[39m [connectionError\u001b[33m,\u001b[39m setConnectionError] \u001b[33m=\u001b[39m useState(\u001b[36mnull\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m 27 |\u001b[39m   \u001b[36mconst\u001b[39m [lastMessage\u001b[33m,\u001b[39m setLastMessage] \u001b[33m=\u001b[39m useState(\u001b[36mnull\u001b[39m)\u001b[33m;\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 28 |\u001b[39m   \u001b[36mconst\u001b[39m queryClient \u001b[33m=\u001b[39m useQueryClient()\u001b[33m;\u001b[39m\n     \u001b[90m    |\u001b[39m                                     \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 29 |\u001b[39m   \u001b[36mconst\u001b[39m listenersRef \u001b[33m=\u001b[39m useRef(\u001b[36mnew\u001b[39m \u001b[33mMap\u001b[39m())\u001b[33m;\u001b[39m\n     \u001b[90m 30 |\u001b[39m\n     \u001b[90m 31 |\u001b[39m   \u001b[90m/**\u001b[39m\u001b[0m\n\n      at useQueryClient (../node_modules/@tanstack/react-query/src/QueryClientProvider.tsx:18:11)\n      at useWebSocket (src/hooks/useWebSocket.js:28:37)\n      at useRealtimeNotifications (src/hooks/useRealtimeNotifications.js:20:63)\n      at NotificationCenter (src/components/notifications/NotificationCenter.jsx:39:31)\n      at Object.react-stack-bottom-frame (../node_modules/react-dom/cjs/react-dom-client.development.js:23863:20)\n      at renderWithHooks (../node_modules/react-dom/cjs/react-dom-client.development.js:5529:22)\n      at updateFunctionComponent (../node_modules/react-dom/cjs/react-dom-client.development.js:8897:19)\n      at beginWork (../node_modules/react-dom/cjs/react-dom-client.development.js:10522:18)\n      at runWithFiberInDEV (../node_modules/react-dom/cjs/react-dom-client.development.js:1522:13)\n      at performUnitOfWork (../node_modules/react-dom/cjs/react-dom-client.development.js:15140:22)\n      at workLoopSync (../node_modules/react-dom/cjs/react-dom-client.development.js:14956:41)\n      at renderRootSync (../node_modules/react-dom/cjs/react-dom-client.development.js:14936:11)\n      at performWorkOnRoot (../node_modules/react-dom/cjs/react-dom-client.development.js:14462:44)\n      at performWorkOnRootViaSchedulerTask (../node_modules/react-dom/cjs/react-dom-client.development.js:16216:7)\n      at flushActQueue (../node_modules/react/cjs/react.development.js:566:34)\n      at process.env.NODE_ENV.exports.act (../node_modules/react/cjs/react.development.js:859:10)\n      at ../node_modules/@testing-library/react/dist/act-compat.js:47:25\n      at renderRoot (../node_modules/@testing-library/react/dist/pure.js:190:26)\n      at render (../node_modules/@testing-library/react/dist/pure.js:292:10)\n      at Object.<anonymous> (src/components/notifications/NotificationCenter.test.jsx:107:11)\n\n  ● NotificationCenter › marks notification as read when clicked\n\n    No QueryClient set, use QueryClientProvider to set one\n\n    \u001b[0m \u001b[90m 26 |\u001b[39m   \u001b[36mconst\u001b[39m [connectionError\u001b[33m,\u001b[39m setConnectionError] \u001b[33m=\u001b[39m useState(\u001b[36mnull\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m 27 |\u001b[39m   \u001b[36mconst\u001b[39m [lastMessage\u001b[33m,\u001b[39m setLastMessage] \u001b[33m=\u001b[39m useState(\u001b[36mnull\u001b[39m)\u001b[33m;\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 28 |\u001b[39m   \u001b[36mconst\u001b[39m queryClient \u001b[33m=\u001b[39m useQueryClient()\u001b[33m;\u001b[39m\n     \u001b[90m    |\u001b[39m                                     \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 29 |\u001b[39m   \u001b[36mconst\u001b[39m listenersRef \u001b[33m=\u001b[39m useRef(\u001b[36mnew\u001b[39m \u001b[33mMap\u001b[39m())\u001b[33m;\u001b[39m\n     \u001b[90m 30 |\u001b[39m\n     \u001b[90m 31 |\u001b[39m   \u001b[90m/**\u001b[39m\u001b[0m\n\n      at useQueryClient (../node_modules/@tanstack/react-query/src/QueryClientProvider.tsx:18:11)\n      at useWebSocket (src/hooks/useWebSocket.js:28:37)\n      at useRealtimeNotifications (src/hooks/useRealtimeNotifications.js:20:63)\n      at NotificationCenter (src/components/notifications/NotificationCenter.jsx:39:31)\n      at Object.react-stack-bottom-frame (../node_modules/react-dom/cjs/react-dom-client.development.js:23863:20)\n      at renderWithHooks (../node_modules/react-dom/cjs/react-dom-client.development.js:5529:22)\n      at updateFunctionComponent (../node_modules/react-dom/cjs/react-dom-client.development.js:8897:19)\n      at beginWork (../node_modules/react-dom/cjs/react-dom-client.development.js:10522:18)\n      at runWithFiberInDEV (../node_modules/react-dom/cjs/react-dom-client.development.js:1522:13)\n      at performUnitOfWork (../node_modules/react-dom/cjs/react-dom-client.development.js:15140:22)\n      at workLoopSync (../node_modules/react-dom/cjs/react-dom-client.development.js:14956:41)\n      at renderRootSync (../node_modules/react-dom/cjs/react-dom-client.development.js:14936:11)\n      at performWorkOnRoot (../node_modules/react-dom/cjs/react-dom-client.development.js:14462:44)\n      at performWorkOnRootViaSchedulerTask (../node_modules/react-dom/cjs/react-dom-client.development.js:16216:7)\n      at flushActQueue (../node_modules/react/cjs/react.development.js:566:34)\n      at process.env.NODE_ENV.exports.act (../node_modules/react/cjs/react.development.js:859:10)\n      at ../node_modules/@testing-library/react/dist/act-compat.js:47:25\n      at renderRoot (../node_modules/@testing-library/react/dist/pure.js:190:26)\n      at render (../node_modules/@testing-library/react/dist/pure.js:292:10)\n      at Object.<anonymous> (src/components/notifications/NotificationCenter.test.jsx:122:11)\n\n  ● NotificationCenter › marks all notifications as read\n\n    No QueryClient set, use QueryClientProvider to set one\n\n    \u001b[0m \u001b[90m 26 |\u001b[39m   \u001b[36mconst\u001b[39m [connectionError\u001b[33m,\u001b[39m setConnectionError] \u001b[33m=\u001b[39m useState(\u001b[36mnull\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m 27 |\u001b[39m   \u001b[36mconst\u001b[39m [lastMessage\u001b[33m,\u001b[39m setLastMessage] \u001b[33m=\u001b[39m useState(\u001b[36mnull\u001b[39m)\u001b[33m;\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 28 |\u001b[39m   \u001b[36mconst\u001b[39m queryClient \u001b[33m=\u001b[39m useQueryClient()\u001b[33m;\u001b[39m\n     \u001b[90m    |\u001b[39m                                     \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 29 |\u001b[39m   \u001b[36mconst\u001b[39m listenersRef \u001b[33m=\u001b[39m useRef(\u001b[36mnew\u001b[39m \u001b[33mMap\u001b[39m())\u001b[33m;\u001b[39m\n     \u001b[90m 30 |\u001b[39m\n     \u001b[90m 31 |\u001b[39m   \u001b[90m/**\u001b[39m\u001b[0m\n\n      at useQueryClient (../node_modules/@tanstack/react-query/src/QueryClientProvider.tsx:18:11)\n      at useWebSocket (src/hooks/useWebSocket.js:28:37)\n      at useRealtimeNotifications (src/hooks/useRealtimeNotifications.js:20:63)\n      at NotificationCenter (src/components/notifications/NotificationCenter.jsx:39:31)\n      at Object.react-stack-bottom-frame (../node_modules/react-dom/cjs/react-dom-client.development.js:23863:20)\n      at renderWithHooks (../node_modules/react-dom/cjs/react-dom-client.development.js:5529:22)\n      at updateFunctionComponent (../node_modules/react-dom/cjs/react-dom-client.development.js:8897:19)\n      at beginWork (../node_modules/react-dom/cjs/react-dom-client.development.js:10522:18)\n      at runWithFiberInDEV (../node_modules/react-dom/cjs/react-dom-client.development.js:1522:13)\n      at performUnitOfWork (../node_modules/react-dom/cjs/react-dom-client.development.js:15140:22)\n      at workLoopSync (../node_modules/react-dom/cjs/react-dom-client.development.js:14956:41)\n      at renderRootSync (../node_modules/react-dom/cjs/react-dom-client.development.js:14936:11)\n      at performWorkOnRoot (../node_modules/react-dom/cjs/react-dom-client.development.js:14462:44)\n      at performWorkOnRootViaSchedulerTask (../node_modules/react-dom/cjs/react-dom-client.development.js:16216:7)\n      at flushActQueue (../node_modules/react/cjs/react.development.js:566:34)\n      at process.env.NODE_ENV.exports.act (../node_modules/react/cjs/react.development.js:859:10)\n      at ../node_modules/@testing-library/react/dist/act-compat.js:47:25\n      at renderRoot (../node_modules/@testing-library/react/dist/pure.js:190:26)\n      at render (../node_modules/@testing-library/react/dist/pure.js:292:10)\n      at Object.<anonymous> (src/components/notifications/NotificationCenter.test.jsx:134:11)\n\n  ● NotificationCenter › removes notification when delete button is clicked\n\n    No QueryClient set, use QueryClientProvider to set one\n\n    \u001b[0m \u001b[90m 26 |\u001b[39m   \u001b[36mconst\u001b[39m [connectionError\u001b[33m,\u001b[39m setConnectionError] \u001b[33m=\u001b[39m useState(\u001b[36mnull\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m 27 |\u001b[39m   \u001b[36mconst\u001b[39m [lastMessage\u001b[33m,\u001b[39m setLastMessage] \u001b[33m=\u001b[39m useState(\u001b[36mnull\u001b[39m)\u001b[33m;\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 28 |\u001b[39m   \u001b[36mconst\u001b[39m queryClient \u001b[33m=\u001b[39m useQueryClient()\u001b[33m;\u001b[39m\n     \u001b[90m    |\u001b[39m                                     \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 29 |\u001b[39m   \u001b[36mconst\u001b[39m listenersRef \u001b[33m=\u001b[39m useRef(\u001b[36mnew\u001b[39m \u001b[33mMap\u001b[39m())\u001b[33m;\u001b[39m\n     \u001b[90m 30 |\u001b[39m\n     \u001b[90m 31 |\u001b[39m   \u001b[90m/**\u001b[39m\u001b[0m\n\n      at useQueryClient (../node_modules/@tanstack/react-query/src/QueryClientProvider.tsx:18:11)\n      at useWebSocket (src/hooks/useWebSocket.js:28:37)\n      at useRealtimeNotifications (src/hooks/useRealtimeNotifications.js:20:63)\n      at NotificationCenter (src/components/notifications/NotificationCenter.jsx:39:31)\n      at Object.react-stack-bottom-frame (../node_modules/react-dom/cjs/react-dom-client.development.js:23863:20)\n      at renderWithHooks (../node_modules/react-dom/cjs/react-dom-client.development.js:5529:22)\n      at updateFunctionComponent (../node_modules/react-dom/cjs/react-dom-client.development.js:8897:19)\n      at beginWork (../node_modules/react-dom/cjs/react-dom-client.development.js:10522:18)\n      at runWithFiberInDEV (../node_modules/react-dom/cjs/react-dom-client.development.js:1522:13)\n      at performUnitOfWork (../node_modules/react-dom/cjs/react-dom-client.development.js:15140:22)\n      at workLoopSync (../node_modules/react-dom/cjs/react-dom-client.development.js:14956:41)\n      at renderRootSync (../node_modules/react-dom/cjs/react-dom-client.development.js:14936:11)\n      at performWorkOnRoot (../node_modules/react-dom/cjs/react-dom-client.development.js:14462:44)\n      at performWorkOnRootViaSchedulerTask (../node_modules/react-dom/cjs/react-dom-client.development.js:16216:7)\n      at flushActQueue (../node_modules/react/cjs/react.development.js:566:34)\n      at process.env.NODE_ENV.exports.act (../node_modules/react/cjs/react.development.js:859:10)\n      at ../node_modules/@testing-library/react/dist/act-compat.js:47:25\n      at renderRoot (../node_modules/@testing-library/react/dist/pure.js:190:26)\n      at render (../node_modules/@testing-library/react/dist/pure.js:292:10)\n      at Object.<anonymous> (src/components/notifications/NotificationCenter.test.jsx:146:11)\n\n  ● NotificationCenter › clears all notifications\n\n    No QueryClient set, use QueryClientProvider to set one\n\n    \u001b[0m \u001b[90m 26 |\u001b[39m   \u001b[36mconst\u001b[39m [connectionError\u001b[33m,\u001b[39m setConnectionError] \u001b[33m=\u001b[39m useState(\u001b[36mnull\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m 27 |\u001b[39m   \u001b[36mconst\u001b[39m [lastMessage\u001b[33m,\u001b[39m setLastMessage] \u001b[33m=\u001b[39m useState(\u001b[36mnull\u001b[39m)\u001b[33m;\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 28 |\u001b[39m   \u001b[36mconst\u001b[39m queryClient \u001b[33m=\u001b[39m useQueryClient()\u001b[33m;\u001b[39m\n     \u001b[90m    |\u001b[39m                                     \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 29 |\u001b[39m   \u001b[36mconst\u001b[39m listenersRef \u001b[33m=\u001b[39m useRef(\u001b[36mnew\u001b[39m \u001b[33mMap\u001b[39m())\u001b[33m;\u001b[39m\n     \u001b[90m 30 |\u001b[39m\n     \u001b[90m 31 |\u001b[39m   \u001b[90m/**\u001b[39m\u001b[0m\n\n      at useQueryClient (../node_modules/@tanstack/react-query/src/QueryClientProvider.tsx:18:11)\n      at useWebSocket (src/hooks/useWebSocket.js:28:37)\n      at useRealtimeNotifications (src/hooks/useRealtimeNotifications.js:20:63)\n      at NotificationCenter (src/components/notifications/NotificationCenter.jsx:39:31)\n      at Object.react-stack-bottom-frame (../node_modules/react-dom/cjs/react-dom-client.development.js:23863:20)\n      at renderWithHooks (../node_modules/react-dom/cjs/react-dom-client.development.js:5529:22)\n      at updateFunctionComponent (../node_modules/react-dom/cjs/react-dom-client.development.js:8897:19)\n      at beginWork (../node_modules/react-dom/cjs/react-dom-client.development.js:10522:18)\n      at runWithFiberInDEV (../node_modules/react-dom/cjs/react-dom-client.development.js:1522:13)\n      at performUnitOfWork (../node_modules/react-dom/cjs/react-dom-client.development.js:15140:22)\n      at workLoopSync (../node_modules/react-dom/cjs/react-dom-client.development.js:14956:41)\n      at renderRootSync (../node_modules/react-dom/cjs/react-dom-client.development.js:14936:11)\n      at performWorkOnRoot (../node_modules/react-dom/cjs/react-dom-client.development.js:14462:44)\n      at performWorkOnRootViaSchedulerTask (../node_modules/react-dom/cjs/react-dom-client.development.js:16216:7)\n      at flushActQueue (../node_modules/react/cjs/react.development.js:566:34)\n      at process.env.NODE_ENV.exports.act (../node_modules/react/cjs/react.development.js:859:10)\n      at ../node_modules/@testing-library/react/dist/act-compat.js:47:25\n      at renderRoot (../node_modules/@testing-library/react/dist/pure.js:190:26)\n      at render (../node_modules/@testing-library/react/dist/pure.js:292:10)\n      at Object.<anonymous> (src/components/notifications/NotificationCenter.test.jsx:158:11)\n\n  ● NotificationCenter › displays correct notification icons\n\n    No QueryClient set, use QueryClientProvider to set one\n\n    \u001b[0m \u001b[90m 26 |\u001b[39m   \u001b[36mconst\u001b[39m [connectionError\u001b[33m,\u001b[39m setConnectionError] \u001b[33m=\u001b[39m useState(\u001b[36mnull\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m 27 |\u001b[39m   \u001b[36mconst\u001b[39m [lastMessage\u001b[33m,\u001b[39m setLastMessage] \u001b[33m=\u001b[39m useState(\u001b[36mnull\u001b[39m)\u001b[33m;\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 28 |\u001b[39m   \u001b[36mconst\u001b[39m queryClient \u001b[33m=\u001b[39m useQueryClient()\u001b[33m;\u001b[39m\n     \u001b[90m    |\u001b[39m                                     \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 29 |\u001b[39m   \u001b[36mconst\u001b[39m listenersRef \u001b[33m=\u001b[39m useRef(\u001b[36mnew\u001b[39m \u001b[33mMap\u001b[39m())\u001b[33m;\u001b[39m\n     \u001b[90m 30 |\u001b[39m\n     \u001b[90m 31 |\u001b[39m   \u001b[90m/**\u001b[39m\u001b[0m\n\n      at useQueryClient (../node_modules/@tanstack/react-query/src/QueryClientProvider.tsx:18:11)\n      at useWebSocket (src/hooks/useWebSocket.js:28:37)\n      at useRealtimeNotifications (src/hooks/useRealtimeNotifications.js:20:63)\n      at NotificationCenter (src/components/notifications/NotificationCenter.jsx:39:31)\n      at Object.react-stack-bottom-frame (../node_modules/react-dom/cjs/react-dom-client.development.js:23863:20)\n      at renderWithHooks (../node_modules/react-dom/cjs/react-dom-client.development.js:5529:22)\n      at updateFunctionComponent (../node_modules/react-dom/cjs/react-dom-client.development.js:8897:19)\n      at beginWork (../node_modules/react-dom/cjs/react-dom-client.development.js:10522:18)\n      at runWithFiberInDEV (../node_modules/react-dom/cjs/react-dom-client.development.js:1522:13)\n      at performUnitOfWork (../node_modules/react-dom/cjs/react-dom-client.development.js:15140:22)\n      at workLoopSync (../node_modules/react-dom/cjs/react-dom-client.development.js:14956:41)\n      at renderRootSync (../node_modules/react-dom/cjs/react-dom-client.development.js:14936:11)\n      at performWorkOnRoot (../node_modules/react-dom/cjs/react-dom-client.development.js:14462:44)\n      at performWorkOnRootViaSchedulerTask (../node_modules/react-dom/cjs/react-dom-client.development.js:16216:7)\n      at flushActQueue (../node_modules/react/cjs/react.development.js:566:34)\n      at process.env.NODE_ENV.exports.act (../node_modules/react/cjs/react.development.js:859:10)\n      at ../node_modules/@testing-library/react/dist/act-compat.js:47:25\n      at renderRoot (../node_modules/@testing-library/react/dist/pure.js:190:26)\n      at render (../node_modules/@testing-library/react/dist/pure.js:292:10)\n      at Object.<anonymous> (src/components/notifications/NotificationCenter.test.jsx:170:11)\n\n  ● NotificationCenter › displays relative time correctly\n\n    No QueryClient set, use QueryClientProvider to set one\n\n    \u001b[0m \u001b[90m 26 |\u001b[39m   \u001b[36mconst\u001b[39m [connectionError\u001b[33m,\u001b[39m setConnectionError] \u001b[33m=\u001b[39m useState(\u001b[36mnull\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m 27 |\u001b[39m   \u001b[36mconst\u001b[39m [lastMessage\u001b[33m,\u001b[39m setLastMessage] \u001b[33m=\u001b[39m useState(\u001b[36mnull\u001b[39m)\u001b[33m;\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 28 |\u001b[39m   \u001b[36mconst\u001b[39m queryClient \u001b[33m=\u001b[39m useQueryClient()\u001b[33m;\u001b[39m\n     \u001b[90m    |\u001b[39m                                     \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 29 |\u001b[39m   \u001b[36mconst\u001b[39m listenersRef \u001b[33m=\u001b[39m useRef(\u001b[36mnew\u001b[39m \u001b[33mMap\u001b[39m())\u001b[33m;\u001b[39m\n     \u001b[90m 30 |\u001b[39m\n     \u001b[90m 31 |\u001b[39m   \u001b[90m/**\u001b[39m\u001b[0m\n\n      at useQueryClient (../node_modules/@tanstack/react-query/src/QueryClientProvider.tsx:18:11)\n      at useWebSocket (src/hooks/useWebSocket.js:28:37)\n      at useRealtimeNotifications (src/hooks/useRealtimeNotifications.js:20:63)\n      at NotificationCenter (src/components/notifications/NotificationCenter.jsx:39:31)\n      at Object.react-stack-bottom-frame (../node_modules/react-dom/cjs/react-dom-client.development.js:23863:20)\n      at renderWithHooks (../node_modules/react-dom/cjs/react-dom-client.development.js:5529:22)\n      at updateFunctionComponent (../node_modules/react-dom/cjs/react-dom-client.development.js:8897:19)\n      at beginWork (../node_modules/react-dom/cjs/react-dom-client.development.js:10522:18)\n      at runWithFiberInDEV (../node_modules/react-dom/cjs/react-dom-client.development.js:1522:13)\n      at performUnitOfWork (../node_modules/react-dom/cjs/react-dom-client.development.js:15140:22)\n      at workLoopSync (../node_modules/react-dom/cjs/react-dom-client.development.js:14956:41)\n      at renderRootSync (../node_modules/react-dom/cjs/react-dom-client.development.js:14936:11)\n      at performWorkOnRoot (../node_modules/react-dom/cjs/react-dom-client.development.js:14462:44)\n      at performWorkOnRootViaSchedulerTask (../node_modules/react-dom/cjs/react-dom-client.development.js:16216:7)\n      at flushActQueue (../node_modules/react/cjs/react.development.js:566:34)\n      at process.env.NODE_ENV.exports.act (../node_modules/react/cjs/react.development.js:859:10)\n      at ../node_modules/@testing-library/react/dist/act-compat.js:47:25\n      at renderRoot (../node_modules/@testing-library/react/dist/pure.js:190:26)\n      at render (../node_modules/@testing-library/react/dist/pure.js:292:10)\n      at Object.<anonymous> (src/components/notifications/NotificationCenter.test.jsx:182:11)\n\n  ● NotificationCenter › shows empty state when no notifications\n\n    No QueryClient set, use QueryClientProvider to set one\n\n    \u001b[0m \u001b[90m 26 |\u001b[39m   \u001b[36mconst\u001b[39m [connectionError\u001b[33m,\u001b[39m setConnectionError] \u001b[33m=\u001b[39m useState(\u001b[36mnull\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m 27 |\u001b[39m   \u001b[36mconst\u001b[39m [lastMessage\u001b[33m,\u001b[39m setLastMessage] \u001b[33m=\u001b[39m useState(\u001b[36mnull\u001b[39m)\u001b[33m;\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 28 |\u001b[39m   \u001b[36mconst\u001b[39m queryClient \u001b[33m=\u001b[39m useQueryClient()\u001b[33m;\u001b[39m\n     \u001b[90m    |\u001b[39m                                     \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 29 |\u001b[39m   \u001b[36mconst\u001b[39m listenersRef \u001b[33m=\u001b[39m useRef(\u001b[36mnew\u001b[39m \u001b[33mMap\u001b[39m())\u001b[33m;\u001b[39m\n     \u001b[90m 30 |\u001b[39m\n     \u001b[90m 31 |\u001b[39m   \u001b[90m/**\u001b[39m\u001b[0m\n\n      at useQueryClient (../node_modules/@tanstack/react-query/src/QueryClientProvider.tsx:18:11)\n      at useWebSocket (src/hooks/useWebSocket.js:28:37)\n      at useRealtimeNotifications (src/hooks/useRealtimeNotifications.js:20:63)\n      at NotificationCenter (src/components/notifications/NotificationCenter.jsx:39:31)\n      at Object.react-stack-bottom-frame (../node_modules/react-dom/cjs/react-dom-client.development.js:23863:20)\n      at renderWithHooks (../node_modules/react-dom/cjs/react-dom-client.development.js:5529:22)\n      at updateFunctionComponent (../node_modules/react-dom/cjs/react-dom-client.development.js:8897:19)\n      at beginWork (../node_modules/react-dom/cjs/react-dom-client.development.js:10522:18)\n      at runWithFiberInDEV (../node_modules/react-dom/cjs/react-dom-client.development.js:1522:13)\n      at performUnitOfWork (../node_modules/react-dom/cjs/react-dom-client.development.js:15140:22)\n      at workLoopSync (../node_modules/react-dom/cjs/react-dom-client.development.js:14956:41)\n      at renderRootSync (../node_modules/react-dom/cjs/react-dom-client.development.js:14936:11)\n      at performWorkOnRoot (../node_modules/react-dom/cjs/react-dom-client.development.js:14462:44)\n      at performWorkOnRootViaSchedulerTask (../node_modules/react-dom/cjs/react-dom-client.development.js:16216:7)\n      at flushActQueue (../node_modules/react/cjs/react.development.js:566:34)\n      at process.env.NODE_ENV.exports.act (../node_modules/react/cjs/react.development.js:859:10)\n      at ../node_modules/@testing-library/react/dist/act-compat.js:47:25\n      at renderRoot (../node_modules/@testing-library/react/dist/pure.js:190:26)\n      at render (../node_modules/@testing-library/react/dist/pure.js:292:10)\n      at Object.<anonymous> (src/components/notifications/NotificationCenter.test.jsx:199:11)\n\n  ● NotificationCenter › closes panel when clicking outside\n\n    No QueryClient set, use QueryClientProvider to set one\n\n    \u001b[0m \u001b[90m 26 |\u001b[39m   \u001b[36mconst\u001b[39m [connectionError\u001b[33m,\u001b[39m setConnectionError] \u001b[33m=\u001b[39m useState(\u001b[36mnull\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m 27 |\u001b[39m   \u001b[36mconst\u001b[39m [lastMessage\u001b[33m,\u001b[39m setLastMessage] \u001b[33m=\u001b[39m useState(\u001b[36mnull\u001b[39m)\u001b[33m;\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 28 |\u001b[39m   \u001b[36mconst\u001b[39m queryClient \u001b[33m=\u001b[39m useQueryClient()\u001b[33m;\u001b[39m\n     \u001b[90m    |\u001b[39m                                     \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 29 |\u001b[39m   \u001b[36mconst\u001b[39m listenersRef \u001b[33m=\u001b[39m useRef(\u001b[36mnew\u001b[39m \u001b[33mMap\u001b[39m())\u001b[33m;\u001b[39m\n     \u001b[90m 30 |\u001b[39m\n     \u001b[90m 31 |\u001b[39m   \u001b[90m/**\u001b[39m\u001b[0m\n\n      at useQueryClient (../node_modules/@tanstack/react-query/src/QueryClientProvider.tsx:18:11)\n      at useWebSocket (src/hooks/useWebSocket.js:28:37)\n      at useRealtimeNotifications (src/hooks/useRealtimeNotifications.js:20:63)\n      at NotificationCenter (src/components/notifications/NotificationCenter.jsx:39:31)\n      at Object.react-stack-bottom-frame (../node_modules/react-dom/cjs/react-dom-client.development.js:23863:20)\n      at renderWithHooks (../node_modules/react-dom/cjs/react-dom-client.development.js:5529:22)\n      at updateFunctionComponent (../node_modules/react-dom/cjs/react-dom-client.development.js:8897:19)\n      at beginWork (../node_modules/react-dom/cjs/react-dom-client.development.js:10522:18)\n      at runWithFiberInDEV (../node_modules/react-dom/cjs/react-dom-client.development.js:1522:13)\n      at performUnitOfWork (../node_modules/react-dom/cjs/react-dom-client.development.js:15140:22)\n      at workLoopSync (../node_modules/react-dom/cjs/react-dom-client.development.js:14956:41)\n      at renderRootSync (../node_modules/react-dom/cjs/react-dom-client.development.js:14936:11)\n      at performWorkOnRoot (../node_modules/react-dom/cjs/react-dom-client.development.js:14462:44)\n      at performWorkOnRootViaSchedulerTask (../node_modules/react-dom/cjs/react-dom-client.development.js:16216:7)\n      at flushActQueue (../node_modules/react/cjs/react.development.js:566:34)\n      at process.env.NODE_ENV.exports.act (../node_modules/react/cjs/react.development.js:859:10)\n      at ../node_modules/@testing-library/react/dist/act-compat.js:47:25\n      at renderRoot (../node_modules/@testing-library/react/dist/pure.js:190:26)\n      at render (../node_modules/@testing-library/react/dist/pure.js:292:10)\n      at Object.<anonymous> (src/components/notifications/NotificationCenter.test.jsx:208:11)\n\n  ● NotificationCenter › handles keyboard navigation\n\n    No QueryClient set, use QueryClientProvider to set one\n\n    \u001b[0m \u001b[90m 26 |\u001b[39m   \u001b[36mconst\u001b[39m [connectionError\u001b[33m,\u001b[39m setConnectionError] \u001b[33m=\u001b[39m useState(\u001b[36mnull\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m 27 |\u001b[39m   \u001b[36mconst\u001b[39m [lastMessage\u001b[33m,\u001b[39m setLastMessage] \u001b[33m=\u001b[39m useState(\u001b[36mnull\u001b[39m)\u001b[33m;\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 28 |\u001b[39m   \u001b[36mconst\u001b[39m queryClient \u001b[33m=\u001b[39m useQueryClient()\u001b[33m;\u001b[39m\n     \u001b[90m    |\u001b[39m                                     \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 29 |\u001b[39m   \u001b[36mconst\u001b[39m listenersRef \u001b[33m=\u001b[39m useRef(\u001b[36mnew\u001b[39m \u001b[33mMap\u001b[39m())\u001b[33m;\u001b[39m\n     \u001b[90m 30 |\u001b[39m\n     \u001b[90m 31 |\u001b[39m   \u001b[90m/**\u001b[39m\u001b[0m\n\n      at useQueryClient (../node_modules/@tanstack/react-query/src/QueryClientProvider.tsx:18:11)\n      at useWebSocket (src/hooks/useWebSocket.js:28:37)\n      at useRealtimeNotifications (src/hooks/useRealtimeNotifications.js:20:63)\n      at NotificationCenter (src/components/notifications/NotificationCenter.jsx:39:31)\n      at Object.react-stack-bottom-frame (../node_modules/react-dom/cjs/react-dom-client.development.js:23863:20)\n      at renderWithHooks (../node_modules/react-dom/cjs/react-dom-client.development.js:5529:22)\n      at updateFunctionComponent (../node_modules/react-dom/cjs/react-dom-client.development.js:8897:19)\n      at beginWork (../node_modules/react-dom/cjs/react-dom-client.development.js:10522:18)\n      at runWithFiberInDEV (../node_modules/react-dom/cjs/react-dom-client.development.js:1522:13)\n      at performUnitOfWork (../node_modules/react-dom/cjs/react-dom-client.development.js:15140:22)\n      at workLoopSync (../node_modules/react-dom/cjs/react-dom-client.development.js:14956:41)\n      at renderRootSync (../node_modules/react-dom/cjs/react-dom-client.development.js:14936:11)\n      at performWorkOnRoot (../node_modules/react-dom/cjs/react-dom-client.development.js:14462:44)\n      at performWorkOnRootViaSchedulerTask (../node_modules/react-dom/cjs/react-dom-client.development.js:16216:7)\n      at flushActQueue (../node_modules/react/cjs/react.development.js:566:34)\n      at process.env.NODE_ENV.exports.act (../node_modules/react/cjs/react.development.js:859:10)\n      at ../node_modules/@testing-library/react/dist/act-compat.js:47:25\n      at renderRoot (../node_modules/@testing-library/react/dist/pure.js:190:26)\n      at render (../node_modules/@testing-library/react/dist/pure.js:292:10)\n      at Object.<anonymous> (src/components/notifications/NotificationCenter.test.jsx:227:11)\n\n  ● NotificationCenter › applies correct CSS classes for read/unread notifications\n\n    No QueryClient set, use QueryClientProvider to set one\n\n    \u001b[0m \u001b[90m 26 |\u001b[39m   \u001b[36mconst\u001b[39m [connectionError\u001b[33m,\u001b[39m setConnectionError] \u001b[33m=\u001b[39m useState(\u001b[36mnull\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m 27 |\u001b[39m   \u001b[36mconst\u001b[39m [lastMessage\u001b[33m,\u001b[39m setLastMessage] \u001b[33m=\u001b[39m useState(\u001b[36mnull\u001b[39m)\u001b[33m;\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 28 |\u001b[39m   \u001b[36mconst\u001b[39m queryClient \u001b[33m=\u001b[39m useQueryClient()\u001b[33m;\u001b[39m\n     \u001b[90m    |\u001b[39m                                     \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 29 |\u001b[39m   \u001b[36mconst\u001b[39m listenersRef \u001b[33m=\u001b[39m useRef(\u001b[36mnew\u001b[39m \u001b[33mMap\u001b[39m())\u001b[33m;\u001b[39m\n     \u001b[90m 30 |\u001b[39m\n     \u001b[90m 31 |\u001b[39m   \u001b[90m/**\u001b[39m\u001b[0m\n\n      at useQueryClient (../node_modules/@tanstack/react-query/src/QueryClientProvider.tsx:18:11)\n      at useWebSocket (src/hooks/useWebSocket.js:28:37)\n      at useRealtimeNotifications (src/hooks/useRealtimeNotifications.js:20:63)\n      at NotificationCenter (src/components/notifications/NotificationCenter.jsx:39:31)\n      at Object.react-stack-bottom-frame (../node_modules/react-dom/cjs/react-dom-client.development.js:23863:20)\n      at renderWithHooks (../node_modules/react-dom/cjs/react-dom-client.development.js:5529:22)\n      at updateFunctionComponent (../node_modules/react-dom/cjs/react-dom-client.development.js:8897:19)\n      at beginWork (../node_modules/react-dom/cjs/react-dom-client.development.js:10522:18)\n      at runWithFiberInDEV (../node_modules/react-dom/cjs/react-dom-client.development.js:1522:13)\n      at performUnitOfWork (../node_modules/react-dom/cjs/react-dom-client.development.js:15140:22)\n      at workLoopSync (../node_modules/react-dom/cjs/react-dom-client.development.js:14956:41)\n      at renderRootSync (../node_modules/react-dom/cjs/react-dom-client.development.js:14936:11)\n      at performWorkOnRoot (../node_modules/react-dom/cjs/react-dom-client.development.js:14462:44)\n      at performWorkOnRootViaSchedulerTask (../node_modules/react-dom/cjs/react-dom-client.development.js:16216:7)\n      at flushActQueue (../node_modules/react/cjs/react.development.js:566:34)\n      at process.env.NODE_ENV.exports.act (../node_modules/react/cjs/react.development.js:859:10)\n      at ../node_modules/@testing-library/react/dist/act-compat.js:47:25\n      at renderRoot (../node_modules/@testing-library/react/dist/pure.js:190:26)\n      at render (../node_modules/@testing-library/react/dist/pure.js:292:10)\n      at Object.<anonymous> (src/components/notifications/NotificationCenter.test.jsx:241:11)\n\n  ● NotificationCenter › displays correct priority colors\n\n    No QueryClient set, use QueryClientProvider to set one\n\n    \u001b[0m \u001b[90m 26 |\u001b[39m   \u001b[36mconst\u001b[39m [connectionError\u001b[33m,\u001b[39m setConnectionError] \u001b[33m=\u001b[39m useState(\u001b[36mnull\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m 27 |\u001b[39m   \u001b[36mconst\u001b[39m [lastMessage\u001b[33m,\u001b[39m setLastMessage] \u001b[33m=\u001b[39m useState(\u001b[36mnull\u001b[39m)\u001b[33m;\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 28 |\u001b[39m   \u001b[36mconst\u001b[39m queryClient \u001b[33m=\u001b[39m useQueryClient()\u001b[33m;\u001b[39m\n     \u001b[90m    |\u001b[39m                                     \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 29 |\u001b[39m   \u001b[36mconst\u001b[39m listenersRef \u001b[33m=\u001b[39m useRef(\u001b[36mnew\u001b[39m \u001b[33mMap\u001b[39m())\u001b[33m;\u001b[39m\n     \u001b[90m 30 |\u001b[39m\n     \u001b[90m 31 |\u001b[39m   \u001b[90m/**\u001b[39m\u001b[0m\n\n      at useQueryClient (../node_modules/@tanstack/react-query/src/QueryClientProvider.tsx:18:11)\n      at useWebSocket (src/hooks/useWebSocket.js:28:37)\n      at useRealtimeNotifications (src/hooks/useRealtimeNotifications.js:20:63)\n      at NotificationCenter (src/components/notifications/NotificationCenter.jsx:39:31)\n      at Object.react-stack-bottom-frame (../node_modules/react-dom/cjs/react-dom-client.development.js:23863:20)\n      at renderWithHooks (../node_modules/react-dom/cjs/react-dom-client.development.js:5529:22)\n      at updateFunctionComponent (../node_modules/react-dom/cjs/react-dom-client.development.js:8897:19)\n      at beginWork (../node_modules/react-dom/cjs/react-dom-client.development.js:10522:18)\n      at runWithFiberInDEV (../node_modules/react-dom/cjs/react-dom-client.development.js:1522:13)\n      at performUnitOfWork (../node_modules/react-dom/cjs/react-dom-client.development.js:15140:22)\n      at workLoopSync (../node_modules/react-dom/cjs/react-dom-client.development.js:14956:41)\n      at renderRootSync (../node_modules/react-dom/cjs/react-dom-client.development.js:14936:11)\n      at performWorkOnRoot (../node_modules/react-dom/cjs/react-dom-client.development.js:14462:44)\n      at performWorkOnRootViaSchedulerTask (../node_modules/react-dom/cjs/react-dom-client.development.js:16216:7)\n      at flushActQueue (../node_modules/react/cjs/react.development.js:566:34)\n      at process.env.NODE_ENV.exports.act (../node_modules/react/cjs/react.development.js:859:10)\n      at ../node_modules/@testing-library/react/dist/act-compat.js:47:25\n      at renderRoot (../node_modules/@testing-library/react/dist/pure.js:190:26)\n      at render (../node_modules/@testing-library/react/dist/pure.js:292:10)\n      at Object.<anonymous> (src/components/notifications/NotificationCenter.test.jsx:254:11)\n\n  ● NotificationCenter › handles long notification messages\n\n    No QueryClient set, use QueryClientProvider to set one\n\n    \u001b[0m \u001b[90m 26 |\u001b[39m   \u001b[36mconst\u001b[39m [connectionError\u001b[33m,\u001b[39m setConnectionError] \u001b[33m=\u001b[39m useState(\u001b[36mnull\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m 27 |\u001b[39m   \u001b[36mconst\u001b[39m [lastMessage\u001b[33m,\u001b[39m setLastMessage] \u001b[33m=\u001b[39m useState(\u001b[36mnull\u001b[39m)\u001b[33m;\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 28 |\u001b[39m   \u001b[36mconst\u001b[39m queryClient \u001b[33m=\u001b[39m useQueryClient()\u001b[33m;\u001b[39m\n     \u001b[90m    |\u001b[39m                                     \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 29 |\u001b[39m   \u001b[36mconst\u001b[39m listenersRef \u001b[33m=\u001b[39m useRef(\u001b[36mnew\u001b[39m \u001b[33mMap\u001b[39m())\u001b[33m;\u001b[39m\n     \u001b[90m 30 |\u001b[39m\n     \u001b[90m 31 |\u001b[39m   \u001b[90m/**\u001b[39m\u001b[0m\n\n      at useQueryClient (../node_modules/@tanstack/react-query/src/QueryClientProvider.tsx:18:11)\n      at useWebSocket (src/hooks/useWebSocket.js:28:37)\n      at useRealtimeNotifications (src/hooks/useRealtimeNotifications.js:20:63)\n      at NotificationCenter (src/components/notifications/NotificationCenter.jsx:39:31)\n      at Object.react-stack-bottom-frame (../node_modules/react-dom/cjs/react-dom-client.development.js:23863:20)\n      at renderWithHooks (../node_modules/react-dom/cjs/react-dom-client.development.js:5529:22)\n      at updateFunctionComponent (../node_modules/react-dom/cjs/react-dom-client.development.js:8897:19)\n      at beginWork (../node_modules/react-dom/cjs/react-dom-client.development.js:10522:18)\n      at runWithFiberInDEV (../node_modules/react-dom/cjs/react-dom-client.development.js:1522:13)\n      at performUnitOfWork (../node_modules/react-dom/cjs/react-dom-client.development.js:15140:22)\n      at workLoopSync (../node_modules/react-dom/cjs/react-dom-client.development.js:14956:41)\n      at renderRootSync (../node_modules/react-dom/cjs/react-dom-client.development.js:14936:11)\n      at performWorkOnRoot (../node_modules/react-dom/cjs/react-dom-client.development.js:14462:44)\n      at performWorkOnRootViaSchedulerTask (../node_modules/react-dom/cjs/react-dom-client.development.js:16216:7)\n      at flushActQueue (../node_modules/react/cjs/react.development.js:566:34)\n      at process.env.NODE_ENV.exports.act (../node_modules/react/cjs/react.development.js:859:10)\n      at ../node_modules/@testing-library/react/dist/act-compat.js:47:25\n      at renderRoot (../node_modules/@testing-library/react/dist/pure.js:190:26)\n      at render (../node_modules/@testing-library/react/dist/pure.js:292:10)\n      at Object.<anonymous> (src/components/notifications/NotificationCenter.test.jsx:274:11)\n\n  ● NotificationCenter › updates unread count when notifications change\n\n    No QueryClient set, use QueryClientProvider to set one\n\n    \u001b[0m \u001b[90m 26 |\u001b[39m   \u001b[36mconst\u001b[39m [connectionError\u001b[33m,\u001b[39m setConnectionError] \u001b[33m=\u001b[39m useState(\u001b[36mnull\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m 27 |\u001b[39m   \u001b[36mconst\u001b[39m [lastMessage\u001b[33m,\u001b[39m setLastMessage] \u001b[33m=\u001b[39m useState(\u001b[36mnull\u001b[39m)\u001b[33m;\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 28 |\u001b[39m   \u001b[36mconst\u001b[39m queryClient \u001b[33m=\u001b[39m useQueryClient()\u001b[33m;\u001b[39m\n     \u001b[90m    |\u001b[39m                                     \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 29 |\u001b[39m   \u001b[36mconst\u001b[39m listenersRef \u001b[33m=\u001b[39m useRef(\u001b[36mnew\u001b[39m \u001b[33mMap\u001b[39m())\u001b[33m;\u001b[39m\n     \u001b[90m 30 |\u001b[39m\n     \u001b[90m 31 |\u001b[39m   \u001b[90m/**\u001b[39m\u001b[0m\n\n      at useQueryClient (../node_modules/@tanstack/react-query/src/QueryClientProvider.tsx:18:11)\n      at useWebSocket (src/hooks/useWebSocket.js:28:37)\n      at useRealtimeNotifications (src/hooks/useRealtimeNotifications.js:20:63)\n      at NotificationCenter (src/components/notifications/NotificationCenter.jsx:39:31)\n      at Object.react-stack-bottom-frame (../node_modules/react-dom/cjs/react-dom-client.development.js:23863:20)\n      at renderWithHooks (../node_modules/react-dom/cjs/react-dom-client.development.js:5529:22)\n      at updateFunctionComponent (../node_modules/react-dom/cjs/react-dom-client.development.js:8897:19)\n      at beginWork (../node_modules/react-dom/cjs/react-dom-client.development.js:10522:18)\n      at runWithFiberInDEV (../node_modules/react-dom/cjs/react-dom-client.development.js:1522:13)\n      at performUnitOfWork (../node_modules/react-dom/cjs/react-dom-client.development.js:15140:22)\n      at workLoopSync (../node_modules/react-dom/cjs/react-dom-client.development.js:14956:41)\n      at renderRootSync (../node_modules/react-dom/cjs/react-dom-client.development.js:14936:11)\n      at performWorkOnRoot (../node_modules/react-dom/cjs/react-dom-client.development.js:14462:44)\n      at performWorkOnRootViaSchedulerTask (../node_modules/react-dom/cjs/react-dom-client.development.js:16216:7)\n      at flushActQueue (../node_modules/react/cjs/react.development.js:566:34)\n      at process.env.NODE_ENV.exports.act (../node_modules/react/cjs/react.development.js:859:10)\n      at ../node_modules/@testing-library/react/dist/act-compat.js:47:25\n      at renderRoot (../node_modules/@testing-library/react/dist/pure.js:190:26)\n      at render (../node_modules/@testing-library/react/dist/pure.js:292:10)\n      at Object.<anonymous> (src/components/notifications/NotificationCenter.test.jsx:284:32)\n\n  ● NotificationCenter › handles notification with missing data gracefully\n\n    No QueryClient set, use QueryClientProvider to set one\n\n    \u001b[0m \u001b[90m 26 |\u001b[39m   \u001b[36mconst\u001b[39m [connectionError\u001b[33m,\u001b[39m setConnectionError] \u001b[33m=\u001b[39m useState(\u001b[36mnull\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m 27 |\u001b[39m   \u001b[36mconst\u001b[39m [lastMessage\u001b[33m,\u001b[39m setLastMessage] \u001b[33m=\u001b[39m useState(\u001b[36mnull\u001b[39m)\u001b[33m;\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 28 |\u001b[39m   \u001b[36mconst\u001b[39m queryClient \u001b[33m=\u001b[39m useQueryClient()\u001b[33m;\u001b[39m\n     \u001b[90m    |\u001b[39m                                     \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 29 |\u001b[39m   \u001b[36mconst\u001b[39m listenersRef \u001b[33m=\u001b[39m useRef(\u001b[36mnew\u001b[39m \u001b[33mMap\u001b[39m())\u001b[33m;\u001b[39m\n     \u001b[90m 30 |\u001b[39m\n     \u001b[90m 31 |\u001b[39m   \u001b[90m/**\u001b[39m\u001b[0m\n\n      at useQueryClient (../node_modules/@tanstack/react-query/src/QueryClientProvider.tsx:18:11)\n      at useWebSocket (src/hooks/useWebSocket.js:28:37)\n      at useRealtimeNotifications (src/hooks/useRealtimeNotifications.js:20:63)\n      at NotificationCenter (src/components/notifications/NotificationCenter.jsx:39:31)\n      at Object.react-stack-bottom-frame (../node_modules/react-dom/cjs/react-dom-client.development.js:23863:20)\n      at renderWithHooks (../node_modules/react-dom/cjs/react-dom-client.development.js:5529:22)\n      at updateFunctionComponent (../node_modules/react-dom/cjs/react-dom-client.development.js:8897:19)\n      at beginWork (../node_modules/react-dom/cjs/react-dom-client.development.js:10522:18)\n      at runWithFiberInDEV (../node_modules/react-dom/cjs/react-dom-client.development.js:1522:13)\n      at performUnitOfWork (../node_modules/react-dom/cjs/react-dom-client.development.js:15140:22)\n      at workLoopSync (../node_modules/react-dom/cjs/react-dom-client.development.js:14956:41)\n      at renderRootSync (../node_modules/react-dom/cjs/react-dom-client.development.js:14936:11)\n      at performWorkOnRoot (../node_modules/react-dom/cjs/react-dom-client.development.js:14462:44)\n      at performWorkOnRootViaSchedulerTask (../node_modules/react-dom/cjs/react-dom-client.development.js:16216:7)\n      at flushActQueue (../node_modules/react/cjs/react.development.js:566:34)\n      at process.env.NODE_ENV.exports.act (../node_modules/react/cjs/react.development.js:859:10)\n      at ../node_modules/@testing-library/react/dist/act-compat.js:47:25\n      at renderRoot (../node_modules/@testing-library/react/dist/pure.js:190:26)\n      at render (../node_modules/@testing-library/react/dist/pure.js:292:10)\n      at Object.<anonymous> (src/components/notifications/NotificationCenter.test.jsx:314:11)\n\n  ● NotificationCenter Integration › integrates correctly with useRealtimeNotifications hook\n\n    No QueryClient set, use QueryClientProvider to set one\n\n    \u001b[0m \u001b[90m 26 |\u001b[39m   \u001b[36mconst\u001b[39m [connectionError\u001b[33m,\u001b[39m setConnectionError] \u001b[33m=\u001b[39m useState(\u001b[36mnull\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m 27 |\u001b[39m   \u001b[36mconst\u001b[39m [lastMessage\u001b[33m,\u001b[39m setLastMessage] \u001b[33m=\u001b[39m useState(\u001b[36mnull\u001b[39m)\u001b[33m;\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 28 |\u001b[39m   \u001b[36mconst\u001b[39m queryClient \u001b[33m=\u001b[39m useQueryClient()\u001b[33m;\u001b[39m\n     \u001b[90m    |\u001b[39m                                     \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 29 |\u001b[39m   \u001b[36mconst\u001b[39m listenersRef \u001b[33m=\u001b[39m useRef(\u001b[36mnew\u001b[39m \u001b[33mMap\u001b[39m())\u001b[33m;\u001b[39m\n     \u001b[90m 30 |\u001b[39m\n     \u001b[90m 31 |\u001b[39m   \u001b[90m/**\u001b[39m\u001b[0m\n\n      at useQueryClient (../node_modules/@tanstack/react-query/src/QueryClientProvider.tsx:18:11)\n      at useWebSocket (src/hooks/useWebSocket.js:28:37)\n      at useRealtimeNotifications (src/hooks/useRealtimeNotifications.js:20:63)\n      at NotificationCenter (src/components/notifications/NotificationCenter.jsx:39:31)\n      at Object.react-stack-bottom-frame (../node_modules/react-dom/cjs/react-dom-client.development.js:23863:20)\n      at renderWithHooks (../node_modules/react-dom/cjs/react-dom-client.development.js:5529:22)\n      at updateFunctionComponent (../node_modules/react-dom/cjs/react-dom-client.development.js:8897:19)\n      at beginWork (../node_modules/react-dom/cjs/react-dom-client.development.js:10522:18)\n      at runWithFiberInDEV (../node_modules/react-dom/cjs/react-dom-client.development.js:1522:13)\n      at performUnitOfWork (../node_modules/react-dom/cjs/react-dom-client.development.js:15140:22)\n      at workLoopSync (../node_modules/react-dom/cjs/react-dom-client.development.js:14956:41)\n      at renderRootSync (../node_modules/react-dom/cjs/react-dom-client.development.js:14936:11)\n      at performWorkOnRoot (../node_modules/react-dom/cjs/react-dom-client.development.js:14462:44)\n      at performWorkOnRootViaSchedulerTask (../node_modules/react-dom/cjs/react-dom-client.development.js:16216:7)\n      at flushActQueue (../node_modules/react/cjs/react.development.js:566:34)\n      at process.env.NODE_ENV.exports.act (../node_modules/react/cjs/react.development.js:859:10)\n      at ../node_modules/@testing-library/react/dist/act-compat.js:47:25\n      at renderRoot (../node_modules/@testing-library/react/dist/pure.js:190:26)\n      at render (../node_modules/@testing-library/react/dist/pure.js:292:10)\n      at Object.<anonymous> (src/components/notifications/NotificationCenter.test.jsx:326:11)\n\n  ● NotificationCenter Integration › passes correct parameters to hook functions\n\n    No QueryClient set, use QueryClientProvider to set one\n\n    \u001b[0m \u001b[90m 26 |\u001b[39m   \u001b[36mconst\u001b[39m [connectionError\u001b[33m,\u001b[39m setConnectionError] \u001b[33m=\u001b[39m useState(\u001b[36mnull\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m 27 |\u001b[39m   \u001b[36mconst\u001b[39m [lastMessage\u001b[33m,\u001b[39m setLastMessage] \u001b[33m=\u001b[39m useState(\u001b[36mnull\u001b[39m)\u001b[33m;\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 28 |\u001b[39m   \u001b[36mconst\u001b[39m queryClient \u001b[33m=\u001b[39m useQueryClient()\u001b[33m;\u001b[39m\n     \u001b[90m    |\u001b[39m                                     \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 29 |\u001b[39m   \u001b[36mconst\u001b[39m listenersRef \u001b[33m=\u001b[39m useRef(\u001b[36mnew\u001b[39m \u001b[33mMap\u001b[39m())\u001b[33m;\u001b[39m\n     \u001b[90m 30 |\u001b[39m\n     \u001b[90m 31 |\u001b[39m   \u001b[90m/**\u001b[39m\u001b[0m\n\n      at useQueryClient (../node_modules/@tanstack/react-query/src/QueryClientProvider.tsx:18:11)\n      at useWebSocket (src/hooks/useWebSocket.js:28:37)\n      at useRealtimeNotifications (src/hooks/useRealtimeNotifications.js:20:63)\n      at NotificationCenter (src/components/notifications/NotificationCenter.jsx:39:31)\n      at Object.react-stack-bottom-frame (../node_modules/react-dom/cjs/react-dom-client.development.js:23863:20)\n      at renderWithHooks (../node_modules/react-dom/cjs/react-dom-client.development.js:5529:22)\n      at updateFunctionComponent (../node_modules/react-dom/cjs/react-dom-client.development.js:8897:19)\n      at beginWork (../node_modules/react-dom/cjs/react-dom-client.development.js:10522:18)\n      at runWithFiberInDEV (../node_modules/react-dom/cjs/react-dom-client.development.js:1522:13)\n      at performUnitOfWork (../node_modules/react-dom/cjs/react-dom-client.development.js:15140:22)\n      at workLoopSync (../node_modules/react-dom/cjs/react-dom-client.development.js:14956:41)\n      at renderRootSync (../node_modules/react-dom/cjs/react-dom-client.development.js:14936:11)\n      at performWorkOnRoot (../node_modules/react-dom/cjs/react-dom-client.development.js:14462:44)\n      at performWorkOnRootViaSchedulerTask (../node_modules/react-dom/cjs/react-dom-client.development.js:16216:7)\n      at flushActQueue (../node_modules/react/cjs/react.development.js:566:34)\n      at process.env.NODE_ENV.exports.act (../node_modules/react/cjs/react.development.js:859:10)\n      at ../node_modules/@testing-library/react/dist/act-compat.js:47:25\n      at renderRoot (../node_modules/@testing-library/react/dist/pure.js:190:26)\n      at render (../node_modules/@testing-library/react/dist/pure.js:292:10)\n      at Object.<anonymous> (src/components/notifications/NotificationCenter.test.jsx:332:11)\n\nFAIL src/utils/__tests__/env.test.js\n  ● Test suite failed to run\n\n    Jest encountered an unexpected token\n\n    Jest failed to parse a file. This happens e.g. when your code or its dependencies use non-standard JavaScript syntax, or when Jest is not configured to support such syntax.\n\n    Out of the box Jest supports Babel, which will be used to transform your files into valid JS based on your Babel configuration.\n\n    By default \"node_modules\" folder is ignored by transformers.\n\n    Here's what you can do:\n     • If you are trying to use ECMAScript Modules, see https://jestjs.io/docs/ecmascript-modules for how to enable it.\n     • If you are trying to use TypeScript, see https://jestjs.io/docs/getting-started#using-typescript\n     • To have some of your \"node_modules\" files transformed, you can specify a custom \"transformIgnorePatterns\" in your config.\n     • If you need a custom transformation, specify a \"transform\" option in your config.\n     • If you simply want to mock your non-JS modules (e.g. binary assets) you can stub them out with the \"moduleNameMapper\" config option.\n\n    You'll find more details and examples of these config options in the docs:\n    https://jestjs.io/docs/configuration\n    For information about custom transformations, see:\n    https://jestjs.io/docs/code-transformation\n\n    Details:\n\n    E:\\AlexVenturesStudio\\Nexa_Manager_whit_Task_Master\\web-app\\src\\utils\\env.ts:23\n      if (typeof import.meta !== 'undefined' && import.meta.env) {\n                        ^^^^\n\n    SyntaxError: Cannot use 'import.meta' outside a module\n\n    \u001b[0m\u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 1 |\u001b[39m \u001b[36mconst\u001b[39m { getEnvVar\u001b[33m,\u001b[39m isDevelopment\u001b[33m,\u001b[39m isProduction } \u001b[33m=\u001b[39m require(\u001b[32m'../env'\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m   |\u001b[39m                                                    \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 2 |\u001b[39m\n     \u001b[90m 3 |\u001b[39m describe(\u001b[32m'Environment Utility'\u001b[39m\u001b[33m,\u001b[39m () \u001b[33m=>\u001b[39m {\n     \u001b[90m 4 |\u001b[39m   beforeEach(() \u001b[33m=>\u001b[39m {\u001b[0m\n\n      at Runtime.createScriptFromCode (../node_modules/jest-runtime/build/index.js:1314:40)\n      at Object.require (src/utils/__tests__/env.test.js:1:52)\n\nFAIL src/lib/__tests__/taxCalculationService.test.js\n  ● Test suite failed to run\n\n    Configuration error:\n\n    Could not locate module @lib/taxCalculationService mapped as:\n    E:\\AlexVenturesStudio\\Nexa_Manager_whit_Task_Master\\web-app\\src\\lib\\$1.\n\n    Please check your configuration for these entries:\n    {\n      \"moduleNameMapper\": {\n        \"/^@lib\\/(.*)$/\": \"E:\\AlexVenturesStudio\\Nexa_Manager_whit_Task_Master\\web-app\\src\\lib\\$1\"\n      },\n      \"resolver\": undefined\n    }\n\n    \u001b[0m\u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 1 |\u001b[39m \u001b[36mimport\u001b[39m {\n     \u001b[90m   |\u001b[39m \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 2 |\u001b[39m   \u001b[33mTaxCalculationService\u001b[39m\u001b[33m,\u001b[39m\n     \u001b[90m 3 |\u001b[39m   \u001b[33mIVA_RATES\u001b[39m\u001b[33m,\u001b[39m\n     \u001b[90m 4 |\u001b[39m   \u001b[33mWITHHOLDING_RATES\u001b[39m\u001b[33m,\u001b[39m\u001b[0m\n\n      at createNoMappedModuleFoundError (../node_modules/jest-resolve/build/index.js:1117:17)\n      at Object.require (src/lib/__tests__/taxCalculationService.test.js:1:1)\n\nFAIL src/services/__tests__/reportingService.test.js\n  ● Test suite failed to run\n\n    Cannot find module 'vitest' from 'src/services/__tests__/reportingService.test.js'\n\n    \u001b[0m\u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 1 |\u001b[39m \u001b[36mimport\u001b[39m { vi } \u001b[36mfrom\u001b[39m \u001b[32m'vitest'\u001b[39m\u001b[33m;\u001b[39m\n     \u001b[90m   |\u001b[39m \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 2 |\u001b[39m \u001b[36mimport\u001b[39m \u001b[33m*\u001b[39m \u001b[36mas\u001b[39m reportingService \u001b[36mfrom\u001b[39m \u001b[32m'../reportingService'\u001b[39m\u001b[33m;\u001b[39m\n     \u001b[90m 3 |\u001b[39m \u001b[36mimport\u001b[39m { supabase } \u001b[36mfrom\u001b[39m \u001b[32m'../supabase'\u001b[39m\u001b[33m;\u001b[39m\n     \u001b[90m 4 |\u001b[39m\u001b[0m\n\n      at Resolver._throwModNotFoundError (../node_modules/jest-resolve/build/index.js:863:11)\n      at Object.require (src/services/__tests__/reportingService.test.js:1:1)\n\nFAIL src/lib/__tests__/financialService.test.js\n  ● Test suite failed to run\n\n    Cannot find module '../incomeService' from 'src/lib/__tests__/financialService.test.js'\n\n    \u001b[0m \u001b[90m 28 |\u001b[39m\n     \u001b[90m 29 |\u001b[39m \u001b[90m// Mock incomeService and expenseService\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 30 |\u001b[39m jest\u001b[33m.\u001b[39mmock(\u001b[32m'../incomeService'\u001b[39m\u001b[33m,\u001b[39m () \u001b[33m=>\u001b[39m ({\n     \u001b[90m    |\u001b[39m      \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 31 |\u001b[39m   getIncomeStats\u001b[33m:\u001b[39m jest\u001b[33m.\u001b[39mfn()\u001b[33m,\u001b[39m\n     \u001b[90m 32 |\u001b[39m   getIncomeTrend\u001b[33m:\u001b[39m jest\u001b[33m.\u001b[39mfn()\u001b[33m,\u001b[39m\n     \u001b[90m 33 |\u001b[39m }))\u001b[33m;\u001b[39m\u001b[0m\n\n      at Resolver._throwModNotFoundError (../node_modules/jest-resolve/build/index.js:863:11)\n      at Object.mock (src/lib/__tests__/financialService.test.js:30:6)\n\nFAIL src/lib/__tests__/emailSearchService.test.js\n  ● Test suite failed to run\n\n    Cannot find module '../emailSearchService' from 'src/lib/__tests__/emailSearchService.test.js'\n\n    \u001b[0m \u001b[90m 3 |\u001b[39m \u001b[90m */\u001b[39m\n     \u001b[90m 4 |\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 5 |\u001b[39m \u001b[36mimport\u001b[39m emailSearchService \u001b[36mfrom\u001b[39m \u001b[32m'../emailSearchService'\u001b[39m\u001b[33m;\u001b[39m\n     \u001b[90m   |\u001b[39m \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 6 |\u001b[39m \u001b[36mimport\u001b[39m { supabase } \u001b[36mfrom\u001b[39m \u001b[32m'../supabaseClient'\u001b[39m\u001b[33m;\u001b[39m\n     \u001b[90m 7 |\u001b[39m \u001b[36mimport\u001b[39m \u001b[33mLogger\u001b[39m \u001b[36mfrom\u001b[39m \u001b[32m'@utils/Logger'\u001b[39m\u001b[33m;\u001b[39m\n     \u001b[90m 8 |\u001b[39m\u001b[0m\n\n      at Resolver._throwModNotFoundError (../node_modules/jest-resolve/build/index.js:863:11)\n      at Object.require (src/lib/__tests__/emailSearchService.test.js:5:1)\n\nFAIL src/components/reports/__tests__/Reports.test.jsx\n  ● Test suite failed to run\n\n    Configuration error:\n\n    Could not locate module @lib/invoiceAnalyticsService mapped as:\n    E:\\AlexVenturesStudio\\Nexa_Manager_whit_Task_Master\\web-app\\src\\lib\\$1.\n\n    Please check your configuration for these entries:\n    {\n      \"moduleNameMapper\": {\n        \"/^@lib\\/(.*)$/\": \"E:\\AlexVenturesStudio\\Nexa_Manager_whit_Task_Master\\web-app\\src\\lib\\$1\"\n      },\n      \"resolver\": undefined\n    }\n\n    \u001b[0m \u001b[90m 25 |\u001b[39m\n     \u001b[90m 26 |\u001b[39m \u001b[90m// Mock other aliases\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 27 |\u001b[39m jest\u001b[33m.\u001b[39mmock(\u001b[32m'@lib/invoiceAnalyticsService'\u001b[39m\u001b[33m,\u001b[39m () \u001b[33m=>\u001b[39m ({\n     \u001b[90m    |\u001b[39m      \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 28 |\u001b[39m   \u001b[36mdefault\u001b[39m\u001b[33m:\u001b[39m {\n     \u001b[90m 29 |\u001b[39m     getRevenueAnalytics\u001b[33m:\u001b[39m jest\u001b[33m.\u001b[39mfn()\u001b[33m,\u001b[39m\n     \u001b[90m 30 |\u001b[39m     getClientAnalytics\u001b[33m:\u001b[39m jest\u001b[33m.\u001b[39mfn()\u001b[33m,\u001b[39m\u001b[0m\n\n      at createNoMappedModuleFoundError (../node_modules/jest-resolve/build/index.js:1117:17)\n      at Object.mock (src/components/reports/__tests__/Reports.test.jsx:27:6)\n\nFAIL src/lib/__tests__/emailStorageService.test.js\n  ● Test suite failed to run\n\n    Cannot find module '../emailStorageService' from 'src/lib/__tests__/emailStorageService.test.js'\n\n    \u001b[0m \u001b[90m 3 |\u001b[39m \u001b[90m */\u001b[39m\n     \u001b[90m 4 |\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 5 |\u001b[39m \u001b[36mimport\u001b[39m emailStorageService \u001b[36mfrom\u001b[39m \u001b[32m'../emailStorageService'\u001b[39m\u001b[33m;\u001b[39m\n     \u001b[90m   |\u001b[39m \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 6 |\u001b[39m \u001b[36mimport\u001b[39m { supabase } \u001b[36mfrom\u001b[39m \u001b[32m'../supabaseClient'\u001b[39m\u001b[33m;\u001b[39m\n     \u001b[90m 7 |\u001b[39m \u001b[36mimport\u001b[39m \u001b[33mLogger\u001b[39m \u001b[36mfrom\u001b[39m \u001b[32m'@utils/Logger'\u001b[39m\u001b[33m;\u001b[39m\n     \u001b[90m 8 |\u001b[39m\u001b[0m\n\n      at Resolver._throwModNotFoundError (../node_modules/jest-resolve/build/index.js:863:11)\n      at Object.require (src/lib/__tests__/emailStorageService.test.js:5:1)\n\nFAIL src/lib/__tests__/emailService.test.js\n  ● Test suite failed to run\n\n    Cannot find module '../quotePdfService' from 'src/lib/__tests__/emailService.test.js'\n\n    \u001b[0m \u001b[90m 10 |\u001b[39m\n     \u001b[90m 11 |\u001b[39m \u001b[90m// Mock quotePdfService completely\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 12 |\u001b[39m jest\u001b[33m.\u001b[39mmock(\u001b[32m'../quotePdfService'\u001b[39m\u001b[33m,\u001b[39m () \u001b[33m=>\u001b[39m ({\n     \u001b[90m    |\u001b[39m      \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 13 |\u001b[39m   \u001b[36mdefault\u001b[39m\u001b[33m:\u001b[39m {\n     \u001b[90m 14 |\u001b[39m     generateBlob\u001b[33m:\u001b[39m jest\u001b[33m.\u001b[39mfn()\u001b[33m.\u001b[39mmockResolvedValue(\u001b[36mnew\u001b[39m \u001b[33mBlob\u001b[39m([\u001b[32m'mock-pdf'\u001b[39m]\u001b[33m,\u001b[39m { type\u001b[33m:\u001b[39m \u001b[32m'application/pdf'\u001b[39m }))\u001b[33m,\u001b[39m\n     \u001b[90m 15 |\u001b[39m   }\u001b[33m,\u001b[39m\u001b[0m\n\n      at Resolver._throwModNotFoundError (../node_modules/jest-resolve/build/index.js:863:11)\n      at Object.mock (src/lib/__tests__/emailService.test.js:12:6)\n\nFAIL src/lib/__tests__/emailTemplateService.test.js\n  ● Test suite failed to run\n\n    Cannot find module '../emailTemplateService' from 'src/lib/__tests__/emailTemplateService.test.js'\n\n    \u001b[0m\u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 1 |\u001b[39m \u001b[36mimport\u001b[39m emailTemplateService \u001b[36mfrom\u001b[39m \u001b[32m'../emailTemplateService'\u001b[39m\u001b[33m;\u001b[39m\n     \u001b[90m   |\u001b[39m \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 2 |\u001b[39m\n     \u001b[90m 3 |\u001b[39m \u001b[90m// Mock Supabase\u001b[39m\n     \u001b[90m 4 |\u001b[39m \u001b[36mconst\u001b[39m mockSupabase \u001b[33m=\u001b[39m {\u001b[0m\n\n      at Resolver._throwModNotFoundError (../node_modules/jest-resolve/build/index.js:863:11)\n      at Object.require (src/lib/__tests__/emailTemplateService.test.js:1:1)\n\nFAIL src/features/email/components/__tests__/EmailAttachmentManager.test.jsx\n  ● Test suite failed to run\n\n    Configuration error:\n\n    Could not locate module @lib/emailAttachmentService mapped as:\n    E:\\AlexVenturesStudio\\Nexa_Manager_whit_Task_Master\\web-app\\src\\lib\\$1.\n\n    Please check your configuration for these entries:\n    {\n      \"moduleNameMapper\": {\n        \"/^@lib\\/(.*)$/\": \"E:\\AlexVenturesStudio\\Nexa_Manager_whit_Task_Master\\web-app\\src\\lib\\$1\"\n      },\n      \"resolver\": undefined\n    }\n\n    \u001b[0m \u001b[90m 19 |\u001b[39m\n     \u001b[90m 20 |\u001b[39m \u001b[36mimport\u001b[39m \u001b[33mEmailAttachmentManager\u001b[39m \u001b[36mfrom\u001b[39m \u001b[32m'../EmailAttachmentManager'\u001b[39m\u001b[33m;\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 21 |\u001b[39m \u001b[36mimport\u001b[39m emailAttachmentService \u001b[36mfrom\u001b[39m \u001b[32m'@lib/emailAttachmentService'\u001b[39m\u001b[33m;\u001b[39m\n     \u001b[90m    |\u001b[39m \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 22 |\u001b[39m \u001b[36mimport\u001b[39m { \u001b[33mLogger\u001b[39m } \u001b[36mfrom\u001b[39m \u001b[32m'@utils/Logger'\u001b[39m\u001b[33m;\u001b[39m\n     \u001b[90m 23 |\u001b[39m\n     \u001b[90m 24 |\u001b[39m \u001b[90m// Setup user-event with clipboard disabled to avoid conflicts\u001b[39m\u001b[0m\n\n      at createNoMappedModuleFoundError (../node_modules/jest-resolve/build/index.js:1117:17)\n      at Object.require (src/features/email/components/__tests__/EmailAttachmentManager.test.jsx:21:1)\n\nFAIL src/lib/__tests__/emailRecoveryService.test.js\n  ● Test suite failed to run\n\n    Cannot find module '../emailRecoveryService' from 'src/lib/__tests__/emailRecoveryService.test.js'\n\n    \u001b[0m \u001b[90m 3 |\u001b[39m \u001b[90m */\u001b[39m\n     \u001b[90m 4 |\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 5 |\u001b[39m \u001b[36mimport\u001b[39m emailRecoveryService \u001b[36mfrom\u001b[39m \u001b[32m'../emailRecoveryService'\u001b[39m\u001b[33m;\u001b[39m\n     \u001b[90m   |\u001b[39m \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 6 |\u001b[39m \u001b[36mimport\u001b[39m { supabase } \u001b[36mfrom\u001b[39m \u001b[32m'../supabaseClient'\u001b[39m\u001b[33m;\u001b[39m\n     \u001b[90m 7 |\u001b[39m \u001b[36mimport\u001b[39m \u001b[33mLogger\u001b[39m \u001b[36mfrom\u001b[39m \u001b[32m'@utils/Logger'\u001b[39m\u001b[33m;\u001b[39m\n     \u001b[90m 8 |\u001b[39m\u001b[0m\n\n      at Resolver._throwModNotFoundError (../node_modules/jest-resolve/build/index.js:863:11)\n      at Object.require (src/lib/__tests__/emailRecoveryService.test.js:5:1)\n\nFAIL src/lib/__tests__/emailSettingsService.test.js\n  ● Test suite failed to run\n\n    Cannot find module '../emailSettingsService' from 'src/lib/__tests__/emailSettingsService.test.js'\n\n    \u001b[0m \u001b[90m 3 |\u001b[39m \u001b[90m */\u001b[39m\n     \u001b[90m 4 |\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 5 |\u001b[39m \u001b[36mimport\u001b[39m emailSettingsService \u001b[36mfrom\u001b[39m \u001b[32m'../emailSettingsService'\u001b[39m\u001b[33m;\u001b[39m\n     \u001b[90m   |\u001b[39m \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 6 |\u001b[39m \u001b[36mimport\u001b[39m { supabase } \u001b[36mfrom\u001b[39m \u001b[32m'../supabaseClient'\u001b[39m\u001b[33m;\u001b[39m\n     \u001b[90m 7 |\u001b[39m \u001b[36mimport\u001b[39m \u001b[33mLogger\u001b[39m \u001b[36mfrom\u001b[39m \u001b[32m'@utils/Logger'\u001b[39m\u001b[33m;\u001b[39m\n     \u001b[90m 8 |\u001b[39m\u001b[0m\n\n      at Resolver._throwModNotFoundError (../node_modules/jest-resolve/build/index.js:863:11)\n      at Object.require (src/lib/__tests__/emailSettingsService.test.js:5:1)\n\nFAIL src/features/documents/components/__tests__/ArchiveDocumentsModal.test.jsx\n  ● Test suite failed to run\n\n    Configuration error:\n\n    Could not locate module @/featuresi18n mapped as:\n    E:\\AlexVenturesStudio\\Nexa_Manager_whit_Task_Master\\web-app\\src\\$1.\n\n    Please check your configuration for these entries:\n    {\n      \"moduleNameMapper\": {\n        \"/^@\\/(.*)$/\": \"E:\\AlexVenturesStudio\\Nexa_Manager_whit_Task_Master\\web-app\\src\\$1\"\n      },\n      \"resolver\": undefined\n    }\n\n    \u001b[0m \u001b[90m 2 |\u001b[39m \u001b[36mimport\u001b[39m { render\u001b[33m,\u001b[39m screen\u001b[33m,\u001b[39m fireEvent\u001b[33m,\u001b[39m waitFor } \u001b[36mfrom\u001b[39m \u001b[32m'@testing-library/react'\u001b[39m\u001b[33m;\u001b[39m\n     \u001b[90m 3 |\u001b[39m \u001b[36mimport\u001b[39m { \u001b[33mI18nextProvider\u001b[39m } \u001b[36mfrom\u001b[39m \u001b[32m'react-i18next'\u001b[39m\u001b[33m;\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 4 |\u001b[39m \u001b[36mimport\u001b[39m i18n \u001b[36mfrom\u001b[39m \u001b[32m'@/features\\i18n'\u001b[39m\u001b[33m;\u001b[39m\n     \u001b[90m   |\u001b[39m \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 5 |\u001b[39m \u001b[36mimport\u001b[39m \u001b[33mArchiveDocumentsModal\u001b[39m \u001b[36mfrom\u001b[39m \u001b[32m'../ArchiveDocumentsModal'\u001b[39m\u001b[33m;\u001b[39m\n     \u001b[90m 6 |\u001b[39m\n     \u001b[90m 7 |\u001b[39m \u001b[90m// Mock documents data\u001b[39m\u001b[0m\n\n      at createNoMappedModuleFoundError (../node_modules/jest-resolve/build/index.js:1117:17)\n      at Object.require (src/features/documents/components/__tests__/ArchiveDocumentsModal.test.jsx:4:1)\n\nFAIL src/lib/__tests__/emailProviderService.test.js\n  ● Test suite failed to run\n\n    Cannot find module '../emailProviderService' from 'src/lib/__tests__/emailProviderService.test.js'\n\n    \u001b[0m \u001b[90m 3 |\u001b[39m \u001b[90m */\u001b[39m\n     \u001b[90m 4 |\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 5 |\u001b[39m \u001b[36mimport\u001b[39m emailProviderService \u001b[36mfrom\u001b[39m \u001b[32m'../emailProviderService'\u001b[39m\u001b[33m;\u001b[39m\n     \u001b[90m   |\u001b[39m \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 6 |\u001b[39m \u001b[36mimport\u001b[39m { supabase } \u001b[36mfrom\u001b[39m \u001b[32m'../supabaseClient'\u001b[39m\u001b[33m;\u001b[39m\n     \u001b[90m 7 |\u001b[39m \u001b[36mimport\u001b[39m \u001b[33mLogger\u001b[39m \u001b[36mfrom\u001b[39m \u001b[32m'@utils/Logger'\u001b[39m\u001b[33m;\u001b[39m\n     \u001b[90m 8 |\u001b[39m\u001b[0m\n\n      at Resolver._throwModNotFoundError (../node_modules/jest-resolve/build/index.js:863:11)\n      at Object.require (src/lib/__tests__/emailProviderService.test.js:5:1)\n\nFAIL src/lib/__tests__/emailManagementService.test.js\n  ● Test suite failed to run\n\n    Cannot find module '../emailStorageService' from 'src/lib/__tests__/emailManagementService.test.js'\n\n    \u001b[0m \u001b[90m 4 |\u001b[39m\n     \u001b[90m 5 |\u001b[39m \u001b[90m// Mock the dependencies\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 6 |\u001b[39m jest\u001b[33m.\u001b[39mmock(\u001b[32m'../emailStorageService'\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m   |\u001b[39m      \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 7 |\u001b[39m jest\u001b[33m.\u001b[39mmock(\u001b[32m'../emailProviderService'\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m 8 |\u001b[39m jest\u001b[33m.\u001b[39mmock(\u001b[32m'../supabaseClient'\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m 9 |\u001b[39m\u001b[0m\n\n      at Resolver._throwModNotFoundError (../node_modules/jest-resolve/build/index.js:863:11)\n      at Object.mock (src/lib/__tests__/emailManagementService.test.js:6:6)\n\nFAIL src/lib/__tests__/emailAttachmentService.test.js\n  ● Test suite failed to run\n\n    Cannot find module '../emailAttachmentService' from 'src/lib/__tests__/emailAttachmentService.test.js'\n\n    \u001b[0m \u001b[90m 3 |\u001b[39m \u001b[90m */\u001b[39m\n     \u001b[90m 4 |\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 5 |\u001b[39m \u001b[36mimport\u001b[39m emailAttachmentService \u001b[36mfrom\u001b[39m \u001b[32m'../emailAttachmentService'\u001b[39m\u001b[33m;\u001b[39m\n     \u001b[90m   |\u001b[39m \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 6 |\u001b[39m \u001b[36mimport\u001b[39m { supabase } \u001b[36mfrom\u001b[39m \u001b[32m'../supabaseClient'\u001b[39m\u001b[33m;\u001b[39m\n     \u001b[90m 7 |\u001b[39m \u001b[36mimport\u001b[39m \u001b[33mLogger\u001b[39m \u001b[36mfrom\u001b[39m \u001b[32m'@utils/Logger'\u001b[39m\u001b[33m;\u001b[39m\n     \u001b[90m 8 |\u001b[39m\u001b[0m\n\n      at Resolver._throwModNotFoundError (../node_modules/jest-resolve/build/index.js:863:11)\n      at Object.require (src/lib/__tests__/emailAttachmentService.test.js:5:1)\n\nFAIL src/lib/__tests__/businessEmailIntegration.test.js\n  ● Test suite failed to run\n\n    Cannot find module '../businessEmailIntegration.js' from 'src/lib/__tests__/businessEmailIntegration.test.js'\n\n    \u001b[0m \u001b[90m 3 |\u001b[39m \u001b[90m */\u001b[39m\n     \u001b[90m 4 |\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 5 |\u001b[39m \u001b[36mimport\u001b[39m businessEmailIntegration \u001b[36mfrom\u001b[39m \u001b[32m'../businessEmailIntegration.js'\u001b[39m\u001b[33m;\u001b[39m\n     \u001b[90m   |\u001b[39m \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 6 |\u001b[39m \u001b[36mimport\u001b[39m { \u001b[33mInvoiceService\u001b[39m } \u001b[36mfrom\u001b[39m \u001b[32m'../invoiceService.js'\u001b[39m\u001b[33m;\u001b[39m\n     \u001b[90m 7 |\u001b[39m \u001b[36mimport\u001b[39m { \u001b[33mQuoteService\u001b[39m } \u001b[36mfrom\u001b[39m \u001b[32m'../quoteService.js'\u001b[39m\u001b[33m;\u001b[39m\n     \u001b[90m 8 |\u001b[39m \u001b[36mimport\u001b[39m clientEmailService \u001b[36mfrom\u001b[39m \u001b[32m'../clientEmailService.js'\u001b[39m\u001b[33m;\u001b[39m\u001b[0m\n\n      at Resolver._throwModNotFoundError (../node_modules/jest-resolve/build/index.js:863:11)\n      at Object.require (src/lib/__tests__/businessEmailIntegration.test.js:5:1)\n\nFAIL src/lib/__tests__/authService.test.js\n  ● Test suite failed to run\n\n    Configuration error:\n\n    Could not locate module @lib/authService mapped as:\n    E:\\AlexVenturesStudio\\Nexa_Manager_whit_Task_Master\\web-app\\src\\lib\\$1.\n\n    Please check your configuration for these entries:\n    {\n      \"moduleNameMapper\": {\n        \"/^@lib\\/(.*)$/\": \"E:\\AlexVenturesStudio\\Nexa_Manager_whit_Task_Master\\web-app\\src\\lib\\$1\"\n      },\n      \"resolver\": undefined\n    }\n\n    \u001b[0m\u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 1 |\u001b[39m \u001b[36mimport\u001b[39m { \u001b[33mAuthService\u001b[39m } \u001b[36mfrom\u001b[39m \u001b[32m'@lib/authService'\u001b[39m\u001b[33m;\u001b[39m\n     \u001b[90m   |\u001b[39m \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 2 |\u001b[39m \u001b[36mimport\u001b[39m { supabase } \u001b[36mfrom\u001b[39m \u001b[32m'@lib/supabaseClient'\u001b[39m\u001b[33m;\u001b[39m\n     \u001b[90m 3 |\u001b[39m \u001b[36mimport\u001b[39m \u001b[33mLogger\u001b[39m \u001b[36mfrom\u001b[39m \u001b[32m'@utils/Logger'\u001b[39m\u001b[33m;\u001b[39m\n     \u001b[90m 4 |\u001b[39m\u001b[0m\n\n      at createNoMappedModuleFoundError (../node_modules/jest-resolve/build/index.js:1117:17)\n      at Object.require (src/lib/__tests__/authService.test.js:1:1)\n\nFAIL src/lib/__tests__/emailAnalyticsService.test.js\n  ● Test suite failed to run\n\n    Cannot find module 'vitest' from 'src/lib/__tests__/emailAnalyticsService.test.js'\n\n    \u001b[0m\u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 1 |\u001b[39m \u001b[36mimport\u001b[39m { describe\u001b[33m,\u001b[39m it\u001b[33m,\u001b[39m expect\u001b[33m,\u001b[39m beforeEach\u001b[33m,\u001b[39m afterEach\u001b[33m,\u001b[39m vi } \u001b[36mfrom\u001b[39m \u001b[32m'vitest'\u001b[39m\u001b[33m;\u001b[39m\n     \u001b[90m   |\u001b[39m \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 2 |\u001b[39m \u001b[36mimport\u001b[39m emailAnalyticsService \u001b[36mfrom\u001b[39m \u001b[32m'@lib/emailAnalyticsService'\u001b[39m\u001b[33m;\u001b[39m\n     \u001b[90m 3 |\u001b[39m \u001b[36mimport\u001b[39m emailErrorHandler \u001b[36mfrom\u001b[39m \u001b[32m'@features/email'\u001b[39m\u001b[33m;\u001b[39m\n     \u001b[90m 4 |\u001b[39m \u001b[36mimport\u001b[39m { supabase } \u001b[36mfrom\u001b[39m \u001b[32m'@lib/supabaseClient'\u001b[39m\u001b[33m;\u001b[39m\u001b[0m\n\n      at Resolver._throwModNotFoundError (../node_modules/jest-resolve/build/index.js:863:11)\n      at Object.require (src/lib/__tests__/emailAnalyticsService.test.js:1:1)\n\nFAIL src/components/reports/__tests__/ReportGenerator.test.jsx\n  ● Test suite failed to run\n\n    Cannot find module '../ReportGenerator' from 'src/components/reports/__tests__/ReportGenerator.test.jsx'\n\n    \u001b[0m \u001b[90m 3 |\u001b[39m \u001b[36mimport\u001b[39m userEvent \u001b[36mfrom\u001b[39m \u001b[32m'@testing-library/user-event'\u001b[39m\u001b[33m;\u001b[39m\n     \u001b[90m 4 |\u001b[39m \u001b[36mimport\u001b[39m { \u001b[33mQueryClient\u001b[39m\u001b[33m,\u001b[39m \u001b[33mQueryProvider\u001b[39m } \u001b[36mfrom\u001b[39m \u001b[32m'@tanstack/react-query'\u001b[39m\u001b[33m;\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 5 |\u001b[39m \u001b[36mimport\u001b[39m \u001b[33mReportGenerator\u001b[39m \u001b[36mfrom\u001b[39m \u001b[32m'../ReportGenerator'\u001b[39m\u001b[33m;\u001b[39m\n     \u001b[90m   |\u001b[39m \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 6 |\u001b[39m \u001b[36mimport\u001b[39m \u001b[33m*\u001b[39m \u001b[36mas\u001b[39m reportingService \u001b[36mfrom\u001b[39m \u001b[32m'@/services\\reportingService'\u001b[39m\u001b[33m;\u001b[39m\n     \u001b[90m 7 |\u001b[39m\n     \u001b[90m 8 |\u001b[39m \u001b[90m// Mock services\u001b[39m\u001b[0m\n\n      at Resolver._throwModNotFoundError (../node_modules/jest-resolve/build/index.js:863:11)\n      at Object.require (src/components/reports/__tests__/ReportGenerator.test.jsx:5:1)\n\nFAIL src/components/__tests__/EmailAnalyticsDashboard.test.jsx\n  ● Test suite failed to run\n\n    Cannot find module 'vitest' from 'src/components/__tests__/EmailAnalyticsDashboard.test.jsx'\n\n    \u001b[0m\u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 1 |\u001b[39m \u001b[36mimport\u001b[39m { describe\u001b[33m,\u001b[39m it\u001b[33m,\u001b[39m expect\u001b[33m,\u001b[39m beforeEach\u001b[33m,\u001b[39m afterEach\u001b[33m,\u001b[39m vi } \u001b[36mfrom\u001b[39m \u001b[32m'vitest'\u001b[39m\u001b[33m;\u001b[39m\n     \u001b[90m   |\u001b[39m \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 2 |\u001b[39m \u001b[36mimport\u001b[39m { render\u001b[33m,\u001b[39m screen\u001b[33m,\u001b[39m fireEvent\u001b[33m,\u001b[39m waitFor } \u001b[36mfrom\u001b[39m \u001b[32m'@testing-library/react'\u001b[39m\u001b[33m;\u001b[39m\n     \u001b[90m 3 |\u001b[39m \u001b[36mimport\u001b[39m { \u001b[33mBrowserRouter\u001b[39m } \u001b[36mfrom\u001b[39m \u001b[32m'react-router-dom'\u001b[39m\u001b[33m;\u001b[39m\n     \u001b[90m 4 |\u001b[39m \u001b[36mimport\u001b[39m \u001b[33mEmailAnalyticsDashboard\u001b[39m \u001b[36mfrom\u001b[39m \u001b[32m'@components/EmailAnalyticsDashboard'\u001b[39m\u001b[33m;\u001b[39m\u001b[0m\n\n      at Resolver._throwModNotFoundError (../node_modules/jest-resolve/build/index.js:863:11)\n      at Object.require (src/components/__tests__/EmailAnalyticsDashboard.test.jsx:1:1)\n\nFAIL src/hooks/__tests__/useReports.test.js\n  ● Test suite failed to run\n\n    Cannot find module '../useReports' from 'src/hooks/__tests__/useReports.test.js'\n\n    \u001b[0m \u001b[90m 1 |\u001b[39m \u001b[36mimport\u001b[39m { renderHook\u001b[33m,\u001b[39m waitFor } \u001b[36mfrom\u001b[39m \u001b[32m'@testing-library/react'\u001b[39m\u001b[33m;\u001b[39m\n     \u001b[90m 2 |\u001b[39m \u001b[36mimport\u001b[39m { \u001b[33mQueryClient\u001b[39m\u001b[33m,\u001b[39m \u001b[33mQueryProvider\u001b[39m } \u001b[36mfrom\u001b[39m \u001b[32m'@tanstack/react-query'\u001b[39m\u001b[33m;\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 3 |\u001b[39m \u001b[36mimport\u001b[39m { useReports\u001b[33m,\u001b[39m useReportMetrics\u001b[33m,\u001b[39m useReportGeneration\u001b[33m,\u001b[39m useScheduledReports } \u001b[36mfrom\u001b[39m \u001b[32m'../useReports'\u001b[39m\u001b[33m;\u001b[39m\n     \u001b[90m   |\u001b[39m \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 4 |\u001b[39m \u001b[36mimport\u001b[39m \u001b[33m*\u001b[39m \u001b[36mas\u001b[39m reportingService \u001b[36mfrom\u001b[39m \u001b[32m'../../services/reportingService'\u001b[39m\u001b[33m;\u001b[39m\n     \u001b[90m 5 |\u001b[39m\n     \u001b[90m 6 |\u001b[39m \u001b[90m// Mock services\u001b[39m\u001b[0m\n\n      at Resolver._throwModNotFoundError (../node_modules/jest-resolve/build/index.js:863:11)\n      at Object.require (src/hooks/__tests__/useReports.test.js:3:1)\n\nFAIL src/components/reports/__tests__/ReportScheduler.test.jsx\n  ● Test suite failed to run\n\n    Cannot find module '@/services\r    eportingService' from 'src/components/reports/__tests__/ReportScheduler.test.jsx'\n\n    \u001b[0m \u001b[90m 4 |\u001b[39m \u001b[36mimport\u001b[39m { \u001b[33mQueryClient\u001b[39m\u001b[33m,\u001b[39m \u001b[33mQueryProvider\u001b[39m } \u001b[36mfrom\u001b[39m \u001b[32m'@tanstack/react-query'\u001b[39m\u001b[33m;\u001b[39m\n     \u001b[90m 5 |\u001b[39m \u001b[36mimport\u001b[39m \u001b[33mReportScheduler\u001b[39m \u001b[36mfrom\u001b[39m \u001b[32m'../ReportScheduler'\u001b[39m\u001b[33m;\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 6 |\u001b[39m \u001b[36mimport\u001b[39m \u001b[33m*\u001b[39m \u001b[36mas\u001b[39m reportingService \u001b[36mfrom\u001b[39m \u001b[32m'@/services\\reportingService'\u001b[39m\u001b[33m;\u001b[39m\n     \u001b[90m   |\u001b[39m \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 7 |\u001b[39m\n     \u001b[90m 8 |\u001b[39m \u001b[90m// Mock services\u001b[39m\n     \u001b[90m 9 |\u001b[39m jest\u001b[33m.\u001b[39mmock(\u001b[32m'../../../services/reportingService'\u001b[39m)\u001b[33m;\u001b[39m\u001b[0m\n\n      at Resolver._throwModNotFoundError (../node_modules/jest-resolve/build/index.js:863:11)\n      at Object.require (src/components/reports/__tests__/ReportScheduler.test.jsx:6:1)\n\nFAIL src/hooks/__tests__/useEmails.test.js\n  ● Test suite failed to run\n\n    Cannot find module '../useEmails' from 'src/hooks/__tests__/useEmails.test.js'\n\n    \u001b[0m \u001b[90m 1 |\u001b[39m \u001b[36mimport\u001b[39m { renderHook\u001b[33m,\u001b[39m act } \u001b[36mfrom\u001b[39m \u001b[32m'@testing-library/react'\u001b[39m\u001b[33m;\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 2 |\u001b[39m \u001b[36mimport\u001b[39m { useEmails } \u001b[36mfrom\u001b[39m \u001b[32m'../useEmails'\u001b[39m\u001b[33m;\u001b[39m\n     \u001b[90m   |\u001b[39m \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 3 |\u001b[39m \u001b[36mimport\u001b[39m { \u001b[33mEmailProvider\u001b[39m\u001b[33m,\u001b[39m \u001b[33mAuthProvider\u001b[39m } \u001b[36mfrom\u001b[39m \u001b[32m'@/shared/state/providers'\u001b[39m\u001b[33m;\u001b[39m\n     \u001b[90m 4 |\u001b[39m \u001b[36mimport\u001b[39m { \u001b[33mWebSocketProvider\u001b[39m } \u001b[36mfrom\u001b[39m \u001b[32m'@providers/WebSocketProvider'\u001b[39m\u001b[33m;\u001b[39m\n     \u001b[90m 5 |\u001b[39m \u001b[36mimport\u001b[39m emailManagementService \u001b[36mfrom\u001b[39m \u001b[32m'@features/email'\u001b[39m\u001b[33m;\u001b[39m\u001b[0m\n\n      at Resolver._throwModNotFoundError (../node_modules/jest-resolve/build/index.js:863:11)\n      at Object.require (src/hooks/__tests__/useEmails.test.js:2:1)\n\nFAIL src/features/scanner/__tests__/services/rateLimitingService.test.ts\n  ● Test suite failed to run\n\n    Jest worker encountered 4 child process exceptions, exceeding retry limit\n\n      at ChildProcessWorker.initialize (../node_modules/jest-worker/build/index.js:805:21)\n\nFAIL src/features/scanner/__tests__/integration/ocrProviderFallback.test.ts (71.558 s)\n  ● OCR Provider Fallback Integration Tests › Provider Availability and Fallback Chain › should fallback to secondary provider when primary fails\n\n    thrown: \"Exceeded timeout of 10000 ms for a test.\n    Add a timeout value to this test to increase the timeout, if this is a long-running test. See https://jestjs.io/docs/api#testname-fn-timeout.\"\n\n    \u001b[0m \u001b[90m 136 |\u001b[39m     })\u001b[33m;\u001b[39m\n     \u001b[90m 137 |\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 138 |\u001b[39m     it(\u001b[32m'should fallback to secondary provider when primary fails'\u001b[39m\u001b[33m,\u001b[39m \u001b[36masync\u001b[39m () \u001b[33m=>\u001b[39m {\n     \u001b[90m     |\u001b[39m     \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 139 |\u001b[39m       \u001b[36mconst\u001b[39m mockOpenAIProvider \u001b[33m=\u001b[39m {\n     \u001b[90m 140 |\u001b[39m         isAvailable\u001b[33m:\u001b[39m jest\u001b[33m.\u001b[39mfn(() \u001b[33m=>\u001b[39m \u001b[36mtrue\u001b[39m)\u001b[33m,\u001b[39m\n     \u001b[90m 141 |\u001b[39m         extractText\u001b[33m:\u001b[39m jest\u001b[33m.\u001b[39mfn()\u001b[33m.\u001b[39mmockRejectedValue(\u001b[36mnew\u001b[39m \u001b[33mError\u001b[39m(\u001b[32m'OpenAI API error'\u001b[39m))\u001b[33m,\u001b[39m\u001b[0m\n\n      at it (src/features/scanner/__tests__/integration/ocrProviderFallback.test.ts:138:5)\n      at describe (src/features/scanner/__tests__/integration/ocrProviderFallback.test.ts:108:3)\n      at Object.describe (src/features/scanner/__tests__/integration/ocrProviderFallback.test.ts:47:1)\n\n  ● OCR Provider Fallback Integration Tests › Provider Availability and Fallback Chain › should use manual fallback when all AI providers fail\n\n    thrown: \"Exceeded timeout of 10000 ms for a test.\n    Add a timeout value to this test to increase the timeout, if this is a long-running test. See https://jestjs.io/docs/api#testname-fn-timeout.\"\n\n    \u001b[0m \u001b[90m 188 |\u001b[39m     })\u001b[33m;\u001b[39m\n     \u001b[90m 189 |\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 190 |\u001b[39m     it(\u001b[32m'should use manual fallback when all AI providers fail'\u001b[39m\u001b[33m,\u001b[39m \u001b[36masync\u001b[39m () \u001b[33m=>\u001b[39m {\n     \u001b[90m     |\u001b[39m     \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 191 |\u001b[39m       \u001b[36mconst\u001b[39m mockFailingProvider \u001b[33m=\u001b[39m {\n     \u001b[90m 192 |\u001b[39m         isAvailable\u001b[33m:\u001b[39m jest\u001b[33m.\u001b[39mfn(() \u001b[33m=>\u001b[39m \u001b[36mtrue\u001b[39m)\u001b[33m,\u001b[39m\n     \u001b[90m 193 |\u001b[39m         extractText\u001b[33m:\u001b[39m jest\u001b[33m.\u001b[39mfn()\u001b[33m.\u001b[39mmockRejectedValue(\u001b[36mnew\u001b[39m \u001b[33mError\u001b[39m(\u001b[32m'Provider failed'\u001b[39m))\u001b[33m,\u001b[39m\u001b[0m\n\n      at it (src/features/scanner/__tests__/integration/ocrProviderFallback.test.ts:190:5)\n      at describe (src/features/scanner/__tests__/integration/ocrProviderFallback.test.ts:108:3)\n      at Object.describe (src/features/scanner/__tests__/integration/ocrProviderFallback.test.ts:47:1)\n\n  ● OCR Provider Fallback Integration Tests › Rate Limiting Integration › should respect rate limits and queue requests\n\n    thrown: \"Exceeded timeout of 10000 ms for a test.\n    Add a timeout value to this test to increase the timeout, if this is a long-running test. See https://jestjs.io/docs/api#testname-fn-timeout.\"\n\n    \u001b[0m \u001b[90m 271 |\u001b[39m\n     \u001b[90m 272 |\u001b[39m   describe(\u001b[32m'Rate Limiting Integration'\u001b[39m\u001b[33m,\u001b[39m () \u001b[33m=>\u001b[39m {\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 273 |\u001b[39m     it(\u001b[32m'should respect rate limits and queue requests'\u001b[39m\u001b[33m,\u001b[39m \u001b[36masync\u001b[39m () \u001b[33m=>\u001b[39m {\n     \u001b[90m     |\u001b[39m     \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 274 |\u001b[39m       \u001b[90m// Mock rate limiting\u001b[39m\n     \u001b[90m 275 |\u001b[39m       \u001b[36mlet\u001b[39m rateLimitCallCount \u001b[33m=\u001b[39m \u001b[35m0\u001b[39m\u001b[33m;\u001b[39m\n     \u001b[90m 276 |\u001b[39m       jest\u001b[33m.\u001b[39mspyOn(rateLimitingService\u001b[33m,\u001b[39m \u001b[32m'checkRateLimit'\u001b[39m)\u001b[33m.\u001b[39mmockImplementation(\u001b[36masync\u001b[39m () \u001b[33m=>\u001b[39m {\u001b[0m\n\n      at it (src/features/scanner/__tests__/integration/ocrProviderFallback.test.ts:273:5)\n      at describe (src/features/scanner/__tests__/integration/ocrProviderFallback.test.ts:272:3)\n      at Object.describe (src/features/scanner/__tests__/integration/ocrProviderFallback.test.ts:47:1)\n\n  ● OCR Provider Fallback Integration Tests › Error Recovery and Retry Logic › should retry failed requests with exponential backoff\n\n    thrown: \"Exceeded timeout of 10000 ms for a test.\n    Add a timeout value to this test to increase the timeout, if this is a long-running test. See https://jestjs.io/docs/api#testname-fn-timeout.\"\n\n    \u001b[0m \u001b[90m 367 |\u001b[39m\n     \u001b[90m 368 |\u001b[39m   describe(\u001b[32m'Error Recovery and Retry Logic'\u001b[39m\u001b[33m,\u001b[39m () \u001b[33m=>\u001b[39m {\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 369 |\u001b[39m     it(\u001b[32m'should retry failed requests with exponential backoff'\u001b[39m\u001b[33m,\u001b[39m \u001b[36masync\u001b[39m () \u001b[33m=>\u001b[39m {\n     \u001b[90m     |\u001b[39m     \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 370 |\u001b[39m       \u001b[36mlet\u001b[39m attemptCount \u001b[33m=\u001b[39m \u001b[35m0\u001b[39m\u001b[33m;\u001b[39m\n     \u001b[90m 371 |\u001b[39m       \u001b[36mconst\u001b[39m mockProvider \u001b[33m=\u001b[39m {\n     \u001b[90m 372 |\u001b[39m         isAvailable\u001b[33m:\u001b[39m jest\u001b[33m.\u001b[39mfn(() \u001b[33m=>\u001b[39m \u001b[36mtrue\u001b[39m)\u001b[33m,\u001b[39m\u001b[0m\n\n      at it (src/features/scanner/__tests__/integration/ocrProviderFallback.test.ts:369:5)\n      at describe (src/features/scanner/__tests__/integration/ocrProviderFallback.test.ts:368:3)\n      at Object.describe (src/features/scanner/__tests__/integration/ocrProviderFallback.test.ts:47:1)\n\n  ● OCR Provider Fallback Integration Tests › Error Recovery and Retry Logic › should handle timeout errors with appropriate fallback\n\n    thrown: \"Exceeded timeout of 10000 ms for a test.\n    Add a timeout value to this test to increase the timeout, if this is a long-running test. See https://jestjs.io/docs/api#testname-fn-timeout.\"\n\n    \u001b[0m \u001b[90m 402 |\u001b[39m     })\u001b[33m;\u001b[39m\n     \u001b[90m 403 |\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 404 |\u001b[39m     it(\u001b[32m'should handle timeout errors with appropriate fallback'\u001b[39m\u001b[33m,\u001b[39m \u001b[36masync\u001b[39m () \u001b[33m=>\u001b[39m {\n     \u001b[90m     |\u001b[39m     \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 405 |\u001b[39m       \u001b[36mconst\u001b[39m mockTimeoutProvider \u001b[33m=\u001b[39m {\n     \u001b[90m 406 |\u001b[39m         isAvailable\u001b[33m:\u001b[39m jest\u001b[33m.\u001b[39mfn(() \u001b[33m=>\u001b[39m \u001b[36mtrue\u001b[39m)\u001b[33m,\u001b[39m\n     \u001b[90m 407 |\u001b[39m         extractText\u001b[33m:\u001b[39m jest\u001b[33m.\u001b[39mfn()\u001b[33m.\u001b[39mmockImplementation(\u001b[36masync\u001b[39m () \u001b[33m=>\u001b[39m {\u001b[0m\n\n      at it (src/features/scanner/__tests__/integration/ocrProviderFallback.test.ts:404:5)\n      at describe (src/features/scanner/__tests__/integration/ocrProviderFallback.test.ts:368:3)\n      at Object.describe (src/features/scanner/__tests__/integration/ocrProviderFallback.test.ts:47:1)\n\n  ● OCR Provider Fallback Integration Tests › Error Recovery and Retry Logic › should handle network connectivity issues\n\n    thrown: \"Exceeded timeout of 10000 ms for a test.\n    Add a timeout value to this test to increase the timeout, if this is a long-running test. See https://jestjs.io/docs/api#testname-fn-timeout.\"\n\n    \u001b[0m \u001b[90m 449 |\u001b[39m     })\u001b[33m;\u001b[39m\n     \u001b[90m 450 |\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 451 |\u001b[39m     it(\u001b[32m'should handle network connectivity issues'\u001b[39m\u001b[33m,\u001b[39m \u001b[36masync\u001b[39m () \u001b[33m=>\u001b[39m {\n     \u001b[90m     |\u001b[39m     \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 452 |\u001b[39m       \u001b[36mconst\u001b[39m mockNetworkErrorProvider \u001b[33m=\u001b[39m {\n     \u001b[90m 453 |\u001b[39m         isAvailable\u001b[33m:\u001b[39m jest\u001b[33m.\u001b[39mfn(() \u001b[33m=>\u001b[39m \u001b[36mtrue\u001b[39m)\u001b[33m,\u001b[39m\n     \u001b[90m 454 |\u001b[39m         extractText\u001b[33m:\u001b[39m jest\u001b[33m.\u001b[39mfn()\u001b[33m.\u001b[39mmockRejectedValue(\u001b[36mnew\u001b[39m \u001b[33mError\u001b[39m(\u001b[32m'Network error: ECONNREFUSED'\u001b[39m))\u001b[33m,\u001b[39m\u001b[0m\n\n      at it (src/features/scanner/__tests__/integration/ocrProviderFallback.test.ts:451:5)\n      at describe (src/features/scanner/__tests__/integration/ocrProviderFallback.test.ts:368:3)\n      at Object.describe (src/features/scanner/__tests__/integration/ocrProviderFallback.test.ts:47:1)\n\n  ● OCR Provider Fallback Integration Tests › Provider Health Monitoring › should monitor provider health and adjust fallback strategy\n\n    expect(received).toBe(expected) // Object.is equality\n\n    Expected: true\n    Received: false\n\n    \u001b[0m \u001b[90m 509 |\u001b[39m       \u001b[36mconst\u001b[39m healthCheck \u001b[33m=\u001b[39m \u001b[36mawait\u001b[39m fallbackService\u001b[33m.\u001b[39mhealthCheck()\u001b[33m;\u001b[39m\n     \u001b[90m 510 |\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 511 |\u001b[39m       expect(healthCheck\u001b[33m.\u001b[39mhealthy)\u001b[33m.\u001b[39mtoBe(\u001b[36mtrue\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                                   \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 512 |\u001b[39m       expect(healthCheck\u001b[33m.\u001b[39mavailableProviders)\u001b[33m.\u001b[39mtoContain(\u001b[33mOCRProvider\u001b[39m\u001b[33m.\u001b[39m\u001b[33mOpenAI\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m 513 |\u001b[39m       expect(healthCheck\u001b[33m.\u001b[39mavailableProviders)\u001b[33m.\u001b[39mtoContain(\u001b[33mOCRProvider\u001b[39m\u001b[33m.\u001b[39m\u001b[33mFallback\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m 514 |\u001b[39m       expect(healthCheck\u001b[33m.\u001b[39mavailableProviders)\u001b[33m.\u001b[39mnot\u001b[33m.\u001b[39mtoContain(\u001b[33mOCRProvider\u001b[39m\u001b[33m.\u001b[39m\u001b[33mQwen\u001b[39m)\u001b[33m;\u001b[39m\u001b[0m\n\n      at Object.toBe (src/features/scanner/__tests__/integration/ocrProviderFallback.test.ts:511:35)\n\n  ● OCR Provider Fallback Integration Tests › Provider Health Monitoring › should detect unhealthy system state\n\n    expect(received).toContain(expected) // indexOf\n\n    Expected value: \"Only fallback provider available\"\n    Received array: [\"Provider openai is not available: Unknown reason\", \"Provider qwen is not available: Unknown reason\"]\n\n    \u001b[0m \u001b[90m 547 |\u001b[39m       expect(healthCheck\u001b[33m.\u001b[39mhealthy)\u001b[33m.\u001b[39mtoBe(\u001b[36mfalse\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m 548 |\u001b[39m       expect(healthCheck\u001b[33m.\u001b[39mavailableProviders)\u001b[33m.\u001b[39mtoEqual([\u001b[33mOCRProvider\u001b[39m\u001b[33m.\u001b[39m\u001b[33mFallback\u001b[39m])\u001b[33m;\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 549 |\u001b[39m       expect(healthCheck\u001b[33m.\u001b[39missues)\u001b[33m.\u001b[39mtoContain(\u001b[32m'Only fallback provider available'\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                                  \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 550 |\u001b[39m       expect(healthCheck\u001b[33m.\u001b[39missues)\u001b[33m.\u001b[39mtoContain(\u001b[32m'OpenAI provider is rate limited or unavailable'\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m 551 |\u001b[39m       expect(healthCheck\u001b[33m.\u001b[39missues)\u001b[33m.\u001b[39mtoContain(\u001b[32m'Qwen provider is rate limited or unavailable'\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m 552 |\u001b[39m     })\u001b[33m;\u001b[39m\u001b[0m\n\n      at Object.toContain (src/features/scanner/__tests__/integration/ocrProviderFallback.test.ts:549:34)\n\n  ● OCR Provider Fallback Integration Tests › Integration with Main OCR Service › should integrate fallback mechanism with main OCR service\n\n    expect(received).toEqual(expected) // deep equality\n\n    - Expected  - 1\n    + Received  + 4\n\n    @@ -10,9 +10,12 @@\n            \"confidence\": 0.95,\n            \"text\": \"Successfully extracted text content\",\n          },\n        ],\n        \"confidence\": 0.95,\n    -   \"processingTime\": 1500,\n    +   \"error\": undefined,\n    +   \"processingTime\": 0,\n        \"provider\": \"openai\",\n    +   \"rawResponse\": undefined,\n    +   \"tables\": undefined,\n        \"text\": \"Successfully extracted text content\",\n      }\n\n    \u001b[0m \u001b[90m 624 |\u001b[39m       \u001b[36mconst\u001b[39m result \u001b[33m=\u001b[39m \u001b[36mawait\u001b[39m ocrService\u001b[33m.\u001b[39mextractText(imageBlob)\u001b[33m;\u001b[39m\n     \u001b[90m 625 |\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 626 |\u001b[39m       expect(result)\u001b[33m.\u001b[39mtoEqual(mockSuccessResult)\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                      \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 627 |\u001b[39m       expect(\u001b[33mOCRProviderFactory\u001b[39m\u001b[33m.\u001b[39minitialize)\u001b[33m.\u001b[39mtoHaveBeenCalled()\u001b[33m;\u001b[39m\n     \u001b[90m 628 |\u001b[39m       expect(mockProvider\u001b[33m.\u001b[39mextractText)\u001b[33m.\u001b[39mtoHaveBeenCalledWith(imageBlob\u001b[33m,\u001b[39m undefined)\u001b[33m;\u001b[39m\n     \u001b[90m 629 |\u001b[39m     })\u001b[33m;\u001b[39m\u001b[0m\n\n      at Object.toEqual (src/features/scanner/__tests__/integration/ocrProviderFallback.test.ts:626:22)\n\n  ● OCR Provider Fallback Integration Tests › Integration with Main OCR Service › should handle service initialization failures gracefully\n\n    expect(received).rejects.toThrow()\n\n    Received promise resolved instead of rejected\n    Resolved to value: {\"blocks\": [{\"bounds\": {\"height\": 30, \"width\": 200, \"x\": 0, \"y\": 0}, \"confidence\": 0.95, \"text\": \"Successfully extracted text content\"}], \"confidence\": 0.95, \"error\": undefined, \"processingTime\": 0, \"provider\": \"openai\", \"rawResponse\": undefined, \"tables\": undefined, \"text\": \"Successfully extracted text content\"}\n\n    \u001b[0m \u001b[90m 636 |\u001b[39m       \u001b[36mconst\u001b[39m imageBlob \u001b[33m=\u001b[39m createMockBlob()\u001b[33m;\u001b[39m\n     \u001b[90m 637 |\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 638 |\u001b[39m       \u001b[36mawait\u001b[39m expect(ocrService\u001b[33m.\u001b[39mextractText(imageBlob))\n     \u001b[90m     |\u001b[39m             \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 639 |\u001b[39m         \u001b[33m.\u001b[39mrejects\u001b[33m.\u001b[39mtoThrow(\u001b[32m'OCR service initialization failed'\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m 640 |\u001b[39m     })\u001b[33m;\u001b[39m\n     \u001b[90m 641 |\u001b[39m   })\u001b[33m;\u001b[39m\u001b[0m\n\n      at expect (../node_modules/expect/build/index.js:2113:15)\n      at Object.expect (src/features/scanner/__tests__/integration/ocrProviderFallback.test.ts:638:13)\n\n  ● OCR Provider Fallback Integration Tests › Performance Under Load › should handle concurrent requests with proper fallback\n\n    thrown: \"Exceeded timeout of 10000 ms for a test.\n    Add a timeout value to this test to increase the timeout, if this is a long-running test. See https://jestjs.io/docs/api#testname-fn-timeout.\"\n\n    \u001b[0m \u001b[90m 642 |\u001b[39m\n     \u001b[90m 643 |\u001b[39m   describe(\u001b[32m'Performance Under Load'\u001b[39m\u001b[33m,\u001b[39m () \u001b[33m=>\u001b[39m {\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 644 |\u001b[39m     it(\u001b[32m'should handle concurrent requests with proper fallback'\u001b[39m\u001b[33m,\u001b[39m \u001b[36masync\u001b[39m () \u001b[33m=>\u001b[39m {\n     \u001b[90m     |\u001b[39m     \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 645 |\u001b[39m       \u001b[36mlet\u001b[39m requestCount \u001b[33m=\u001b[39m \u001b[35m0\u001b[39m\u001b[33m;\u001b[39m\n     \u001b[90m 646 |\u001b[39m       \u001b[36mconst\u001b[39m mockProvider \u001b[33m=\u001b[39m {\n     \u001b[90m 647 |\u001b[39m         isAvailable\u001b[33m:\u001b[39m jest\u001b[33m.\u001b[39mfn(() \u001b[33m=>\u001b[39m \u001b[36mtrue\u001b[39m)\u001b[33m,\u001b[39m\u001b[0m\n\n      at it (src/features/scanner/__tests__/integration/ocrProviderFallback.test.ts:644:5)\n      at describe (src/features/scanner/__tests__/integration/ocrProviderFallback.test.ts:643:3)\n      at Object.describe (src/features/scanner/__tests__/integration/ocrProviderFallback.test.ts:47:1)\n\n  ● OCR Provider Fallback Integration Tests › Performance Under Load › should handle concurrent requests with proper fallback\n\n    OCR service initialization failed\n\n    \u001b[0m \u001b[90m 44 |\u001b[39m     } \u001b[36mcatch\u001b[39m (error) {\n     \u001b[90m 45 |\u001b[39m       console\u001b[33m.\u001b[39merror(\u001b[32m'Failed to initialize OCR service:'\u001b[39m\u001b[33m,\u001b[39m error)\u001b[33m;\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 46 |\u001b[39m       \u001b[36mthrow\u001b[39m \u001b[36mnew\u001b[39m \u001b[33mError\u001b[39m(\u001b[32m'OCR service initialization failed'\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m    |\u001b[39m             \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 47 |\u001b[39m     }\n     \u001b[90m 48 |\u001b[39m   }\n     \u001b[90m 49 |\u001b[39m\u001b[0m\n\n      at AIOCRService.initialize (src/features/scanner/services/ocrService.ts:46:13)\n\n  ● OCR Provider Fallback Integration Tests › Performance Under Load › should handle concurrent requests with proper fallback\n\n    OCR service initialization failed\n\n    \u001b[0m \u001b[90m 44 |\u001b[39m     } \u001b[36mcatch\u001b[39m (error) {\n     \u001b[90m 45 |\u001b[39m       console\u001b[33m.\u001b[39merror(\u001b[32m'Failed to initialize OCR service:'\u001b[39m\u001b[33m,\u001b[39m error)\u001b[33m;\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 46 |\u001b[39m       \u001b[36mthrow\u001b[39m \u001b[36mnew\u001b[39m \u001b[33mError\u001b[39m(\u001b[32m'OCR service initialization failed'\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m    |\u001b[39m             \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 47 |\u001b[39m     }\n     \u001b[90m 48 |\u001b[39m   }\n     \u001b[90m 49 |\u001b[39m\u001b[0m\n\n      at AIOCRService.initialize (src/features/scanner/services/ocrService.ts:46:13)\n\n  ● OCR Provider Fallback Integration Tests › Performance Under Load › should handle concurrent requests with proper fallback\n\n    OCR service initialization failed\n\n    \u001b[0m \u001b[90m 44 |\u001b[39m     } \u001b[36mcatch\u001b[39m (error) {\n     \u001b[90m 45 |\u001b[39m       console\u001b[33m.\u001b[39merror(\u001b[32m'Failed to initialize OCR service:'\u001b[39m\u001b[33m,\u001b[39m error)\u001b[33m;\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 46 |\u001b[39m       \u001b[36mthrow\u001b[39m \u001b[36mnew\u001b[39m \u001b[33mError\u001b[39m(\u001b[32m'OCR service initialization failed'\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m    |\u001b[39m             \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 47 |\u001b[39m     }\n     \u001b[90m 48 |\u001b[39m   }\n     \u001b[90m 49 |\u001b[39m\u001b[0m\n\n      at AIOCRService.initialize (src/features/scanner/services/ocrService.ts:46:13)\n\n\nTest Suites: 55 failed, 6 passed, 61 total\nTests:       60 failed, 194 passed, 254 total\nSnapshots:   0 total\nTime:        77.942 s\nnpm error Lifecycle script `test:coverage` failed with error:\nnpm error code 1\nnpm error path E:\\AlexVenturesStudio\\Nexa_Manager_whit_Task_Master\\web-app\nnpm error workspace web-app@0.0.0\nnpm error location E:\\AlexVenturesStudio\\Nexa_Manager_whit_Task_Master\\web-app\nnpm error command failed\nnpm error command C:\\WINDOWS\\system32\\cmd.exe /d /s /c jest --config ../.config/jest/jest.config.cjs --coverage --silent\n"
        }
      },
      "error": null,
      "details": {
        "error": "Test coverage check failed",
        "message": "Command failed: npm run test:coverage -- --silent\nFAIL src/features/email/components/__tests__/EmailTemplateEditor.test.jsx\n  ● Test suite failed to run\n\n    Configuration error:\n\n    Could not locate module @lib/emailTemplateService mapped as:\n    E:\\AlexVenturesStudio\\Nexa_Manager_whit_Task_Master\\web-app\\src\\lib\\$1.\n\n    Please check your configuration for these entries:\n    {\n      \"moduleNameMapper\": {\n        \"/^@lib\\/(.*)$/\": \"E:\\AlexVenturesStudio\\Nexa_Manager_whit_Task_Master\\web-app\\src\\lib\\$1\"\n      },\n      \"resolver\": undefined\n    }\n\n    \u001b[0m \u001b[90m  9 |\u001b[39m\n     \u001b[90m 10 |\u001b[39m \u001b[90m// Mock the emailTemplateService - Jest will automatically use the __mocks__ version\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 11 |\u001b[39m jest\u001b[33m.\u001b[39mmock(\u001b[32m'@lib/emailTemplateService'\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m    |\u001b[39m      \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 12 |\u001b[39m\n     \u001b[90m 13 |\u001b[39m \u001b[90m// Mock the email attachment service\u001b[39m\n     \u001b[90m 14 |\u001b[39m jest\u001b[33m.\u001b[39mmock(\u001b[32m'@lib/emailAttachmentService'\u001b[39m)\u001b[33m;\u001b[39m\u001b[0m\n\n      at createNoMappedModuleFoundError (../node_modules/jest-resolve/build/index.js:1117:17)\n      at Object.mock (src/features/email/components/__tests__/EmailTemplateEditor.test.jsx:11:6)\n\nPASS src/features/scanner/__tests__/services/ocrProviderFactory.test.ts\nFAIL src/features/email/components/__tests__/VirtualEmailList.test.jsx\n  ● Test suite failed to run\n\n    Cannot find module '../../EmailSecurityIndicator' from 'src/features/email/components/__tests__/VirtualEmailList.test.jsx'\n\n    \u001b[0m \u001b[90m 35 |\u001b[39m }))\u001b[33m;\u001b[39m\n     \u001b[90m 36 |\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 37 |\u001b[39m jest\u001b[33m.\u001b[39mmock(\u001b[32m'../../EmailSecurityIndicator'\u001b[39m\u001b[33m,\u001b[39m () \u001b[33m=>\u001b[39m {\n     \u001b[90m    |\u001b[39m      \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 38 |\u001b[39m   \u001b[36mreturn\u001b[39m \u001b[36mfunction\u001b[39m \u001b[33mMockEmailSecurityIndicator\u001b[39m() {\n     \u001b[90m 39 |\u001b[39m     \u001b[36mreturn\u001b[39m \u001b[33m<\u001b[39m\u001b[33mdiv\u001b[39m data\u001b[33m-\u001b[39mtestid\u001b[33m=\u001b[39m\u001b[32m\"security-indicator\"\u001b[39m \u001b[33m/\u001b[39m\u001b[33m>\u001b[39m\u001b[33m;\u001b[39m\n     \u001b[90m 40 |\u001b[39m   }\u001b[33m;\u001b[39m\u001b[0m\n\n      at Resolver._throwModNotFoundError (../node_modules/jest-resolve/build/index.js:863:11)\n      at Object.mock (src/features/email/components/__tests__/VirtualEmailList.test.jsx:37:6)\n\nPASS src/features/scanner/__tests__/integration/ocrProviderFallback.simplified.test.ts\nFAIL src/features/email/components/__tests__/EmailTemplateSelector.test.jsx\n  ● Test suite failed to run\n\n    Configuration error:\n\n    Could not locate module @hooks/useEmailTemplates mapped as:\n    E:\\AlexVenturesStudio\\Nexa_Manager_whit_Task_Master\\web-app\\src\\hooks\\$1.\n\n    Please check your configuration for these entries:\n    {\n      \"moduleNameMapper\": {\n        \"/^@hooks\\/(.*)$/\": \"E:\\AlexVenturesStudio\\Nexa_Manager_whit_Task_Master\\web-app\\src\\hooks\\$1\"\n      },\n      \"resolver\": undefined\n    }\n\n    \u001b[0m \u001b[90m 85 |\u001b[39m }\u001b[33m;\u001b[39m\n     \u001b[90m 86 |\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 87 |\u001b[39m jest\u001b[33m.\u001b[39mmock(\u001b[32m'@hooks/useEmailTemplates'\u001b[39m\u001b[33m,\u001b[39m () \u001b[33m=>\u001b[39m ({\n     \u001b[90m    |\u001b[39m      \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 88 |\u001b[39m   useEmailTemplates\u001b[33m:\u001b[39m () \u001b[33m=>\u001b[39m mockUseEmailTemplates\u001b[33m,\u001b[39m\n     \u001b[90m 89 |\u001b[39m }))\u001b[33m;\u001b[39m\n     \u001b[90m 90 |\u001b[39m\u001b[0m\n\n      at createNoMappedModuleFoundError (../node_modules/jest-resolve/build/index.js:1117:17)\n      at Object.mock (src/features/email/components/__tests__/EmailTemplateSelector.test.jsx:87:6)\n\nFAIL src/features/email/components/__tests__/EmailViewerContainer.test.jsx\n  ● Test suite failed to run\n\n    Configuration error:\n\n    Could not locate module @hooks/useEmailViewer mapped as:\n    E:\\AlexVenturesStudio\\Nexa_Manager_whit_Task_Master\\web-app\\src\\hooks\\$1.\n\n    Please check your configuration for these entries:\n    {\n      \"moduleNameMapper\": {\n        \"/^@hooks\\/(.*)$/\": \"E:\\AlexVenturesStudio\\Nexa_Manager_whit_Task_Master\\web-app\\src\\hooks\\$1\"\n      },\n      \"resolver\": undefined\n    }\n\n    \u001b[0m \u001b[90m 29 |\u001b[39m }\u001b[33m;\u001b[39m\n     \u001b[90m 30 |\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 31 |\u001b[39m jest\u001b[33m.\u001b[39mmock(\u001b[32m'@hooks/useEmailViewer'\u001b[39m\u001b[33m,\u001b[39m () \u001b[33m=>\u001b[39m ({\n     \u001b[90m    |\u001b[39m      \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 32 |\u001b[39m   __esModule\u001b[33m:\u001b[39m \u001b[36mtrue\u001b[39m\u001b[33m,\u001b[39m\n     \u001b[90m 33 |\u001b[39m   \u001b[36mdefault\u001b[39m\u001b[33m:\u001b[39m () \u001b[33m=>\u001b[39m mockEmailViewerReturn\u001b[33m,\u001b[39m\n     \u001b[90m 34 |\u001b[39m }))\u001b[33m;\u001b[39m\u001b[0m\n\n      at createNoMappedModuleFoundError (../node_modules/jest-resolve/build/index.js:1117:17)\n      at Object.mock (src/features/email/components/__tests__/EmailViewerContainer.test.jsx:31:6)\n\nFAIL src/features/email/components/__tests__/EmailTemplateManager.test.jsx\n  ● Test suite failed to run\n\n    Configuration error:\n\n    Could not locate module @lib/emailTemplateService mapped as:\n    E:\\AlexVenturesStudio\\Nexa_Manager_whit_Task_Master\\web-app\\src\\lib\\$1.\n\n    Please check your configuration for these entries:\n    {\n      \"moduleNameMapper\": {\n        \"/^@lib\\/(.*)$/\": \"E:\\AlexVenturesStudio\\Nexa_Manager_whit_Task_Master\\web-app\\src\\lib\\$1\"\n      },\n      \"resolver\": undefined\n    }\n\n    \u001b[0m \u001b[90m 17 |\u001b[39m\n     \u001b[90m 18 |\u001b[39m \u001b[90m// Mock emailTemplateService\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 19 |\u001b[39m jest\u001b[33m.\u001b[39mmock(\u001b[32m'@lib/emailTemplateService'\u001b[39m\u001b[33m,\u001b[39m () \u001b[33m=>\u001b[39m ({\n     \u001b[90m    |\u001b[39m      \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 20 |\u001b[39m   getTemplates\u001b[33m:\u001b[39m jest\u001b[33m.\u001b[39mfn()\u001b[33m,\u001b[39m\n     \u001b[90m 21 |\u001b[39m   saveTemplate\u001b[33m:\u001b[39m jest\u001b[33m.\u001b[39mfn()\u001b[33m,\u001b[39m\n     \u001b[90m 22 |\u001b[39m   deleteTemplate\u001b[33m:\u001b[39m jest\u001b[33m.\u001b[39mfn()\u001b[0m\n\n      at createNoMappedModuleFoundError (../node_modules/jest-resolve/build/index.js:1117:17)\n      at Object.mock (src/features/email/components/__tests__/EmailTemplateManager.test.jsx:19:6)\n\nFAIL src/lib/__tests__/emailManagementService.integration.test.js\n  ● EmailManagementService Integration › service should be defined\n\n    Cannot find module '../emailManagementService' from 'src/lib/__tests__/emailManagementService.integration.test.js'\n\n    \u001b[0m \u001b[90m  9 |\u001b[39m   beforeAll(\u001b[36masync\u001b[39m () \u001b[33m=>\u001b[39m {\n     \u001b[90m 10 |\u001b[39m     \u001b[90m// Import the service\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 11 |\u001b[39m     \u001b[36mconst\u001b[39m module \u001b[33m=\u001b[39m \u001b[36mawait\u001b[39m \u001b[36mimport\u001b[39m(\u001b[32m'../emailManagementService'\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m    |\u001b[39m                    \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 12 |\u001b[39m     emailManagementService \u001b[33m=\u001b[39m module\u001b[33m.\u001b[39m\u001b[36mdefault\u001b[39m\u001b[33m;\u001b[39m\n     \u001b[90m 13 |\u001b[39m   })\u001b[33m;\u001b[39m\n     \u001b[90m 14 |\u001b[39m\u001b[0m\n\n      at Resolver._throwModNotFoundError (../node_modules/jest-resolve/build/index.js:863:11)\n      at require (src/lib/__tests__/emailManagementService.integration.test.js:11:20)\n      at Object.<anonymous> (src/lib/__tests__/emailManagementService.integration.test.js:11:20)\n\n  ● EmailManagementService Integration › should have required methods\n\n    Cannot find module '../emailManagementService' from 'src/lib/__tests__/emailManagementService.integration.test.js'\n\n    \u001b[0m \u001b[90m  9 |\u001b[39m   beforeAll(\u001b[36masync\u001b[39m () \u001b[33m=>\u001b[39m {\n     \u001b[90m 10 |\u001b[39m     \u001b[90m// Import the service\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 11 |\u001b[39m     \u001b[36mconst\u001b[39m module \u001b[33m=\u001b[39m \u001b[36mawait\u001b[39m \u001b[36mimport\u001b[39m(\u001b[32m'../emailManagementService'\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m    |\u001b[39m                    \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 12 |\u001b[39m     emailManagementService \u001b[33m=\u001b[39m module\u001b[33m.\u001b[39m\u001b[36mdefault\u001b[39m\u001b[33m;\u001b[39m\n     \u001b[90m 13 |\u001b[39m   })\u001b[33m;\u001b[39m\n     \u001b[90m 14 |\u001b[39m\u001b[0m\n\n      at Resolver._throwModNotFoundError (../node_modules/jest-resolve/build/index.js:863:11)\n      at require (src/lib/__tests__/emailManagementService.integration.test.js:11:20)\n      at Object.<anonymous> (src/lib/__tests__/emailManagementService.integration.test.js:11:20)\n\n  ● EmailManagementService Integration › should validate email data correctly\n\n    Cannot find module '../emailManagementService' from 'src/lib/__tests__/emailManagementService.integration.test.js'\n\n    \u001b[0m \u001b[90m  9 |\u001b[39m   beforeAll(\u001b[36masync\u001b[39m () \u001b[33m=>\u001b[39m {\n     \u001b[90m 10 |\u001b[39m     \u001b[90m// Import the service\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 11 |\u001b[39m     \u001b[36mconst\u001b[39m module \u001b[33m=\u001b[39m \u001b[36mawait\u001b[39m \u001b[36mimport\u001b[39m(\u001b[32m'../emailManagementService'\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m    |\u001b[39m                    \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 12 |\u001b[39m     emailManagementService \u001b[33m=\u001b[39m module\u001b[33m.\u001b[39m\u001b[36mdefault\u001b[39m\u001b[33m;\u001b[39m\n     \u001b[90m 13 |\u001b[39m   })\u001b[33m;\u001b[39m\n     \u001b[90m 14 |\u001b[39m\u001b[0m\n\n      at Resolver._throwModNotFoundError (../node_modules/jest-resolve/build/index.js:863:11)\n      at require (src/lib/__tests__/emailManagementService.integration.test.js:11:20)\n      at Object.<anonymous> (src/lib/__tests__/emailManagementService.integration.test.js:11:20)\n\n  ● EmailManagementService Integration › should detect invalid email data\n\n    Cannot find module '../emailManagementService' from 'src/lib/__tests__/emailManagementService.integration.test.js'\n\n    \u001b[0m \u001b[90m  9 |\u001b[39m   beforeAll(\u001b[36masync\u001b[39m () \u001b[33m=>\u001b[39m {\n     \u001b[90m 10 |\u001b[39m     \u001b[90m// Import the service\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 11 |\u001b[39m     \u001b[36mconst\u001b[39m module \u001b[33m=\u001b[39m \u001b[36mawait\u001b[39m \u001b[36mimport\u001b[39m(\u001b[32m'../emailManagementService'\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m    |\u001b[39m                    \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 12 |\u001b[39m     emailManagementService \u001b[33m=\u001b[39m module\u001b[33m.\u001b[39m\u001b[36mdefault\u001b[39m\u001b[33m;\u001b[39m\n     \u001b[90m 13 |\u001b[39m   })\u001b[33m;\u001b[39m\n     \u001b[90m 14 |\u001b[39m\u001b[0m\n\n      at Resolver._throwModNotFoundError (../node_modules/jest-resolve/build/index.js:863:11)\n      at require (src/lib/__tests__/emailManagementService.integration.test.js:11:20)\n      at Object.<anonymous> (src/lib/__tests__/emailManagementService.integration.test.js:11:20)\n\n  ● EmailManagementService Integration › should validate email addresses correctly\n\n    Cannot find module '../emailManagementService' from 'src/lib/__tests__/emailManagementService.integration.test.js'\n\n    \u001b[0m \u001b[90m  9 |\u001b[39m   beforeAll(\u001b[36masync\u001b[39m () \u001b[33m=>\u001b[39m {\n     \u001b[90m 10 |\u001b[39m     \u001b[90m// Import the service\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 11 |\u001b[39m     \u001b[36mconst\u001b[39m module \u001b[33m=\u001b[39m \u001b[36mawait\u001b[39m \u001b[36mimport\u001b[39m(\u001b[32m'../emailManagementService'\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m    |\u001b[39m                    \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 12 |\u001b[39m     emailManagementService \u001b[33m=\u001b[39m module\u001b[33m.\u001b[39m\u001b[36mdefault\u001b[39m\u001b[33m;\u001b[39m\n     \u001b[90m 13 |\u001b[39m   })\u001b[33m;\u001b[39m\n     \u001b[90m 14 |\u001b[39m\u001b[0m\n\n      at Resolver._throwModNotFoundError (../node_modules/jest-resolve/build/index.js:863:11)\n      at require (src/lib/__tests__/emailManagementService.integration.test.js:11:20)\n      at Object.<anonymous> (src/lib/__tests__/emailManagementService.integration.test.js:11:20)\n\n  ● EmailManagementService Integration › should handle event listeners\n\n    Cannot find module '../emailManagementService' from 'src/lib/__tests__/emailManagementService.integration.test.js'\n\n    \u001b[0m \u001b[90m  9 |\u001b[39m   beforeAll(\u001b[36masync\u001b[39m () \u001b[33m=>\u001b[39m {\n     \u001b[90m 10 |\u001b[39m     \u001b[90m// Import the service\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 11 |\u001b[39m     \u001b[36mconst\u001b[39m module \u001b[33m=\u001b[39m \u001b[36mawait\u001b[39m \u001b[36mimport\u001b[39m(\u001b[32m'../emailManagementService'\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m    |\u001b[39m                    \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 12 |\u001b[39m     emailManagementService \u001b[33m=\u001b[39m module\u001b[33m.\u001b[39m\u001b[36mdefault\u001b[39m\u001b[33m;\u001b[39m\n     \u001b[90m 13 |\u001b[39m   })\u001b[33m;\u001b[39m\n     \u001b[90m 14 |\u001b[39m\u001b[0m\n\n      at Resolver._throwModNotFoundError (../node_modules/jest-resolve/build/index.js:863:11)\n      at require (src/lib/__tests__/emailManagementService.integration.test.js:11:20)\n      at Object.<anonymous> (src/lib/__tests__/emailManagementService.integration.test.js:11:20)\n\nPASS src/__tests__/shared/basic.test.ts\nFAIL src/lib/__tests__/uiUtils.test.ts\n  ● uiUtils › notify › dismiss › should call toast.dismiss without arguments\n\n    expect(jest.fn()).toHaveBeenCalledWith(...expected)\n\n    Expected: called with 0 arguments\n    Received: undefined\n\n    Number of calls: 1\n\n    \u001b[0m \u001b[90m 209 |\u001b[39m       it(\u001b[32m'should call toast.dismiss without arguments'\u001b[39m\u001b[33m,\u001b[39m () \u001b[33m=>\u001b[39m {\n     \u001b[90m 210 |\u001b[39m         notify\u001b[33m.\u001b[39mdismiss()\u001b[33m;\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 211 |\u001b[39m         expect(toast\u001b[33m.\u001b[39mdismiss)\u001b[33m.\u001b[39mtoHaveBeenCalledWith()\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                               \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 212 |\u001b[39m       })\u001b[33m;\u001b[39m\n     \u001b[90m 213 |\u001b[39m     })\u001b[33m;\u001b[39m\n     \u001b[90m 214 |\u001b[39m   })\u001b[33m;\u001b[39m\u001b[0m\n\n      at Object.toHaveBeenCalledWith (src/lib/__tests__/uiUtils.test.ts:211:31)\n\n  ● uiUtils › errorHandler › should handle generic error\n\n    expect(jest.fn()).toHaveBeenCalledWith(...expected)\n\n    Expected: \"Error in test context:\", [Error: Test error]\n\n    Number of calls: 0\n\n    \u001b[0m \u001b[90m 259 |\u001b[39m       \u001b[36mconst\u001b[39m result \u001b[33m=\u001b[39m errorHandler\u001b[33m.\u001b[39mhandle(error\u001b[33m,\u001b[39m \u001b[32m'test context'\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m 260 |\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 261 |\u001b[39m       expect(\u001b[33mLogger\u001b[39m\u001b[33m.\u001b[39merror)\u001b[33m.\u001b[39mtoHaveBeenCalledWith(\u001b[32m'Error in test context:'\u001b[39m\u001b[33m,\u001b[39m error)\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                            \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 262 |\u001b[39m       expect(toast\u001b[33m.\u001b[39merror)\u001b[33m.\u001b[39mtoHaveBeenCalledWith(\u001b[32m'Test error'\u001b[39m\u001b[33m,\u001b[39m expect\u001b[33m.\u001b[39many(\u001b[33mObject\u001b[39m))\u001b[33m;\u001b[39m\n     \u001b[90m 263 |\u001b[39m       expect(result)\u001b[33m.\u001b[39mtoBe(\u001b[32m'Test error'\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m 264 |\u001b[39m     })\u001b[33m;\u001b[39m\u001b[0m\n\n      at Object.toHaveBeenCalledWith (src/lib/__tests__/uiUtils.test.ts:261:28)\n\n  ● uiUtils › errorHandler › should handle string error\n\n    expect(jest.fn()).toHaveBeenCalledWith(...expected)\n\n    Expected: \"Error in test context:\", \"String error message\"\n\n    Number of calls: 0\n\n    \u001b[0m \u001b[90m 269 |\u001b[39m       \u001b[36mconst\u001b[39m result \u001b[33m=\u001b[39m errorHandler\u001b[33m.\u001b[39mhandle(error\u001b[33m,\u001b[39m \u001b[32m'test context'\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m 270 |\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 271 |\u001b[39m       expect(\u001b[33mLogger\u001b[39m\u001b[33m.\u001b[39merror)\u001b[33m.\u001b[39mtoHaveBeenCalledWith(\u001b[32m'Error in test context:'\u001b[39m\u001b[33m,\u001b[39m error)\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                            \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 272 |\u001b[39m       expect(toast\u001b[33m.\u001b[39merror)\u001b[33m.\u001b[39mtoHaveBeenCalledWith(\u001b[32m'String error message'\u001b[39m\u001b[33m,\u001b[39m expect\u001b[33m.\u001b[39many(\u001b[33mObject\u001b[39m))\u001b[33m;\u001b[39m\n     \u001b[90m 273 |\u001b[39m       expect(result)\u001b[33m.\u001b[39mtoBe(\u001b[32m'String error message'\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m 274 |\u001b[39m     })\u001b[33m;\u001b[39m\u001b[0m\n\n      at Object.toHaveBeenCalledWith (src/lib/__tests__/uiUtils.test.ts:271:28)\n\n  ● uiUtils › errorHandler › should handle API error with response data\n\n    expect(jest.fn()).toHaveBeenCalledWith(...expected)\n\n    Expected: \"API Error:\", {\"response\": {\"data\": {\"message\": \"API error message\"}}}\n\n    Number of calls: 0\n\n    \u001b[0m \u001b[90m 285 |\u001b[39m       errorHandler\u001b[33m.\u001b[39mhandleApiError(apiError)\u001b[33m;\u001b[39m\n     \u001b[90m 286 |\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 287 |\u001b[39m       expect(\u001b[33mLogger\u001b[39m\u001b[33m.\u001b[39merror)\u001b[33m.\u001b[39mtoHaveBeenCalledWith(\u001b[32m'API Error:'\u001b[39m\u001b[33m,\u001b[39m apiError)\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                            \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 288 |\u001b[39m       expect(toast\u001b[33m.\u001b[39merror)\u001b[33m.\u001b[39mtoHaveBeenCalledWith(\u001b[32m'API error message'\u001b[39m\u001b[33m,\u001b[39m expect\u001b[33m.\u001b[39many(\u001b[33mObject\u001b[39m))\u001b[33m;\u001b[39m\n     \u001b[90m 289 |\u001b[39m     })\u001b[33m;\u001b[39m\n     \u001b[90m 290 |\u001b[39m\u001b[0m\n\n      at Object.toHaveBeenCalledWith (src/lib/__tests__/uiUtils.test.ts:287:28)\n\n  ● uiUtils › errorHandler › should handle Supabase error\n\n    expect(jest.fn()).toHaveBeenCalledWith(...expected)\n\n    Expected: \"Supabase error in test context:\", {\"message\": \"duplicate key value violates unique constraint\"}\n\n    Number of calls: 0\n\n    \u001b[0m \u001b[90m 296 |\u001b[39m       \u001b[36mconst\u001b[39m result \u001b[33m=\u001b[39m errorHandler\u001b[33m.\u001b[39mhandleSupabaseError(supabaseError\u001b[33m,\u001b[39m \u001b[32m'test context'\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m 297 |\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 298 |\u001b[39m       expect(\u001b[33mLogger\u001b[39m\u001b[33m.\u001b[39merror)\u001b[33m.\u001b[39mtoHaveBeenCalledWith(\u001b[32m'Supabase error in test context:'\u001b[39m\u001b[33m,\u001b[39m supabaseError)\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                            \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 299 |\u001b[39m       expect(toast\u001b[33m.\u001b[39merror)\u001b[33m.\u001b[39mtoHaveBeenCalledWith(\u001b[32m'This item already exists'\u001b[39m\u001b[33m,\u001b[39m expect\u001b[33m.\u001b[39many(\u001b[33mObject\u001b[39m))\u001b[33m;\u001b[39m\n     \u001b[90m 300 |\u001b[39m       expect(result)\u001b[33m.\u001b[39mtoBe(\u001b[32m'This item already exists'\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m 301 |\u001b[39m     })\u001b[33m;\u001b[39m\u001b[0m\n\n      at Object.toHaveBeenCalledWith (src/lib/__tests__/uiUtils.test.ts:298:28)\n\n  ● uiUtils › validation › should validate email format\n\n    expect(received).toBeNull()\n\n    Received: true\n\n    \u001b[0m \u001b[90m 311 |\u001b[39m\n     \u001b[90m 312 |\u001b[39m     it(\u001b[32m'should validate email format'\u001b[39m\u001b[33m,\u001b[39m () \u001b[33m=>\u001b[39m {\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 313 |\u001b[39m       expect(validation\u001b[33m.\u001b[39memail(\u001b[32m'test@example.com'\u001b[39m))\u001b[33m.\u001b[39mtoBeNull()\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                                                    \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 314 |\u001b[39m       expect(validation\u001b[33m.\u001b[39memail(\u001b[32m'invalid-email'\u001b[39m))\u001b[33m.\u001b[39mtoBe(\u001b[32m'Invalid email'\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m 315 |\u001b[39m       expect(validation\u001b[33m.\u001b[39memail(\u001b[32m''\u001b[39m))\u001b[33m.\u001b[39mtoBeNull()\u001b[33m;\u001b[39m \u001b[90m// Empty email is valid (use required for required validation)\u001b[39m\n     \u001b[90m 316 |\u001b[39m     })\u001b[33m;\u001b[39m\u001b[0m\n\n      at Object.toBeNull (src/lib/__tests__/uiUtils.test.ts:313:52)\n\n  ● uiUtils › validation › should validate maximum length\n\n    expect(received).toBe(expected) // Object.is equality\n\n    Expected: \"Test Field can be at most 5 characters long\"\n    Received: \"Test Field must be at most 5 characters long\"\n\n    \u001b[0m \u001b[90m 325 |\u001b[39m     it(\u001b[32m'should validate maximum length'\u001b[39m\u001b[33m,\u001b[39m () \u001b[33m=>\u001b[39m {\n     \u001b[90m 326 |\u001b[39m       expect(validation\u001b[33m.\u001b[39mmaxLength(\u001b[32m'test'\u001b[39m\u001b[33m,\u001b[39m \u001b[35m5\u001b[39m\u001b[33m,\u001b[39m \u001b[32m'Test Field'\u001b[39m))\u001b[33m.\u001b[39mtoBeNull()\u001b[33m;\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 327 |\u001b[39m       expect(validation\u001b[33m.\u001b[39mmaxLength(\u001b[32m'toolong'\u001b[39m\u001b[33m,\u001b[39m \u001b[35m5\u001b[39m\u001b[33m,\u001b[39m \u001b[32m'Test Field'\u001b[39m))\u001b[33m.\u001b[39mtoBe(\n     \u001b[90m     |\u001b[39m                                                                \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 328 |\u001b[39m         \u001b[32m'Test Field can be at most 5 characters long'\u001b[39m\u001b[33m,\u001b[39m\n     \u001b[90m 329 |\u001b[39m       )\u001b[33m;\u001b[39m\n     \u001b[90m 330 |\u001b[39m     })\u001b[33m;\u001b[39m\u001b[0m\n\n      at Object.toBe (src/lib/__tests__/uiUtils.test.ts:327:64)\n\n  ● uiUtils › formatters › should format currency\n\n    expect(received).toMatch(expected)\n\n    Expected pattern: /1\\.234,56/\n    Received string:  \"$1,234.56\"\n\n    \u001b[0m \u001b[90m 385 |\u001b[39m     it(\u001b[32m'should format currency'\u001b[39m\u001b[33m,\u001b[39m () \u001b[33m=>\u001b[39m {\n     \u001b[90m 386 |\u001b[39m       \u001b[36mconst\u001b[39m result \u001b[33m=\u001b[39m formatters\u001b[33m.\u001b[39mcurrency(\u001b[35m1234.56\u001b[39m)\u001b[33m;\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 387 |\u001b[39m       expect(result)\u001b[33m.\u001b[39mtoMatch(\u001b[35m/1\\.234,56/\u001b[39m)\u001b[33m;\u001b[39m \u001b[90m// Italian format\u001b[39m\n     \u001b[90m     |\u001b[39m                      \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 388 |\u001b[39m     })\u001b[33m;\u001b[39m\n     \u001b[90m 389 |\u001b[39m\n     \u001b[90m 390 |\u001b[39m     it(\u001b[32m'should format numbers'\u001b[39m\u001b[33m,\u001b[39m () \u001b[33m=>\u001b[39m {\u001b[0m\n\n      at Object.toMatch (src/lib/__tests__/uiUtils.test.ts:387:22)\n\n  ● uiUtils › formatters › should format numbers\n\n    expect(received).toMatch(expected)\n\n    Expected pattern: /1\\.234,57/\n    Received string:  \"1,234.57\"\n\n    \u001b[0m \u001b[90m 390 |\u001b[39m     it(\u001b[32m'should format numbers'\u001b[39m\u001b[33m,\u001b[39m () \u001b[33m=>\u001b[39m {\n     \u001b[90m 391 |\u001b[39m       \u001b[36mconst\u001b[39m result \u001b[33m=\u001b[39m formatters\u001b[33m.\u001b[39mnumber(\u001b[35m1234.567\u001b[39m\u001b[33m,\u001b[39m \u001b[35m2\u001b[39m)\u001b[33m;\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 392 |\u001b[39m       expect(result)\u001b[33m.\u001b[39mtoMatch(\u001b[35m/1\\.234,57/\u001b[39m)\u001b[33m;\u001b[39m \u001b[90m// Italian format with 2 decimals\u001b[39m\n     \u001b[90m     |\u001b[39m                      \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 393 |\u001b[39m     })\u001b[33m;\u001b[39m\n     \u001b[90m 394 |\u001b[39m\n     \u001b[90m 395 |\u001b[39m     it(\u001b[32m'should format percentage'\u001b[39m\u001b[33m,\u001b[39m () \u001b[33m=>\u001b[39m {\u001b[0m\n\n      at Object.toMatch (src/lib/__tests__/uiUtils.test.ts:392:22)\n\n  ● uiUtils › formatters › should format percentage\n\n    expect(received).toMatch(expected)\n\n    Expected pattern: /25,0/\n    Received string:  \"25.0%\"\n\n    \u001b[0m \u001b[90m 395 |\u001b[39m     it(\u001b[32m'should format percentage'\u001b[39m\u001b[33m,\u001b[39m () \u001b[33m=>\u001b[39m {\n     \u001b[90m 396 |\u001b[39m       \u001b[36mconst\u001b[39m result \u001b[33m=\u001b[39m formatters\u001b[33m.\u001b[39mpercentage(\u001b[35m25\u001b[39m\u001b[33m,\u001b[39m \u001b[35m1\u001b[39m)\u001b[33m;\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 397 |\u001b[39m       expect(result)\u001b[33m.\u001b[39mtoMatch(\u001b[35m/25,0/\u001b[39m)\u001b[33m;\u001b[39m \u001b[90m// 25% in Italian format\u001b[39m\n     \u001b[90m     |\u001b[39m                      \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 398 |\u001b[39m     })\u001b[33m;\u001b[39m\n     \u001b[90m 399 |\u001b[39m\n     \u001b[90m 400 |\u001b[39m     it(\u001b[32m'should format file size'\u001b[39m\u001b[33m,\u001b[39m () \u001b[33m=>\u001b[39m {\u001b[0m\n\n      at Object.toMatch (src/lib/__tests__/uiUtils.test.ts:397:22)\n\n  ● uiUtils › formatters › should truncate text\n\n    expect(received).toBe(expected) // Object.is equality\n\n    Expected: \"This is a very long ...\"\n    Received: \"This is a very lo...\"\n\n    \u001b[0m \u001b[90m 406 |\u001b[39m     it(\u001b[32m'should truncate text'\u001b[39m\u001b[33m,\u001b[39m () \u001b[33m=>\u001b[39m {\n     \u001b[90m 407 |\u001b[39m       expect(formatters\u001b[33m.\u001b[39mtruncate(\u001b[32m'Short text'\u001b[39m\u001b[33m,\u001b[39m \u001b[35m20\u001b[39m))\u001b[33m.\u001b[39mtoBe(\u001b[32m'Short text'\u001b[39m)\u001b[33m;\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 408 |\u001b[39m       expect(formatters\u001b[33m.\u001b[39mtruncate(\u001b[32m'This is a very long text that should be truncated'\u001b[39m\u001b[33m,\u001b[39m \u001b[35m20\u001b[39m))\u001b[33m.\u001b[39mtoBe(\n     \u001b[90m     |\u001b[39m                                                                                            \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 409 |\u001b[39m         \u001b[32m'This is a very long ...'\u001b[39m\u001b[33m,\u001b[39m\n     \u001b[90m 410 |\u001b[39m       )\u001b[33m;\u001b[39m\n     \u001b[90m 411 |\u001b[39m     })\u001b[33m;\u001b[39m\u001b[0m\n\n      at Object.toBe (src/lib/__tests__/uiUtils.test.ts:408:92)\n\nFAIL src/services/__tests__/imageProcessingService.test.js\n  ● ImageProcessingService › PDF Handling › should parse PDF and extract pages\n\n    TypeError: pdfBlob.arrayBuffer is not a function\n\n    \u001b[0m \u001b[90m 316 |\u001b[39m     pdfjsLib\u001b[33m.\u001b[39m\u001b[33mGlobalWorkerOptions\u001b[39m\u001b[33m.\u001b[39mworkerSrc \u001b[33m=\u001b[39m \u001b[32m`https://cdnjs.cloudflare.com/ajax/libs/pdf.js/${pdfjsLib.version}/pdf.worker.min.js`\u001b[39m\u001b[33m;\u001b[39m\n     \u001b[90m 317 |\u001b[39m     \n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 318 |\u001b[39m     \u001b[36mconst\u001b[39m arrayBuffer \u001b[33m=\u001b[39m \u001b[36mawait\u001b[39m pdfBlob\u001b[33m.\u001b[39marrayBuffer()\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                                       \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 319 |\u001b[39m     \u001b[36mconst\u001b[39m pdf \u001b[33m=\u001b[39m \u001b[36mawait\u001b[39m pdfjsLib\u001b[33m.\u001b[39mgetDocument({ data\u001b[33m:\u001b[39m arrayBuffer })\u001b[33m.\u001b[39mpromise\u001b[33m;\u001b[39m\n     \u001b[90m 320 |\u001b[39m     \n     \u001b[90m 321 |\u001b[39m     \u001b[36mconst\u001b[39m images\u001b[33m:\u001b[39m \u001b[33mBlob\u001b[39m[] \u001b[33m=\u001b[39m []\u001b[33m;\u001b[39m\u001b[0m\n\n      at ImageProcessingService.arrayBuffer [as parsePDF] (src/features/scanner/services/imageProcessingService.ts:318:39)\n      at Object.<anonymous> (src/services/__tests__/imageProcessingService.test.js:134:22)\n\n  ● ImageProcessingService › PDF Handling › should extract PDF pages with page numbers\n\n    TypeError: pdfBlob.arrayBuffer is not a function\n\n    \u001b[0m \u001b[90m 316 |\u001b[39m     pdfjsLib\u001b[33m.\u001b[39m\u001b[33mGlobalWorkerOptions\u001b[39m\u001b[33m.\u001b[39mworkerSrc \u001b[33m=\u001b[39m \u001b[32m`https://cdnjs.cloudflare.com/ajax/libs/pdf.js/${pdfjsLib.version}/pdf.worker.min.js`\u001b[39m\u001b[33m;\u001b[39m\n     \u001b[90m 317 |\u001b[39m     \n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 318 |\u001b[39m     \u001b[36mconst\u001b[39m arrayBuffer \u001b[33m=\u001b[39m \u001b[36mawait\u001b[39m pdfBlob\u001b[33m.\u001b[39marrayBuffer()\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                                       \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 319 |\u001b[39m     \u001b[36mconst\u001b[39m pdf \u001b[33m=\u001b[39m \u001b[36mawait\u001b[39m pdfjsLib\u001b[33m.\u001b[39mgetDocument({ data\u001b[33m:\u001b[39m arrayBuffer })\u001b[33m.\u001b[39mpromise\u001b[33m;\u001b[39m\n     \u001b[90m 320 |\u001b[39m     \n     \u001b[90m 321 |\u001b[39m     \u001b[36mconst\u001b[39m images\u001b[33m:\u001b[39m \u001b[33mBlob\u001b[39m[] \u001b[33m=\u001b[39m []\u001b[33m;\u001b[39m\u001b[0m\n\n      at ImageProcessingService.arrayBuffer [as parsePDF] (src/features/scanner/services/imageProcessingService.ts:318:39)\n      at ImageProcessingService.extractPDFPages (src/features/scanner/services/imageProcessingService.ts:356:20)\n      at Object.<anonymous> (src/services/__tests__/imageProcessingService.test.js:142:22)\n\nFAIL src/features/scanner/__tests__/services/resultCacheService.test.ts\n  ● ResultCacheService › initialization › should load cache from localStorage on initialization\n\n    expect(received).toBe(expected) // Object.is equality\n\n    Expected: true\n    Received: false\n\n    \u001b[0m \u001b[90m 130 |\u001b[39m       \u001b[36mconst\u001b[39m newService \u001b[33m=\u001b[39m \u001b[33mResultCacheService\u001b[39m\u001b[33m.\u001b[39mgetInstance()\u001b[33m;\u001b[39m\n     \u001b[90m 131 |\u001b[39m       \n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 132 |\u001b[39m       expect(newService\u001b[33m.\u001b[39mhas(\u001b[32m'test-key'\u001b[39m))\u001b[33m.\u001b[39mtoBe(\u001b[36mtrue\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                                          \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 133 |\u001b[39m     })\u001b[33m;\u001b[39m\n     \u001b[90m 134 |\u001b[39m\n     \u001b[90m 135 |\u001b[39m     it(\u001b[32m'should handle corrupted localStorage data gracefully'\u001b[39m\u001b[33m,\u001b[39m () \u001b[33m=>\u001b[39m {\u001b[0m\n\n      at Object.toBe (src/features/scanner/__tests__/services/resultCacheService.test.ts:132:42)\n\n  ● ResultCacheService › initialization › should handle corrupted localStorage data gracefully\n\n    expect(jest.fn()).toHaveBeenCalledWith(...expected)\n\n    Expected: \"scanner_cache\"\n\n    Number of calls: 0\n\n    \u001b[0m \u001b[90m 140 |\u001b[39m       })\u001b[33m.\u001b[39mnot\u001b[33m.\u001b[39mtoThrow()\u001b[33m;\u001b[39m\n     \u001b[90m 141 |\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 142 |\u001b[39m       expect(mockLocalStorage\u001b[33m.\u001b[39mremoveItem)\u001b[33m.\u001b[39mtoHaveBeenCalledWith(\u001b[32m'scanner_cache'\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                                           \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 143 |\u001b[39m     })\u001b[33m;\u001b[39m\n     \u001b[90m 144 |\u001b[39m   })\u001b[33m;\u001b[39m\n     \u001b[90m 145 |\u001b[39m\u001b[0m\n\n      at Object.toHaveBeenCalledWith (src/features/scanner/__tests__/services/resultCacheService.test.ts:142:43)\n\n  ● ResultCacheService › error handling › should handle hash generation errors\n\n    expect(received).not.toThrow()\n\n    Error name:    \"Error\"\n    Error message: \"Stringify error\"\n\n        \u001b[0m \u001b[90m 554 |\u001b[39m       \u001b[36mconst\u001b[39m originalStringify \u001b[33m=\u001b[39m \u001b[33mJSON\u001b[39m\u001b[33m.\u001b[39mstringify\u001b[33m;\u001b[39m\n         \u001b[90m 555 |\u001b[39m       \u001b[33mJSON\u001b[39m\u001b[33m.\u001b[39mstringify \u001b[33m=\u001b[39m jest\u001b[33m.\u001b[39mfn()\u001b[33m.\u001b[39mmockImplementation(() \u001b[33m=>\u001b[39m {\n        \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 556 |\u001b[39m         \u001b[36mthrow\u001b[39m \u001b[36mnew\u001b[39m \u001b[33mError\u001b[39m(\u001b[32m'Stringify error'\u001b[39m)\u001b[33m;\u001b[39m\n         \u001b[90m     |\u001b[39m               \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n         \u001b[90m 557 |\u001b[39m       })\u001b[33m;\u001b[39m\n         \u001b[90m 558 |\u001b[39m\n         \u001b[90m 559 |\u001b[39m       \u001b[36mconst\u001b[39m blob \u001b[33m=\u001b[39m \u001b[36mnew\u001b[39m \u001b[33mBlob\u001b[39m([\u001b[32m'test'\u001b[39m]\u001b[33m,\u001b[39m { type\u001b[33m:\u001b[39m \u001b[32m'image/jpeg'\u001b[39m })\u001b[33m;\u001b[39m\u001b[0m\n\n      at JSON.<anonymous> (src/features/scanner/__tests__/services/resultCacheService.test.ts:556:15)\n      at ResultCacheService.stringify [as hashObject] (src/features/scanner/services/resultCacheService.ts:427:22)\n      at ResultCacheService.hashObject [as generateOCRKey] (src/features/scanner/services/resultCacheService.ts:68:40)\n      at generateOCRKey (src/features/scanner/__tests__/services/resultCacheService.test.ts:563:17)\n      at Object.<anonymous> (../node_modules/expect/build/index.js:1824:9)\n      at Object.throwingMatcher [as toThrow] (../node_modules/expect/build/index.js:2231:93)\n      at Object.toThrow (src/features/scanner/__tests__/services/resultCacheService.test.ts:564:14)\n      at Object.toThrow (src/features/scanner/__tests__/services/resultCacheService.test.ts:564:14)\n\nFAIL src/features/email/components/__tests__/EmailSearchDashboard.minimal.test.jsx\n  ● Test suite failed to run\n\n    Cannot find module '../../../hooks/useEmailSearch' from 'src/features/email/components/__tests__/EmailSearchDashboard.minimal.test.jsx'\n\n    \u001b[0m \u001b[90m 4 |\u001b[39m\n     \u001b[90m 5 |\u001b[39m \u001b[90m// Mock all dependencies first\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 6 |\u001b[39m jest\u001b[33m.\u001b[39mmock(\u001b[32m'../../../hooks/useEmailSearch'\u001b[39m\u001b[33m,\u001b[39m () \u001b[33m=>\u001b[39m ({\n     \u001b[90m   |\u001b[39m      \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 7 |\u001b[39m   useEmailSearch\u001b[33m:\u001b[39m jest\u001b[33m.\u001b[39mfn(() \u001b[33m=>\u001b[39m ({\n     \u001b[90m 8 |\u001b[39m     searchResults\u001b[33m:\u001b[39m []\u001b[33m,\u001b[39m\n     \u001b[90m 9 |\u001b[39m     totalResults\u001b[33m:\u001b[39m \u001b[35m0\u001b[39m\u001b[33m,\u001b[39m\u001b[0m\n\n      at Resolver._throwModNotFoundError (../node_modules/jest-resolve/build/index.js:863:11)\n      at Object.mock (src/features/email/components/__tests__/EmailSearchDashboard.minimal.test.jsx:6:6)\n\nFAIL src/features/email/components/__tests__/EmailSearch.test.jsx\n  ● Test suite failed to run\n\n    Configuration error:\n\n    Could not locate module @hooks/useEmailSearch mapped as:\n    E:\\AlexVenturesStudio\\Nexa_Manager_whit_Task_Master\\web-app\\src\\hooks\\$1.\n\n    Please check your configuration for these entries:\n    {\n      \"moduleNameMapper\": {\n        \"/^@hooks\\/(.*)$/\": \"E:\\AlexVenturesStudio\\Nexa_Manager_whit_Task_Master\\web-app\\src\\hooks\\$1\"\n      },\n      \"resolver\": undefined\n    }\n\n    \u001b[0m \u001b[90m 10 |\u001b[39m\n     \u001b[90m 11 |\u001b[39m \u001b[90m// Mock dependencies\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 12 |\u001b[39m jest\u001b[33m.\u001b[39mmock(\u001b[32m'@hooks/useEmailSearch'\u001b[39m\u001b[33m,\u001b[39m () \u001b[33m=>\u001b[39m ({\n     \u001b[90m    |\u001b[39m      \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 13 |\u001b[39m   useEmailSearch\u001b[33m:\u001b[39m jest\u001b[33m.\u001b[39mfn()\u001b[33m,\u001b[39m\n     \u001b[90m 14 |\u001b[39m }))\u001b[33m;\u001b[39m\n     \u001b[90m 15 |\u001b[39m\u001b[0m\n\n      at createNoMappedModuleFoundError (../node_modules/jest-resolve/build/index.js:1117:17)\n      at Object.mock (src/features/email/components/__tests__/EmailSearch.test.jsx:12:6)\n\nFAIL src/features/email/components/__tests__/EmailRecipientInput.test.jsx\n  ● Test suite failed to run\n\n    Configuration error:\n\n    Could not locate module @hooks/useClients mapped as:\n    E:\\AlexVenturesStudio\\Nexa_Manager_whit_Task_Master\\web-app\\src\\hooks\\$1.\n\n    Please check your configuration for these entries:\n    {\n      \"moduleNameMapper\": {\n        \"/^@hooks\\/(.*)$/\": \"E:\\AlexVenturesStudio\\Nexa_Manager_whit_Task_Master\\web-app\\src\\hooks\\$1\"\n      },\n      \"resolver\": undefined\n    }\n\n    \u001b[0m \u001b[90m  5 |\u001b[39m\n     \u001b[90m  6 |\u001b[39m \u001b[90m// Mock the useClients hook\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m  7 |\u001b[39m jest\u001b[33m.\u001b[39mmock(\u001b[32m'@hooks/useClients'\u001b[39m\u001b[33m,\u001b[39m () \u001b[33m=>\u001b[39m ({\n     \u001b[90m    |\u001b[39m      \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m  8 |\u001b[39m   useClients\u001b[33m:\u001b[39m () \u001b[33m=>\u001b[39m ({\n     \u001b[90m  9 |\u001b[39m     clients\u001b[33m:\u001b[39m [\n     \u001b[90m 10 |\u001b[39m       {\u001b[0m\n\n      at createNoMappedModuleFoundError (../node_modules/jest-resolve/build/index.js:1117:17)\n      at Object.mock (src/features/email/components/__tests__/EmailRecipientInput.test.jsx:7:6)\n\nFAIL src/features/email/components/__tests__/EmailListContainer.test.jsx\n  ● Test suite failed to run\n\n    Configuration error:\n\n    Could not locate module @hooks/useEmailList mapped as:\n    E:\\AlexVenturesStudio\\Nexa_Manager_whit_Task_Master\\web-app\\src\\hooks\\$1.\n\n    Please check your configuration for these entries:\n    {\n      \"moduleNameMapper\": {\n        \"/^@hooks\\/(.*)$/\": \"E:\\AlexVenturesStudio\\Nexa_Manager_whit_Task_Master\\web-app\\src\\hooks\\$1\"\n      },\n      \"resolver\": undefined\n    }\n\n    \u001b[0m \u001b[90m  5 |\u001b[39m\n     \u001b[90m  6 |\u001b[39m \u001b[90m// Mock hooks\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m  7 |\u001b[39m jest\u001b[33m.\u001b[39mmock(\u001b[32m'@hooks/useEmailList'\u001b[39m\u001b[33m,\u001b[39m () \u001b[33m=>\u001b[39m ({\n     \u001b[90m    |\u001b[39m      \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m  8 |\u001b[39m   __esModule\u001b[33m:\u001b[39m \u001b[36mtrue\u001b[39m\u001b[33m,\u001b[39m\n     \u001b[90m  9 |\u001b[39m   \u001b[36mdefault\u001b[39m\u001b[33m:\u001b[39m jest\u001b[33m.\u001b[39mfn()\u001b[33m,\u001b[39m\n     \u001b[90m 10 |\u001b[39m }))\u001b[33m;\u001b[39m\u001b[0m\n\n      at createNoMappedModuleFoundError (../node_modules/jest-resolve/build/index.js:1117:17)\n      at Object.mock (src/features/email/components/__tests__/EmailListContainer.test.jsx:7:6)\n\nFAIL src/features/email/components/__tests__/EmailSearchResults.test.jsx\n  ● Test suite failed to run\n\n    Cannot find module '../../ui/Button' from 'src/features/email/components/__tests__/EmailSearchResults.test.jsx'\n\n    \u001b[0m \u001b[90m 25 |\u001b[39m\n     \u001b[90m 26 |\u001b[39m \u001b[90m// Mock UI components\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 27 |\u001b[39m jest\u001b[33m.\u001b[39mmock(\u001b[32m'../../ui/Button'\u001b[39m\u001b[33m,\u001b[39m () \u001b[33m=>\u001b[39m ({\n     \u001b[90m    |\u001b[39m      \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 28 |\u001b[39m   \u001b[33mButton\u001b[39m\u001b[33m:\u001b[39m ({ children\u001b[33m,\u001b[39m onClick\u001b[33m,\u001b[39m disabled\u001b[33m,\u001b[39m \u001b[33m...\u001b[39mprops }) \u001b[33m=>\u001b[39m (\n     \u001b[90m 29 |\u001b[39m     \u001b[33m<\u001b[39m\u001b[33mbutton\u001b[39m onClick\u001b[33m=\u001b[39m{onClick} disabled\u001b[33m=\u001b[39m{disabled} {\u001b[33m...\u001b[39mprops}\u001b[33m>\u001b[39m\n     \u001b[90m 30 |\u001b[39m       {children}\u001b[0m\n\n      at Resolver._throwModNotFoundError (../node_modules/jest-resolve/build/index.js:863:11)\n      at Object.mock (src/features/email/components/__tests__/EmailSearchResults.test.jsx:27:6)\n\nFAIL src/features/email/components/__tests__/EmailPerformanceMonitor.test.jsx\n  ● Test suite failed to run\n\n    Configuration error:\n\n    Could not locate module @lib/emailCacheService mapped as:\n    E:\\AlexVenturesStudio\\Nexa_Manager_whit_Task_Master\\web-app\\src\\lib\\$1.\n\n    Please check your configuration for these entries:\n    {\n      \"moduleNameMapper\": {\n        \"/^@lib\\/(.*)$/\": \"E:\\AlexVenturesStudio\\Nexa_Manager_whit_Task_Master\\web-app\\src\\lib\\$1\"\n      },\n      \"resolver\": undefined\n    }\n\n    \u001b[0m \u001b[90m  7 |\u001b[39m\n     \u001b[90m  8 |\u001b[39m \u001b[90m// Mock the services\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m  9 |\u001b[39m jest\u001b[33m.\u001b[39mmock(\u001b[32m'@lib/emailCacheService'\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m    |\u001b[39m      \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 10 |\u001b[39m jest\u001b[33m.\u001b[39mmock(\u001b[32m'@lib/emailSyncService'\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m 11 |\u001b[39m\n     \u001b[90m 12 |\u001b[39m \u001b[90m// Mock Logger to prevent import issues\u001b[39m\u001b[0m\n\n      at createNoMappedModuleFoundError (../node_modules/jest-resolve/build/index.js:1117:17)\n      at Object.mock (src/features/email/components/__tests__/EmailPerformanceMonitor.test.jsx:9:6)\n\nFAIL src/features/email/components/__tests__/EmailErrorBoundary.test.jsx\n  ● Test suite failed to run\n\n    Configuration error:\n\n    Could not locate module @lib/logger mapped as:\n    E:\\AlexVenturesStudio\\Nexa_Manager_whit_Task_Master\\web-app\\src\\lib\\$1.\n\n    Please check your configuration for these entries:\n    {\n      \"moduleNameMapper\": {\n        \"/^@lib\\/(.*)$/\": \"E:\\AlexVenturesStudio\\Nexa_Manager_whit_Task_Master\\web-app\\src\\lib\\$1\"\n      },\n      \"resolver\": undefined\n    }\n\n    \u001b[0m \u001b[90m 10 |\u001b[39m\n     \u001b[90m 11 |\u001b[39m \u001b[90m// Mock dependencies\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 12 |\u001b[39m jest\u001b[33m.\u001b[39mmock(\u001b[32m'@lib/logger'\u001b[39m\u001b[33m,\u001b[39m () \u001b[33m=>\u001b[39m ({\n     \u001b[90m    |\u001b[39m      \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 13 |\u001b[39m   __esModule\u001b[33m:\u001b[39m \u001b[36mtrue\u001b[39m\u001b[33m,\u001b[39m\n     \u001b[90m 14 |\u001b[39m   \u001b[36mdefault\u001b[39m\u001b[33m:\u001b[39m {\n     \u001b[90m 15 |\u001b[39m     error\u001b[33m:\u001b[39m jest\u001b[33m.\u001b[39mfn()\u001b[33m,\u001b[39m\u001b[0m\n\n      at createNoMappedModuleFoundError (../node_modules/jest-resolve/build/index.js:1117:17)\n      at Object.mock (src/features/email/components/__tests__/EmailErrorBoundary.test.jsx:12:6)\n\nFAIL src/features/email/components/__tests__/EmailComposer.test.jsx\n  ● Test suite failed to run\n\n    Configuration error:\n\n    Could not locate module @hooks/useEmailComposer mapped as:\n    E:\\AlexVenturesStudio\\Nexa_Manager_whit_Task_Master\\web-app\\src\\hooks\\$1.\n\n    Please check your configuration for these entries:\n    {\n      \"moduleNameMapper\": {\n        \"/^@hooks\\/(.*)$/\": \"E:\\AlexVenturesStudio\\Nexa_Manager_whit_Task_Master\\web-app\\src\\hooks\\$1\"\n      },\n      \"resolver\": undefined\n    }\n\n    \u001b[0m \u001b[90m  5 |\u001b[39m\n     \u001b[90m  6 |\u001b[39m \u001b[90m// Mock the hooks and services\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m  7 |\u001b[39m jest\u001b[33m.\u001b[39mmock(\u001b[32m'@hooks/useEmailComposer'\u001b[39m\u001b[33m,\u001b[39m () \u001b[33m=>\u001b[39m ({\n     \u001b[90m    |\u001b[39m      \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m  8 |\u001b[39m   useEmailComposer\u001b[33m:\u001b[39m () \u001b[33m=>\u001b[39m ({\n     \u001b[90m  9 |\u001b[39m     emailData\u001b[33m:\u001b[39m {\n     \u001b[90m 10 |\u001b[39m       to\u001b[33m:\u001b[39m \u001b[32m''\u001b[39m\u001b[33m,\u001b[39m\u001b[0m\n\n      at createNoMappedModuleFoundError (../node_modules/jest-resolve/build/index.js:1117:17)\n      at Object.mock (src/features/email/components/__tests__/EmailComposer.test.jsx:7:6)\n\nFAIL src/features/email/components/__tests__/debug-final.test.js\n  ● Test suite failed to run\n\n    Configuration error:\n\n    Could not locate module @lib/logger mapped as:\n    E:\\AlexVenturesStudio\\Nexa_Manager_whit_Task_Master\\web-app\\src\\lib\\$1.\n\n    Please check your configuration for these entries:\n    {\n      \"moduleNameMapper\": {\n        \"/^@lib\\/(.*)$/\": \"E:\\AlexVenturesStudio\\Nexa_Manager_whit_Task_Master\\web-app\\src\\lib\\$1\"\n      },\n      \"resolver\": undefined\n    }\n\n    \u001b[0m \u001b[90m  9 |\u001b[39m\n     \u001b[90m 10 |\u001b[39m \u001b[90m// Mock dependencies\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 11 |\u001b[39m jest\u001b[33m.\u001b[39mmock(\u001b[32m'@lib/logger'\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m    |\u001b[39m      \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 12 |\u001b[39m jest\u001b[33m.\u001b[39mmock(\u001b[32m'@lib/errorReportingService'\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m 13 |\u001b[39m jest\u001b[33m.\u001b[39mmock(\u001b[32m'react-i18next'\u001b[39m\u001b[33m,\u001b[39m () \u001b[33m=>\u001b[39m ({\n     \u001b[90m 14 |\u001b[39m   useTranslation\u001b[33m:\u001b[39m () \u001b[33m=>\u001b[39m ({\u001b[0m\n\n      at createNoMappedModuleFoundError (../node_modules/jest-resolve/build/index.js:1117:17)\n      at Object.mock (src/features/email/components/__tests__/debug-final.test.js:11:6)\n\nFAIL src/features/scanner/__tests__/services/ocrService.test.ts\n  ● AIOCRService › initialization › should handle initialization failure\n\n    expect(received).rejects.toThrow()\n\n    Received promise resolved instead of rejected\n    Resolved to value: undefined\n\n    \u001b[0m \u001b[90m 131 |\u001b[39m       mockOCRProviderFactory\u001b[33m.\u001b[39minitialize\u001b[33m.\u001b[39mmockRejectedValue(\u001b[36mnew\u001b[39m \u001b[33mError\u001b[39m(\u001b[32m'Init failed'\u001b[39m))\u001b[33m;\u001b[39m\n     \u001b[90m 132 |\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 133 |\u001b[39m       \u001b[36mawait\u001b[39m expect(service\u001b[33m.\u001b[39mextractText(mockBlob))\u001b[33m.\u001b[39mrejects\u001b[33m.\u001b[39mtoThrow(\u001b[32m'OCR service initialization failed'\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m             \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 134 |\u001b[39m     })\u001b[33m;\u001b[39m\n     \u001b[90m 135 |\u001b[39m   })\u001b[33m;\u001b[39m\n     \u001b[90m 136 |\u001b[39m\u001b[0m\n\n      at expect (../node_modules/expect/build/index.js:2113:15)\n      at Object.expect (src/features/scanner/__tests__/services/ocrService.test.ts:133:13)\n\n  ● AIOCRService › extractText › should handle fallback service failure with basic extraction\n\n    expect(received).toEqual(expected) // deep equality\n\n    - Expected  - 1\n    + Received  + 4\n\n    @@ -10,9 +10,12 @@\n            \"confidence\": 0.95,\n            \"text\": \"Extracted text content\",\n          },\n        ],\n        \"confidence\": 0.95,\n    -   \"processingTime\": 1500,\n    +   \"error\": undefined,\n    +   \"processingTime\": 0,\n        \"provider\": \"openai\",\n    +   \"rawResponse\": undefined,\n    +   \"tables\": undefined,\n        \"text\": \"Extracted text content\",\n      }\n\n    \u001b[0m \u001b[90m 215 |\u001b[39m       \u001b[36mconst\u001b[39m result \u001b[33m=\u001b[39m \u001b[36mawait\u001b[39m service\u001b[33m.\u001b[39mextractText(mockBlob)\u001b[33m;\u001b[39m\n     \u001b[90m 216 |\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 217 |\u001b[39m       expect(result)\u001b[33m.\u001b[39mtoEqual(mockOCRResult)\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                      \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 218 |\u001b[39m     })\u001b[33m;\u001b[39m\n     \u001b[90m 219 |\u001b[39m\n     \u001b[90m 220 |\u001b[39m     it(\u001b[32m'should return fallback result when all providers fail'\u001b[39m\u001b[33m,\u001b[39m \u001b[36masync\u001b[39m () \u001b[33m=>\u001b[39m {\u001b[0m\n\n      at Object.toEqual (src/features/scanner/__tests__/services/ocrService.test.ts:217:22)\n\n  ● AIOCRService › error scenarios › should handle provider timeout\n\n    TypeError: Cannot read properties of undefined (reading 'error')\n\n    \u001b[0m \u001b[90m 342 |\u001b[39m       \u001b[36mconst\u001b[39m result \u001b[33m=\u001b[39m \u001b[36mawait\u001b[39m service\u001b[33m.\u001b[39mextractText(mockBlob\u001b[33m,\u001b[39m options)\u001b[33m;\u001b[39m\n     \u001b[90m 343 |\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 344 |\u001b[39m       expect(result\u001b[33m.\u001b[39merror\u001b[33m?\u001b[39m\u001b[33m.\u001b[39mcode)\u001b[33m.\u001b[39mtoBe(\u001b[32m'ALL_PROVIDERS_FAILED'\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                     \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 345 |\u001b[39m     })\u001b[33m;\u001b[39m\n     \u001b[90m 346 |\u001b[39m\n     \u001b[90m 347 |\u001b[39m     it(\u001b[32m'should handle provider not found'\u001b[39m\u001b[33m,\u001b[39m \u001b[36masync\u001b[39m () \u001b[33m=>\u001b[39m {\u001b[0m\n\n      at Object.error (src/features/scanner/__tests__/services/ocrService.test.ts:344:21)\n\n  ● AIOCRService › error scenarios › should handle provider not found\n\n    TypeError: Cannot read properties of undefined (reading 'error')\n\n    \u001b[0m \u001b[90m 351 |\u001b[39m       \u001b[36mconst\u001b[39m result \u001b[33m=\u001b[39m \u001b[36mawait\u001b[39m service\u001b[33m.\u001b[39mextractText(mockBlob)\u001b[33m;\u001b[39m\n     \u001b[90m 352 |\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 353 |\u001b[39m       expect(result\u001b[33m.\u001b[39merror\u001b[33m?\u001b[39m\u001b[33m.\u001b[39mcode)\u001b[33m.\u001b[39mtoBe(\u001b[32m'ALL_PROVIDERS_FAILED'\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                     \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 354 |\u001b[39m     })\u001b[33m;\u001b[39m\n     \u001b[90m 355 |\u001b[39m\n     \u001b[90m 356 |\u001b[39m     it(\u001b[32m'should handle provider unavailable'\u001b[39m\u001b[33m,\u001b[39m \u001b[36masync\u001b[39m () \u001b[33m=>\u001b[39m {\u001b[0m\n\n      at Object.error (src/features/scanner/__tests__/services/ocrService.test.ts:353:21)\n\n  ● AIOCRService › error scenarios › should handle provider unavailable\n\n    TypeError: Cannot read properties of undefined (reading 'error')\n\n    \u001b[0m \u001b[90m 365 |\u001b[39m       \u001b[36mconst\u001b[39m result \u001b[33m=\u001b[39m \u001b[36mawait\u001b[39m service\u001b[33m.\u001b[39mextractText(mockBlob)\u001b[33m;\u001b[39m\n     \u001b[90m 366 |\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 367 |\u001b[39m       expect(result\u001b[33m.\u001b[39merror\u001b[33m?\u001b[39m\u001b[33m.\u001b[39mcode)\u001b[33m.\u001b[39mtoBe(\u001b[32m'ALL_PROVIDERS_FAILED'\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                     \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 368 |\u001b[39m     })\u001b[33m;\u001b[39m\n     \u001b[90m 369 |\u001b[39m   })\u001b[33m;\u001b[39m\n     \u001b[90m 370 |\u001b[39m\u001b[0m\n\n      at Object.error (src/features/scanner/__tests__/services/ocrService.test.ts:367:21)\n\n  ● AIOCRService › caching behavior › should skip caching on cache service failure\n\n    expect(received).toEqual(expected) // deep equality\n\n    Expected: {\"blocks\": [{\"bounds\": {\"height\": 20, \"width\": 100, \"x\": 0, \"y\": 0}, \"confidence\": 0.95, \"text\": \"Extracted text content\"}], \"confidence\": 0.95, \"processingTime\": 1500, \"provider\": \"openai\", \"text\": \"Extracted text content\"}\n    Received: undefined\n\n    \u001b[0m \u001b[90m 387 |\u001b[39m\n     \u001b[90m 388 |\u001b[39m       \u001b[90m// Should still return result even if caching fails\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 389 |\u001b[39m       expect(result)\u001b[33m.\u001b[39mtoEqual(mockOCRResult)\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                      \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 390 |\u001b[39m     })\u001b[33m;\u001b[39m\n     \u001b[90m 391 |\u001b[39m   })\u001b[33m;\u001b[39m\n     \u001b[90m 392 |\u001b[39m\u001b[0m\n\n      at Object.toEqual (src/features/scanner/__tests__/services/ocrService.test.ts:389:22)\n\nFAIL src/features/scanner/__tests__/integration/errorHandlingRecovery.test.ts\n  ● Test suite failed to run\n\n    Missing Supabase environment variables - check deployment configuration\n\n    \u001b[0m \u001b[90m 38 |\u001b[39m\n     \u001b[90m 39 |\u001b[39m   \u001b[33mLogger\u001b[39m\u001b[33m.\u001b[39merror(errorMessage)\u001b[33m;\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 40 |\u001b[39m   \u001b[36mthrow\u001b[39m \u001b[36mnew\u001b[39m \u001b[33mError\u001b[39m(\u001b[32m'Missing Supabase environment variables - check deployment configuration'\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m    |\u001b[39m         \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 41 |\u001b[39m }\n     \u001b[90m 42 |\u001b[39m\n     \u001b[90m 43 |\u001b[39m \u001b[90m// Regular client with anon key\u001b[39m\u001b[0m\n\n      at Object.<anonymous> (src/lib/supabaseClient.js:40:9)\n      at Object.require (src/features/scanner/services/documentStorageService.ts:2:1)\n      at Object.require (src/features/scanner/services/index.ts:7:1)\n      at Object.require (src/features/scanner/__tests__/integration/errorHandlingRecovery.test.ts:1:1)\n\nFAIL src/features/scanner/__tests__/services/imageProcessingService.test.ts\n  ● Test suite failed to run\n\n    Missing Supabase environment variables - check deployment configuration\n\n    \u001b[0m \u001b[90m 38 |\u001b[39m\n     \u001b[90m 39 |\u001b[39m   \u001b[33mLogger\u001b[39m\u001b[33m.\u001b[39merror(errorMessage)\u001b[33m;\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 40 |\u001b[39m   \u001b[36mthrow\u001b[39m \u001b[36mnew\u001b[39m \u001b[33mError\u001b[39m(\u001b[32m'Missing Supabase environment variables - check deployment configuration'\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m    |\u001b[39m         \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 41 |\u001b[39m }\n     \u001b[90m 42 |\u001b[39m\n     \u001b[90m 43 |\u001b[39m \u001b[90m// Regular client with anon key\u001b[39m\u001b[0m\n\n      at Object.<anonymous> (src/lib/supabaseClient.js:40:9)\n      at Object.require (src/features/scanner/services/documentStorageService.ts:2:1)\n      at Object.require (src/features/scanner/services/index.ts:7:1)\n      at Object.require (src/features/scanner/__tests__/services/imageProcessingService.test.ts:1:1)\n\nFAIL src/features/scanner/__tests__/integration/documentScannerFlow.test.ts\n  ● Test suite failed to run\n\n    Missing Supabase environment variables - check deployment configuration\n\n    \u001b[0m \u001b[90m 38 |\u001b[39m\n     \u001b[90m 39 |\u001b[39m   \u001b[33mLogger\u001b[39m\u001b[33m.\u001b[39merror(errorMessage)\u001b[33m;\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 40 |\u001b[39m   \u001b[36mthrow\u001b[39m \u001b[36mnew\u001b[39m \u001b[33mError\u001b[39m(\u001b[32m'Missing Supabase environment variables - check deployment configuration'\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m    |\u001b[39m         \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 41 |\u001b[39m }\n     \u001b[90m 42 |\u001b[39m\n     \u001b[90m 43 |\u001b[39m \u001b[90m// Regular client with anon key\u001b[39m\u001b[0m\n\n      at Object.<anonymous> (src/lib/supabaseClient.js:40:9)\n      at Object.require (src/features/scanner/services/documentStorageService.ts:2:1)\n      at Object.require (src/features/scanner/services/index.ts:7:1)\n      at Object.require (src/features/scanner/__tests__/integration/documentScannerFlow.test.ts:1:1)\n\nFAIL src/features/financial/components/QuoteEmailSender.test.jsx\n  ● Test suite failed to run\n\n    Cannot find module '../lib/emailService' from 'src/features/financial/components/QuoteEmailSender.test.jsx'\n\n    \u001b[0m \u001b[90m  5 |\u001b[39m\n     \u001b[90m  6 |\u001b[39m \u001b[90m// Mock emailService\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m  7 |\u001b[39m jest\u001b[33m.\u001b[39mmock(\u001b[32m'../lib/emailService'\u001b[39m\u001b[33m,\u001b[39m () \u001b[33m=>\u001b[39m ({\n     \u001b[90m    |\u001b[39m      \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m  8 |\u001b[39m   isValidEmail\u001b[33m:\u001b[39m email \u001b[33m=>\u001b[39m \u001b[35m/^[^\\s@]+@[^\\s@]+\\.[^\\s@]+$/\u001b[39m\u001b[33m.\u001b[39mtest(email)\u001b[33m,\u001b[39m\n     \u001b[90m  9 |\u001b[39m   sendQuoteEmail\u001b[33m:\u001b[39m jest\u001b[33m.\u001b[39mfn(() \u001b[33m=>\u001b[39m\n     \u001b[90m 10 |\u001b[39m     \u001b[33mPromise\u001b[39m\u001b[33m.\u001b[39mresolve({\u001b[0m\n\n      at Resolver._throwModNotFoundError (../node_modules/jest-resolve/build/index.js:863:11)\n      at Object.mock (src/features/financial/components/QuoteEmailSender.test.jsx:7:6)\n\nFAIL src/features/email/components/__tests__/EmailSearchDashboard.test.jsx\n  ● Test suite failed to run\n\n    Jest encountered an unexpected token\n\n    Jest failed to parse a file. This happens e.g. when your code or its dependencies use non-standard JavaScript syntax, or when Jest is not configured to support such syntax.\n\n    Out of the box Jest supports Babel, which will be used to transform your files into valid JS based on your Babel configuration.\n\n    By default \"node_modules\" folder is ignored by transformers.\n\n    Here's what you can do:\n     • If you are trying to use ECMAScript Modules, see https://jestjs.io/docs/ecmascript-modules for how to enable it.\n     • If you are trying to use TypeScript, see https://jestjs.io/docs/getting-started#using-typescript\n     • To have some of your \"node_modules\" files transformed, you can specify a custom \"transformIgnorePatterns\" in your config.\n     • If you need a custom transformation, specify a \"transform\" option in your config.\n     • If you simply want to mock your non-JS modules (e.g. binary assets) you can stub them out with the \"moduleNameMapper\" config option.\n\n    You'll find more details and examples of these config options in the docs:\n    https://jestjs.io/docs/configuration\n    For information about custom transformations, see:\n    https://jestjs.io/docs/code-transformation\n\n    Details:\n\n    SyntaxError: E:\\AlexVenturesStudio\\Nexa_Manager_whit_Task_Master\\web-app\\src\\features\\email\\components\\__tests__\\EmailSearchDashboard.test.jsx: Bad character escape sequence. (119:50)\n\n    \u001b[0m \u001b[90m 117 |\u001b[39m\n     \u001b[90m 118 |\u001b[39m \u001b[90m// Import the mocked hooks\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 119 |\u001b[39m \u001b[36mimport\u001b[39m { useEmailSearch } \u001b[36mfrom\u001b[39m \u001b[32m'@/features\\hooks\\useEmailSearch'\u001b[39m\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                                                   \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 120 |\u001b[39m \u001b[36mimport\u001b[39m { useEmails } \u001b[36mfrom\u001b[39m \u001b[32m'@/features\\hooks\\useEmails'\u001b[39m\u001b[33m;\u001b[39m\n     \u001b[90m 121 |\u001b[39m\n     \u001b[90m 122 |\u001b[39m describe(\u001b[32m'EmailSearchDashboard'\u001b[39m\u001b[33m,\u001b[39m () \u001b[33m=>\u001b[39m {\u001b[0m\n\n      at constructor (../node_modules/@babel/parser/src/parse-error.ts:95:45)\n      at JSXParserMixin.toParseError [as raise] (../node_modules/@babel/parser/src/tokenizer/index.ts:1503:19)\n      at Object.raise [as invalidEscapeSequence] (../node_modules/@babel/parser/src/tokenizer/index.ts:1576:12)\n      at invalidEscapeSequence (../node_modules/@babel/babel-helper-string-parser/src/index.ts:293:14)\n      at readHexChar (../node_modules/@babel/babel-helper-string-parser/src/index.ts:449:22)\n      at readCodePoint (../node_modules/@babel/babel-helper-string-parser/src/index.ts:191:24)\n      at readEscapedChar (../node_modules/@babel/babel-helper-string-parser/src/index.ts:80:19)\n      at JSXParserMixin.readStringContents [as readString] (../node_modules/@babel/parser/src/tokenizer/index.ts:1336:46)\n      at JSXParserMixin.readString (../node_modules/@babel/parser/src/tokenizer/index.ts:991:14)\n      at JSXParserMixin.getTokenFromCode (../node_modules/@babel/parser/src/plugins/jsx/index.ts:631:13)\n      at JSXParserMixin.getTokenFromCode [as nextToken] (../node_modules/@babel/parser/src/tokenizer/index.ts:278:10)\n      at JSXParserMixin.nextToken [as next] (../node_modules/@babel/parser/src/tokenizer/index.ts:121:10)\n      at JSXParserMixin.next [as eatContextual] (../node_modules/@babel/parser/src/parser/util.ts:98:12)\n      at JSXParserMixin.eatContextual [as expectContextual] (../node_modules/@babel/parser/src/parser/util.ts:110:15)\n      at JSXParserMixin.expectContextual [as parseImportSpecifiersAndAfter] (../node_modules/@babel/parser/src/parser/statement.ts:3174:10)\n      at JSXParserMixin.parseImportSpecifiersAndAfter [as parseImport] (../node_modules/@babel/parser/src/parser/statement.ts:3142:17)\n      at JSXParserMixin.parseImport [as parseStatementContent] (../node_modules/@babel/parser/src/parser/statement.ts:642:25)\n      at JSXParserMixin.parseStatementContent [as parseStatementLike] (../node_modules/@babel/parser/src/parser/statement.ts:477:17)\n      at JSXParserMixin.parseStatementLike [as parseModuleItem] (../node_modules/@babel/parser/src/parser/statement.ts:414:17)\n      at JSXParserMixin.parseModuleItem [as parseBlockOrModuleBlockBody] (../node_modules/@babel/parser/src/parser/statement.ts:1438:16)\n      at JSXParserMixin.parseBlockOrModuleBlockBody [as parseBlockBody] (../node_modules/@babel/parser/src/parser/statement.ts:1412:10)\n      at JSXParserMixin.parseBlockBody [as parseProgram] (../node_modules/@babel/parser/src/parser/statement.ts:229:10)\n      at JSXParserMixin.parseProgram [as parseTopLevel] (../node_modules/@babel/parser/src/parser/statement.ts:203:25)\n      at JSXParserMixin.parseTopLevel [as parse] (../node_modules/@babel/parser/src/parser/index.ts:93:10)\n      at parse (../node_modules/@babel/parser/src/index.ts:92:38)\n      at parser (../node_modules/@babel/core/src/parser/index.ts:28:19)\n          at parser.next (<anonymous>)\n      at normalizeFile (../node_modules/@babel/core/src/transformation/normalize-file.ts:49:24)\n          at normalizeFile.next (<anonymous>)\n      at run (../node_modules/@babel/core/src/transformation/index.ts:40:36)\n          at run.next (<anonymous>)\n      at transform (../node_modules/@babel/core/src/transform.ts:29:20)\n          at transform.next (<anonymous>)\n      at evaluateSync (../node_modules/gensync/index.js:251:28)\n      at sync (../node_modules/gensync/index.js:89:14)\n      at fn (../node_modules/@babel/core/src/errors/rewrite-stack-trace.ts:99:14)\n      at transformSync (../node_modules/@babel/core/src/transform.ts:66:52)\n      at ScriptTransformer.transformSource (../node_modules/@jest/transform/build/index.js:422:31)\n      at ScriptTransformer._transformAndBuildScript (../node_modules/@jest/transform/build/index.js:519:40)\n      at ScriptTransformer.transform (../node_modules/@jest/transform/build/index.js:558:19)\n\nFAIL src/features/analytics/components/ComparativeAnalytics.test.jsx\n  ● Test suite failed to run\n\n    Configuration error:\n\n    Could not locate module @lib/financialService mapped as:\n    E:\\AlexVenturesStudio\\Nexa_Manager_whit_Task_Master\\web-app\\src\\lib\\$1.\n\n    Please check your configuration for these entries:\n    {\n      \"moduleNameMapper\": {\n        \"/^@lib\\/(.*)$/\": \"E:\\AlexVenturesStudio\\Nexa_Manager_whit_Task_Master\\web-app\\src\\lib\\$1\"\n      },\n      \"resolver\": undefined\n    }\n\n    \u001b[0m \u001b[90m  6 |\u001b[39m\n     \u001b[90m  7 |\u001b[39m \u001b[90m// Mock the services\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m  8 |\u001b[39m jest\u001b[33m.\u001b[39mmock(\u001b[32m'@lib/financialService'\u001b[39m\u001b[33m,\u001b[39m () \u001b[33m=>\u001b[39m ({\n     \u001b[90m    |\u001b[39m      \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m  9 |\u001b[39m   getFinancialOverview\u001b[33m:\u001b[39m jest\u001b[33m.\u001b[39mfn(() \u001b[33m=>\u001b[39m\n     \u001b[90m 10 |\u001b[39m     \u001b[33mPromise\u001b[39m\u001b[33m.\u001b[39mresolve({\n     \u001b[90m 11 |\u001b[39m       success\u001b[33m:\u001b[39m \u001b[36mtrue\u001b[39m\u001b[33m,\u001b[39m\u001b[0m\n\n      at createNoMappedModuleFoundError (../node_modules/jest-resolve/build/index.js:1117:17)\n      at Object.mock (src/features/analytics/components/ComparativeAnalytics.test.jsx:8:6)\n\nFAIL src/features/analytics/components/ClientAnalyticsWidgets.test.jsx\n  ● Test suite failed to run\n\n    Configuration error:\n\n    Could not locate module @lib/clientService mapped as:\n    E:\\AlexVenturesStudio\\Nexa_Manager_whit_Task_Master\\web-app\\src\\lib\\$1.\n\n    Please check your configuration for these entries:\n    {\n      \"moduleNameMapper\": {\n        \"/^@lib\\/(.*)$/\": \"E:\\AlexVenturesStudio\\Nexa_Manager_whit_Task_Master\\web-app\\src\\lib\\$1\"\n      },\n      \"resolver\": undefined\n    }\n\n    \u001b[0m \u001b[90m  6 |\u001b[39m\n     \u001b[90m  7 |\u001b[39m \u001b[90m// Mock the services\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m  8 |\u001b[39m jest\u001b[33m.\u001b[39mmock(\u001b[32m'@lib/clientService'\u001b[39m\u001b[33m,\u001b[39m () \u001b[33m=>\u001b[39m ({\n     \u001b[90m    |\u001b[39m      \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m  9 |\u001b[39m   getClients\u001b[33m:\u001b[39m jest\u001b[33m.\u001b[39mfn(() \u001b[33m=>\u001b[39m\n     \u001b[90m 10 |\u001b[39m     \u001b[33mPromise\u001b[39m\u001b[33m.\u001b[39mresolve({\n     \u001b[90m 11 |\u001b[39m       data\u001b[33m:\u001b[39m [\u001b[0m\n\n      at createNoMappedModuleFoundError (../node_modules/jest-resolve/build/index.js:1117:17)\n      at Object.mock (src/features/analytics/components/ClientAnalyticsWidgets.test.jsx:8:6)\n\nFAIL src/features/scanner/__tests__/services/batchProcessingService.test.ts\n  ● Test suite failed to run\n\n    Missing Supabase environment variables - check deployment configuration\n\n    \u001b[0m \u001b[90m 38 |\u001b[39m\n     \u001b[90m 39 |\u001b[39m   \u001b[33mLogger\u001b[39m\u001b[33m.\u001b[39merror(errorMessage)\u001b[33m;\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 40 |\u001b[39m   \u001b[36mthrow\u001b[39m \u001b[36mnew\u001b[39m \u001b[33mError\u001b[39m(\u001b[32m'Missing Supabase environment variables - check deployment configuration'\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m    |\u001b[39m         \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 41 |\u001b[39m }\n     \u001b[90m 42 |\u001b[39m\n     \u001b[90m 43 |\u001b[39m \u001b[90m// Regular client with anon key\u001b[39m\u001b[0m\n\n      at Object.<anonymous> (src/lib/supabaseClient.js:40:9)\n      at Object.require (src/features/scanner/services/documentStorageService.ts:2:1)\n      at Object.require (src/features/scanner/services/index.ts:7:1)\n      at Object.require (src/features/scanner/__tests__/services/batchProcessingService.test.ts:1:1)\n\nFAIL src/__tests__/architecture/structure-validation.test.js\n  ● Test suite failed to run\n\n    Jest encountered an unexpected token\n\n    Jest failed to parse a file. This happens e.g. when your code or its dependencies use non-standard JavaScript syntax, or when Jest is not configured to support such syntax.\n\n    Out of the box Jest supports Babel, which will be used to transform your files into valid JS based on your Babel configuration.\n\n    By default \"node_modules\" folder is ignored by transformers.\n\n    Here's what you can do:\n     • If you are trying to use ECMAScript Modules, see https://jestjs.io/docs/ecmascript-modules for how to enable it.\n     • If you are trying to use TypeScript, see https://jestjs.io/docs/getting-started#using-typescript\n     • To have some of your \"node_modules\" files transformed, you can specify a custom \"transformIgnorePatterns\" in your config.\n     • If you need a custom transformation, specify a \"transform\" option in your config.\n     • If you simply want to mock your non-JS modules (e.g. binary assets) you can stub them out with the \"moduleNameMapper\" config option.\n\n    You'll find more details and examples of these config options in the docs:\n    https://jestjs.io/docs/configuration\n    For information about custom transformations, see:\n    https://jestjs.io/docs/code-transformation\n\n    Details:\n\n    E:\\AlexVenturesStudio\\Nexa_Manager_whit_Task_Master\\web-app\\src\\__tests__\\architecture\\structure-validation.test.js:14\n    const _filename = (0, _url.fileURLToPath)(import.meta.url);\n                                                     ^^^^\n\n    SyntaxError: Cannot use 'import.meta' outside a module\n\n      at Runtime.createScriptFromCode (../node_modules/jest-runtime/build/index.js:1314:40)\n\nFAIL src/components/notifications/NotificationCenter.test.jsx\n  ● NotificationCenter › renders notification bell with unread count\n\n    No QueryClient set, use QueryClientProvider to set one\n\n    \u001b[0m \u001b[90m 26 |\u001b[39m   \u001b[36mconst\u001b[39m [connectionError\u001b[33m,\u001b[39m setConnectionError] \u001b[33m=\u001b[39m useState(\u001b[36mnull\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m 27 |\u001b[39m   \u001b[36mconst\u001b[39m [lastMessage\u001b[33m,\u001b[39m setLastMessage] \u001b[33m=\u001b[39m useState(\u001b[36mnull\u001b[39m)\u001b[33m;\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 28 |\u001b[39m   \u001b[36mconst\u001b[39m queryClient \u001b[33m=\u001b[39m useQueryClient()\u001b[33m;\u001b[39m\n     \u001b[90m    |\u001b[39m                                     \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 29 |\u001b[39m   \u001b[36mconst\u001b[39m listenersRef \u001b[33m=\u001b[39m useRef(\u001b[36mnew\u001b[39m \u001b[33mMap\u001b[39m())\u001b[33m;\u001b[39m\n     \u001b[90m 30 |\u001b[39m\n     \u001b[90m 31 |\u001b[39m   \u001b[90m/**\u001b[39m\u001b[0m\n\n      at useQueryClient (../node_modules/@tanstack/react-query/src/QueryClientProvider.tsx:18:11)\n      at useWebSocket (src/hooks/useWebSocket.js:28:37)\n      at useRealtimeNotifications (src/hooks/useRealtimeNotifications.js:20:63)\n      at NotificationCenter (src/components/notifications/NotificationCenter.jsx:39:31)\n      at Object.react-stack-bottom-frame (../node_modules/react-dom/cjs/react-dom-client.development.js:23863:20)\n      at renderWithHooks (../node_modules/react-dom/cjs/react-dom-client.development.js:5529:22)\n      at updateFunctionComponent (../node_modules/react-dom/cjs/react-dom-client.development.js:8897:19)\n      at beginWork (../node_modules/react-dom/cjs/react-dom-client.development.js:10522:18)\n      at runWithFiberInDEV (../node_modules/react-dom/cjs/react-dom-client.development.js:1522:13)\n      at performUnitOfWork (../node_modules/react-dom/cjs/react-dom-client.development.js:15140:22)\n      at workLoopSync (../node_modules/react-dom/cjs/react-dom-client.development.js:14956:41)\n      at renderRootSync (../node_modules/react-dom/cjs/react-dom-client.development.js:14936:11)\n      at performWorkOnRoot (../node_modules/react-dom/cjs/react-dom-client.development.js:14462:44)\n      at performWorkOnRootViaSchedulerTask (../node_modules/react-dom/cjs/react-dom-client.development.js:16216:7)\n      at flushActQueue (../node_modules/react/cjs/react.development.js:566:34)\n      at process.env.NODE_ENV.exports.act (../node_modules/react/cjs/react.development.js:859:10)\n      at ../node_modules/@testing-library/react/dist/act-compat.js:47:25\n      at renderRoot (../node_modules/@testing-library/react/dist/pure.js:190:26)\n      at render (../node_modules/@testing-library/react/dist/pure.js:292:10)\n      at Object.<anonymous> (src/components/notifications/NotificationCenter.test.jsx:61:11)\n\n  ● NotificationCenter › opens notification panel when bell is clicked\n\n    No QueryClient set, use QueryClientProvider to set one\n\n    \u001b[0m \u001b[90m 26 |\u001b[39m   \u001b[36mconst\u001b[39m [connectionError\u001b[33m,\u001b[39m setConnectionError] \u001b[33m=\u001b[39m useState(\u001b[36mnull\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m 27 |\u001b[39m   \u001b[36mconst\u001b[39m [lastMessage\u001b[33m,\u001b[39m setLastMessage] \u001b[33m=\u001b[39m useState(\u001b[36mnull\u001b[39m)\u001b[33m;\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 28 |\u001b[39m   \u001b[36mconst\u001b[39m queryClient \u001b[33m=\u001b[39m useQueryClient()\u001b[33m;\u001b[39m\n     \u001b[90m    |\u001b[39m                                     \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 29 |\u001b[39m   \u001b[36mconst\u001b[39m listenersRef \u001b[33m=\u001b[39m useRef(\u001b[36mnew\u001b[39m \u001b[33mMap\u001b[39m())\u001b[33m;\u001b[39m\n     \u001b[90m 30 |\u001b[39m\n     \u001b[90m 31 |\u001b[39m   \u001b[90m/**\u001b[39m\u001b[0m\n\n      at useQueryClient (../node_modules/@tanstack/react-query/src/QueryClientProvider.tsx:18:11)\n      at useWebSocket (src/hooks/useWebSocket.js:28:37)\n      at useRealtimeNotifications (src/hooks/useRealtimeNotifications.js:20:63)\n      at NotificationCenter (src/components/notifications/NotificationCenter.jsx:39:31)\n      at Object.react-stack-bottom-frame (../node_modules/react-dom/cjs/react-dom-client.development.js:23863:20)\n      at renderWithHooks (../node_modules/react-dom/cjs/react-dom-client.development.js:5529:22)\n      at updateFunctionComponent (../node_modules/react-dom/cjs/react-dom-client.development.js:8897:19)\n      at beginWork (../node_modules/react-dom/cjs/react-dom-client.development.js:10522:18)\n      at runWithFiberInDEV (../node_modules/react-dom/cjs/react-dom-client.development.js:1522:13)\n      at performUnitOfWork (../node_modules/react-dom/cjs/react-dom-client.development.js:15140:22)\n      at workLoopSync (../node_modules/react-dom/cjs/react-dom-client.development.js:14956:41)\n      at renderRootSync (../node_modules/react-dom/cjs/react-dom-client.development.js:14936:11)\n      at performWorkOnRoot (../node_modules/react-dom/cjs/react-dom-client.development.js:14462:44)\n      at performWorkOnRootViaSchedulerTask (../node_modules/react-dom/cjs/react-dom-client.development.js:16216:7)\n      at flushActQueue (../node_modules/react/cjs/react.development.js:566:34)\n      at process.env.NODE_ENV.exports.act (../node_modules/react/cjs/react.development.js:859:10)\n      at ../node_modules/@testing-library/react/dist/act-compat.js:47:25\n      at renderRoot (../node_modules/@testing-library/react/dist/pure.js:190:26)\n      at render (../node_modules/@testing-library/react/dist/pure.js:292:10)\n      at Object.<anonymous> (src/components/notifications/NotificationCenter.test.jsx:71:11)\n\n  ● NotificationCenter › displays correct number of notifications\n\n    No QueryClient set, use QueryClientProvider to set one\n\n    \u001b[0m \u001b[90m 26 |\u001b[39m   \u001b[36mconst\u001b[39m [connectionError\u001b[33m,\u001b[39m setConnectionError] \u001b[33m=\u001b[39m useState(\u001b[36mnull\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m 27 |\u001b[39m   \u001b[36mconst\u001b[39m [lastMessage\u001b[33m,\u001b[39m setLastMessage] \u001b[33m=\u001b[39m useState(\u001b[36mnull\u001b[39m)\u001b[33m;\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 28 |\u001b[39m   \u001b[36mconst\u001b[39m queryClient \u001b[33m=\u001b[39m useQueryClient()\u001b[33m;\u001b[39m\n     \u001b[90m    |\u001b[39m                                     \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 29 |\u001b[39m   \u001b[36mconst\u001b[39m listenersRef \u001b[33m=\u001b[39m useRef(\u001b[36mnew\u001b[39m \u001b[33mMap\u001b[39m())\u001b[33m;\u001b[39m\n     \u001b[90m 30 |\u001b[39m\n     \u001b[90m 31 |\u001b[39m   \u001b[90m/**\u001b[39m\u001b[0m\n\n      at useQueryClient (../node_modules/@tanstack/react-query/src/QueryClientProvider.tsx:18:11)\n      at useWebSocket (src/hooks/useWebSocket.js:28:37)\n      at useRealtimeNotifications (src/hooks/useRealtimeNotifications.js:20:63)\n      at NotificationCenter (src/components/notifications/NotificationCenter.jsx:39:31)\n      at Object.react-stack-bottom-frame (../node_modules/react-dom/cjs/react-dom-client.development.js:23863:20)\n      at renderWithHooks (../node_modules/react-dom/cjs/react-dom-client.development.js:5529:22)\n      at updateFunctionComponent (../node_modules/react-dom/cjs/react-dom-client.development.js:8897:19)\n      at beginWork (../node_modules/react-dom/cjs/react-dom-client.development.js:10522:18)\n      at runWithFiberInDEV (../node_modules/react-dom/cjs/react-dom-client.development.js:1522:13)\n      at performUnitOfWork (../node_modules/react-dom/cjs/react-dom-client.development.js:15140:22)\n      at workLoopSync (../node_modules/react-dom/cjs/react-dom-client.development.js:14956:41)\n      at renderRootSync (../node_modules/react-dom/cjs/react-dom-client.development.js:14936:11)\n      at performWorkOnRoot (../node_modules/react-dom/cjs/react-dom-client.development.js:14462:44)\n      at performWorkOnRootViaSchedulerTask (../node_modules/react-dom/cjs/react-dom-client.development.js:16216:7)\n      at flushActQueue (../node_modules/react/cjs/react.development.js:566:34)\n      at process.env.NODE_ENV.exports.act (../node_modules/react/cjs/react.development.js:859:10)\n      at ../node_modules/@testing-library/react/dist/act-compat.js:47:25\n      at renderRoot (../node_modules/@testing-library/react/dist/pure.js:190:26)\n      at render (../node_modules/@testing-library/react/dist/pure.js:292:10)\n      at Object.<anonymous> (src/components/notifications/NotificationCenter.test.jsx:81:11)\n\n  ● NotificationCenter › filters notifications by type\n\n    No QueryClient set, use QueryClientProvider to set one\n\n    \u001b[0m \u001b[90m 26 |\u001b[39m   \u001b[36mconst\u001b[39m [connectionError\u001b[33m,\u001b[39m setConnectionError] \u001b[33m=\u001b[39m useState(\u001b[36mnull\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m 27 |\u001b[39m   \u001b[36mconst\u001b[39m [lastMessage\u001b[33m,\u001b[39m setLastMessage] \u001b[33m=\u001b[39m useState(\u001b[36mnull\u001b[39m)\u001b[33m;\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 28 |\u001b[39m   \u001b[36mconst\u001b[39m queryClient \u001b[33m=\u001b[39m useQueryClient()\u001b[33m;\u001b[39m\n     \u001b[90m    |\u001b[39m                                     \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 29 |\u001b[39m   \u001b[36mconst\u001b[39m listenersRef \u001b[33m=\u001b[39m useRef(\u001b[36mnew\u001b[39m \u001b[33mMap\u001b[39m())\u001b[33m;\u001b[39m\n     \u001b[90m 30 |\u001b[39m\n     \u001b[90m 31 |\u001b[39m   \u001b[90m/**\u001b[39m\u001b[0m\n\n      at useQueryClient (../node_modules/@tanstack/react-query/src/QueryClientProvider.tsx:18:11)\n      at useWebSocket (src/hooks/useWebSocket.js:28:37)\n      at useRealtimeNotifications (src/hooks/useRealtimeNotifications.js:20:63)\n      at NotificationCenter (src/components/notifications/NotificationCenter.jsx:39:31)\n      at Object.react-stack-bottom-frame (../node_modules/react-dom/cjs/react-dom-client.development.js:23863:20)\n      at renderWithHooks (../node_modules/react-dom/cjs/react-dom-client.development.js:5529:22)\n      at updateFunctionComponent (../node_modules/react-dom/cjs/react-dom-client.development.js:8897:19)\n      at beginWork (../node_modules/react-dom/cjs/react-dom-client.development.js:10522:18)\n      at runWithFiberInDEV (../node_modules/react-dom/cjs/react-dom-client.development.js:1522:13)\n      at performUnitOfWork (../node_modules/react-dom/cjs/react-dom-client.development.js:15140:22)\n      at workLoopSync (../node_modules/react-dom/cjs/react-dom-client.development.js:14956:41)\n      at renderRootSync (../node_modules/react-dom/cjs/react-dom-client.development.js:14936:11)\n      at performWorkOnRoot (../node_modules/react-dom/cjs/react-dom-client.development.js:14462:44)\n      at performWorkOnRootViaSchedulerTask (../node_modules/react-dom/cjs/react-dom-client.development.js:16216:7)\n      at flushActQueue (../node_modules/react/cjs/react.development.js:566:34)\n      at process.env.NODE_ENV.exports.act (../node_modules/react/cjs/react.development.js:859:10)\n      at ../node_modules/@testing-library/react/dist/act-compat.js:47:25\n      at renderRoot (../node_modules/@testing-library/react/dist/pure.js:190:26)\n      at render (../node_modules/@testing-library/react/dist/pure.js:292:10)\n      at Object.<anonymous> (src/components/notifications/NotificationCenter.test.jsx:91:11)\n\n  ● NotificationCenter › filters unread notifications\n\n    No QueryClient set, use QueryClientProvider to set one\n\n    \u001b[0m \u001b[90m 26 |\u001b[39m   \u001b[36mconst\u001b[39m [connectionError\u001b[33m,\u001b[39m setConnectionError] \u001b[33m=\u001b[39m useState(\u001b[36mnull\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m 27 |\u001b[39m   \u001b[36mconst\u001b[39m [lastMessage\u001b[33m,\u001b[39m setLastMessage] \u001b[33m=\u001b[39m useState(\u001b[36mnull\u001b[39m)\u001b[33m;\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 28 |\u001b[39m   \u001b[36mconst\u001b[39m queryClient \u001b[33m=\u001b[39m useQueryClient()\u001b[33m;\u001b[39m\n     \u001b[90m    |\u001b[39m                                     \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 29 |\u001b[39m   \u001b[36mconst\u001b[39m listenersRef \u001b[33m=\u001b[39m useRef(\u001b[36mnew\u001b[39m \u001b[33mMap\u001b[39m())\u001b[33m;\u001b[39m\n     \u001b[90m 30 |\u001b[39m\n     \u001b[90m 31 |\u001b[39m   \u001b[90m/**\u001b[39m\u001b[0m\n\n      at useQueryClient (../node_modules/@tanstack/react-query/src/QueryClientProvider.tsx:18:11)\n      at useWebSocket (src/hooks/useWebSocket.js:28:37)\n      at useRealtimeNotifications (src/hooks/useRealtimeNotifications.js:20:63)\n      at NotificationCenter (src/components/notifications/NotificationCenter.jsx:39:31)\n      at Object.react-stack-bottom-frame (../node_modules/react-dom/cjs/react-dom-client.development.js:23863:20)\n      at renderWithHooks (../node_modules/react-dom/cjs/react-dom-client.development.js:5529:22)\n      at updateFunctionComponent (../node_modules/react-dom/cjs/react-dom-client.development.js:8897:19)\n      at beginWork (../node_modules/react-dom/cjs/react-dom-client.development.js:10522:18)\n      at runWithFiberInDEV (../node_modules/react-dom/cjs/react-dom-client.development.js:1522:13)\n      at performUnitOfWork (../node_modules/react-dom/cjs/react-dom-client.development.js:15140:22)\n      at workLoopSync (../node_modules/react-dom/cjs/react-dom-client.development.js:14956:41)\n      at renderRootSync (../node_modules/react-dom/cjs/react-dom-client.development.js:14936:11)\n      at performWorkOnRoot (../node_modules/react-dom/cjs/react-dom-client.development.js:14462:44)\n      at performWorkOnRootViaSchedulerTask (../node_modules/react-dom/cjs/react-dom-client.development.js:16216:7)\n      at flushActQueue (../node_modules/react/cjs/react.development.js:566:34)\n      at process.env.NODE_ENV.exports.act (../node_modules/react/cjs/react.development.js:859:10)\n      at ../node_modules/@testing-library/react/dist/act-compat.js:47:25\n      at renderRoot (../node_modules/@testing-library/react/dist/pure.js:190:26)\n      at render (../node_modules/@testing-library/react/dist/pure.js:292:10)\n      at Object.<anonymous> (src/components/notifications/NotificationCenter.test.jsx:107:11)\n\n  ● NotificationCenter › marks notification as read when clicked\n\n    No QueryClient set, use QueryClientProvider to set one\n\n    \u001b[0m \u001b[90m 26 |\u001b[39m   \u001b[36mconst\u001b[39m [connectionError\u001b[33m,\u001b[39m setConnectionError] \u001b[33m=\u001b[39m useState(\u001b[36mnull\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m 27 |\u001b[39m   \u001b[36mconst\u001b[39m [lastMessage\u001b[33m,\u001b[39m setLastMessage] \u001b[33m=\u001b[39m useState(\u001b[36mnull\u001b[39m)\u001b[33m;\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 28 |\u001b[39m   \u001b[36mconst\u001b[39m queryClient \u001b[33m=\u001b[39m useQueryClient()\u001b[33m;\u001b[39m\n     \u001b[90m    |\u001b[39m                                     \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 29 |\u001b[39m   \u001b[36mconst\u001b[39m listenersRef \u001b[33m=\u001b[39m useRef(\u001b[36mnew\u001b[39m \u001b[33mMap\u001b[39m())\u001b[33m;\u001b[39m\n     \u001b[90m 30 |\u001b[39m\n     \u001b[90m 31 |\u001b[39m   \u001b[90m/**\u001b[39m\u001b[0m\n\n      at useQueryClient (../node_modules/@tanstack/react-query/src/QueryClientProvider.tsx:18:11)\n      at useWebSocket (src/hooks/useWebSocket.js:28:37)\n      at useRealtimeNotifications (src/hooks/useRealtimeNotifications.js:20:63)\n      at NotificationCenter (src/components/notifications/NotificationCenter.jsx:39:31)\n      at Object.react-stack-bottom-frame (../node_modules/react-dom/cjs/react-dom-client.development.js:23863:20)\n      at renderWithHooks (../node_modules/react-dom/cjs/react-dom-client.development.js:5529:22)\n      at updateFunctionComponent (../node_modules/react-dom/cjs/react-dom-client.development.js:8897:19)\n      at beginWork (../node_modules/react-dom/cjs/react-dom-client.development.js:10522:18)\n      at runWithFiberInDEV (../node_modules/react-dom/cjs/react-dom-client.development.js:1522:13)\n      at performUnitOfWork (../node_modules/react-dom/cjs/react-dom-client.development.js:15140:22)\n      at workLoopSync (../node_modules/react-dom/cjs/react-dom-client.development.js:14956:41)\n      at renderRootSync (../node_modules/react-dom/cjs/react-dom-client.development.js:14936:11)\n      at performWorkOnRoot (../node_modules/react-dom/cjs/react-dom-client.development.js:14462:44)\n      at performWorkOnRootViaSchedulerTask (../node_modules/react-dom/cjs/react-dom-client.development.js:16216:7)\n      at flushActQueue (../node_modules/react/cjs/react.development.js:566:34)\n      at process.env.NODE_ENV.exports.act (../node_modules/react/cjs/react.development.js:859:10)\n      at ../node_modules/@testing-library/react/dist/act-compat.js:47:25\n      at renderRoot (../node_modules/@testing-library/react/dist/pure.js:190:26)\n      at render (../node_modules/@testing-library/react/dist/pure.js:292:10)\n      at Object.<anonymous> (src/components/notifications/NotificationCenter.test.jsx:122:11)\n\n  ● NotificationCenter › marks all notifications as read\n\n    No QueryClient set, use QueryClientProvider to set one\n\n    \u001b[0m \u001b[90m 26 |\u001b[39m   \u001b[36mconst\u001b[39m [connectionError\u001b[33m,\u001b[39m setConnectionError] \u001b[33m=\u001b[39m useState(\u001b[36mnull\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m 27 |\u001b[39m   \u001b[36mconst\u001b[39m [lastMessage\u001b[33m,\u001b[39m setLastMessage] \u001b[33m=\u001b[39m useState(\u001b[36mnull\u001b[39m)\u001b[33m;\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 28 |\u001b[39m   \u001b[36mconst\u001b[39m queryClient \u001b[33m=\u001b[39m useQueryClient()\u001b[33m;\u001b[39m\n     \u001b[90m    |\u001b[39m                                     \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 29 |\u001b[39m   \u001b[36mconst\u001b[39m listenersRef \u001b[33m=\u001b[39m useRef(\u001b[36mnew\u001b[39m \u001b[33mMap\u001b[39m())\u001b[33m;\u001b[39m\n     \u001b[90m 30 |\u001b[39m\n     \u001b[90m 31 |\u001b[39m   \u001b[90m/**\u001b[39m\u001b[0m\n\n      at useQueryClient (../node_modules/@tanstack/react-query/src/QueryClientProvider.tsx:18:11)\n      at useWebSocket (src/hooks/useWebSocket.js:28:37)\n      at useRealtimeNotifications (src/hooks/useRealtimeNotifications.js:20:63)\n      at NotificationCenter (src/components/notifications/NotificationCenter.jsx:39:31)\n      at Object.react-stack-bottom-frame (../node_modules/react-dom/cjs/react-dom-client.development.js:23863:20)\n      at renderWithHooks (../node_modules/react-dom/cjs/react-dom-client.development.js:5529:22)\n      at updateFunctionComponent (../node_modules/react-dom/cjs/react-dom-client.development.js:8897:19)\n      at beginWork (../node_modules/react-dom/cjs/react-dom-client.development.js:10522:18)\n      at runWithFiberInDEV (../node_modules/react-dom/cjs/react-dom-client.development.js:1522:13)\n      at performUnitOfWork (../node_modules/react-dom/cjs/react-dom-client.development.js:15140:22)\n      at workLoopSync (../node_modules/react-dom/cjs/react-dom-client.development.js:14956:41)\n      at renderRootSync (../node_modules/react-dom/cjs/react-dom-client.development.js:14936:11)\n      at performWorkOnRoot (../node_modules/react-dom/cjs/react-dom-client.development.js:14462:44)\n      at performWorkOnRootViaSchedulerTask (../node_modules/react-dom/cjs/react-dom-client.development.js:16216:7)\n      at flushActQueue (../node_modules/react/cjs/react.development.js:566:34)\n      at process.env.NODE_ENV.exports.act (../node_modules/react/cjs/react.development.js:859:10)\n      at ../node_modules/@testing-library/react/dist/act-compat.js:47:25\n      at renderRoot (../node_modules/@testing-library/react/dist/pure.js:190:26)\n      at render (../node_modules/@testing-library/react/dist/pure.js:292:10)\n      at Object.<anonymous> (src/components/notifications/NotificationCenter.test.jsx:134:11)\n\n  ● NotificationCenter › removes notification when delete button is clicked\n\n    No QueryClient set, use QueryClientProvider to set one\n\n    \u001b[0m \u001b[90m 26 |\u001b[39m   \u001b[36mconst\u001b[39m [connectionError\u001b[33m,\u001b[39m setConnectionError] \u001b[33m=\u001b[39m useState(\u001b[36mnull\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m 27 |\u001b[39m   \u001b[36mconst\u001b[39m [lastMessage\u001b[33m,\u001b[39m setLastMessage] \u001b[33m=\u001b[39m useState(\u001b[36mnull\u001b[39m)\u001b[33m;\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 28 |\u001b[39m   \u001b[36mconst\u001b[39m queryClient \u001b[33m=\u001b[39m useQueryClient()\u001b[33m;\u001b[39m\n     \u001b[90m    |\u001b[39m                                     \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 29 |\u001b[39m   \u001b[36mconst\u001b[39m listenersRef \u001b[33m=\u001b[39m useRef(\u001b[36mnew\u001b[39m \u001b[33mMap\u001b[39m())\u001b[33m;\u001b[39m\n     \u001b[90m 30 |\u001b[39m\n     \u001b[90m 31 |\u001b[39m   \u001b[90m/**\u001b[39m\u001b[0m\n\n      at useQueryClient (../node_modules/@tanstack/react-query/src/QueryClientProvider.tsx:18:11)\n      at useWebSocket (src/hooks/useWebSocket.js:28:37)\n      at useRealtimeNotifications (src/hooks/useRealtimeNotifications.js:20:63)\n      at NotificationCenter (src/components/notifications/NotificationCenter.jsx:39:31)\n      at Object.react-stack-bottom-frame (../node_modules/react-dom/cjs/react-dom-client.development.js:23863:20)\n      at renderWithHooks (../node_modules/react-dom/cjs/react-dom-client.development.js:5529:22)\n      at updateFunctionComponent (../node_modules/react-dom/cjs/react-dom-client.development.js:8897:19)\n      at beginWork (../node_modules/react-dom/cjs/react-dom-client.development.js:10522:18)\n      at runWithFiberInDEV (../node_modules/react-dom/cjs/react-dom-client.development.js:1522:13)\n      at performUnitOfWork (../node_modules/react-dom/cjs/react-dom-client.development.js:15140:22)\n      at workLoopSync (../node_modules/react-dom/cjs/react-dom-client.development.js:14956:41)\n      at renderRootSync (../node_modules/react-dom/cjs/react-dom-client.development.js:14936:11)\n      at performWorkOnRoot (../node_modules/react-dom/cjs/react-dom-client.development.js:14462:44)\n      at performWorkOnRootViaSchedulerTask (../node_modules/react-dom/cjs/react-dom-client.development.js:16216:7)\n      at flushActQueue (../node_modules/react/cjs/react.development.js:566:34)\n      at process.env.NODE_ENV.exports.act (../node_modules/react/cjs/react.development.js:859:10)\n      at ../node_modules/@testing-library/react/dist/act-compat.js:47:25\n      at renderRoot (../node_modules/@testing-library/react/dist/pure.js:190:26)\n      at render (../node_modules/@testing-library/react/dist/pure.js:292:10)\n      at Object.<anonymous> (src/components/notifications/NotificationCenter.test.jsx:146:11)\n\n  ● NotificationCenter › clears all notifications\n\n    No QueryClient set, use QueryClientProvider to set one\n\n    \u001b[0m \u001b[90m 26 |\u001b[39m   \u001b[36mconst\u001b[39m [connectionError\u001b[33m,\u001b[39m setConnectionError] \u001b[33m=\u001b[39m useState(\u001b[36mnull\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m 27 |\u001b[39m   \u001b[36mconst\u001b[39m [lastMessage\u001b[33m,\u001b[39m setLastMessage] \u001b[33m=\u001b[39m useState(\u001b[36mnull\u001b[39m)\u001b[33m;\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 28 |\u001b[39m   \u001b[36mconst\u001b[39m queryClient \u001b[33m=\u001b[39m useQueryClient()\u001b[33m;\u001b[39m\n     \u001b[90m    |\u001b[39m                                     \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 29 |\u001b[39m   \u001b[36mconst\u001b[39m listenersRef \u001b[33m=\u001b[39m useRef(\u001b[36mnew\u001b[39m \u001b[33mMap\u001b[39m())\u001b[33m;\u001b[39m\n     \u001b[90m 30 |\u001b[39m\n     \u001b[90m 31 |\u001b[39m   \u001b[90m/**\u001b[39m\u001b[0m\n\n      at useQueryClient (../node_modules/@tanstack/react-query/src/QueryClientProvider.tsx:18:11)\n      at useWebSocket (src/hooks/useWebSocket.js:28:37)\n      at useRealtimeNotifications (src/hooks/useRealtimeNotifications.js:20:63)\n      at NotificationCenter (src/components/notifications/NotificationCenter.jsx:39:31)\n      at Object.react-stack-bottom-frame (../node_modules/react-dom/cjs/react-dom-client.development.js:23863:20)\n      at renderWithHooks (../node_modules/react-dom/cjs/react-dom-client.development.js:5529:22)\n      at updateFunctionComponent (../node_modules/react-dom/cjs/react-dom-client.development.js:8897:19)\n      at beginWork (../node_modules/react-dom/cjs/react-dom-client.development.js:10522:18)\n      at runWithFiberInDEV (../node_modules/react-dom/cjs/react-dom-client.development.js:1522:13)\n      at performUnitOfWork (../node_modules/react-dom/cjs/react-dom-client.development.js:15140:22)\n      at workLoopSync (../node_modules/react-dom/cjs/react-dom-client.development.js:14956:41)\n      at renderRootSync (../node_modules/react-dom/cjs/react-dom-client.development.js:14936:11)\n      at performWorkOnRoot (../node_modules/react-dom/cjs/react-dom-client.development.js:14462:44)\n      at performWorkOnRootViaSchedulerTask (../node_modules/react-dom/cjs/react-dom-client.development.js:16216:7)\n      at flushActQueue (../node_modules/react/cjs/react.development.js:566:34)\n      at process.env.NODE_ENV.exports.act (../node_modules/react/cjs/react.development.js:859:10)\n      at ../node_modules/@testing-library/react/dist/act-compat.js:47:25\n      at renderRoot (../node_modules/@testing-library/react/dist/pure.js:190:26)\n      at render (../node_modules/@testing-library/react/dist/pure.js:292:10)\n      at Object.<anonymous> (src/components/notifications/NotificationCenter.test.jsx:158:11)\n\n  ● NotificationCenter › displays correct notification icons\n\n    No QueryClient set, use QueryClientProvider to set one\n\n    \u001b[0m \u001b[90m 26 |\u001b[39m   \u001b[36mconst\u001b[39m [connectionError\u001b[33m,\u001b[39m setConnectionError] \u001b[33m=\u001b[39m useState(\u001b[36mnull\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m 27 |\u001b[39m   \u001b[36mconst\u001b[39m [lastMessage\u001b[33m,\u001b[39m setLastMessage] \u001b[33m=\u001b[39m useState(\u001b[36mnull\u001b[39m)\u001b[33m;\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 28 |\u001b[39m   \u001b[36mconst\u001b[39m queryClient \u001b[33m=\u001b[39m useQueryClient()\u001b[33m;\u001b[39m\n     \u001b[90m    |\u001b[39m                                     \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 29 |\u001b[39m   \u001b[36mconst\u001b[39m listenersRef \u001b[33m=\u001b[39m useRef(\u001b[36mnew\u001b[39m \u001b[33mMap\u001b[39m())\u001b[33m;\u001b[39m\n     \u001b[90m 30 |\u001b[39m\n     \u001b[90m 31 |\u001b[39m   \u001b[90m/**\u001b[39m\u001b[0m\n\n      at useQueryClient (../node_modules/@tanstack/react-query/src/QueryClientProvider.tsx:18:11)\n      at useWebSocket (src/hooks/useWebSocket.js:28:37)\n      at useRealtimeNotifications (src/hooks/useRealtimeNotifications.js:20:63)\n      at NotificationCenter (src/components/notifications/NotificationCenter.jsx:39:31)\n      at Object.react-stack-bottom-frame (../node_modules/react-dom/cjs/react-dom-client.development.js:23863:20)\n      at renderWithHooks (../node_modules/react-dom/cjs/react-dom-client.development.js:5529:22)\n      at updateFunctionComponent (../node_modules/react-dom/cjs/react-dom-client.development.js:8897:19)\n      at beginWork (../node_modules/react-dom/cjs/react-dom-client.development.js:10522:18)\n      at runWithFiberInDEV (../node_modules/react-dom/cjs/react-dom-client.development.js:1522:13)\n      at performUnitOfWork (../node_modules/react-dom/cjs/react-dom-client.development.js:15140:22)\n      at workLoopSync (../node_modules/react-dom/cjs/react-dom-client.development.js:14956:41)\n      at renderRootSync (../node_modules/react-dom/cjs/react-dom-client.development.js:14936:11)\n      at performWorkOnRoot (../node_modules/react-dom/cjs/react-dom-client.development.js:14462:44)\n      at performWorkOnRootViaSchedulerTask (../node_modules/react-dom/cjs/react-dom-client.development.js:16216:7)\n      at flushActQueue (../node_modules/react/cjs/react.development.js:566:34)\n      at process.env.NODE_ENV.exports.act (../node_modules/react/cjs/react.development.js:859:10)\n      at ../node_modules/@testing-library/react/dist/act-compat.js:47:25\n      at renderRoot (../node_modules/@testing-library/react/dist/pure.js:190:26)\n      at render (../node_modules/@testing-library/react/dist/pure.js:292:10)\n      at Object.<anonymous> (src/components/notifications/NotificationCenter.test.jsx:170:11)\n\n  ● NotificationCenter › displays relative time correctly\n\n    No QueryClient set, use QueryClientProvider to set one\n\n    \u001b[0m \u001b[90m 26 |\u001b[39m   \u001b[36mconst\u001b[39m [connectionError\u001b[33m,\u001b[39m setConnectionError] \u001b[33m=\u001b[39m useState(\u001b[36mnull\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m 27 |\u001b[39m   \u001b[36mconst\u001b[39m [lastMessage\u001b[33m,\u001b[39m setLastMessage] \u001b[33m=\u001b[39m useState(\u001b[36mnull\u001b[39m)\u001b[33m;\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 28 |\u001b[39m   \u001b[36mconst\u001b[39m queryClient \u001b[33m=\u001b[39m useQueryClient()\u001b[33m;\u001b[39m\n     \u001b[90m    |\u001b[39m                                     \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 29 |\u001b[39m   \u001b[36mconst\u001b[39m listenersRef \u001b[33m=\u001b[39m useRef(\u001b[36mnew\u001b[39m \u001b[33mMap\u001b[39m())\u001b[33m;\u001b[39m\n     \u001b[90m 30 |\u001b[39m\n     \u001b[90m 31 |\u001b[39m   \u001b[90m/**\u001b[39m\u001b[0m\n\n      at useQueryClient (../node_modules/@tanstack/react-query/src/QueryClientProvider.tsx:18:11)\n      at useWebSocket (src/hooks/useWebSocket.js:28:37)\n      at useRealtimeNotifications (src/hooks/useRealtimeNotifications.js:20:63)\n      at NotificationCenter (src/components/notifications/NotificationCenter.jsx:39:31)\n      at Object.react-stack-bottom-frame (../node_modules/react-dom/cjs/react-dom-client.development.js:23863:20)\n      at renderWithHooks (../node_modules/react-dom/cjs/react-dom-client.development.js:5529:22)\n      at updateFunctionComponent (../node_modules/react-dom/cjs/react-dom-client.development.js:8897:19)\n      at beginWork (../node_modules/react-dom/cjs/react-dom-client.development.js:10522:18)\n      at runWithFiberInDEV (../node_modules/react-dom/cjs/react-dom-client.development.js:1522:13)\n      at performUnitOfWork (../node_modules/react-dom/cjs/react-dom-client.development.js:15140:22)\n      at workLoopSync (../node_modules/react-dom/cjs/react-dom-client.development.js:14956:41)\n      at renderRootSync (../node_modules/react-dom/cjs/react-dom-client.development.js:14936:11)\n      at performWorkOnRoot (../node_modules/react-dom/cjs/react-dom-client.development.js:14462:44)\n      at performWorkOnRootViaSchedulerTask (../node_modules/react-dom/cjs/react-dom-client.development.js:16216:7)\n      at flushActQueue (../node_modules/react/cjs/react.development.js:566:34)\n      at process.env.NODE_ENV.exports.act (../node_modules/react/cjs/react.development.js:859:10)\n      at ../node_modules/@testing-library/react/dist/act-compat.js:47:25\n      at renderRoot (../node_modules/@testing-library/react/dist/pure.js:190:26)\n      at render (../node_modules/@testing-library/react/dist/pure.js:292:10)\n      at Object.<anonymous> (src/components/notifications/NotificationCenter.test.jsx:182:11)\n\n  ● NotificationCenter › shows empty state when no notifications\n\n    No QueryClient set, use QueryClientProvider to set one\n\n    \u001b[0m \u001b[90m 26 |\u001b[39m   \u001b[36mconst\u001b[39m [connectionError\u001b[33m,\u001b[39m setConnectionError] \u001b[33m=\u001b[39m useState(\u001b[36mnull\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m 27 |\u001b[39m   \u001b[36mconst\u001b[39m [lastMessage\u001b[33m,\u001b[39m setLastMessage] \u001b[33m=\u001b[39m useState(\u001b[36mnull\u001b[39m)\u001b[33m;\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 28 |\u001b[39m   \u001b[36mconst\u001b[39m queryClient \u001b[33m=\u001b[39m useQueryClient()\u001b[33m;\u001b[39m\n     \u001b[90m    |\u001b[39m                                     \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 29 |\u001b[39m   \u001b[36mconst\u001b[39m listenersRef \u001b[33m=\u001b[39m useRef(\u001b[36mnew\u001b[39m \u001b[33mMap\u001b[39m())\u001b[33m;\u001b[39m\n     \u001b[90m 30 |\u001b[39m\n     \u001b[90m 31 |\u001b[39m   \u001b[90m/**\u001b[39m\u001b[0m\n\n      at useQueryClient (../node_modules/@tanstack/react-query/src/QueryClientProvider.tsx:18:11)\n      at useWebSocket (src/hooks/useWebSocket.js:28:37)\n      at useRealtimeNotifications (src/hooks/useRealtimeNotifications.js:20:63)\n      at NotificationCenter (src/components/notifications/NotificationCenter.jsx:39:31)\n      at Object.react-stack-bottom-frame (../node_modules/react-dom/cjs/react-dom-client.development.js:23863:20)\n      at renderWithHooks (../node_modules/react-dom/cjs/react-dom-client.development.js:5529:22)\n      at updateFunctionComponent (../node_modules/react-dom/cjs/react-dom-client.development.js:8897:19)\n      at beginWork (../node_modules/react-dom/cjs/react-dom-client.development.js:10522:18)\n      at runWithFiberInDEV (../node_modules/react-dom/cjs/react-dom-client.development.js:1522:13)\n      at performUnitOfWork (../node_modules/react-dom/cjs/react-dom-client.development.js:15140:22)\n      at workLoopSync (../node_modules/react-dom/cjs/react-dom-client.development.js:14956:41)\n      at renderRootSync (../node_modules/react-dom/cjs/react-dom-client.development.js:14936:11)\n      at performWorkOnRoot (../node_modules/react-dom/cjs/react-dom-client.development.js:14462:44)\n      at performWorkOnRootViaSchedulerTask (../node_modules/react-dom/cjs/react-dom-client.development.js:16216:7)\n      at flushActQueue (../node_modules/react/cjs/react.development.js:566:34)\n      at process.env.NODE_ENV.exports.act (../node_modules/react/cjs/react.development.js:859:10)\n      at ../node_modules/@testing-library/react/dist/act-compat.js:47:25\n      at renderRoot (../node_modules/@testing-library/react/dist/pure.js:190:26)\n      at render (../node_modules/@testing-library/react/dist/pure.js:292:10)\n      at Object.<anonymous> (src/components/notifications/NotificationCenter.test.jsx:199:11)\n\n  ● NotificationCenter › closes panel when clicking outside\n\n    No QueryClient set, use QueryClientProvider to set one\n\n    \u001b[0m \u001b[90m 26 |\u001b[39m   \u001b[36mconst\u001b[39m [connectionError\u001b[33m,\u001b[39m setConnectionError] \u001b[33m=\u001b[39m useState(\u001b[36mnull\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m 27 |\u001b[39m   \u001b[36mconst\u001b[39m [lastMessage\u001b[33m,\u001b[39m setLastMessage] \u001b[33m=\u001b[39m useState(\u001b[36mnull\u001b[39m)\u001b[33m;\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 28 |\u001b[39m   \u001b[36mconst\u001b[39m queryClient \u001b[33m=\u001b[39m useQueryClient()\u001b[33m;\u001b[39m\n     \u001b[90m    |\u001b[39m                                     \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 29 |\u001b[39m   \u001b[36mconst\u001b[39m listenersRef \u001b[33m=\u001b[39m useRef(\u001b[36mnew\u001b[39m \u001b[33mMap\u001b[39m())\u001b[33m;\u001b[39m\n     \u001b[90m 30 |\u001b[39m\n     \u001b[90m 31 |\u001b[39m   \u001b[90m/**\u001b[39m\u001b[0m\n\n      at useQueryClient (../node_modules/@tanstack/react-query/src/QueryClientProvider.tsx:18:11)\n      at useWebSocket (src/hooks/useWebSocket.js:28:37)\n      at useRealtimeNotifications (src/hooks/useRealtimeNotifications.js:20:63)\n      at NotificationCenter (src/components/notifications/NotificationCenter.jsx:39:31)\n      at Object.react-stack-bottom-frame (../node_modules/react-dom/cjs/react-dom-client.development.js:23863:20)\n      at renderWithHooks (../node_modules/react-dom/cjs/react-dom-client.development.js:5529:22)\n      at updateFunctionComponent (../node_modules/react-dom/cjs/react-dom-client.development.js:8897:19)\n      at beginWork (../node_modules/react-dom/cjs/react-dom-client.development.js:10522:18)\n      at runWithFiberInDEV (../node_modules/react-dom/cjs/react-dom-client.development.js:1522:13)\n      at performUnitOfWork (../node_modules/react-dom/cjs/react-dom-client.development.js:15140:22)\n      at workLoopSync (../node_modules/react-dom/cjs/react-dom-client.development.js:14956:41)\n      at renderRootSync (../node_modules/react-dom/cjs/react-dom-client.development.js:14936:11)\n      at performWorkOnRoot (../node_modules/react-dom/cjs/react-dom-client.development.js:14462:44)\n      at performWorkOnRootViaSchedulerTask (../node_modules/react-dom/cjs/react-dom-client.development.js:16216:7)\n      at flushActQueue (../node_modules/react/cjs/react.development.js:566:34)\n      at process.env.NODE_ENV.exports.act (../node_modules/react/cjs/react.development.js:859:10)\n      at ../node_modules/@testing-library/react/dist/act-compat.js:47:25\n      at renderRoot (../node_modules/@testing-library/react/dist/pure.js:190:26)\n      at render (../node_modules/@testing-library/react/dist/pure.js:292:10)\n      at Object.<anonymous> (src/components/notifications/NotificationCenter.test.jsx:208:11)\n\n  ● NotificationCenter › handles keyboard navigation\n\n    No QueryClient set, use QueryClientProvider to set one\n\n    \u001b[0m \u001b[90m 26 |\u001b[39m   \u001b[36mconst\u001b[39m [connectionError\u001b[33m,\u001b[39m setConnectionError] \u001b[33m=\u001b[39m useState(\u001b[36mnull\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m 27 |\u001b[39m   \u001b[36mconst\u001b[39m [lastMessage\u001b[33m,\u001b[39m setLastMessage] \u001b[33m=\u001b[39m useState(\u001b[36mnull\u001b[39m)\u001b[33m;\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 28 |\u001b[39m   \u001b[36mconst\u001b[39m queryClient \u001b[33m=\u001b[39m useQueryClient()\u001b[33m;\u001b[39m\n     \u001b[90m    |\u001b[39m                                     \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 29 |\u001b[39m   \u001b[36mconst\u001b[39m listenersRef \u001b[33m=\u001b[39m useRef(\u001b[36mnew\u001b[39m \u001b[33mMap\u001b[39m())\u001b[33m;\u001b[39m\n     \u001b[90m 30 |\u001b[39m\n     \u001b[90m 31 |\u001b[39m   \u001b[90m/**\u001b[39m\u001b[0m\n\n      at useQueryClient (../node_modules/@tanstack/react-query/src/QueryClientProvider.tsx:18:11)\n      at useWebSocket (src/hooks/useWebSocket.js:28:37)\n      at useRealtimeNotifications (src/hooks/useRealtimeNotifications.js:20:63)\n      at NotificationCenter (src/components/notifications/NotificationCenter.jsx:39:31)\n      at Object.react-stack-bottom-frame (../node_modules/react-dom/cjs/react-dom-client.development.js:23863:20)\n      at renderWithHooks (../node_modules/react-dom/cjs/react-dom-client.development.js:5529:22)\n      at updateFunctionComponent (../node_modules/react-dom/cjs/react-dom-client.development.js:8897:19)\n      at beginWork (../node_modules/react-dom/cjs/react-dom-client.development.js:10522:18)\n      at runWithFiberInDEV (../node_modules/react-dom/cjs/react-dom-client.development.js:1522:13)\n      at performUnitOfWork (../node_modules/react-dom/cjs/react-dom-client.development.js:15140:22)\n      at workLoopSync (../node_modules/react-dom/cjs/react-dom-client.development.js:14956:41)\n      at renderRootSync (../node_modules/react-dom/cjs/react-dom-client.development.js:14936:11)\n      at performWorkOnRoot (../node_modules/react-dom/cjs/react-dom-client.development.js:14462:44)\n      at performWorkOnRootViaSchedulerTask (../node_modules/react-dom/cjs/react-dom-client.development.js:16216:7)\n      at flushActQueue (../node_modules/react/cjs/react.development.js:566:34)\n      at process.env.NODE_ENV.exports.act (../node_modules/react/cjs/react.development.js:859:10)\n      at ../node_modules/@testing-library/react/dist/act-compat.js:47:25\n      at renderRoot (../node_modules/@testing-library/react/dist/pure.js:190:26)\n      at render (../node_modules/@testing-library/react/dist/pure.js:292:10)\n      at Object.<anonymous> (src/components/notifications/NotificationCenter.test.jsx:227:11)\n\n  ● NotificationCenter › applies correct CSS classes for read/unread notifications\n\n    No QueryClient set, use QueryClientProvider to set one\n\n    \u001b[0m \u001b[90m 26 |\u001b[39m   \u001b[36mconst\u001b[39m [connectionError\u001b[33m,\u001b[39m setConnectionError] \u001b[33m=\u001b[39m useState(\u001b[36mnull\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m 27 |\u001b[39m   \u001b[36mconst\u001b[39m [lastMessage\u001b[33m,\u001b[39m setLastMessage] \u001b[33m=\u001b[39m useState(\u001b[36mnull\u001b[39m)\u001b[33m;\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 28 |\u001b[39m   \u001b[36mconst\u001b[39m queryClient \u001b[33m=\u001b[39m useQueryClient()\u001b[33m;\u001b[39m\n     \u001b[90m    |\u001b[39m                                     \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 29 |\u001b[39m   \u001b[36mconst\u001b[39m listenersRef \u001b[33m=\u001b[39m useRef(\u001b[36mnew\u001b[39m \u001b[33mMap\u001b[39m())\u001b[33m;\u001b[39m\n     \u001b[90m 30 |\u001b[39m\n     \u001b[90m 31 |\u001b[39m   \u001b[90m/**\u001b[39m\u001b[0m\n\n      at useQueryClient (../node_modules/@tanstack/react-query/src/QueryClientProvider.tsx:18:11)\n      at useWebSocket (src/hooks/useWebSocket.js:28:37)\n      at useRealtimeNotifications (src/hooks/useRealtimeNotifications.js:20:63)\n      at NotificationCenter (src/components/notifications/NotificationCenter.jsx:39:31)\n      at Object.react-stack-bottom-frame (../node_modules/react-dom/cjs/react-dom-client.development.js:23863:20)\n      at renderWithHooks (../node_modules/react-dom/cjs/react-dom-client.development.js:5529:22)\n      at updateFunctionComponent (../node_modules/react-dom/cjs/react-dom-client.development.js:8897:19)\n      at beginWork (../node_modules/react-dom/cjs/react-dom-client.development.js:10522:18)\n      at runWithFiberInDEV (../node_modules/react-dom/cjs/react-dom-client.development.js:1522:13)\n      at performUnitOfWork (../node_modules/react-dom/cjs/react-dom-client.development.js:15140:22)\n      at workLoopSync (../node_modules/react-dom/cjs/react-dom-client.development.js:14956:41)\n      at renderRootSync (../node_modules/react-dom/cjs/react-dom-client.development.js:14936:11)\n      at performWorkOnRoot (../node_modules/react-dom/cjs/react-dom-client.development.js:14462:44)\n      at performWorkOnRootViaSchedulerTask (../node_modules/react-dom/cjs/react-dom-client.development.js:16216:7)\n      at flushActQueue (../node_modules/react/cjs/react.development.js:566:34)\n      at process.env.NODE_ENV.exports.act (../node_modules/react/cjs/react.development.js:859:10)\n      at ../node_modules/@testing-library/react/dist/act-compat.js:47:25\n      at renderRoot (../node_modules/@testing-library/react/dist/pure.js:190:26)\n      at render (../node_modules/@testing-library/react/dist/pure.js:292:10)\n      at Object.<anonymous> (src/components/notifications/NotificationCenter.test.jsx:241:11)\n\n  ● NotificationCenter › displays correct priority colors\n\n    No QueryClient set, use QueryClientProvider to set one\n\n    \u001b[0m \u001b[90m 26 |\u001b[39m   \u001b[36mconst\u001b[39m [connectionError\u001b[33m,\u001b[39m setConnectionError] \u001b[33m=\u001b[39m useState(\u001b[36mnull\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m 27 |\u001b[39m   \u001b[36mconst\u001b[39m [lastMessage\u001b[33m,\u001b[39m setLastMessage] \u001b[33m=\u001b[39m useState(\u001b[36mnull\u001b[39m)\u001b[33m;\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 28 |\u001b[39m   \u001b[36mconst\u001b[39m queryClient \u001b[33m=\u001b[39m useQueryClient()\u001b[33m;\u001b[39m\n     \u001b[90m    |\u001b[39m                                     \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 29 |\u001b[39m   \u001b[36mconst\u001b[39m listenersRef \u001b[33m=\u001b[39m useRef(\u001b[36mnew\u001b[39m \u001b[33mMap\u001b[39m())\u001b[33m;\u001b[39m\n     \u001b[90m 30 |\u001b[39m\n     \u001b[90m 31 |\u001b[39m   \u001b[90m/**\u001b[39m\u001b[0m\n\n      at useQueryClient (../node_modules/@tanstack/react-query/src/QueryClientProvider.tsx:18:11)\n      at useWebSocket (src/hooks/useWebSocket.js:28:37)\n      at useRealtimeNotifications (src/hooks/useRealtimeNotifications.js:20:63)\n      at NotificationCenter (src/components/notifications/NotificationCenter.jsx:39:31)\n      at Object.react-stack-bottom-frame (../node_modules/react-dom/cjs/react-dom-client.development.js:23863:20)\n      at renderWithHooks (../node_modules/react-dom/cjs/react-dom-client.development.js:5529:22)\n      at updateFunctionComponent (../node_modules/react-dom/cjs/react-dom-client.development.js:8897:19)\n      at beginWork (../node_modules/react-dom/cjs/react-dom-client.development.js:10522:18)\n      at runWithFiberInDEV (../node_modules/react-dom/cjs/react-dom-client.development.js:1522:13)\n      at performUnitOfWork (../node_modules/react-dom/cjs/react-dom-client.development.js:15140:22)\n      at workLoopSync (../node_modules/react-dom/cjs/react-dom-client.development.js:14956:41)\n      at renderRootSync (../node_modules/react-dom/cjs/react-dom-client.development.js:14936:11)\n      at performWorkOnRoot (../node_modules/react-dom/cjs/react-dom-client.development.js:14462:44)\n      at performWorkOnRootViaSchedulerTask (../node_modules/react-dom/cjs/react-dom-client.development.js:16216:7)\n      at flushActQueue (../node_modules/react/cjs/react.development.js:566:34)\n      at process.env.NODE_ENV.exports.act (../node_modules/react/cjs/react.development.js:859:10)\n      at ../node_modules/@testing-library/react/dist/act-compat.js:47:25\n      at renderRoot (../node_modules/@testing-library/react/dist/pure.js:190:26)\n      at render (../node_modules/@testing-library/react/dist/pure.js:292:10)\n      at Object.<anonymous> (src/components/notifications/NotificationCenter.test.jsx:254:11)\n\n  ● NotificationCenter › handles long notification messages\n\n    No QueryClient set, use QueryClientProvider to set one\n\n    \u001b[0m \u001b[90m 26 |\u001b[39m   \u001b[36mconst\u001b[39m [connectionError\u001b[33m,\u001b[39m setConnectionError] \u001b[33m=\u001b[39m useState(\u001b[36mnull\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m 27 |\u001b[39m   \u001b[36mconst\u001b[39m [lastMessage\u001b[33m,\u001b[39m setLastMessage] \u001b[33m=\u001b[39m useState(\u001b[36mnull\u001b[39m)\u001b[33m;\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 28 |\u001b[39m   \u001b[36mconst\u001b[39m queryClient \u001b[33m=\u001b[39m useQueryClient()\u001b[33m;\u001b[39m\n     \u001b[90m    |\u001b[39m                                     \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 29 |\u001b[39m   \u001b[36mconst\u001b[39m listenersRef \u001b[33m=\u001b[39m useRef(\u001b[36mnew\u001b[39m \u001b[33mMap\u001b[39m())\u001b[33m;\u001b[39m\n     \u001b[90m 30 |\u001b[39m\n     \u001b[90m 31 |\u001b[39m   \u001b[90m/**\u001b[39m\u001b[0m\n\n      at useQueryClient (../node_modules/@tanstack/react-query/src/QueryClientProvider.tsx:18:11)\n      at useWebSocket (src/hooks/useWebSocket.js:28:37)\n      at useRealtimeNotifications (src/hooks/useRealtimeNotifications.js:20:63)\n      at NotificationCenter (src/components/notifications/NotificationCenter.jsx:39:31)\n      at Object.react-stack-bottom-frame (../node_modules/react-dom/cjs/react-dom-client.development.js:23863:20)\n      at renderWithHooks (../node_modules/react-dom/cjs/react-dom-client.development.js:5529:22)\n      at updateFunctionComponent (../node_modules/react-dom/cjs/react-dom-client.development.js:8897:19)\n      at beginWork (../node_modules/react-dom/cjs/react-dom-client.development.js:10522:18)\n      at runWithFiberInDEV (../node_modules/react-dom/cjs/react-dom-client.development.js:1522:13)\n      at performUnitOfWork (../node_modules/react-dom/cjs/react-dom-client.development.js:15140:22)\n      at workLoopSync (../node_modules/react-dom/cjs/react-dom-client.development.js:14956:41)\n      at renderRootSync (../node_modules/react-dom/cjs/react-dom-client.development.js:14936:11)\n      at performWorkOnRoot (../node_modules/react-dom/cjs/react-dom-client.development.js:14462:44)\n      at performWorkOnRootViaSchedulerTask (../node_modules/react-dom/cjs/react-dom-client.development.js:16216:7)\n      at flushActQueue (../node_modules/react/cjs/react.development.js:566:34)\n      at process.env.NODE_ENV.exports.act (../node_modules/react/cjs/react.development.js:859:10)\n      at ../node_modules/@testing-library/react/dist/act-compat.js:47:25\n      at renderRoot (../node_modules/@testing-library/react/dist/pure.js:190:26)\n      at render (../node_modules/@testing-library/react/dist/pure.js:292:10)\n      at Object.<anonymous> (src/components/notifications/NotificationCenter.test.jsx:274:11)\n\n  ● NotificationCenter › updates unread count when notifications change\n\n    No QueryClient set, use QueryClientProvider to set one\n\n    \u001b[0m \u001b[90m 26 |\u001b[39m   \u001b[36mconst\u001b[39m [connectionError\u001b[33m,\u001b[39m setConnectionError] \u001b[33m=\u001b[39m useState(\u001b[36mnull\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m 27 |\u001b[39m   \u001b[36mconst\u001b[39m [lastMessage\u001b[33m,\u001b[39m setLastMessage] \u001b[33m=\u001b[39m useState(\u001b[36mnull\u001b[39m)\u001b[33m;\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 28 |\u001b[39m   \u001b[36mconst\u001b[39m queryClient \u001b[33m=\u001b[39m useQueryClient()\u001b[33m;\u001b[39m\n     \u001b[90m    |\u001b[39m                                     \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 29 |\u001b[39m   \u001b[36mconst\u001b[39m listenersRef \u001b[33m=\u001b[39m useRef(\u001b[36mnew\u001b[39m \u001b[33mMap\u001b[39m())\u001b[33m;\u001b[39m\n     \u001b[90m 30 |\u001b[39m\n     \u001b[90m 31 |\u001b[39m   \u001b[90m/**\u001b[39m\u001b[0m\n\n      at useQueryClient (../node_modules/@tanstack/react-query/src/QueryClientProvider.tsx:18:11)\n      at useWebSocket (src/hooks/useWebSocket.js:28:37)\n      at useRealtimeNotifications (src/hooks/useRealtimeNotifications.js:20:63)\n      at NotificationCenter (src/components/notifications/NotificationCenter.jsx:39:31)\n      at Object.react-stack-bottom-frame (../node_modules/react-dom/cjs/react-dom-client.development.js:23863:20)\n      at renderWithHooks (../node_modules/react-dom/cjs/react-dom-client.development.js:5529:22)\n      at updateFunctionComponent (../node_modules/react-dom/cjs/react-dom-client.development.js:8897:19)\n      at beginWork (../node_modules/react-dom/cjs/react-dom-client.development.js:10522:18)\n      at runWithFiberInDEV (../node_modules/react-dom/cjs/react-dom-client.development.js:1522:13)\n      at performUnitOfWork (../node_modules/react-dom/cjs/react-dom-client.development.js:15140:22)\n      at workLoopSync (../node_modules/react-dom/cjs/react-dom-client.development.js:14956:41)\n      at renderRootSync (../node_modules/react-dom/cjs/react-dom-client.development.js:14936:11)\n      at performWorkOnRoot (../node_modules/react-dom/cjs/react-dom-client.development.js:14462:44)\n      at performWorkOnRootViaSchedulerTask (../node_modules/react-dom/cjs/react-dom-client.development.js:16216:7)\n      at flushActQueue (../node_modules/react/cjs/react.development.js:566:34)\n      at process.env.NODE_ENV.exports.act (../node_modules/react/cjs/react.development.js:859:10)\n      at ../node_modules/@testing-library/react/dist/act-compat.js:47:25\n      at renderRoot (../node_modules/@testing-library/react/dist/pure.js:190:26)\n      at render (../node_modules/@testing-library/react/dist/pure.js:292:10)\n      at Object.<anonymous> (src/components/notifications/NotificationCenter.test.jsx:284:32)\n\n  ● NotificationCenter › handles notification with missing data gracefully\n\n    No QueryClient set, use QueryClientProvider to set one\n\n    \u001b[0m \u001b[90m 26 |\u001b[39m   \u001b[36mconst\u001b[39m [connectionError\u001b[33m,\u001b[39m setConnectionError] \u001b[33m=\u001b[39m useState(\u001b[36mnull\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m 27 |\u001b[39m   \u001b[36mconst\u001b[39m [lastMessage\u001b[33m,\u001b[39m setLastMessage] \u001b[33m=\u001b[39m useState(\u001b[36mnull\u001b[39m)\u001b[33m;\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 28 |\u001b[39m   \u001b[36mconst\u001b[39m queryClient \u001b[33m=\u001b[39m useQueryClient()\u001b[33m;\u001b[39m\n     \u001b[90m    |\u001b[39m                                     \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 29 |\u001b[39m   \u001b[36mconst\u001b[39m listenersRef \u001b[33m=\u001b[39m useRef(\u001b[36mnew\u001b[39m \u001b[33mMap\u001b[39m())\u001b[33m;\u001b[39m\n     \u001b[90m 30 |\u001b[39m\n     \u001b[90m 31 |\u001b[39m   \u001b[90m/**\u001b[39m\u001b[0m\n\n      at useQueryClient (../node_modules/@tanstack/react-query/src/QueryClientProvider.tsx:18:11)\n      at useWebSocket (src/hooks/useWebSocket.js:28:37)\n      at useRealtimeNotifications (src/hooks/useRealtimeNotifications.js:20:63)\n      at NotificationCenter (src/components/notifications/NotificationCenter.jsx:39:31)\n      at Object.react-stack-bottom-frame (../node_modules/react-dom/cjs/react-dom-client.development.js:23863:20)\n      at renderWithHooks (../node_modules/react-dom/cjs/react-dom-client.development.js:5529:22)\n      at updateFunctionComponent (../node_modules/react-dom/cjs/react-dom-client.development.js:8897:19)\n      at beginWork (../node_modules/react-dom/cjs/react-dom-client.development.js:10522:18)\n      at runWithFiberInDEV (../node_modules/react-dom/cjs/react-dom-client.development.js:1522:13)\n      at performUnitOfWork (../node_modules/react-dom/cjs/react-dom-client.development.js:15140:22)\n      at workLoopSync (../node_modules/react-dom/cjs/react-dom-client.development.js:14956:41)\n      at renderRootSync (../node_modules/react-dom/cjs/react-dom-client.development.js:14936:11)\n      at performWorkOnRoot (../node_modules/react-dom/cjs/react-dom-client.development.js:14462:44)\n      at performWorkOnRootViaSchedulerTask (../node_modules/react-dom/cjs/react-dom-client.development.js:16216:7)\n      at flushActQueue (../node_modules/react/cjs/react.development.js:566:34)\n      at process.env.NODE_ENV.exports.act (../node_modules/react/cjs/react.development.js:859:10)\n      at ../node_modules/@testing-library/react/dist/act-compat.js:47:25\n      at renderRoot (../node_modules/@testing-library/react/dist/pure.js:190:26)\n      at render (../node_modules/@testing-library/react/dist/pure.js:292:10)\n      at Object.<anonymous> (src/components/notifications/NotificationCenter.test.jsx:314:11)\n\n  ● NotificationCenter Integration › integrates correctly with useRealtimeNotifications hook\n\n    No QueryClient set, use QueryClientProvider to set one\n\n    \u001b[0m \u001b[90m 26 |\u001b[39m   \u001b[36mconst\u001b[39m [connectionError\u001b[33m,\u001b[39m setConnectionError] \u001b[33m=\u001b[39m useState(\u001b[36mnull\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m 27 |\u001b[39m   \u001b[36mconst\u001b[39m [lastMessage\u001b[33m,\u001b[39m setLastMessage] \u001b[33m=\u001b[39m useState(\u001b[36mnull\u001b[39m)\u001b[33m;\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 28 |\u001b[39m   \u001b[36mconst\u001b[39m queryClient \u001b[33m=\u001b[39m useQueryClient()\u001b[33m;\u001b[39m\n     \u001b[90m    |\u001b[39m                                     \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 29 |\u001b[39m   \u001b[36mconst\u001b[39m listenersRef \u001b[33m=\u001b[39m useRef(\u001b[36mnew\u001b[39m \u001b[33mMap\u001b[39m())\u001b[33m;\u001b[39m\n     \u001b[90m 30 |\u001b[39m\n     \u001b[90m 31 |\u001b[39m   \u001b[90m/**\u001b[39m\u001b[0m\n\n      at useQueryClient (../node_modules/@tanstack/react-query/src/QueryClientProvider.tsx:18:11)\n      at useWebSocket (src/hooks/useWebSocket.js:28:37)\n      at useRealtimeNotifications (src/hooks/useRealtimeNotifications.js:20:63)\n      at NotificationCenter (src/components/notifications/NotificationCenter.jsx:39:31)\n      at Object.react-stack-bottom-frame (../node_modules/react-dom/cjs/react-dom-client.development.js:23863:20)\n      at renderWithHooks (../node_modules/react-dom/cjs/react-dom-client.development.js:5529:22)\n      at updateFunctionComponent (../node_modules/react-dom/cjs/react-dom-client.development.js:8897:19)\n      at beginWork (../node_modules/react-dom/cjs/react-dom-client.development.js:10522:18)\n      at runWithFiberInDEV (../node_modules/react-dom/cjs/react-dom-client.development.js:1522:13)\n      at performUnitOfWork (../node_modules/react-dom/cjs/react-dom-client.development.js:15140:22)\n      at workLoopSync (../node_modules/react-dom/cjs/react-dom-client.development.js:14956:41)\n      at renderRootSync (../node_modules/react-dom/cjs/react-dom-client.development.js:14936:11)\n      at performWorkOnRoot (../node_modules/react-dom/cjs/react-dom-client.development.js:14462:44)\n      at performWorkOnRootViaSchedulerTask (../node_modules/react-dom/cjs/react-dom-client.development.js:16216:7)\n      at flushActQueue (../node_modules/react/cjs/react.development.js:566:34)\n      at process.env.NODE_ENV.exports.act (../node_modules/react/cjs/react.development.js:859:10)\n      at ../node_modules/@testing-library/react/dist/act-compat.js:47:25\n      at renderRoot (../node_modules/@testing-library/react/dist/pure.js:190:26)\n      at render (../node_modules/@testing-library/react/dist/pure.js:292:10)\n      at Object.<anonymous> (src/components/notifications/NotificationCenter.test.jsx:326:11)\n\n  ● NotificationCenter Integration › passes correct parameters to hook functions\n\n    No QueryClient set, use QueryClientProvider to set one\n\n    \u001b[0m \u001b[90m 26 |\u001b[39m   \u001b[36mconst\u001b[39m [connectionError\u001b[33m,\u001b[39m setConnectionError] \u001b[33m=\u001b[39m useState(\u001b[36mnull\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m 27 |\u001b[39m   \u001b[36mconst\u001b[39m [lastMessage\u001b[33m,\u001b[39m setLastMessage] \u001b[33m=\u001b[39m useState(\u001b[36mnull\u001b[39m)\u001b[33m;\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 28 |\u001b[39m   \u001b[36mconst\u001b[39m queryClient \u001b[33m=\u001b[39m useQueryClient()\u001b[33m;\u001b[39m\n     \u001b[90m    |\u001b[39m                                     \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 29 |\u001b[39m   \u001b[36mconst\u001b[39m listenersRef \u001b[33m=\u001b[39m useRef(\u001b[36mnew\u001b[39m \u001b[33mMap\u001b[39m())\u001b[33m;\u001b[39m\n     \u001b[90m 30 |\u001b[39m\n     \u001b[90m 31 |\u001b[39m   \u001b[90m/**\u001b[39m\u001b[0m\n\n      at useQueryClient (../node_modules/@tanstack/react-query/src/QueryClientProvider.tsx:18:11)\n      at useWebSocket (src/hooks/useWebSocket.js:28:37)\n      at useRealtimeNotifications (src/hooks/useRealtimeNotifications.js:20:63)\n      at NotificationCenter (src/components/notifications/NotificationCenter.jsx:39:31)\n      at Object.react-stack-bottom-frame (../node_modules/react-dom/cjs/react-dom-client.development.js:23863:20)\n      at renderWithHooks (../node_modules/react-dom/cjs/react-dom-client.development.js:5529:22)\n      at updateFunctionComponent (../node_modules/react-dom/cjs/react-dom-client.development.js:8897:19)\n      at beginWork (../node_modules/react-dom/cjs/react-dom-client.development.js:10522:18)\n      at runWithFiberInDEV (../node_modules/react-dom/cjs/react-dom-client.development.js:1522:13)\n      at performUnitOfWork (../node_modules/react-dom/cjs/react-dom-client.development.js:15140:22)\n      at workLoopSync (../node_modules/react-dom/cjs/react-dom-client.development.js:14956:41)\n      at renderRootSync (../node_modules/react-dom/cjs/react-dom-client.development.js:14936:11)\n      at performWorkOnRoot (../node_modules/react-dom/cjs/react-dom-client.development.js:14462:44)\n      at performWorkOnRootViaSchedulerTask (../node_modules/react-dom/cjs/react-dom-client.development.js:16216:7)\n      at flushActQueue (../node_modules/react/cjs/react.development.js:566:34)\n      at process.env.NODE_ENV.exports.act (../node_modules/react/cjs/react.development.js:859:10)\n      at ../node_modules/@testing-library/react/dist/act-compat.js:47:25\n      at renderRoot (../node_modules/@testing-library/react/dist/pure.js:190:26)\n      at render (../node_modules/@testing-library/react/dist/pure.js:292:10)\n      at Object.<anonymous> (src/components/notifications/NotificationCenter.test.jsx:332:11)\n\nFAIL src/utils/__tests__/env.test.js\n  ● Test suite failed to run\n\n    Jest encountered an unexpected token\n\n    Jest failed to parse a file. This happens e.g. when your code or its dependencies use non-standard JavaScript syntax, or when Jest is not configured to support such syntax.\n\n    Out of the box Jest supports Babel, which will be used to transform your files into valid JS based on your Babel configuration.\n\n    By default \"node_modules\" folder is ignored by transformers.\n\n    Here's what you can do:\n     • If you are trying to use ECMAScript Modules, see https://jestjs.io/docs/ecmascript-modules for how to enable it.\n     • If you are trying to use TypeScript, see https://jestjs.io/docs/getting-started#using-typescript\n     • To have some of your \"node_modules\" files transformed, you can specify a custom \"transformIgnorePatterns\" in your config.\n     • If you need a custom transformation, specify a \"transform\" option in your config.\n     • If you simply want to mock your non-JS modules (e.g. binary assets) you can stub them out with the \"moduleNameMapper\" config option.\n\n    You'll find more details and examples of these config options in the docs:\n    https://jestjs.io/docs/configuration\n    For information about custom transformations, see:\n    https://jestjs.io/docs/code-transformation\n\n    Details:\n\n    E:\\AlexVenturesStudio\\Nexa_Manager_whit_Task_Master\\web-app\\src\\utils\\env.ts:23\n      if (typeof import.meta !== 'undefined' && import.meta.env) {\n                        ^^^^\n\n    SyntaxError: Cannot use 'import.meta' outside a module\n\n    \u001b[0m\u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 1 |\u001b[39m \u001b[36mconst\u001b[39m { getEnvVar\u001b[33m,\u001b[39m isDevelopment\u001b[33m,\u001b[39m isProduction } \u001b[33m=\u001b[39m require(\u001b[32m'../env'\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m   |\u001b[39m                                                    \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 2 |\u001b[39m\n     \u001b[90m 3 |\u001b[39m describe(\u001b[32m'Environment Utility'\u001b[39m\u001b[33m,\u001b[39m () \u001b[33m=>\u001b[39m {\n     \u001b[90m 4 |\u001b[39m   beforeEach(() \u001b[33m=>\u001b[39m {\u001b[0m\n\n      at Runtime.createScriptFromCode (../node_modules/jest-runtime/build/index.js:1314:40)\n      at Object.require (src/utils/__tests__/env.test.js:1:52)\n\nFAIL src/lib/__tests__/taxCalculationService.test.js\n  ● Test suite failed to run\n\n    Configuration error:\n\n    Could not locate module @lib/taxCalculationService mapped as:\n    E:\\AlexVenturesStudio\\Nexa_Manager_whit_Task_Master\\web-app\\src\\lib\\$1.\n\n    Please check your configuration for these entries:\n    {\n      \"moduleNameMapper\": {\n        \"/^@lib\\/(.*)$/\": \"E:\\AlexVenturesStudio\\Nexa_Manager_whit_Task_Master\\web-app\\src\\lib\\$1\"\n      },\n      \"resolver\": undefined\n    }\n\n    \u001b[0m\u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 1 |\u001b[39m \u001b[36mimport\u001b[39m {\n     \u001b[90m   |\u001b[39m \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 2 |\u001b[39m   \u001b[33mTaxCalculationService\u001b[39m\u001b[33m,\u001b[39m\n     \u001b[90m 3 |\u001b[39m   \u001b[33mIVA_RATES\u001b[39m\u001b[33m,\u001b[39m\n     \u001b[90m 4 |\u001b[39m   \u001b[33mWITHHOLDING_RATES\u001b[39m\u001b[33m,\u001b[39m\u001b[0m\n\n      at createNoMappedModuleFoundError (../node_modules/jest-resolve/build/index.js:1117:17)\n      at Object.require (src/lib/__tests__/taxCalculationService.test.js:1:1)\n\nFAIL src/services/__tests__/reportingService.test.js\n  ● Test suite failed to run\n\n    Cannot find module 'vitest' from 'src/services/__tests__/reportingService.test.js'\n\n    \u001b[0m\u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 1 |\u001b[39m \u001b[36mimport\u001b[39m { vi } \u001b[36mfrom\u001b[39m \u001b[32m'vitest'\u001b[39m\u001b[33m;\u001b[39m\n     \u001b[90m   |\u001b[39m \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 2 |\u001b[39m \u001b[36mimport\u001b[39m \u001b[33m*\u001b[39m \u001b[36mas\u001b[39m reportingService \u001b[36mfrom\u001b[39m \u001b[32m'../reportingService'\u001b[39m\u001b[33m;\u001b[39m\n     \u001b[90m 3 |\u001b[39m \u001b[36mimport\u001b[39m { supabase } \u001b[36mfrom\u001b[39m \u001b[32m'../supabase'\u001b[39m\u001b[33m;\u001b[39m\n     \u001b[90m 4 |\u001b[39m\u001b[0m\n\n      at Resolver._throwModNotFoundError (../node_modules/jest-resolve/build/index.js:863:11)\n      at Object.require (src/services/__tests__/reportingService.test.js:1:1)\n\nFAIL src/lib/__tests__/financialService.test.js\n  ● Test suite failed to run\n\n    Cannot find module '../incomeService' from 'src/lib/__tests__/financialService.test.js'\n\n    \u001b[0m \u001b[90m 28 |\u001b[39m\n     \u001b[90m 29 |\u001b[39m \u001b[90m// Mock incomeService and expenseService\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 30 |\u001b[39m jest\u001b[33m.\u001b[39mmock(\u001b[32m'../incomeService'\u001b[39m\u001b[33m,\u001b[39m () \u001b[33m=>\u001b[39m ({\n     \u001b[90m    |\u001b[39m      \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 31 |\u001b[39m   getIncomeStats\u001b[33m:\u001b[39m jest\u001b[33m.\u001b[39mfn()\u001b[33m,\u001b[39m\n     \u001b[90m 32 |\u001b[39m   getIncomeTrend\u001b[33m:\u001b[39m jest\u001b[33m.\u001b[39mfn()\u001b[33m,\u001b[39m\n     \u001b[90m 33 |\u001b[39m }))\u001b[33m;\u001b[39m\u001b[0m\n\n      at Resolver._throwModNotFoundError (../node_modules/jest-resolve/build/index.js:863:11)\n      at Object.mock (src/lib/__tests__/financialService.test.js:30:6)\n\nFAIL src/lib/__tests__/emailSearchService.test.js\n  ● Test suite failed to run\n\n    Cannot find module '../emailSearchService' from 'src/lib/__tests__/emailSearchService.test.js'\n\n    \u001b[0m \u001b[90m 3 |\u001b[39m \u001b[90m */\u001b[39m\n     \u001b[90m 4 |\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 5 |\u001b[39m \u001b[36mimport\u001b[39m emailSearchService \u001b[36mfrom\u001b[39m \u001b[32m'../emailSearchService'\u001b[39m\u001b[33m;\u001b[39m\n     \u001b[90m   |\u001b[39m \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 6 |\u001b[39m \u001b[36mimport\u001b[39m { supabase } \u001b[36mfrom\u001b[39m \u001b[32m'../supabaseClient'\u001b[39m\u001b[33m;\u001b[39m\n     \u001b[90m 7 |\u001b[39m \u001b[36mimport\u001b[39m \u001b[33mLogger\u001b[39m \u001b[36mfrom\u001b[39m \u001b[32m'@utils/Logger'\u001b[39m\u001b[33m;\u001b[39m\n     \u001b[90m 8 |\u001b[39m\u001b[0m\n\n      at Resolver._throwModNotFoundError (../node_modules/jest-resolve/build/index.js:863:11)\n      at Object.require (src/lib/__tests__/emailSearchService.test.js:5:1)\n\nFAIL src/components/reports/__tests__/Reports.test.jsx\n  ● Test suite failed to run\n\n    Configuration error:\n\n    Could not locate module @lib/invoiceAnalyticsService mapped as:\n    E:\\AlexVenturesStudio\\Nexa_Manager_whit_Task_Master\\web-app\\src\\lib\\$1.\n\n    Please check your configuration for these entries:\n    {\n      \"moduleNameMapper\": {\n        \"/^@lib\\/(.*)$/\": \"E:\\AlexVenturesStudio\\Nexa_Manager_whit_Task_Master\\web-app\\src\\lib\\$1\"\n      },\n      \"resolver\": undefined\n    }\n\n    \u001b[0m \u001b[90m 25 |\u001b[39m\n     \u001b[90m 26 |\u001b[39m \u001b[90m// Mock other aliases\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 27 |\u001b[39m jest\u001b[33m.\u001b[39mmock(\u001b[32m'@lib/invoiceAnalyticsService'\u001b[39m\u001b[33m,\u001b[39m () \u001b[33m=>\u001b[39m ({\n     \u001b[90m    |\u001b[39m      \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 28 |\u001b[39m   \u001b[36mdefault\u001b[39m\u001b[33m:\u001b[39m {\n     \u001b[90m 29 |\u001b[39m     getRevenueAnalytics\u001b[33m:\u001b[39m jest\u001b[33m.\u001b[39mfn()\u001b[33m,\u001b[39m\n     \u001b[90m 30 |\u001b[39m     getClientAnalytics\u001b[33m:\u001b[39m jest\u001b[33m.\u001b[39mfn()\u001b[33m,\u001b[39m\u001b[0m\n\n      at createNoMappedModuleFoundError (../node_modules/jest-resolve/build/index.js:1117:17)\n      at Object.mock (src/components/reports/__tests__/Reports.test.jsx:27:6)\n\nFAIL src/lib/__tests__/emailStorageService.test.js\n  ● Test suite failed to run\n\n    Cannot find module '../emailStorageService' from 'src/lib/__tests__/emailStorageService.test.js'\n\n    \u001b[0m \u001b[90m 3 |\u001b[39m \u001b[90m */\u001b[39m\n     \u001b[90m 4 |\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 5 |\u001b[39m \u001b[36mimport\u001b[39m emailStorageService \u001b[36mfrom\u001b[39m \u001b[32m'../emailStorageService'\u001b[39m\u001b[33m;\u001b[39m\n     \u001b[90m   |\u001b[39m \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 6 |\u001b[39m \u001b[36mimport\u001b[39m { supabase } \u001b[36mfrom\u001b[39m \u001b[32m'../supabaseClient'\u001b[39m\u001b[33m;\u001b[39m\n     \u001b[90m 7 |\u001b[39m \u001b[36mimport\u001b[39m \u001b[33mLogger\u001b[39m \u001b[36mfrom\u001b[39m \u001b[32m'@utils/Logger'\u001b[39m\u001b[33m;\u001b[39m\n     \u001b[90m 8 |\u001b[39m\u001b[0m\n\n      at Resolver._throwModNotFoundError (../node_modules/jest-resolve/build/index.js:863:11)\n      at Object.require (src/lib/__tests__/emailStorageService.test.js:5:1)\n\nFAIL src/lib/__tests__/emailService.test.js\n  ● Test suite failed to run\n\n    Cannot find module '../quotePdfService' from 'src/lib/__tests__/emailService.test.js'\n\n    \u001b[0m \u001b[90m 10 |\u001b[39m\n     \u001b[90m 11 |\u001b[39m \u001b[90m// Mock quotePdfService completely\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 12 |\u001b[39m jest\u001b[33m.\u001b[39mmock(\u001b[32m'../quotePdfService'\u001b[39m\u001b[33m,\u001b[39m () \u001b[33m=>\u001b[39m ({\n     \u001b[90m    |\u001b[39m      \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 13 |\u001b[39m   \u001b[36mdefault\u001b[39m\u001b[33m:\u001b[39m {\n     \u001b[90m 14 |\u001b[39m     generateBlob\u001b[33m:\u001b[39m jest\u001b[33m.\u001b[39mfn()\u001b[33m.\u001b[39mmockResolvedValue(\u001b[36mnew\u001b[39m \u001b[33mBlob\u001b[39m([\u001b[32m'mock-pdf'\u001b[39m]\u001b[33m,\u001b[39m { type\u001b[33m:\u001b[39m \u001b[32m'application/pdf'\u001b[39m }))\u001b[33m,\u001b[39m\n     \u001b[90m 15 |\u001b[39m   }\u001b[33m,\u001b[39m\u001b[0m\n\n      at Resolver._throwModNotFoundError (../node_modules/jest-resolve/build/index.js:863:11)\n      at Object.mock (src/lib/__tests__/emailService.test.js:12:6)\n\nFAIL src/lib/__tests__/emailTemplateService.test.js\n  ● Test suite failed to run\n\n    Cannot find module '../emailTemplateService' from 'src/lib/__tests__/emailTemplateService.test.js'\n\n    \u001b[0m\u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 1 |\u001b[39m \u001b[36mimport\u001b[39m emailTemplateService \u001b[36mfrom\u001b[39m \u001b[32m'../emailTemplateService'\u001b[39m\u001b[33m;\u001b[39m\n     \u001b[90m   |\u001b[39m \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 2 |\u001b[39m\n     \u001b[90m 3 |\u001b[39m \u001b[90m// Mock Supabase\u001b[39m\n     \u001b[90m 4 |\u001b[39m \u001b[36mconst\u001b[39m mockSupabase \u001b[33m=\u001b[39m {\u001b[0m\n\n      at Resolver._throwModNotFoundError (../node_modules/jest-resolve/build/index.js:863:11)\n      at Object.require (src/lib/__tests__/emailTemplateService.test.js:1:1)\n\nFAIL src/features/email/components/__tests__/EmailAttachmentManager.test.jsx\n  ● Test suite failed to run\n\n    Configuration error:\n\n    Could not locate module @lib/emailAttachmentService mapped as:\n    E:\\AlexVenturesStudio\\Nexa_Manager_whit_Task_Master\\web-app\\src\\lib\\$1.\n\n    Please check your configuration for these entries:\n    {\n      \"moduleNameMapper\": {\n        \"/^@lib\\/(.*)$/\": \"E:\\AlexVenturesStudio\\Nexa_Manager_whit_Task_Master\\web-app\\src\\lib\\$1\"\n      },\n      \"resolver\": undefined\n    }\n\n    \u001b[0m \u001b[90m 19 |\u001b[39m\n     \u001b[90m 20 |\u001b[39m \u001b[36mimport\u001b[39m \u001b[33mEmailAttachmentManager\u001b[39m \u001b[36mfrom\u001b[39m \u001b[32m'../EmailAttachmentManager'\u001b[39m\u001b[33m;\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 21 |\u001b[39m \u001b[36mimport\u001b[39m emailAttachmentService \u001b[36mfrom\u001b[39m \u001b[32m'@lib/emailAttachmentService'\u001b[39m\u001b[33m;\u001b[39m\n     \u001b[90m    |\u001b[39m \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 22 |\u001b[39m \u001b[36mimport\u001b[39m { \u001b[33mLogger\u001b[39m } \u001b[36mfrom\u001b[39m \u001b[32m'@utils/Logger'\u001b[39m\u001b[33m;\u001b[39m\n     \u001b[90m 23 |\u001b[39m\n     \u001b[90m 24 |\u001b[39m \u001b[90m// Setup user-event with clipboard disabled to avoid conflicts\u001b[39m\u001b[0m\n\n      at createNoMappedModuleFoundError (../node_modules/jest-resolve/build/index.js:1117:17)\n      at Object.require (src/features/email/components/__tests__/EmailAttachmentManager.test.jsx:21:1)\n\nFAIL src/lib/__tests__/emailRecoveryService.test.js\n  ● Test suite failed to run\n\n    Cannot find module '../emailRecoveryService' from 'src/lib/__tests__/emailRecoveryService.test.js'\n\n    \u001b[0m \u001b[90m 3 |\u001b[39m \u001b[90m */\u001b[39m\n     \u001b[90m 4 |\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 5 |\u001b[39m \u001b[36mimport\u001b[39m emailRecoveryService \u001b[36mfrom\u001b[39m \u001b[32m'../emailRecoveryService'\u001b[39m\u001b[33m;\u001b[39m\n     \u001b[90m   |\u001b[39m \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 6 |\u001b[39m \u001b[36mimport\u001b[39m { supabase } \u001b[36mfrom\u001b[39m \u001b[32m'../supabaseClient'\u001b[39m\u001b[33m;\u001b[39m\n     \u001b[90m 7 |\u001b[39m \u001b[36mimport\u001b[39m \u001b[33mLogger\u001b[39m \u001b[36mfrom\u001b[39m \u001b[32m'@utils/Logger'\u001b[39m\u001b[33m;\u001b[39m\n     \u001b[90m 8 |\u001b[39m\u001b[0m\n\n      at Resolver._throwModNotFoundError (../node_modules/jest-resolve/build/index.js:863:11)\n      at Object.require (src/lib/__tests__/emailRecoveryService.test.js:5:1)\n\nFAIL src/lib/__tests__/emailSettingsService.test.js\n  ● Test suite failed to run\n\n    Cannot find module '../emailSettingsService' from 'src/lib/__tests__/emailSettingsService.test.js'\n\n    \u001b[0m \u001b[90m 3 |\u001b[39m \u001b[90m */\u001b[39m\n     \u001b[90m 4 |\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 5 |\u001b[39m \u001b[36mimport\u001b[39m emailSettingsService \u001b[36mfrom\u001b[39m \u001b[32m'../emailSettingsService'\u001b[39m\u001b[33m;\u001b[39m\n     \u001b[90m   |\u001b[39m \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 6 |\u001b[39m \u001b[36mimport\u001b[39m { supabase } \u001b[36mfrom\u001b[39m \u001b[32m'../supabaseClient'\u001b[39m\u001b[33m;\u001b[39m\n     \u001b[90m 7 |\u001b[39m \u001b[36mimport\u001b[39m \u001b[33mLogger\u001b[39m \u001b[36mfrom\u001b[39m \u001b[32m'@utils/Logger'\u001b[39m\u001b[33m;\u001b[39m\n     \u001b[90m 8 |\u001b[39m\u001b[0m\n\n      at Resolver._throwModNotFoundError (../node_modules/jest-resolve/build/index.js:863:11)\n      at Object.require (src/lib/__tests__/emailSettingsService.test.js:5:1)\n\nFAIL src/features/documents/components/__tests__/ArchiveDocumentsModal.test.jsx\n  ● Test suite failed to run\n\n    Configuration error:\n\n    Could not locate module @/featuresi18n mapped as:\n    E:\\AlexVenturesStudio\\Nexa_Manager_whit_Task_Master\\web-app\\src\\$1.\n\n    Please check your configuration for these entries:\n    {\n      \"moduleNameMapper\": {\n        \"/^@\\/(.*)$/\": \"E:\\AlexVenturesStudio\\Nexa_Manager_whit_Task_Master\\web-app\\src\\$1\"\n      },\n      \"resolver\": undefined\n    }\n\n    \u001b[0m \u001b[90m 2 |\u001b[39m \u001b[36mimport\u001b[39m { render\u001b[33m,\u001b[39m screen\u001b[33m,\u001b[39m fireEvent\u001b[33m,\u001b[39m waitFor } \u001b[36mfrom\u001b[39m \u001b[32m'@testing-library/react'\u001b[39m\u001b[33m;\u001b[39m\n     \u001b[90m 3 |\u001b[39m \u001b[36mimport\u001b[39m { \u001b[33mI18nextProvider\u001b[39m } \u001b[36mfrom\u001b[39m \u001b[32m'react-i18next'\u001b[39m\u001b[33m;\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 4 |\u001b[39m \u001b[36mimport\u001b[39m i18n \u001b[36mfrom\u001b[39m \u001b[32m'@/features\\i18n'\u001b[39m\u001b[33m;\u001b[39m\n     \u001b[90m   |\u001b[39m \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 5 |\u001b[39m \u001b[36mimport\u001b[39m \u001b[33mArchiveDocumentsModal\u001b[39m \u001b[36mfrom\u001b[39m \u001b[32m'../ArchiveDocumentsModal'\u001b[39m\u001b[33m;\u001b[39m\n     \u001b[90m 6 |\u001b[39m\n     \u001b[90m 7 |\u001b[39m \u001b[90m// Mock documents data\u001b[39m\u001b[0m\n\n      at createNoMappedModuleFoundError (../node_modules/jest-resolve/build/index.js:1117:17)\n      at Object.require (src/features/documents/components/__tests__/ArchiveDocumentsModal.test.jsx:4:1)\n\nFAIL src/lib/__tests__/emailProviderService.test.js\n  ● Test suite failed to run\n\n    Cannot find module '../emailProviderService' from 'src/lib/__tests__/emailProviderService.test.js'\n\n    \u001b[0m \u001b[90m 3 |\u001b[39m \u001b[90m */\u001b[39m\n     \u001b[90m 4 |\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 5 |\u001b[39m \u001b[36mimport\u001b[39m emailProviderService \u001b[36mfrom\u001b[39m \u001b[32m'../emailProviderService'\u001b[39m\u001b[33m;\u001b[39m\n     \u001b[90m   |\u001b[39m \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 6 |\u001b[39m \u001b[36mimport\u001b[39m { supabase } \u001b[36mfrom\u001b[39m \u001b[32m'../supabaseClient'\u001b[39m\u001b[33m;\u001b[39m\n     \u001b[90m 7 |\u001b[39m \u001b[36mimport\u001b[39m \u001b[33mLogger\u001b[39m \u001b[36mfrom\u001b[39m \u001b[32m'@utils/Logger'\u001b[39m\u001b[33m;\u001b[39m\n     \u001b[90m 8 |\u001b[39m\u001b[0m\n\n      at Resolver._throwModNotFoundError (../node_modules/jest-resolve/build/index.js:863:11)\n      at Object.require (src/lib/__tests__/emailProviderService.test.js:5:1)\n\nFAIL src/lib/__tests__/emailManagementService.test.js\n  ● Test suite failed to run\n\n    Cannot find module '../emailStorageService' from 'src/lib/__tests__/emailManagementService.test.js'\n\n    \u001b[0m \u001b[90m 4 |\u001b[39m\n     \u001b[90m 5 |\u001b[39m \u001b[90m// Mock the dependencies\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 6 |\u001b[39m jest\u001b[33m.\u001b[39mmock(\u001b[32m'../emailStorageService'\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m   |\u001b[39m      \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 7 |\u001b[39m jest\u001b[33m.\u001b[39mmock(\u001b[32m'../emailProviderService'\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m 8 |\u001b[39m jest\u001b[33m.\u001b[39mmock(\u001b[32m'../supabaseClient'\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m 9 |\u001b[39m\u001b[0m\n\n      at Resolver._throwModNotFoundError (../node_modules/jest-resolve/build/index.js:863:11)\n      at Object.mock (src/lib/__tests__/emailManagementService.test.js:6:6)\n\nFAIL src/lib/__tests__/emailAttachmentService.test.js\n  ● Test suite failed to run\n\n    Cannot find module '../emailAttachmentService' from 'src/lib/__tests__/emailAttachmentService.test.js'\n\n    \u001b[0m \u001b[90m 3 |\u001b[39m \u001b[90m */\u001b[39m\n     \u001b[90m 4 |\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 5 |\u001b[39m \u001b[36mimport\u001b[39m emailAttachmentService \u001b[36mfrom\u001b[39m \u001b[32m'../emailAttachmentService'\u001b[39m\u001b[33m;\u001b[39m\n     \u001b[90m   |\u001b[39m \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 6 |\u001b[39m \u001b[36mimport\u001b[39m { supabase } \u001b[36mfrom\u001b[39m \u001b[32m'../supabaseClient'\u001b[39m\u001b[33m;\u001b[39m\n     \u001b[90m 7 |\u001b[39m \u001b[36mimport\u001b[39m \u001b[33mLogger\u001b[39m \u001b[36mfrom\u001b[39m \u001b[32m'@utils/Logger'\u001b[39m\u001b[33m;\u001b[39m\n     \u001b[90m 8 |\u001b[39m\u001b[0m\n\n      at Resolver._throwModNotFoundError (../node_modules/jest-resolve/build/index.js:863:11)\n      at Object.require (src/lib/__tests__/emailAttachmentService.test.js:5:1)\n\nPASS src/features/email/components/__tests__/EmailList.test.jsx\nFAIL src/lib/__tests__/businessEmailIntegration.test.js\n  ● Test suite failed to run\n\n    Cannot find module '../businessEmailIntegration.js' from 'src/lib/__tests__/businessEmailIntegration.test.js'\n\n    \u001b[0m \u001b[90m 3 |\u001b[39m \u001b[90m */\u001b[39m\n     \u001b[90m 4 |\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 5 |\u001b[39m \u001b[36mimport\u001b[39m businessEmailIntegration \u001b[36mfrom\u001b[39m \u001b[32m'../businessEmailIntegration.js'\u001b[39m\u001b[33m;\u001b[39m\n     \u001b[90m   |\u001b[39m \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 6 |\u001b[39m \u001b[36mimport\u001b[39m { \u001b[33mInvoiceService\u001b[39m } \u001b[36mfrom\u001b[39m \u001b[32m'../invoiceService.js'\u001b[39m\u001b[33m;\u001b[39m\n     \u001b[90m 7 |\u001b[39m \u001b[36mimport\u001b[39m { \u001b[33mQuoteService\u001b[39m } \u001b[36mfrom\u001b[39m \u001b[32m'../quoteService.js'\u001b[39m\u001b[33m;\u001b[39m\n     \u001b[90m 8 |\u001b[39m \u001b[36mimport\u001b[39m clientEmailService \u001b[36mfrom\u001b[39m \u001b[32m'../clientEmailService.js'\u001b[39m\u001b[33m;\u001b[39m\u001b[0m\n\n      at Resolver._throwModNotFoundError (../node_modules/jest-resolve/build/index.js:863:11)\n      at Object.require (src/lib/__tests__/businessEmailIntegration.test.js:5:1)\n\nPASS src/features/scanner/__tests__/services/documentStorageService.test.ts\nFAIL src/lib/__tests__/authService.test.js\n  ● Test suite failed to run\n\n    Configuration error:\n\n    Could not locate module @lib/authService mapped as:\n    E:\\AlexVenturesStudio\\Nexa_Manager_whit_Task_Master\\web-app\\src\\lib\\$1.\n\n    Please check your configuration for these entries:\n    {\n      \"moduleNameMapper\": {\n        \"/^@lib\\/(.*)$/\": \"E:\\AlexVenturesStudio\\Nexa_Manager_whit_Task_Master\\web-app\\src\\lib\\$1\"\n      },\n      \"resolver\": undefined\n    }\n\n    \u001b[0m\u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 1 |\u001b[39m \u001b[36mimport\u001b[39m { \u001b[33mAuthService\u001b[39m } \u001b[36mfrom\u001b[39m \u001b[32m'@lib/authService'\u001b[39m\u001b[33m;\u001b[39m\n     \u001b[90m   |\u001b[39m \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 2 |\u001b[39m \u001b[36mimport\u001b[39m { supabase } \u001b[36mfrom\u001b[39m \u001b[32m'@lib/supabaseClient'\u001b[39m\u001b[33m;\u001b[39m\n     \u001b[90m 3 |\u001b[39m \u001b[36mimport\u001b[39m \u001b[33mLogger\u001b[39m \u001b[36mfrom\u001b[39m \u001b[32m'@utils/Logger'\u001b[39m\u001b[33m;\u001b[39m\n     \u001b[90m 4 |\u001b[39m\u001b[0m\n\n      at createNoMappedModuleFoundError (../node_modules/jest-resolve/build/index.js:1117:17)\n      at Object.require (src/lib/__tests__/authService.test.js:1:1)\n\nFAIL src/lib/__tests__/emailAnalyticsService.test.js\n  ● Test suite failed to run\n\n    Cannot find module 'vitest' from 'src/lib/__tests__/emailAnalyticsService.test.js'\n\n    \u001b[0m\u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 1 |\u001b[39m \u001b[36mimport\u001b[39m { describe\u001b[33m,\u001b[39m it\u001b[33m,\u001b[39m expect\u001b[33m,\u001b[39m beforeEach\u001b[33m,\u001b[39m afterEach\u001b[33m,\u001b[39m vi } \u001b[36mfrom\u001b[39m \u001b[32m'vitest'\u001b[39m\u001b[33m;\u001b[39m\n     \u001b[90m   |\u001b[39m \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 2 |\u001b[39m \u001b[36mimport\u001b[39m emailAnalyticsService \u001b[36mfrom\u001b[39m \u001b[32m'@lib/emailAnalyticsService'\u001b[39m\u001b[33m;\u001b[39m\n     \u001b[90m 3 |\u001b[39m \u001b[36mimport\u001b[39m emailErrorHandler \u001b[36mfrom\u001b[39m \u001b[32m'@features/email'\u001b[39m\u001b[33m;\u001b[39m\n     \u001b[90m 4 |\u001b[39m \u001b[36mimport\u001b[39m { supabase } \u001b[36mfrom\u001b[39m \u001b[32m'@lib/supabaseClient'\u001b[39m\u001b[33m;\u001b[39m\u001b[0m\n\n      at Resolver._throwModNotFoundError (../node_modules/jest-resolve/build/index.js:863:11)\n      at Object.require (src/lib/__tests__/emailAnalyticsService.test.js:1:1)\n\nFAIL src/components/reports/__tests__/ReportGenerator.test.jsx\n  ● Test suite failed to run\n\n    Cannot find module '../ReportGenerator' from 'src/components/reports/__tests__/ReportGenerator.test.jsx'\n\n    \u001b[0m \u001b[90m 3 |\u001b[39m \u001b[36mimport\u001b[39m userEvent \u001b[36mfrom\u001b[39m \u001b[32m'@testing-library/user-event'\u001b[39m\u001b[33m;\u001b[39m\n     \u001b[90m 4 |\u001b[39m \u001b[36mimport\u001b[39m { \u001b[33mQueryClient\u001b[39m\u001b[33m,\u001b[39m \u001b[33mQueryProvider\u001b[39m } \u001b[36mfrom\u001b[39m \u001b[32m'@tanstack/react-query'\u001b[39m\u001b[33m;\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 5 |\u001b[39m \u001b[36mimport\u001b[39m \u001b[33mReportGenerator\u001b[39m \u001b[36mfrom\u001b[39m \u001b[32m'../ReportGenerator'\u001b[39m\u001b[33m;\u001b[39m\n     \u001b[90m   |\u001b[39m \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 6 |\u001b[39m \u001b[36mimport\u001b[39m \u001b[33m*\u001b[39m \u001b[36mas\u001b[39m reportingService \u001b[36mfrom\u001b[39m \u001b[32m'@/services\\reportingService'\u001b[39m\u001b[33m;\u001b[39m\n     \u001b[90m 7 |\u001b[39m\n     \u001b[90m 8 |\u001b[39m \u001b[90m// Mock services\u001b[39m\u001b[0m\n\n      at Resolver._throwModNotFoundError (../node_modules/jest-resolve/build/index.js:863:11)\n      at Object.require (src/components/reports/__tests__/ReportGenerator.test.jsx:5:1)\n\nPASS src/features/email/components/__tests__/EmailViewer.test.jsx\nFAIL src/components/__tests__/EmailAnalyticsDashboard.test.jsx\n  ● Test suite failed to run\n\n    Cannot find module 'vitest' from 'src/components/__tests__/EmailAnalyticsDashboard.test.jsx'\n\n    \u001b[0m\u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 1 |\u001b[39m \u001b[36mimport\u001b[39m { describe\u001b[33m,\u001b[39m it\u001b[33m,\u001b[39m expect\u001b[33m,\u001b[39m beforeEach\u001b[33m,\u001b[39m afterEach\u001b[33m,\u001b[39m vi } \u001b[36mfrom\u001b[39m \u001b[32m'vitest'\u001b[39m\u001b[33m;\u001b[39m\n     \u001b[90m   |\u001b[39m \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 2 |\u001b[39m \u001b[36mimport\u001b[39m { render\u001b[33m,\u001b[39m screen\u001b[33m,\u001b[39m fireEvent\u001b[33m,\u001b[39m waitFor } \u001b[36mfrom\u001b[39m \u001b[32m'@testing-library/react'\u001b[39m\u001b[33m;\u001b[39m\n     \u001b[90m 3 |\u001b[39m \u001b[36mimport\u001b[39m { \u001b[33mBrowserRouter\u001b[39m } \u001b[36mfrom\u001b[39m \u001b[32m'react-router-dom'\u001b[39m\u001b[33m;\u001b[39m\n     \u001b[90m 4 |\u001b[39m \u001b[36mimport\u001b[39m \u001b[33mEmailAnalyticsDashboard\u001b[39m \u001b[36mfrom\u001b[39m \u001b[32m'@components/EmailAnalyticsDashboard'\u001b[39m\u001b[33m;\u001b[39m\u001b[0m\n\n      at Resolver._throwModNotFoundError (../node_modules/jest-resolve/build/index.js:863:11)\n      at Object.require (src/components/__tests__/EmailAnalyticsDashboard.test.jsx:1:1)\n\nFAIL src/hooks/__tests__/useReports.test.js\n  ● Test suite failed to run\n\n    Cannot find module '../useReports' from 'src/hooks/__tests__/useReports.test.js'\n\n    \u001b[0m \u001b[90m 1 |\u001b[39m \u001b[36mimport\u001b[39m { renderHook\u001b[33m,\u001b[39m waitFor } \u001b[36mfrom\u001b[39m \u001b[32m'@testing-library/react'\u001b[39m\u001b[33m;\u001b[39m\n     \u001b[90m 2 |\u001b[39m \u001b[36mimport\u001b[39m { \u001b[33mQueryClient\u001b[39m\u001b[33m,\u001b[39m \u001b[33mQueryProvider\u001b[39m } \u001b[36mfrom\u001b[39m \u001b[32m'@tanstack/react-query'\u001b[39m\u001b[33m;\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 3 |\u001b[39m \u001b[36mimport\u001b[39m { useReports\u001b[33m,\u001b[39m useReportMetrics\u001b[33m,\u001b[39m useReportGeneration\u001b[33m,\u001b[39m useScheduledReports } \u001b[36mfrom\u001b[39m \u001b[32m'../useReports'\u001b[39m\u001b[33m;\u001b[39m\n     \u001b[90m   |\u001b[39m \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 4 |\u001b[39m \u001b[36mimport\u001b[39m \u001b[33m*\u001b[39m \u001b[36mas\u001b[39m reportingService \u001b[36mfrom\u001b[39m \u001b[32m'../../services/reportingService'\u001b[39m\u001b[33m;\u001b[39m\n     \u001b[90m 5 |\u001b[39m\n     \u001b[90m 6 |\u001b[39m \u001b[90m// Mock services\u001b[39m\u001b[0m\n\n      at Resolver._throwModNotFoundError (../node_modules/jest-resolve/build/index.js:863:11)\n      at Object.require (src/hooks/__tests__/useReports.test.js:3:1)\n\nFAIL src/components/reports/__tests__/ReportScheduler.test.jsx\n  ● Test suite failed to run\n\n    Cannot find module '@/services\r    eportingService' from 'src/components/reports/__tests__/ReportScheduler.test.jsx'\n\n    \u001b[0m \u001b[90m 4 |\u001b[39m \u001b[36mimport\u001b[39m { \u001b[33mQueryClient\u001b[39m\u001b[33m,\u001b[39m \u001b[33mQueryProvider\u001b[39m } \u001b[36mfrom\u001b[39m \u001b[32m'@tanstack/react-query'\u001b[39m\u001b[33m;\u001b[39m\n     \u001b[90m 5 |\u001b[39m \u001b[36mimport\u001b[39m \u001b[33mReportScheduler\u001b[39m \u001b[36mfrom\u001b[39m \u001b[32m'../ReportScheduler'\u001b[39m\u001b[33m;\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 6 |\u001b[39m \u001b[36mimport\u001b[39m \u001b[33m*\u001b[39m \u001b[36mas\u001b[39m reportingService \u001b[36mfrom\u001b[39m \u001b[32m'@/services\\reportingService'\u001b[39m\u001b[33m;\u001b[39m\n     \u001b[90m   |\u001b[39m \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 7 |\u001b[39m\n     \u001b[90m 8 |\u001b[39m \u001b[90m// Mock services\u001b[39m\n     \u001b[90m 9 |\u001b[39m jest\u001b[33m.\u001b[39mmock(\u001b[32m'../../../services/reportingService'\u001b[39m)\u001b[33m;\u001b[39m\u001b[0m\n\n      at Resolver._throwModNotFoundError (../node_modules/jest-resolve/build/index.js:863:11)\n      at Object.require (src/components/reports/__tests__/ReportScheduler.test.jsx:6:1)\n\nFAIL src/hooks/__tests__/useEmails.test.js\n  ● Test suite failed to run\n\n    Cannot find module '../useEmails' from 'src/hooks/__tests__/useEmails.test.js'\n\n    \u001b[0m \u001b[90m 1 |\u001b[39m \u001b[36mimport\u001b[39m { renderHook\u001b[33m,\u001b[39m act } \u001b[36mfrom\u001b[39m \u001b[32m'@testing-library/react'\u001b[39m\u001b[33m;\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 2 |\u001b[39m \u001b[36mimport\u001b[39m { useEmails } \u001b[36mfrom\u001b[39m \u001b[32m'../useEmails'\u001b[39m\u001b[33m;\u001b[39m\n     \u001b[90m   |\u001b[39m \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 3 |\u001b[39m \u001b[36mimport\u001b[39m { \u001b[33mEmailProvider\u001b[39m\u001b[33m,\u001b[39m \u001b[33mAuthProvider\u001b[39m } \u001b[36mfrom\u001b[39m \u001b[32m'@/shared/state/providers'\u001b[39m\u001b[33m;\u001b[39m\n     \u001b[90m 4 |\u001b[39m \u001b[36mimport\u001b[39m { \u001b[33mWebSocketProvider\u001b[39m } \u001b[36mfrom\u001b[39m \u001b[32m'@providers/WebSocketProvider'\u001b[39m\u001b[33m;\u001b[39m\n     \u001b[90m 5 |\u001b[39m \u001b[36mimport\u001b[39m emailManagementService \u001b[36mfrom\u001b[39m \u001b[32m'@features/email'\u001b[39m\u001b[33m;\u001b[39m\u001b[0m\n\n      at Resolver._throwModNotFoundError (../node_modules/jest-resolve/build/index.js:863:11)\n      at Object.require (src/hooks/__tests__/useEmails.test.js:2:1)\n\nE:\\AlexVenturesStudio\\Nexa_Manager_whit_Task_Master\\web-app\\src\\features\\scanner\\services\\rateLimitingService.ts:6062\r\n      req.reject(new Error('Queue cleared'));\r\n                 ^\r\n\r\n[Error: Queue cleared]\r\n\r\nNode.js v20.12.1\r\nE:\\AlexVenturesStudio\\Nexa_Manager_whit_Task_Master\\web-app\\src\\features\\scanner\\services\\rateLimitingService.ts:6062\r\n      req.reject(new Error('Queue cleared'));\r\n                 ^\r\n\r\n[Error: Queue cleared]\r\n\r\nNode.js v20.12.1\r\nE:\\AlexVenturesStudio\\Nexa_Manager_whit_Task_Master\\web-app\\src\\features\\scanner\\services\\rateLimitingService.ts:6062\r\n      req.reject(new Error('Queue cleared'));\r\n                 ^\r\n\r\n[Error: Queue cleared]\r\n\r\nNode.js v20.12.1\r\nE:\\AlexVenturesStudio\\Nexa_Manager_whit_Task_Master\\web-app\\src\\features\\scanner\\services\\rateLimitingService.ts:6062\r\n      req.reject(new Error('Queue cleared'));\r\n                 ^\r\n\r\n[Error: Queue cleared]\r\n\r\nNode.js v20.12.1\r\nFAIL src/features/scanner/__tests__/services/rateLimitingService.test.ts\n  ● Test suite failed to run\n\n    Jest worker encountered 4 child process exceptions, exceeding retry limit\n\n      at ChildProcessWorker.initialize (../node_modules/jest-worker/build/index.js:805:21)\n\nFAIL src/features/scanner/__tests__/integration/ocrProviderFallback.test.ts (71.558 s)\n  ● OCR Provider Fallback Integration Tests › Provider Availability and Fallback Chain › should fallback to secondary provider when primary fails\n\n    thrown: \"Exceeded timeout of 10000 ms for a test.\n    Add a timeout value to this test to increase the timeout, if this is a long-running test. See https://jestjs.io/docs/api#testname-fn-timeout.\"\n\n    \u001b[0m \u001b[90m 136 |\u001b[39m     })\u001b[33m;\u001b[39m\n     \u001b[90m 137 |\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 138 |\u001b[39m     it(\u001b[32m'should fallback to secondary provider when primary fails'\u001b[39m\u001b[33m,\u001b[39m \u001b[36masync\u001b[39m () \u001b[33m=>\u001b[39m {\n     \u001b[90m     |\u001b[39m     \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 139 |\u001b[39m       \u001b[36mconst\u001b[39m mockOpenAIProvider \u001b[33m=\u001b[39m {\n     \u001b[90m 140 |\u001b[39m         isAvailable\u001b[33m:\u001b[39m jest\u001b[33m.\u001b[39mfn(() \u001b[33m=>\u001b[39m \u001b[36mtrue\u001b[39m)\u001b[33m,\u001b[39m\n     \u001b[90m 141 |\u001b[39m         extractText\u001b[33m:\u001b[39m jest\u001b[33m.\u001b[39mfn()\u001b[33m.\u001b[39mmockRejectedValue(\u001b[36mnew\u001b[39m \u001b[33mError\u001b[39m(\u001b[32m'OpenAI API error'\u001b[39m))\u001b[33m,\u001b[39m\u001b[0m\n\n      at it (src/features/scanner/__tests__/integration/ocrProviderFallback.test.ts:138:5)\n      at describe (src/features/scanner/__tests__/integration/ocrProviderFallback.test.ts:108:3)\n      at Object.describe (src/features/scanner/__tests__/integration/ocrProviderFallback.test.ts:47:1)\n\n  ● OCR Provider Fallback Integration Tests › Provider Availability and Fallback Chain › should use manual fallback when all AI providers fail\n\n    thrown: \"Exceeded timeout of 10000 ms for a test.\n    Add a timeout value to this test to increase the timeout, if this is a long-running test. See https://jestjs.io/docs/api#testname-fn-timeout.\"\n\n    \u001b[0m \u001b[90m 188 |\u001b[39m     })\u001b[33m;\u001b[39m\n     \u001b[90m 189 |\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 190 |\u001b[39m     it(\u001b[32m'should use manual fallback when all AI providers fail'\u001b[39m\u001b[33m,\u001b[39m \u001b[36masync\u001b[39m () \u001b[33m=>\u001b[39m {\n     \u001b[90m     |\u001b[39m     \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 191 |\u001b[39m       \u001b[36mconst\u001b[39m mockFailingProvider \u001b[33m=\u001b[39m {\n     \u001b[90m 192 |\u001b[39m         isAvailable\u001b[33m:\u001b[39m jest\u001b[33m.\u001b[39mfn(() \u001b[33m=>\u001b[39m \u001b[36mtrue\u001b[39m)\u001b[33m,\u001b[39m\n     \u001b[90m 193 |\u001b[39m         extractText\u001b[33m:\u001b[39m jest\u001b[33m.\u001b[39mfn()\u001b[33m.\u001b[39mmockRejectedValue(\u001b[36mnew\u001b[39m \u001b[33mError\u001b[39m(\u001b[32m'Provider failed'\u001b[39m))\u001b[33m,\u001b[39m\u001b[0m\n\n      at it (src/features/scanner/__tests__/integration/ocrProviderFallback.test.ts:190:5)\n      at describe (src/features/scanner/__tests__/integration/ocrProviderFallback.test.ts:108:3)\n      at Object.describe (src/features/scanner/__tests__/integration/ocrProviderFallback.test.ts:47:1)\n\n  ● OCR Provider Fallback Integration Tests › Rate Limiting Integration › should respect rate limits and queue requests\n\n    thrown: \"Exceeded timeout of 10000 ms for a test.\n    Add a timeout value to this test to increase the timeout, if this is a long-running test. See https://jestjs.io/docs/api#testname-fn-timeout.\"\n\n    \u001b[0m \u001b[90m 271 |\u001b[39m\n     \u001b[90m 272 |\u001b[39m   describe(\u001b[32m'Rate Limiting Integration'\u001b[39m\u001b[33m,\u001b[39m () \u001b[33m=>\u001b[39m {\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 273 |\u001b[39m     it(\u001b[32m'should respect rate limits and queue requests'\u001b[39m\u001b[33m,\u001b[39m \u001b[36masync\u001b[39m () \u001b[33m=>\u001b[39m {\n     \u001b[90m     |\u001b[39m     \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 274 |\u001b[39m       \u001b[90m// Mock rate limiting\u001b[39m\n     \u001b[90m 275 |\u001b[39m       \u001b[36mlet\u001b[39m rateLimitCallCount \u001b[33m=\u001b[39m \u001b[35m0\u001b[39m\u001b[33m;\u001b[39m\n     \u001b[90m 276 |\u001b[39m       jest\u001b[33m.\u001b[39mspyOn(rateLimitingService\u001b[33m,\u001b[39m \u001b[32m'checkRateLimit'\u001b[39m)\u001b[33m.\u001b[39mmockImplementation(\u001b[36masync\u001b[39m () \u001b[33m=>\u001b[39m {\u001b[0m\n\n      at it (src/features/scanner/__tests__/integration/ocrProviderFallback.test.ts:273:5)\n      at describe (src/features/scanner/__tests__/integration/ocrProviderFallback.test.ts:272:3)\n      at Object.describe (src/features/scanner/__tests__/integration/ocrProviderFallback.test.ts:47:1)\n\n  ● OCR Provider Fallback Integration Tests › Error Recovery and Retry Logic › should retry failed requests with exponential backoff\n\n    thrown: \"Exceeded timeout of 10000 ms for a test.\n    Add a timeout value to this test to increase the timeout, if this is a long-running test. See https://jestjs.io/docs/api#testname-fn-timeout.\"\n\n    \u001b[0m \u001b[90m 367 |\u001b[39m\n     \u001b[90m 368 |\u001b[39m   describe(\u001b[32m'Error Recovery and Retry Logic'\u001b[39m\u001b[33m,\u001b[39m () \u001b[33m=>\u001b[39m {\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 369 |\u001b[39m     it(\u001b[32m'should retry failed requests with exponential backoff'\u001b[39m\u001b[33m,\u001b[39m \u001b[36masync\u001b[39m () \u001b[33m=>\u001b[39m {\n     \u001b[90m     |\u001b[39m     \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 370 |\u001b[39m       \u001b[36mlet\u001b[39m attemptCount \u001b[33m=\u001b[39m \u001b[35m0\u001b[39m\u001b[33m;\u001b[39m\n     \u001b[90m 371 |\u001b[39m       \u001b[36mconst\u001b[39m mockProvider \u001b[33m=\u001b[39m {\n     \u001b[90m 372 |\u001b[39m         isAvailable\u001b[33m:\u001b[39m jest\u001b[33m.\u001b[39mfn(() \u001b[33m=>\u001b[39m \u001b[36mtrue\u001b[39m)\u001b[33m,\u001b[39m\u001b[0m\n\n      at it (src/features/scanner/__tests__/integration/ocrProviderFallback.test.ts:369:5)\n      at describe (src/features/scanner/__tests__/integration/ocrProviderFallback.test.ts:368:3)\n      at Object.describe (src/features/scanner/__tests__/integration/ocrProviderFallback.test.ts:47:1)\n\n  ● OCR Provider Fallback Integration Tests › Error Recovery and Retry Logic › should handle timeout errors with appropriate fallback\n\n    thrown: \"Exceeded timeout of 10000 ms for a test.\n    Add a timeout value to this test to increase the timeout, if this is a long-running test. See https://jestjs.io/docs/api#testname-fn-timeout.\"\n\n    \u001b[0m \u001b[90m 402 |\u001b[39m     })\u001b[33m;\u001b[39m\n     \u001b[90m 403 |\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 404 |\u001b[39m     it(\u001b[32m'should handle timeout errors with appropriate fallback'\u001b[39m\u001b[33m,\u001b[39m \u001b[36masync\u001b[39m () \u001b[33m=>\u001b[39m {\n     \u001b[90m     |\u001b[39m     \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 405 |\u001b[39m       \u001b[36mconst\u001b[39m mockTimeoutProvider \u001b[33m=\u001b[39m {\n     \u001b[90m 406 |\u001b[39m         isAvailable\u001b[33m:\u001b[39m jest\u001b[33m.\u001b[39mfn(() \u001b[33m=>\u001b[39m \u001b[36mtrue\u001b[39m)\u001b[33m,\u001b[39m\n     \u001b[90m 407 |\u001b[39m         extractText\u001b[33m:\u001b[39m jest\u001b[33m.\u001b[39mfn()\u001b[33m.\u001b[39mmockImplementation(\u001b[36masync\u001b[39m () \u001b[33m=>\u001b[39m {\u001b[0m\n\n      at it (src/features/scanner/__tests__/integration/ocrProviderFallback.test.ts:404:5)\n      at describe (src/features/scanner/__tests__/integration/ocrProviderFallback.test.ts:368:3)\n      at Object.describe (src/features/scanner/__tests__/integration/ocrProviderFallback.test.ts:47:1)\n\n  ● OCR Provider Fallback Integration Tests › Error Recovery and Retry Logic › should handle network connectivity issues\n\n    thrown: \"Exceeded timeout of 10000 ms for a test.\n    Add a timeout value to this test to increase the timeout, if this is a long-running test. See https://jestjs.io/docs/api#testname-fn-timeout.\"\n\n    \u001b[0m \u001b[90m 449 |\u001b[39m     })\u001b[33m;\u001b[39m\n     \u001b[90m 450 |\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 451 |\u001b[39m     it(\u001b[32m'should handle network connectivity issues'\u001b[39m\u001b[33m,\u001b[39m \u001b[36masync\u001b[39m () \u001b[33m=>\u001b[39m {\n     \u001b[90m     |\u001b[39m     \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 452 |\u001b[39m       \u001b[36mconst\u001b[39m mockNetworkErrorProvider \u001b[33m=\u001b[39m {\n     \u001b[90m 453 |\u001b[39m         isAvailable\u001b[33m:\u001b[39m jest\u001b[33m.\u001b[39mfn(() \u001b[33m=>\u001b[39m \u001b[36mtrue\u001b[39m)\u001b[33m,\u001b[39m\n     \u001b[90m 454 |\u001b[39m         extractText\u001b[33m:\u001b[39m jest\u001b[33m.\u001b[39mfn()\u001b[33m.\u001b[39mmockRejectedValue(\u001b[36mnew\u001b[39m \u001b[33mError\u001b[39m(\u001b[32m'Network error: ECONNREFUSED'\u001b[39m))\u001b[33m,\u001b[39m\u001b[0m\n\n      at it (src/features/scanner/__tests__/integration/ocrProviderFallback.test.ts:451:5)\n      at describe (src/features/scanner/__tests__/integration/ocrProviderFallback.test.ts:368:3)\n      at Object.describe (src/features/scanner/__tests__/integration/ocrProviderFallback.test.ts:47:1)\n\n  ● OCR Provider Fallback Integration Tests › Provider Health Monitoring › should monitor provider health and adjust fallback strategy\n\n    expect(received).toBe(expected) // Object.is equality\n\n    Expected: true\n    Received: false\n\n    \u001b[0m \u001b[90m 509 |\u001b[39m       \u001b[36mconst\u001b[39m healthCheck \u001b[33m=\u001b[39m \u001b[36mawait\u001b[39m fallbackService\u001b[33m.\u001b[39mhealthCheck()\u001b[33m;\u001b[39m\n     \u001b[90m 510 |\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 511 |\u001b[39m       expect(healthCheck\u001b[33m.\u001b[39mhealthy)\u001b[33m.\u001b[39mtoBe(\u001b[36mtrue\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                                   \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 512 |\u001b[39m       expect(healthCheck\u001b[33m.\u001b[39mavailableProviders)\u001b[33m.\u001b[39mtoContain(\u001b[33mOCRProvider\u001b[39m\u001b[33m.\u001b[39m\u001b[33mOpenAI\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m 513 |\u001b[39m       expect(healthCheck\u001b[33m.\u001b[39mavailableProviders)\u001b[33m.\u001b[39mtoContain(\u001b[33mOCRProvider\u001b[39m\u001b[33m.\u001b[39m\u001b[33mFallback\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m 514 |\u001b[39m       expect(healthCheck\u001b[33m.\u001b[39mavailableProviders)\u001b[33m.\u001b[39mnot\u001b[33m.\u001b[39mtoContain(\u001b[33mOCRProvider\u001b[39m\u001b[33m.\u001b[39m\u001b[33mQwen\u001b[39m)\u001b[33m;\u001b[39m\u001b[0m\n\n      at Object.toBe (src/features/scanner/__tests__/integration/ocrProviderFallback.test.ts:511:35)\n\n  ● OCR Provider Fallback Integration Tests › Provider Health Monitoring › should detect unhealthy system state\n\n    expect(received).toContain(expected) // indexOf\n\n    Expected value: \"Only fallback provider available\"\n    Received array: [\"Provider openai is not available: Unknown reason\", \"Provider qwen is not available: Unknown reason\"]\n\n    \u001b[0m \u001b[90m 547 |\u001b[39m       expect(healthCheck\u001b[33m.\u001b[39mhealthy)\u001b[33m.\u001b[39mtoBe(\u001b[36mfalse\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m 548 |\u001b[39m       expect(healthCheck\u001b[33m.\u001b[39mavailableProviders)\u001b[33m.\u001b[39mtoEqual([\u001b[33mOCRProvider\u001b[39m\u001b[33m.\u001b[39m\u001b[33mFallback\u001b[39m])\u001b[33m;\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 549 |\u001b[39m       expect(healthCheck\u001b[33m.\u001b[39missues)\u001b[33m.\u001b[39mtoContain(\u001b[32m'Only fallback provider available'\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                                  \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 550 |\u001b[39m       expect(healthCheck\u001b[33m.\u001b[39missues)\u001b[33m.\u001b[39mtoContain(\u001b[32m'OpenAI provider is rate limited or unavailable'\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m 551 |\u001b[39m       expect(healthCheck\u001b[33m.\u001b[39missues)\u001b[33m.\u001b[39mtoContain(\u001b[32m'Qwen provider is rate limited or unavailable'\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m 552 |\u001b[39m     })\u001b[33m;\u001b[39m\u001b[0m\n\n      at Object.toContain (src/features/scanner/__tests__/integration/ocrProviderFallback.test.ts:549:34)\n\n  ● OCR Provider Fallback Integration Tests › Integration with Main OCR Service › should integrate fallback mechanism with main OCR service\n\n    expect(received).toEqual(expected) // deep equality\n\n    - Expected  - 1\n    + Received  + 4\n\n    @@ -10,9 +10,12 @@\n            \"confidence\": 0.95,\n            \"text\": \"Successfully extracted text content\",\n          },\n        ],\n        \"confidence\": 0.95,\n    -   \"processingTime\": 1500,\n    +   \"error\": undefined,\n    +   \"processingTime\": 0,\n        \"provider\": \"openai\",\n    +   \"rawResponse\": undefined,\n    +   \"tables\": undefined,\n        \"text\": \"Successfully extracted text content\",\n      }\n\n    \u001b[0m \u001b[90m 624 |\u001b[39m       \u001b[36mconst\u001b[39m result \u001b[33m=\u001b[39m \u001b[36mawait\u001b[39m ocrService\u001b[33m.\u001b[39mextractText(imageBlob)\u001b[33m;\u001b[39m\n     \u001b[90m 625 |\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 626 |\u001b[39m       expect(result)\u001b[33m.\u001b[39mtoEqual(mockSuccessResult)\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                      \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 627 |\u001b[39m       expect(\u001b[33mOCRProviderFactory\u001b[39m\u001b[33m.\u001b[39minitialize)\u001b[33m.\u001b[39mtoHaveBeenCalled()\u001b[33m;\u001b[39m\n     \u001b[90m 628 |\u001b[39m       expect(mockProvider\u001b[33m.\u001b[39mextractText)\u001b[33m.\u001b[39mtoHaveBeenCalledWith(imageBlob\u001b[33m,\u001b[39m undefined)\u001b[33m;\u001b[39m\n     \u001b[90m 629 |\u001b[39m     })\u001b[33m;\u001b[39m\u001b[0m\n\n      at Object.toEqual (src/features/scanner/__tests__/integration/ocrProviderFallback.test.ts:626:22)\n\n  ● OCR Provider Fallback Integration Tests › Integration with Main OCR Service › should handle service initialization failures gracefully\n\n    expect(received).rejects.toThrow()\n\n    Received promise resolved instead of rejected\n    Resolved to value: {\"blocks\": [{\"bounds\": {\"height\": 30, \"width\": 200, \"x\": 0, \"y\": 0}, \"confidence\": 0.95, \"text\": \"Successfully extracted text content\"}], \"confidence\": 0.95, \"error\": undefined, \"processingTime\": 0, \"provider\": \"openai\", \"rawResponse\": undefined, \"tables\": undefined, \"text\": \"Successfully extracted text content\"}\n\n    \u001b[0m \u001b[90m 636 |\u001b[39m       \u001b[36mconst\u001b[39m imageBlob \u001b[33m=\u001b[39m createMockBlob()\u001b[33m;\u001b[39m\n     \u001b[90m 637 |\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 638 |\u001b[39m       \u001b[36mawait\u001b[39m expect(ocrService\u001b[33m.\u001b[39mextractText(imageBlob))\n     \u001b[90m     |\u001b[39m             \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 639 |\u001b[39m         \u001b[33m.\u001b[39mrejects\u001b[33m.\u001b[39mtoThrow(\u001b[32m'OCR service initialization failed'\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m 640 |\u001b[39m     })\u001b[33m;\u001b[39m\n     \u001b[90m 641 |\u001b[39m   })\u001b[33m;\u001b[39m\u001b[0m\n\n      at expect (../node_modules/expect/build/index.js:2113:15)\n      at Object.expect (src/features/scanner/__tests__/integration/ocrProviderFallback.test.ts:638:13)\n\n  ● OCR Provider Fallback Integration Tests › Performance Under Load › should handle concurrent requests with proper fallback\n\n    thrown: \"Exceeded timeout of 10000 ms for a test.\n    Add a timeout value to this test to increase the timeout, if this is a long-running test. See https://jestjs.io/docs/api#testname-fn-timeout.\"\n\n    \u001b[0m \u001b[90m 642 |\u001b[39m\n     \u001b[90m 643 |\u001b[39m   describe(\u001b[32m'Performance Under Load'\u001b[39m\u001b[33m,\u001b[39m () \u001b[33m=>\u001b[39m {\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 644 |\u001b[39m     it(\u001b[32m'should handle concurrent requests with proper fallback'\u001b[39m\u001b[33m,\u001b[39m \u001b[36masync\u001b[39m () \u001b[33m=>\u001b[39m {\n     \u001b[90m     |\u001b[39m     \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 645 |\u001b[39m       \u001b[36mlet\u001b[39m requestCount \u001b[33m=\u001b[39m \u001b[35m0\u001b[39m\u001b[33m;\u001b[39m\n     \u001b[90m 646 |\u001b[39m       \u001b[36mconst\u001b[39m mockProvider \u001b[33m=\u001b[39m {\n     \u001b[90m 647 |\u001b[39m         isAvailable\u001b[33m:\u001b[39m jest\u001b[33m.\u001b[39mfn(() \u001b[33m=>\u001b[39m \u001b[36mtrue\u001b[39m)\u001b[33m,\u001b[39m\u001b[0m\n\n      at it (src/features/scanner/__tests__/integration/ocrProviderFallback.test.ts:644:5)\n      at describe (src/features/scanner/__tests__/integration/ocrProviderFallback.test.ts:643:3)\n      at Object.describe (src/features/scanner/__tests__/integration/ocrProviderFallback.test.ts:47:1)\n\n  ● OCR Provider Fallback Integration Tests › Performance Under Load › should handle concurrent requests with proper fallback\n\n    OCR service initialization failed\n\n    \u001b[0m \u001b[90m 44 |\u001b[39m     } \u001b[36mcatch\u001b[39m (error) {\n     \u001b[90m 45 |\u001b[39m       console\u001b[33m.\u001b[39merror(\u001b[32m'Failed to initialize OCR service:'\u001b[39m\u001b[33m,\u001b[39m error)\u001b[33m;\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 46 |\u001b[39m       \u001b[36mthrow\u001b[39m \u001b[36mnew\u001b[39m \u001b[33mError\u001b[39m(\u001b[32m'OCR service initialization failed'\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m    |\u001b[39m             \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 47 |\u001b[39m     }\n     \u001b[90m 48 |\u001b[39m   }\n     \u001b[90m 49 |\u001b[39m\u001b[0m\n\n      at AIOCRService.initialize (src/features/scanner/services/ocrService.ts:46:13)\n\n  ● OCR Provider Fallback Integration Tests › Performance Under Load › should handle concurrent requests with proper fallback\n\n    OCR service initialization failed\n\n    \u001b[0m \u001b[90m 44 |\u001b[39m     } \u001b[36mcatch\u001b[39m (error) {\n     \u001b[90m 45 |\u001b[39m       console\u001b[33m.\u001b[39merror(\u001b[32m'Failed to initialize OCR service:'\u001b[39m\u001b[33m,\u001b[39m error)\u001b[33m;\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 46 |\u001b[39m       \u001b[36mthrow\u001b[39m \u001b[36mnew\u001b[39m \u001b[33mError\u001b[39m(\u001b[32m'OCR service initialization failed'\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m    |\u001b[39m             \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 47 |\u001b[39m     }\n     \u001b[90m 48 |\u001b[39m   }\n     \u001b[90m 49 |\u001b[39m\u001b[0m\n\n      at AIOCRService.initialize (src/features/scanner/services/ocrService.ts:46:13)\n\n  ● OCR Provider Fallback Integration Tests › Performance Under Load › should handle concurrent requests with proper fallback\n\n    OCR service initialization failed\n\n    \u001b[0m \u001b[90m 44 |\u001b[39m     } \u001b[36mcatch\u001b[39m (error) {\n     \u001b[90m 45 |\u001b[39m       console\u001b[33m.\u001b[39merror(\u001b[32m'Failed to initialize OCR service:'\u001b[39m\u001b[33m,\u001b[39m error)\u001b[33m;\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 46 |\u001b[39m       \u001b[36mthrow\u001b[39m \u001b[36mnew\u001b[39m \u001b[33mError\u001b[39m(\u001b[32m'OCR service initialization failed'\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m    |\u001b[39m             \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 47 |\u001b[39m     }\n     \u001b[90m 48 |\u001b[39m   }\n     \u001b[90m 49 |\u001b[39m\u001b[0m\n\n      at AIOCRService.initialize (src/features/scanner/services/ocrService.ts:46:13)\n\nJest: \"global\" coverage threshold for statements (70%) not met: 3.63%\nJest: \"global\" coverage threshold for branches (70%) not met: 2.48%\nJest: \"global\" coverage threshold for lines (70%) not met: 3.71%\nJest: \"global\" coverage threshold for functions (70%) not met: 3.41%\nJest: Coverage data for ./src/features/*/services/ was not found.\nJest: \"./src/shared/services/\" coverage threshold for statements (80%) not met: 0%\nJest: \"./src/shared/services/\" coverage threshold for branches (80%) not met: 0%\nJest: \"./src/shared/services/\" coverage threshold for lines (80%) not met: 0%\nJest: \"./src/shared/services/\" coverage threshold for functions (80%) not met: 0%\nJest: \"./src/shared/utils/\" coverage threshold for statements (75%) not met: 0%\nJest: \"./src/shared/utils/\" coverage threshold for branches (75%) not met: 0%\nJest: \"./src/shared/utils/\" coverage threshold for lines (75%) not met: 0%\nJest: \"./src/shared/utils/\" coverage threshold for functions (75%) not met: 0%\nSummary of all failing tests\nFAIL src/features/email/components/__tests__/EmailTemplateEditor.test.jsx\n  ● Test suite failed to run\n\n    Configuration error:\n\n    Could not locate module @lib/emailTemplateService mapped as:\n    E:\\AlexVenturesStudio\\Nexa_Manager_whit_Task_Master\\web-app\\src\\lib\\$1.\n\n    Please check your configuration for these entries:\n    {\n      \"moduleNameMapper\": {\n        \"/^@lib\\/(.*)$/\": \"E:\\AlexVenturesStudio\\Nexa_Manager_whit_Task_Master\\web-app\\src\\lib\\$1\"\n      },\n      \"resolver\": undefined\n    }\n\n    \u001b[0m \u001b[90m  9 |\u001b[39m\n     \u001b[90m 10 |\u001b[39m \u001b[90m// Mock the emailTemplateService - Jest will automatically use the __mocks__ version\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 11 |\u001b[39m jest\u001b[33m.\u001b[39mmock(\u001b[32m'@lib/emailTemplateService'\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m    |\u001b[39m      \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 12 |\u001b[39m\n     \u001b[90m 13 |\u001b[39m \u001b[90m// Mock the email attachment service\u001b[39m\n     \u001b[90m 14 |\u001b[39m jest\u001b[33m.\u001b[39mmock(\u001b[32m'@lib/emailAttachmentService'\u001b[39m)\u001b[33m;\u001b[39m\u001b[0m\n\n      at createNoMappedModuleFoundError (../node_modules/jest-resolve/build/index.js:1117:17)\n      at Object.mock (src/features/email/components/__tests__/EmailTemplateEditor.test.jsx:11:6)\n\nFAIL src/features/email/components/__tests__/VirtualEmailList.test.jsx\n  ● Test suite failed to run\n\n    Cannot find module '../../EmailSecurityIndicator' from 'src/features/email/components/__tests__/VirtualEmailList.test.jsx'\n\n    \u001b[0m \u001b[90m 35 |\u001b[39m }))\u001b[33m;\u001b[39m\n     \u001b[90m 36 |\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 37 |\u001b[39m jest\u001b[33m.\u001b[39mmock(\u001b[32m'../../EmailSecurityIndicator'\u001b[39m\u001b[33m,\u001b[39m () \u001b[33m=>\u001b[39m {\n     \u001b[90m    |\u001b[39m      \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 38 |\u001b[39m   \u001b[36mreturn\u001b[39m \u001b[36mfunction\u001b[39m \u001b[33mMockEmailSecurityIndicator\u001b[39m() {\n     \u001b[90m 39 |\u001b[39m     \u001b[36mreturn\u001b[39m \u001b[33m<\u001b[39m\u001b[33mdiv\u001b[39m data\u001b[33m-\u001b[39mtestid\u001b[33m=\u001b[39m\u001b[32m\"security-indicator\"\u001b[39m \u001b[33m/\u001b[39m\u001b[33m>\u001b[39m\u001b[33m;\u001b[39m\n     \u001b[90m 40 |\u001b[39m   }\u001b[33m;\u001b[39m\u001b[0m\n\n      at Resolver._throwModNotFoundError (../node_modules/jest-resolve/build/index.js:863:11)\n      at Object.mock (src/features/email/components/__tests__/VirtualEmailList.test.jsx:37:6)\n\nFAIL src/features/email/components/__tests__/EmailTemplateSelector.test.jsx\n  ● Test suite failed to run\n\n    Configuration error:\n\n    Could not locate module @hooks/useEmailTemplates mapped as:\n    E:\\AlexVenturesStudio\\Nexa_Manager_whit_Task_Master\\web-app\\src\\hooks\\$1.\n\n    Please check your configuration for these entries:\n    {\n      \"moduleNameMapper\": {\n        \"/^@hooks\\/(.*)$/\": \"E:\\AlexVenturesStudio\\Nexa_Manager_whit_Task_Master\\web-app\\src\\hooks\\$1\"\n      },\n      \"resolver\": undefined\n    }\n\n    \u001b[0m \u001b[90m 85 |\u001b[39m }\u001b[33m;\u001b[39m\n     \u001b[90m 86 |\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 87 |\u001b[39m jest\u001b[33m.\u001b[39mmock(\u001b[32m'@hooks/useEmailTemplates'\u001b[39m\u001b[33m,\u001b[39m () \u001b[33m=>\u001b[39m ({\n     \u001b[90m    |\u001b[39m      \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 88 |\u001b[39m   useEmailTemplates\u001b[33m:\u001b[39m () \u001b[33m=>\u001b[39m mockUseEmailTemplates\u001b[33m,\u001b[39m\n     \u001b[90m 89 |\u001b[39m }))\u001b[33m;\u001b[39m\n     \u001b[90m 90 |\u001b[39m\u001b[0m\n\n      at createNoMappedModuleFoundError (../node_modules/jest-resolve/build/index.js:1117:17)\n      at Object.mock (src/features/email/components/__tests__/EmailTemplateSelector.test.jsx:87:6)\n\nFAIL src/features/email/components/__tests__/EmailViewerContainer.test.jsx\n  ● Test suite failed to run\n\n    Configuration error:\n\n    Could not locate module @hooks/useEmailViewer mapped as:\n    E:\\AlexVenturesStudio\\Nexa_Manager_whit_Task_Master\\web-app\\src\\hooks\\$1.\n\n    Please check your configuration for these entries:\n    {\n      \"moduleNameMapper\": {\n        \"/^@hooks\\/(.*)$/\": \"E:\\AlexVenturesStudio\\Nexa_Manager_whit_Task_Master\\web-app\\src\\hooks\\$1\"\n      },\n      \"resolver\": undefined\n    }\n\n    \u001b[0m \u001b[90m 29 |\u001b[39m }\u001b[33m;\u001b[39m\n     \u001b[90m 30 |\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 31 |\u001b[39m jest\u001b[33m.\u001b[39mmock(\u001b[32m'@hooks/useEmailViewer'\u001b[39m\u001b[33m,\u001b[39m () \u001b[33m=>\u001b[39m ({\n     \u001b[90m    |\u001b[39m      \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 32 |\u001b[39m   __esModule\u001b[33m:\u001b[39m \u001b[36mtrue\u001b[39m\u001b[33m,\u001b[39m\n     \u001b[90m 33 |\u001b[39m   \u001b[36mdefault\u001b[39m\u001b[33m:\u001b[39m () \u001b[33m=>\u001b[39m mockEmailViewerReturn\u001b[33m,\u001b[39m\n     \u001b[90m 34 |\u001b[39m }))\u001b[33m;\u001b[39m\u001b[0m\n\n      at createNoMappedModuleFoundError (../node_modules/jest-resolve/build/index.js:1117:17)\n      at Object.mock (src/features/email/components/__tests__/EmailViewerContainer.test.jsx:31:6)\n\nFAIL src/features/email/components/__tests__/EmailTemplateManager.test.jsx\n  ● Test suite failed to run\n\n    Configuration error:\n\n    Could not locate module @lib/emailTemplateService mapped as:\n    E:\\AlexVenturesStudio\\Nexa_Manager_whit_Task_Master\\web-app\\src\\lib\\$1.\n\n    Please check your configuration for these entries:\n    {\n      \"moduleNameMapper\": {\n        \"/^@lib\\/(.*)$/\": \"E:\\AlexVenturesStudio\\Nexa_Manager_whit_Task_Master\\web-app\\src\\lib\\$1\"\n      },\n      \"resolver\": undefined\n    }\n\n    \u001b[0m \u001b[90m 17 |\u001b[39m\n     \u001b[90m 18 |\u001b[39m \u001b[90m// Mock emailTemplateService\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 19 |\u001b[39m jest\u001b[33m.\u001b[39mmock(\u001b[32m'@lib/emailTemplateService'\u001b[39m\u001b[33m,\u001b[39m () \u001b[33m=>\u001b[39m ({\n     \u001b[90m    |\u001b[39m      \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 20 |\u001b[39m   getTemplates\u001b[33m:\u001b[39m jest\u001b[33m.\u001b[39mfn()\u001b[33m,\u001b[39m\n     \u001b[90m 21 |\u001b[39m   saveTemplate\u001b[33m:\u001b[39m jest\u001b[33m.\u001b[39mfn()\u001b[33m,\u001b[39m\n     \u001b[90m 22 |\u001b[39m   deleteTemplate\u001b[33m:\u001b[39m jest\u001b[33m.\u001b[39mfn()\u001b[0m\n\n      at createNoMappedModuleFoundError (../node_modules/jest-resolve/build/index.js:1117:17)\n      at Object.mock (src/features/email/components/__tests__/EmailTemplateManager.test.jsx:19:6)\n\nFAIL src/lib/__tests__/emailManagementService.integration.test.js\n  ● EmailManagementService Integration › service should be defined\n\n    Cannot find module '../emailManagementService' from 'src/lib/__tests__/emailManagementService.integration.test.js'\n\n    \u001b[0m \u001b[90m  9 |\u001b[39m   beforeAll(\u001b[36masync\u001b[39m () \u001b[33m=>\u001b[39m {\n     \u001b[90m 10 |\u001b[39m     \u001b[90m// Import the service\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 11 |\u001b[39m     \u001b[36mconst\u001b[39m module \u001b[33m=\u001b[39m \u001b[36mawait\u001b[39m \u001b[36mimport\u001b[39m(\u001b[32m'../emailManagementService'\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m    |\u001b[39m                    \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 12 |\u001b[39m     emailManagementService \u001b[33m=\u001b[39m module\u001b[33m.\u001b[39m\u001b[36mdefault\u001b[39m\u001b[33m;\u001b[39m\n     \u001b[90m 13 |\u001b[39m   })\u001b[33m;\u001b[39m\n     \u001b[90m 14 |\u001b[39m\u001b[0m\n\n      at Resolver._throwModNotFoundError (../node_modules/jest-resolve/build/index.js:863:11)\n      at require (src/lib/__tests__/emailManagementService.integration.test.js:11:20)\n      at Object.<anonymous> (src/lib/__tests__/emailManagementService.integration.test.js:11:20)\n\n  ● EmailManagementService Integration › should have required methods\n\n    Cannot find module '../emailManagementService' from 'src/lib/__tests__/emailManagementService.integration.test.js'\n\n    \u001b[0m \u001b[90m  9 |\u001b[39m   beforeAll(\u001b[36masync\u001b[39m () \u001b[33m=>\u001b[39m {\n     \u001b[90m 10 |\u001b[39m     \u001b[90m// Import the service\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 11 |\u001b[39m     \u001b[36mconst\u001b[39m module \u001b[33m=\u001b[39m \u001b[36mawait\u001b[39m \u001b[36mimport\u001b[39m(\u001b[32m'../emailManagementService'\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m    |\u001b[39m                    \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 12 |\u001b[39m     emailManagementService \u001b[33m=\u001b[39m module\u001b[33m.\u001b[39m\u001b[36mdefault\u001b[39m\u001b[33m;\u001b[39m\n     \u001b[90m 13 |\u001b[39m   })\u001b[33m;\u001b[39m\n     \u001b[90m 14 |\u001b[39m\u001b[0m\n\n      at Resolver._throwModNotFoundError (../node_modules/jest-resolve/build/index.js:863:11)\n      at require (src/lib/__tests__/emailManagementService.integration.test.js:11:20)\n      at Object.<anonymous> (src/lib/__tests__/emailManagementService.integration.test.js:11:20)\n\n  ● EmailManagementService Integration › should validate email data correctly\n\n    Cannot find module '../emailManagementService' from 'src/lib/__tests__/emailManagementService.integration.test.js'\n\n    \u001b[0m \u001b[90m  9 |\u001b[39m   beforeAll(\u001b[36masync\u001b[39m () \u001b[33m=>\u001b[39m {\n     \u001b[90m 10 |\u001b[39m     \u001b[90m// Import the service\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 11 |\u001b[39m     \u001b[36mconst\u001b[39m module \u001b[33m=\u001b[39m \u001b[36mawait\u001b[39m \u001b[36mimport\u001b[39m(\u001b[32m'../emailManagementService'\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m    |\u001b[39m                    \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 12 |\u001b[39m     emailManagementService \u001b[33m=\u001b[39m module\u001b[33m.\u001b[39m\u001b[36mdefault\u001b[39m\u001b[33m;\u001b[39m\n     \u001b[90m 13 |\u001b[39m   })\u001b[33m;\u001b[39m\n     \u001b[90m 14 |\u001b[39m\u001b[0m\n\n      at Resolver._throwModNotFoundError (../node_modules/jest-resolve/build/index.js:863:11)\n      at require (src/lib/__tests__/emailManagementService.integration.test.js:11:20)\n      at Object.<anonymous> (src/lib/__tests__/emailManagementService.integration.test.js:11:20)\n\n  ● EmailManagementService Integration › should detect invalid email data\n\n    Cannot find module '../emailManagementService' from 'src/lib/__tests__/emailManagementService.integration.test.js'\n\n    \u001b[0m \u001b[90m  9 |\u001b[39m   beforeAll(\u001b[36masync\u001b[39m () \u001b[33m=>\u001b[39m {\n     \u001b[90m 10 |\u001b[39m     \u001b[90m// Import the service\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 11 |\u001b[39m     \u001b[36mconst\u001b[39m module \u001b[33m=\u001b[39m \u001b[36mawait\u001b[39m \u001b[36mimport\u001b[39m(\u001b[32m'../emailManagementService'\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m    |\u001b[39m                    \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 12 |\u001b[39m     emailManagementService \u001b[33m=\u001b[39m module\u001b[33m.\u001b[39m\u001b[36mdefault\u001b[39m\u001b[33m;\u001b[39m\n     \u001b[90m 13 |\u001b[39m   })\u001b[33m;\u001b[39m\n     \u001b[90m 14 |\u001b[39m\u001b[0m\n\n      at Resolver._throwModNotFoundError (../node_modules/jest-resolve/build/index.js:863:11)\n      at require (src/lib/__tests__/emailManagementService.integration.test.js:11:20)\n      at Object.<anonymous> (src/lib/__tests__/emailManagementService.integration.test.js:11:20)\n\n  ● EmailManagementService Integration › should validate email addresses correctly\n\n    Cannot find module '../emailManagementService' from 'src/lib/__tests__/emailManagementService.integration.test.js'\n\n    \u001b[0m \u001b[90m  9 |\u001b[39m   beforeAll(\u001b[36masync\u001b[39m () \u001b[33m=>\u001b[39m {\n     \u001b[90m 10 |\u001b[39m     \u001b[90m// Import the service\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 11 |\u001b[39m     \u001b[36mconst\u001b[39m module \u001b[33m=\u001b[39m \u001b[36mawait\u001b[39m \u001b[36mimport\u001b[39m(\u001b[32m'../emailManagementService'\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m    |\u001b[39m                    \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 12 |\u001b[39m     emailManagementService \u001b[33m=\u001b[39m module\u001b[33m.\u001b[39m\u001b[36mdefault\u001b[39m\u001b[33m;\u001b[39m\n     \u001b[90m 13 |\u001b[39m   })\u001b[33m;\u001b[39m\n     \u001b[90m 14 |\u001b[39m\u001b[0m\n\n      at Resolver._throwModNotFoundError (../node_modules/jest-resolve/build/index.js:863:11)\n      at require (src/lib/__tests__/emailManagementService.integration.test.js:11:20)\n      at Object.<anonymous> (src/lib/__tests__/emailManagementService.integration.test.js:11:20)\n\n  ● EmailManagementService Integration › should handle event listeners\n\n    Cannot find module '../emailManagementService' from 'src/lib/__tests__/emailManagementService.integration.test.js'\n\n    \u001b[0m \u001b[90m  9 |\u001b[39m   beforeAll(\u001b[36masync\u001b[39m () \u001b[33m=>\u001b[39m {\n     \u001b[90m 10 |\u001b[39m     \u001b[90m// Import the service\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 11 |\u001b[39m     \u001b[36mconst\u001b[39m module \u001b[33m=\u001b[39m \u001b[36mawait\u001b[39m \u001b[36mimport\u001b[39m(\u001b[32m'../emailManagementService'\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m    |\u001b[39m                    \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 12 |\u001b[39m     emailManagementService \u001b[33m=\u001b[39m module\u001b[33m.\u001b[39m\u001b[36mdefault\u001b[39m\u001b[33m;\u001b[39m\n     \u001b[90m 13 |\u001b[39m   })\u001b[33m;\u001b[39m\n     \u001b[90m 14 |\u001b[39m\u001b[0m\n\n      at Resolver._throwModNotFoundError (../node_modules/jest-resolve/build/index.js:863:11)\n      at require (src/lib/__tests__/emailManagementService.integration.test.js:11:20)\n      at Object.<anonymous> (src/lib/__tests__/emailManagementService.integration.test.js:11:20)\n\nFAIL src/lib/__tests__/uiUtils.test.ts\n  ● uiUtils › notify › dismiss › should call toast.dismiss without arguments\n\n    expect(jest.fn()).toHaveBeenCalledWith(...expected)\n\n    Expected: called with 0 arguments\n    Received: undefined\n\n    Number of calls: 1\n\n    \u001b[0m \u001b[90m 209 |\u001b[39m       it(\u001b[32m'should call toast.dismiss without arguments'\u001b[39m\u001b[33m,\u001b[39m () \u001b[33m=>\u001b[39m {\n     \u001b[90m 210 |\u001b[39m         notify\u001b[33m.\u001b[39mdismiss()\u001b[33m;\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 211 |\u001b[39m         expect(toast\u001b[33m.\u001b[39mdismiss)\u001b[33m.\u001b[39mtoHaveBeenCalledWith()\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                               \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 212 |\u001b[39m       })\u001b[33m;\u001b[39m\n     \u001b[90m 213 |\u001b[39m     })\u001b[33m;\u001b[39m\n     \u001b[90m 214 |\u001b[39m   })\u001b[33m;\u001b[39m\u001b[0m\n\n      at Object.toHaveBeenCalledWith (src/lib/__tests__/uiUtils.test.ts:211:31)\n\n  ● uiUtils › errorHandler › should handle generic error\n\n    expect(jest.fn()).toHaveBeenCalledWith(...expected)\n\n    Expected: \"Error in test context:\", [Error: Test error]\n\n    Number of calls: 0\n\n    \u001b[0m \u001b[90m 259 |\u001b[39m       \u001b[36mconst\u001b[39m result \u001b[33m=\u001b[39m errorHandler\u001b[33m.\u001b[39mhandle(error\u001b[33m,\u001b[39m \u001b[32m'test context'\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m 260 |\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 261 |\u001b[39m       expect(\u001b[33mLogger\u001b[39m\u001b[33m.\u001b[39merror)\u001b[33m.\u001b[39mtoHaveBeenCalledWith(\u001b[32m'Error in test context:'\u001b[39m\u001b[33m,\u001b[39m error)\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                            \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 262 |\u001b[39m       expect(toast\u001b[33m.\u001b[39merror)\u001b[33m.\u001b[39mtoHaveBeenCalledWith(\u001b[32m'Test error'\u001b[39m\u001b[33m,\u001b[39m expect\u001b[33m.\u001b[39many(\u001b[33mObject\u001b[39m))\u001b[33m;\u001b[39m\n     \u001b[90m 263 |\u001b[39m       expect(result)\u001b[33m.\u001b[39mtoBe(\u001b[32m'Test error'\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m 264 |\u001b[39m     })\u001b[33m;\u001b[39m\u001b[0m\n\n      at Object.toHaveBeenCalledWith (src/lib/__tests__/uiUtils.test.ts:261:28)\n\n  ● uiUtils › errorHandler › should handle string error\n\n    expect(jest.fn()).toHaveBeenCalledWith(...expected)\n\n    Expected: \"Error in test context:\", \"String error message\"\n\n    Number of calls: 0\n\n    \u001b[0m \u001b[90m 269 |\u001b[39m       \u001b[36mconst\u001b[39m result \u001b[33m=\u001b[39m errorHandler\u001b[33m.\u001b[39mhandle(error\u001b[33m,\u001b[39m \u001b[32m'test context'\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m 270 |\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 271 |\u001b[39m       expect(\u001b[33mLogger\u001b[39m\u001b[33m.\u001b[39merror)\u001b[33m.\u001b[39mtoHaveBeenCalledWith(\u001b[32m'Error in test context:'\u001b[39m\u001b[33m,\u001b[39m error)\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                            \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 272 |\u001b[39m       expect(toast\u001b[33m.\u001b[39merror)\u001b[33m.\u001b[39mtoHaveBeenCalledWith(\u001b[32m'String error message'\u001b[39m\u001b[33m,\u001b[39m expect\u001b[33m.\u001b[39many(\u001b[33mObject\u001b[39m))\u001b[33m;\u001b[39m\n     \u001b[90m 273 |\u001b[39m       expect(result)\u001b[33m.\u001b[39mtoBe(\u001b[32m'String error message'\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m 274 |\u001b[39m     })\u001b[33m;\u001b[39m\u001b[0m\n\n      at Object.toHaveBeenCalledWith (src/lib/__tests__/uiUtils.test.ts:271:28)\n\n  ● uiUtils › errorHandler › should handle API error with response data\n\n    expect(jest.fn()).toHaveBeenCalledWith(...expected)\n\n    Expected: \"API Error:\", {\"response\": {\"data\": {\"message\": \"API error message\"}}}\n\n    Number of calls: 0\n\n    \u001b[0m \u001b[90m 285 |\u001b[39m       errorHandler\u001b[33m.\u001b[39mhandleApiError(apiError)\u001b[33m;\u001b[39m\n     \u001b[90m 286 |\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 287 |\u001b[39m       expect(\u001b[33mLogger\u001b[39m\u001b[33m.\u001b[39merror)\u001b[33m.\u001b[39mtoHaveBeenCalledWith(\u001b[32m'API Error:'\u001b[39m\u001b[33m,\u001b[39m apiError)\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                            \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 288 |\u001b[39m       expect(toast\u001b[33m.\u001b[39merror)\u001b[33m.\u001b[39mtoHaveBeenCalledWith(\u001b[32m'API error message'\u001b[39m\u001b[33m,\u001b[39m expect\u001b[33m.\u001b[39many(\u001b[33mObject\u001b[39m))\u001b[33m;\u001b[39m\n     \u001b[90m 289 |\u001b[39m     })\u001b[33m;\u001b[39m\n     \u001b[90m 290 |\u001b[39m\u001b[0m\n\n      at Object.toHaveBeenCalledWith (src/lib/__tests__/uiUtils.test.ts:287:28)\n\n  ● uiUtils › errorHandler › should handle Supabase error\n\n    expect(jest.fn()).toHaveBeenCalledWith(...expected)\n\n    Expected: \"Supabase error in test context:\", {\"message\": \"duplicate key value violates unique constraint\"}\n\n    Number of calls: 0\n\n    \u001b[0m \u001b[90m 296 |\u001b[39m       \u001b[36mconst\u001b[39m result \u001b[33m=\u001b[39m errorHandler\u001b[33m.\u001b[39mhandleSupabaseError(supabaseError\u001b[33m,\u001b[39m \u001b[32m'test context'\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m 297 |\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 298 |\u001b[39m       expect(\u001b[33mLogger\u001b[39m\u001b[33m.\u001b[39merror)\u001b[33m.\u001b[39mtoHaveBeenCalledWith(\u001b[32m'Supabase error in test context:'\u001b[39m\u001b[33m,\u001b[39m supabaseError)\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                            \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 299 |\u001b[39m       expect(toast\u001b[33m.\u001b[39merror)\u001b[33m.\u001b[39mtoHaveBeenCalledWith(\u001b[32m'This item already exists'\u001b[39m\u001b[33m,\u001b[39m expect\u001b[33m.\u001b[39many(\u001b[33mObject\u001b[39m))\u001b[33m;\u001b[39m\n     \u001b[90m 300 |\u001b[39m       expect(result)\u001b[33m.\u001b[39mtoBe(\u001b[32m'This item already exists'\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m 301 |\u001b[39m     })\u001b[33m;\u001b[39m\u001b[0m\n\n      at Object.toHaveBeenCalledWith (src/lib/__tests__/uiUtils.test.ts:298:28)\n\n  ● uiUtils › validation › should validate email format\n\n    expect(received).toBeNull()\n\n    Received: true\n\n    \u001b[0m \u001b[90m 311 |\u001b[39m\n     \u001b[90m 312 |\u001b[39m     it(\u001b[32m'should validate email format'\u001b[39m\u001b[33m,\u001b[39m () \u001b[33m=>\u001b[39m {\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 313 |\u001b[39m       expect(validation\u001b[33m.\u001b[39memail(\u001b[32m'test@example.com'\u001b[39m))\u001b[33m.\u001b[39mtoBeNull()\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                                                    \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 314 |\u001b[39m       expect(validation\u001b[33m.\u001b[39memail(\u001b[32m'invalid-email'\u001b[39m))\u001b[33m.\u001b[39mtoBe(\u001b[32m'Invalid email'\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m 315 |\u001b[39m       expect(validation\u001b[33m.\u001b[39memail(\u001b[32m''\u001b[39m))\u001b[33m.\u001b[39mtoBeNull()\u001b[33m;\u001b[39m \u001b[90m// Empty email is valid (use required for required validation)\u001b[39m\n     \u001b[90m 316 |\u001b[39m     })\u001b[33m;\u001b[39m\u001b[0m\n\n      at Object.toBeNull (src/lib/__tests__/uiUtils.test.ts:313:52)\n\n  ● uiUtils › validation › should validate maximum length\n\n    expect(received).toBe(expected) // Object.is equality\n\n    Expected: \"Test Field can be at most 5 characters long\"\n    Received: \"Test Field must be at most 5 characters long\"\n\n    \u001b[0m \u001b[90m 325 |\u001b[39m     it(\u001b[32m'should validate maximum length'\u001b[39m\u001b[33m,\u001b[39m () \u001b[33m=>\u001b[39m {\n     \u001b[90m 326 |\u001b[39m       expect(validation\u001b[33m.\u001b[39mmaxLength(\u001b[32m'test'\u001b[39m\u001b[33m,\u001b[39m \u001b[35m5\u001b[39m\u001b[33m,\u001b[39m \u001b[32m'Test Field'\u001b[39m))\u001b[33m.\u001b[39mtoBeNull()\u001b[33m;\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 327 |\u001b[39m       expect(validation\u001b[33m.\u001b[39mmaxLength(\u001b[32m'toolong'\u001b[39m\u001b[33m,\u001b[39m \u001b[35m5\u001b[39m\u001b[33m,\u001b[39m \u001b[32m'Test Field'\u001b[39m))\u001b[33m.\u001b[39mtoBe(\n     \u001b[90m     |\u001b[39m                                                                \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 328 |\u001b[39m         \u001b[32m'Test Field can be at most 5 characters long'\u001b[39m\u001b[33m,\u001b[39m\n     \u001b[90m 329 |\u001b[39m       )\u001b[33m;\u001b[39m\n     \u001b[90m 330 |\u001b[39m     })\u001b[33m;\u001b[39m\u001b[0m\n\n      at Object.toBe (src/lib/__tests__/uiUtils.test.ts:327:64)\n\n  ● uiUtils › formatters › should format currency\n\n    expect(received).toMatch(expected)\n\n    Expected pattern: /1\\.234,56/\n    Received string:  \"$1,234.56\"\n\n    \u001b[0m \u001b[90m 385 |\u001b[39m     it(\u001b[32m'should format currency'\u001b[39m\u001b[33m,\u001b[39m () \u001b[33m=>\u001b[39m {\n     \u001b[90m 386 |\u001b[39m       \u001b[36mconst\u001b[39m result \u001b[33m=\u001b[39m formatters\u001b[33m.\u001b[39mcurrency(\u001b[35m1234.56\u001b[39m)\u001b[33m;\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 387 |\u001b[39m       expect(result)\u001b[33m.\u001b[39mtoMatch(\u001b[35m/1\\.234,56/\u001b[39m)\u001b[33m;\u001b[39m \u001b[90m// Italian format\u001b[39m\n     \u001b[90m     |\u001b[39m                      \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 388 |\u001b[39m     })\u001b[33m;\u001b[39m\n     \u001b[90m 389 |\u001b[39m\n     \u001b[90m 390 |\u001b[39m     it(\u001b[32m'should format numbers'\u001b[39m\u001b[33m,\u001b[39m () \u001b[33m=>\u001b[39m {\u001b[0m\n\n      at Object.toMatch (src/lib/__tests__/uiUtils.test.ts:387:22)\n\n  ● uiUtils › formatters › should format numbers\n\n    expect(received).toMatch(expected)\n\n    Expected pattern: /1\\.234,57/\n    Received string:  \"1,234.57\"\n\n    \u001b[0m \u001b[90m 390 |\u001b[39m     it(\u001b[32m'should format numbers'\u001b[39m\u001b[33m,\u001b[39m () \u001b[33m=>\u001b[39m {\n     \u001b[90m 391 |\u001b[39m       \u001b[36mconst\u001b[39m result \u001b[33m=\u001b[39m formatters\u001b[33m.\u001b[39mnumber(\u001b[35m1234.567\u001b[39m\u001b[33m,\u001b[39m \u001b[35m2\u001b[39m)\u001b[33m;\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 392 |\u001b[39m       expect(result)\u001b[33m.\u001b[39mtoMatch(\u001b[35m/1\\.234,57/\u001b[39m)\u001b[33m;\u001b[39m \u001b[90m// Italian format with 2 decimals\u001b[39m\n     \u001b[90m     |\u001b[39m                      \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 393 |\u001b[39m     })\u001b[33m;\u001b[39m\n     \u001b[90m 394 |\u001b[39m\n     \u001b[90m 395 |\u001b[39m     it(\u001b[32m'should format percentage'\u001b[39m\u001b[33m,\u001b[39m () \u001b[33m=>\u001b[39m {\u001b[0m\n\n      at Object.toMatch (src/lib/__tests__/uiUtils.test.ts:392:22)\n\n  ● uiUtils › formatters › should format percentage\n\n    expect(received).toMatch(expected)\n\n    Expected pattern: /25,0/\n    Received string:  \"25.0%\"\n\n    \u001b[0m \u001b[90m 395 |\u001b[39m     it(\u001b[32m'should format percentage'\u001b[39m\u001b[33m,\u001b[39m () \u001b[33m=>\u001b[39m {\n     \u001b[90m 396 |\u001b[39m       \u001b[36mconst\u001b[39m result \u001b[33m=\u001b[39m formatters\u001b[33m.\u001b[39mpercentage(\u001b[35m25\u001b[39m\u001b[33m,\u001b[39m \u001b[35m1\u001b[39m)\u001b[33m;\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 397 |\u001b[39m       expect(result)\u001b[33m.\u001b[39mtoMatch(\u001b[35m/25,0/\u001b[39m)\u001b[33m;\u001b[39m \u001b[90m// 25% in Italian format\u001b[39m\n     \u001b[90m     |\u001b[39m                      \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 398 |\u001b[39m     })\u001b[33m;\u001b[39m\n     \u001b[90m 399 |\u001b[39m\n     \u001b[90m 400 |\u001b[39m     it(\u001b[32m'should format file size'\u001b[39m\u001b[33m,\u001b[39m () \u001b[33m=>\u001b[39m {\u001b[0m\n\n      at Object.toMatch (src/lib/__tests__/uiUtils.test.ts:397:22)\n\n  ● uiUtils › formatters › should truncate text\n\n    expect(received).toBe(expected) // Object.is equality\n\n    Expected: \"This is a very long ...\"\n    Received: \"This is a very lo...\"\n\n    \u001b[0m \u001b[90m 406 |\u001b[39m     it(\u001b[32m'should truncate text'\u001b[39m\u001b[33m,\u001b[39m () \u001b[33m=>\u001b[39m {\n     \u001b[90m 407 |\u001b[39m       expect(formatters\u001b[33m.\u001b[39mtruncate(\u001b[32m'Short text'\u001b[39m\u001b[33m,\u001b[39m \u001b[35m20\u001b[39m))\u001b[33m.\u001b[39mtoBe(\u001b[32m'Short text'\u001b[39m)\u001b[33m;\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 408 |\u001b[39m       expect(formatters\u001b[33m.\u001b[39mtruncate(\u001b[32m'This is a very long text that should be truncated'\u001b[39m\u001b[33m,\u001b[39m \u001b[35m20\u001b[39m))\u001b[33m.\u001b[39mtoBe(\n     \u001b[90m     |\u001b[39m                                                                                            \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 409 |\u001b[39m         \u001b[32m'This is a very long ...'\u001b[39m\u001b[33m,\u001b[39m\n     \u001b[90m 410 |\u001b[39m       )\u001b[33m;\u001b[39m\n     \u001b[90m 411 |\u001b[39m     })\u001b[33m;\u001b[39m\u001b[0m\n\n      at Object.toBe (src/lib/__tests__/uiUtils.test.ts:408:92)\n\nFAIL src/services/__tests__/imageProcessingService.test.js\n  ● ImageProcessingService › PDF Handling › should parse PDF and extract pages\n\n    TypeError: pdfBlob.arrayBuffer is not a function\n\n    \u001b[0m \u001b[90m 316 |\u001b[39m     pdfjsLib\u001b[33m.\u001b[39m\u001b[33mGlobalWorkerOptions\u001b[39m\u001b[33m.\u001b[39mworkerSrc \u001b[33m=\u001b[39m \u001b[32m`https://cdnjs.cloudflare.com/ajax/libs/pdf.js/${pdfjsLib.version}/pdf.worker.min.js`\u001b[39m\u001b[33m;\u001b[39m\n     \u001b[90m 317 |\u001b[39m     \n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 318 |\u001b[39m     \u001b[36mconst\u001b[39m arrayBuffer \u001b[33m=\u001b[39m \u001b[36mawait\u001b[39m pdfBlob\u001b[33m.\u001b[39marrayBuffer()\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                                       \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 319 |\u001b[39m     \u001b[36mconst\u001b[39m pdf \u001b[33m=\u001b[39m \u001b[36mawait\u001b[39m pdfjsLib\u001b[33m.\u001b[39mgetDocument({ data\u001b[33m:\u001b[39m arrayBuffer })\u001b[33m.\u001b[39mpromise\u001b[33m;\u001b[39m\n     \u001b[90m 320 |\u001b[39m     \n     \u001b[90m 321 |\u001b[39m     \u001b[36mconst\u001b[39m images\u001b[33m:\u001b[39m \u001b[33mBlob\u001b[39m[] \u001b[33m=\u001b[39m []\u001b[33m;\u001b[39m\u001b[0m\n\n      at ImageProcessingService.arrayBuffer [as parsePDF] (src/features/scanner/services/imageProcessingService.ts:318:39)\n      at Object.<anonymous> (src/services/__tests__/imageProcessingService.test.js:134:22)\n\n  ● ImageProcessingService › PDF Handling › should extract PDF pages with page numbers\n\n    TypeError: pdfBlob.arrayBuffer is not a function\n\n    \u001b[0m \u001b[90m 316 |\u001b[39m     pdfjsLib\u001b[33m.\u001b[39m\u001b[33mGlobalWorkerOptions\u001b[39m\u001b[33m.\u001b[39mworkerSrc \u001b[33m=\u001b[39m \u001b[32m`https://cdnjs.cloudflare.com/ajax/libs/pdf.js/${pdfjsLib.version}/pdf.worker.min.js`\u001b[39m\u001b[33m;\u001b[39m\n     \u001b[90m 317 |\u001b[39m     \n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 318 |\u001b[39m     \u001b[36mconst\u001b[39m arrayBuffer \u001b[33m=\u001b[39m \u001b[36mawait\u001b[39m pdfBlob\u001b[33m.\u001b[39marrayBuffer()\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                                       \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 319 |\u001b[39m     \u001b[36mconst\u001b[39m pdf \u001b[33m=\u001b[39m \u001b[36mawait\u001b[39m pdfjsLib\u001b[33m.\u001b[39mgetDocument({ data\u001b[33m:\u001b[39m arrayBuffer })\u001b[33m.\u001b[39mpromise\u001b[33m;\u001b[39m\n     \u001b[90m 320 |\u001b[39m     \n     \u001b[90m 321 |\u001b[39m     \u001b[36mconst\u001b[39m images\u001b[33m:\u001b[39m \u001b[33mBlob\u001b[39m[] \u001b[33m=\u001b[39m []\u001b[33m;\u001b[39m\u001b[0m\n\n      at ImageProcessingService.arrayBuffer [as parsePDF] (src/features/scanner/services/imageProcessingService.ts:318:39)\n      at ImageProcessingService.extractPDFPages (src/features/scanner/services/imageProcessingService.ts:356:20)\n      at Object.<anonymous> (src/services/__tests__/imageProcessingService.test.js:142:22)\n\nFAIL src/features/scanner/__tests__/services/resultCacheService.test.ts\n  ● ResultCacheService › initialization › should load cache from localStorage on initialization\n\n    expect(received).toBe(expected) // Object.is equality\n\n    Expected: true\n    Received: false\n\n    \u001b[0m \u001b[90m 130 |\u001b[39m       \u001b[36mconst\u001b[39m newService \u001b[33m=\u001b[39m \u001b[33mResultCacheService\u001b[39m\u001b[33m.\u001b[39mgetInstance()\u001b[33m;\u001b[39m\n     \u001b[90m 131 |\u001b[39m       \n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 132 |\u001b[39m       expect(newService\u001b[33m.\u001b[39mhas(\u001b[32m'test-key'\u001b[39m))\u001b[33m.\u001b[39mtoBe(\u001b[36mtrue\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                                          \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 133 |\u001b[39m     })\u001b[33m;\u001b[39m\n     \u001b[90m 134 |\u001b[39m\n     \u001b[90m 135 |\u001b[39m     it(\u001b[32m'should handle corrupted localStorage data gracefully'\u001b[39m\u001b[33m,\u001b[39m () \u001b[33m=>\u001b[39m {\u001b[0m\n\n      at Object.toBe (src/features/scanner/__tests__/services/resultCacheService.test.ts:132:42)\n\n  ● ResultCacheService › initialization › should handle corrupted localStorage data gracefully\n\n    expect(jest.fn()).toHaveBeenCalledWith(...expected)\n\n    Expected: \"scanner_cache\"\n\n    Number of calls: 0\n\n    \u001b[0m \u001b[90m 140 |\u001b[39m       })\u001b[33m.\u001b[39mnot\u001b[33m.\u001b[39mtoThrow()\u001b[33m;\u001b[39m\n     \u001b[90m 141 |\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 142 |\u001b[39m       expect(mockLocalStorage\u001b[33m.\u001b[39mremoveItem)\u001b[33m.\u001b[39mtoHaveBeenCalledWith(\u001b[32m'scanner_cache'\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                                           \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 143 |\u001b[39m     })\u001b[33m;\u001b[39m\n     \u001b[90m 144 |\u001b[39m   })\u001b[33m;\u001b[39m\n     \u001b[90m 145 |\u001b[39m\u001b[0m\n\n      at Object.toHaveBeenCalledWith (src/features/scanner/__tests__/services/resultCacheService.test.ts:142:43)\n\n  ● ResultCacheService › error handling › should handle hash generation errors\n\n    expect(received).not.toThrow()\n\n    Error name:    \"Error\"\n    Error message: \"Stringify error\"\n\n        \u001b[0m \u001b[90m 554 |\u001b[39m       \u001b[36mconst\u001b[39m originalStringify \u001b[33m=\u001b[39m \u001b[33mJSON\u001b[39m\u001b[33m.\u001b[39mstringify\u001b[33m;\u001b[39m\n         \u001b[90m 555 |\u001b[39m       \u001b[33mJSON\u001b[39m\u001b[33m.\u001b[39mstringify \u001b[33m=\u001b[39m jest\u001b[33m.\u001b[39mfn()\u001b[33m.\u001b[39mmockImplementation(() \u001b[33m=>\u001b[39m {\n        \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 556 |\u001b[39m         \u001b[36mthrow\u001b[39m \u001b[36mnew\u001b[39m \u001b[33mError\u001b[39m(\u001b[32m'Stringify error'\u001b[39m)\u001b[33m;\u001b[39m\n         \u001b[90m     |\u001b[39m               \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n         \u001b[90m 557 |\u001b[39m       })\u001b[33m;\u001b[39m\n         \u001b[90m 558 |\u001b[39m\n         \u001b[90m 559 |\u001b[39m       \u001b[36mconst\u001b[39m blob \u001b[33m=\u001b[39m \u001b[36mnew\u001b[39m \u001b[33mBlob\u001b[39m([\u001b[32m'test'\u001b[39m]\u001b[33m,\u001b[39m { type\u001b[33m:\u001b[39m \u001b[32m'image/jpeg'\u001b[39m })\u001b[33m;\u001b[39m\u001b[0m\n\n      at JSON.<anonymous> (src/features/scanner/__tests__/services/resultCacheService.test.ts:556:15)\n      at ResultCacheService.stringify [as hashObject] (src/features/scanner/services/resultCacheService.ts:427:22)\n      at ResultCacheService.hashObject [as generateOCRKey] (src/features/scanner/services/resultCacheService.ts:68:40)\n      at generateOCRKey (src/features/scanner/__tests__/services/resultCacheService.test.ts:563:17)\n      at Object.<anonymous> (../node_modules/expect/build/index.js:1824:9)\n      at Object.throwingMatcher [as toThrow] (../node_modules/expect/build/index.js:2231:93)\n      at Object.toThrow (src/features/scanner/__tests__/services/resultCacheService.test.ts:564:14)\n      at Object.toThrow (src/features/scanner/__tests__/services/resultCacheService.test.ts:564:14)\n\nFAIL src/features/email/components/__tests__/EmailSearchDashboard.minimal.test.jsx\n  ● Test suite failed to run\n\n    Cannot find module '../../../hooks/useEmailSearch' from 'src/features/email/components/__tests__/EmailSearchDashboard.minimal.test.jsx'\n\n    \u001b[0m \u001b[90m 4 |\u001b[39m\n     \u001b[90m 5 |\u001b[39m \u001b[90m// Mock all dependencies first\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 6 |\u001b[39m jest\u001b[33m.\u001b[39mmock(\u001b[32m'../../../hooks/useEmailSearch'\u001b[39m\u001b[33m,\u001b[39m () \u001b[33m=>\u001b[39m ({\n     \u001b[90m   |\u001b[39m      \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 7 |\u001b[39m   useEmailSearch\u001b[33m:\u001b[39m jest\u001b[33m.\u001b[39mfn(() \u001b[33m=>\u001b[39m ({\n     \u001b[90m 8 |\u001b[39m     searchResults\u001b[33m:\u001b[39m []\u001b[33m,\u001b[39m\n     \u001b[90m 9 |\u001b[39m     totalResults\u001b[33m:\u001b[39m \u001b[35m0\u001b[39m\u001b[33m,\u001b[39m\u001b[0m\n\n      at Resolver._throwModNotFoundError (../node_modules/jest-resolve/build/index.js:863:11)\n      at Object.mock (src/features/email/components/__tests__/EmailSearchDashboard.minimal.test.jsx:6:6)\n\nFAIL src/features/email/components/__tests__/EmailSearch.test.jsx\n  ● Test suite failed to run\n\n    Configuration error:\n\n    Could not locate module @hooks/useEmailSearch mapped as:\n    E:\\AlexVenturesStudio\\Nexa_Manager_whit_Task_Master\\web-app\\src\\hooks\\$1.\n\n    Please check your configuration for these entries:\n    {\n      \"moduleNameMapper\": {\n        \"/^@hooks\\/(.*)$/\": \"E:\\AlexVenturesStudio\\Nexa_Manager_whit_Task_Master\\web-app\\src\\hooks\\$1\"\n      },\n      \"resolver\": undefined\n    }\n\n    \u001b[0m \u001b[90m 10 |\u001b[39m\n     \u001b[90m 11 |\u001b[39m \u001b[90m// Mock dependencies\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 12 |\u001b[39m jest\u001b[33m.\u001b[39mmock(\u001b[32m'@hooks/useEmailSearch'\u001b[39m\u001b[33m,\u001b[39m () \u001b[33m=>\u001b[39m ({\n     \u001b[90m    |\u001b[39m      \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 13 |\u001b[39m   useEmailSearch\u001b[33m:\u001b[39m jest\u001b[33m.\u001b[39mfn()\u001b[33m,\u001b[39m\n     \u001b[90m 14 |\u001b[39m }))\u001b[33m;\u001b[39m\n     \u001b[90m 15 |\u001b[39m\u001b[0m\n\n      at createNoMappedModuleFoundError (../node_modules/jest-resolve/build/index.js:1117:17)\n      at Object.mock (src/features/email/components/__tests__/EmailSearch.test.jsx:12:6)\n\nFAIL src/features/email/components/__tests__/EmailRecipientInput.test.jsx\n  ● Test suite failed to run\n\n    Configuration error:\n\n    Could not locate module @hooks/useClients mapped as:\n    E:\\AlexVenturesStudio\\Nexa_Manager_whit_Task_Master\\web-app\\src\\hooks\\$1.\n\n    Please check your configuration for these entries:\n    {\n      \"moduleNameMapper\": {\n        \"/^@hooks\\/(.*)$/\": \"E:\\AlexVenturesStudio\\Nexa_Manager_whit_Task_Master\\web-app\\src\\hooks\\$1\"\n      },\n      \"resolver\": undefined\n    }\n\n    \u001b[0m \u001b[90m  5 |\u001b[39m\n     \u001b[90m  6 |\u001b[39m \u001b[90m// Mock the useClients hook\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m  7 |\u001b[39m jest\u001b[33m.\u001b[39mmock(\u001b[32m'@hooks/useClients'\u001b[39m\u001b[33m,\u001b[39m () \u001b[33m=>\u001b[39m ({\n     \u001b[90m    |\u001b[39m      \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m  8 |\u001b[39m   useClients\u001b[33m:\u001b[39m () \u001b[33m=>\u001b[39m ({\n     \u001b[90m  9 |\u001b[39m     clients\u001b[33m:\u001b[39m [\n     \u001b[90m 10 |\u001b[39m       {\u001b[0m\n\n      at createNoMappedModuleFoundError (../node_modules/jest-resolve/build/index.js:1117:17)\n      at Object.mock (src/features/email/components/__tests__/EmailRecipientInput.test.jsx:7:6)\n\nFAIL src/features/email/components/__tests__/EmailListContainer.test.jsx\n  ● Test suite failed to run\n\n    Configuration error:\n\n    Could not locate module @hooks/useEmailList mapped as:\n    E:\\AlexVenturesStudio\\Nexa_Manager_whit_Task_Master\\web-app\\src\\hooks\\$1.\n\n    Please check your configuration for these entries:\n    {\n      \"moduleNameMapper\": {\n        \"/^@hooks\\/(.*)$/\": \"E:\\AlexVenturesStudio\\Nexa_Manager_whit_Task_Master\\web-app\\src\\hooks\\$1\"\n      },\n      \"resolver\": undefined\n    }\n\n    \u001b[0m \u001b[90m  5 |\u001b[39m\n     \u001b[90m  6 |\u001b[39m \u001b[90m// Mock hooks\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m  7 |\u001b[39m jest\u001b[33m.\u001b[39mmock(\u001b[32m'@hooks/useEmailList'\u001b[39m\u001b[33m,\u001b[39m () \u001b[33m=>\u001b[39m ({\n     \u001b[90m    |\u001b[39m      \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m  8 |\u001b[39m   __esModule\u001b[33m:\u001b[39m \u001b[36mtrue\u001b[39m\u001b[33m,\u001b[39m\n     \u001b[90m  9 |\u001b[39m   \u001b[36mdefault\u001b[39m\u001b[33m:\u001b[39m jest\u001b[33m.\u001b[39mfn()\u001b[33m,\u001b[39m\n     \u001b[90m 10 |\u001b[39m }))\u001b[33m;\u001b[39m\u001b[0m\n\n      at createNoMappedModuleFoundError (../node_modules/jest-resolve/build/index.js:1117:17)\n      at Object.mock (src/features/email/components/__tests__/EmailListContainer.test.jsx:7:6)\n\nFAIL src/features/email/components/__tests__/EmailSearchResults.test.jsx\n  ● Test suite failed to run\n\n    Cannot find module '../../ui/Button' from 'src/features/email/components/__tests__/EmailSearchResults.test.jsx'\n\n    \u001b[0m \u001b[90m 25 |\u001b[39m\n     \u001b[90m 26 |\u001b[39m \u001b[90m// Mock UI components\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 27 |\u001b[39m jest\u001b[33m.\u001b[39mmock(\u001b[32m'../../ui/Button'\u001b[39m\u001b[33m,\u001b[39m () \u001b[33m=>\u001b[39m ({\n     \u001b[90m    |\u001b[39m      \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 28 |\u001b[39m   \u001b[33mButton\u001b[39m\u001b[33m:\u001b[39m ({ children\u001b[33m,\u001b[39m onClick\u001b[33m,\u001b[39m disabled\u001b[33m,\u001b[39m \u001b[33m...\u001b[39mprops }) \u001b[33m=>\u001b[39m (\n     \u001b[90m 29 |\u001b[39m     \u001b[33m<\u001b[39m\u001b[33mbutton\u001b[39m onClick\u001b[33m=\u001b[39m{onClick} disabled\u001b[33m=\u001b[39m{disabled} {\u001b[33m...\u001b[39mprops}\u001b[33m>\u001b[39m\n     \u001b[90m 30 |\u001b[39m       {children}\u001b[0m\n\n      at Resolver._throwModNotFoundError (../node_modules/jest-resolve/build/index.js:863:11)\n      at Object.mock (src/features/email/components/__tests__/EmailSearchResults.test.jsx:27:6)\n\nFAIL src/features/email/components/__tests__/EmailPerformanceMonitor.test.jsx\n  ● Test suite failed to run\n\n    Configuration error:\n\n    Could not locate module @lib/emailCacheService mapped as:\n    E:\\AlexVenturesStudio\\Nexa_Manager_whit_Task_Master\\web-app\\src\\lib\\$1.\n\n    Please check your configuration for these entries:\n    {\n      \"moduleNameMapper\": {\n        \"/^@lib\\/(.*)$/\": \"E:\\AlexVenturesStudio\\Nexa_Manager_whit_Task_Master\\web-app\\src\\lib\\$1\"\n      },\n      \"resolver\": undefined\n    }\n\n    \u001b[0m \u001b[90m  7 |\u001b[39m\n     \u001b[90m  8 |\u001b[39m \u001b[90m// Mock the services\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m  9 |\u001b[39m jest\u001b[33m.\u001b[39mmock(\u001b[32m'@lib/emailCacheService'\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m    |\u001b[39m      \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 10 |\u001b[39m jest\u001b[33m.\u001b[39mmock(\u001b[32m'@lib/emailSyncService'\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m 11 |\u001b[39m\n     \u001b[90m 12 |\u001b[39m \u001b[90m// Mock Logger to prevent import issues\u001b[39m\u001b[0m\n\n      at createNoMappedModuleFoundError (../node_modules/jest-resolve/build/index.js:1117:17)\n      at Object.mock (src/features/email/components/__tests__/EmailPerformanceMonitor.test.jsx:9:6)\n\nFAIL src/features/email/components/__tests__/EmailErrorBoundary.test.jsx\n  ● Test suite failed to run\n\n    Configuration error:\n\n    Could not locate module @lib/logger mapped as:\n    E:\\AlexVenturesStudio\\Nexa_Manager_whit_Task_Master\\web-app\\src\\lib\\$1.\n\n    Please check your configuration for these entries:\n    {\n      \"moduleNameMapper\": {\n        \"/^@lib\\/(.*)$/\": \"E:\\AlexVenturesStudio\\Nexa_Manager_whit_Task_Master\\web-app\\src\\lib\\$1\"\n      },\n      \"resolver\": undefined\n    }\n\n    \u001b[0m \u001b[90m 10 |\u001b[39m\n     \u001b[90m 11 |\u001b[39m \u001b[90m// Mock dependencies\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 12 |\u001b[39m jest\u001b[33m.\u001b[39mmock(\u001b[32m'@lib/logger'\u001b[39m\u001b[33m,\u001b[39m () \u001b[33m=>\u001b[39m ({\n     \u001b[90m    |\u001b[39m      \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 13 |\u001b[39m   __esModule\u001b[33m:\u001b[39m \u001b[36mtrue\u001b[39m\u001b[33m,\u001b[39m\n     \u001b[90m 14 |\u001b[39m   \u001b[36mdefault\u001b[39m\u001b[33m:\u001b[39m {\n     \u001b[90m 15 |\u001b[39m     error\u001b[33m:\u001b[39m jest\u001b[33m.\u001b[39mfn()\u001b[33m,\u001b[39m\u001b[0m\n\n      at createNoMappedModuleFoundError (../node_modules/jest-resolve/build/index.js:1117:17)\n      at Object.mock (src/features/email/components/__tests__/EmailErrorBoundary.test.jsx:12:6)\n\nFAIL src/features/email/components/__tests__/EmailComposer.test.jsx\n  ● Test suite failed to run\n\n    Configuration error:\n\n    Could not locate module @hooks/useEmailComposer mapped as:\n    E:\\AlexVenturesStudio\\Nexa_Manager_whit_Task_Master\\web-app\\src\\hooks\\$1.\n\n    Please check your configuration for these entries:\n    {\n      \"moduleNameMapper\": {\n        \"/^@hooks\\/(.*)$/\": \"E:\\AlexVenturesStudio\\Nexa_Manager_whit_Task_Master\\web-app\\src\\hooks\\$1\"\n      },\n      \"resolver\": undefined\n    }\n\n    \u001b[0m \u001b[90m  5 |\u001b[39m\n     \u001b[90m  6 |\u001b[39m \u001b[90m// Mock the hooks and services\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m  7 |\u001b[39m jest\u001b[33m.\u001b[39mmock(\u001b[32m'@hooks/useEmailComposer'\u001b[39m\u001b[33m,\u001b[39m () \u001b[33m=>\u001b[39m ({\n     \u001b[90m    |\u001b[39m      \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m  8 |\u001b[39m   useEmailComposer\u001b[33m:\u001b[39m () \u001b[33m=>\u001b[39m ({\n     \u001b[90m  9 |\u001b[39m     emailData\u001b[33m:\u001b[39m {\n     \u001b[90m 10 |\u001b[39m       to\u001b[33m:\u001b[39m \u001b[32m''\u001b[39m\u001b[33m,\u001b[39m\u001b[0m\n\n      at createNoMappedModuleFoundError (../node_modules/jest-resolve/build/index.js:1117:17)\n      at Object.mock (src/features/email/components/__tests__/EmailComposer.test.jsx:7:6)\n\nFAIL src/features/email/components/__tests__/debug-final.test.js\n  ● Test suite failed to run\n\n    Configuration error:\n\n    Could not locate module @lib/logger mapped as:\n    E:\\AlexVenturesStudio\\Nexa_Manager_whit_Task_Master\\web-app\\src\\lib\\$1.\n\n    Please check your configuration for these entries:\n    {\n      \"moduleNameMapper\": {\n        \"/^@lib\\/(.*)$/\": \"E:\\AlexVenturesStudio\\Nexa_Manager_whit_Task_Master\\web-app\\src\\lib\\$1\"\n      },\n      \"resolver\": undefined\n    }\n\n    \u001b[0m \u001b[90m  9 |\u001b[39m\n     \u001b[90m 10 |\u001b[39m \u001b[90m// Mock dependencies\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 11 |\u001b[39m jest\u001b[33m.\u001b[39mmock(\u001b[32m'@lib/logger'\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m    |\u001b[39m      \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 12 |\u001b[39m jest\u001b[33m.\u001b[39mmock(\u001b[32m'@lib/errorReportingService'\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m 13 |\u001b[39m jest\u001b[33m.\u001b[39mmock(\u001b[32m'react-i18next'\u001b[39m\u001b[33m,\u001b[39m () \u001b[33m=>\u001b[39m ({\n     \u001b[90m 14 |\u001b[39m   useTranslation\u001b[33m:\u001b[39m () \u001b[33m=>\u001b[39m ({\u001b[0m\n\n      at createNoMappedModuleFoundError (../node_modules/jest-resolve/build/index.js:1117:17)\n      at Object.mock (src/features/email/components/__tests__/debug-final.test.js:11:6)\n\nFAIL src/features/scanner/__tests__/services/ocrService.test.ts\n  ● AIOCRService › initialization › should handle initialization failure\n\n    expect(received).rejects.toThrow()\n\n    Received promise resolved instead of rejected\n    Resolved to value: undefined\n\n    \u001b[0m \u001b[90m 131 |\u001b[39m       mockOCRProviderFactory\u001b[33m.\u001b[39minitialize\u001b[33m.\u001b[39mmockRejectedValue(\u001b[36mnew\u001b[39m \u001b[33mError\u001b[39m(\u001b[32m'Init failed'\u001b[39m))\u001b[33m;\u001b[39m\n     \u001b[90m 132 |\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 133 |\u001b[39m       \u001b[36mawait\u001b[39m expect(service\u001b[33m.\u001b[39mextractText(mockBlob))\u001b[33m.\u001b[39mrejects\u001b[33m.\u001b[39mtoThrow(\u001b[32m'OCR service initialization failed'\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m             \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 134 |\u001b[39m     })\u001b[33m;\u001b[39m\n     \u001b[90m 135 |\u001b[39m   })\u001b[33m;\u001b[39m\n     \u001b[90m 136 |\u001b[39m\u001b[0m\n\n      at expect (../node_modules/expect/build/index.js:2113:15)\n      at Object.expect (src/features/scanner/__tests__/services/ocrService.test.ts:133:13)\n\n  ● AIOCRService › extractText › should handle fallback service failure with basic extraction\n\n    expect(received).toEqual(expected) // deep equality\n\n    - Expected  - 1\n    + Received  + 4\n\n    @@ -10,9 +10,12 @@\n            \"confidence\": 0.95,\n            \"text\": \"Extracted text content\",\n          },\n        ],\n        \"confidence\": 0.95,\n    -   \"processingTime\": 1500,\n    +   \"error\": undefined,\n    +   \"processingTime\": 0,\n        \"provider\": \"openai\",\n    +   \"rawResponse\": undefined,\n    +   \"tables\": undefined,\n        \"text\": \"Extracted text content\",\n      }\n\n    \u001b[0m \u001b[90m 215 |\u001b[39m       \u001b[36mconst\u001b[39m result \u001b[33m=\u001b[39m \u001b[36mawait\u001b[39m service\u001b[33m.\u001b[39mextractText(mockBlob)\u001b[33m;\u001b[39m\n     \u001b[90m 216 |\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 217 |\u001b[39m       expect(result)\u001b[33m.\u001b[39mtoEqual(mockOCRResult)\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                      \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 218 |\u001b[39m     })\u001b[33m;\u001b[39m\n     \u001b[90m 219 |\u001b[39m\n     \u001b[90m 220 |\u001b[39m     it(\u001b[32m'should return fallback result when all providers fail'\u001b[39m\u001b[33m,\u001b[39m \u001b[36masync\u001b[39m () \u001b[33m=>\u001b[39m {\u001b[0m\n\n      at Object.toEqual (src/features/scanner/__tests__/services/ocrService.test.ts:217:22)\n\n  ● AIOCRService › error scenarios › should handle provider timeout\n\n    TypeError: Cannot read properties of undefined (reading 'error')\n\n    \u001b[0m \u001b[90m 342 |\u001b[39m       \u001b[36mconst\u001b[39m result \u001b[33m=\u001b[39m \u001b[36mawait\u001b[39m service\u001b[33m.\u001b[39mextractText(mockBlob\u001b[33m,\u001b[39m options)\u001b[33m;\u001b[39m\n     \u001b[90m 343 |\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 344 |\u001b[39m       expect(result\u001b[33m.\u001b[39merror\u001b[33m?\u001b[39m\u001b[33m.\u001b[39mcode)\u001b[33m.\u001b[39mtoBe(\u001b[32m'ALL_PROVIDERS_FAILED'\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                     \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 345 |\u001b[39m     })\u001b[33m;\u001b[39m\n     \u001b[90m 346 |\u001b[39m\n     \u001b[90m 347 |\u001b[39m     it(\u001b[32m'should handle provider not found'\u001b[39m\u001b[33m,\u001b[39m \u001b[36masync\u001b[39m () \u001b[33m=>\u001b[39m {\u001b[0m\n\n      at Object.error (src/features/scanner/__tests__/services/ocrService.test.ts:344:21)\n\n  ● AIOCRService › error scenarios › should handle provider not found\n\n    TypeError: Cannot read properties of undefined (reading 'error')\n\n    \u001b[0m \u001b[90m 351 |\u001b[39m       \u001b[36mconst\u001b[39m result \u001b[33m=\u001b[39m \u001b[36mawait\u001b[39m service\u001b[33m.\u001b[39mextractText(mockBlob)\u001b[33m;\u001b[39m\n     \u001b[90m 352 |\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 353 |\u001b[39m       expect(result\u001b[33m.\u001b[39merror\u001b[33m?\u001b[39m\u001b[33m.\u001b[39mcode)\u001b[33m.\u001b[39mtoBe(\u001b[32m'ALL_PROVIDERS_FAILED'\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                     \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 354 |\u001b[39m     })\u001b[33m;\u001b[39m\n     \u001b[90m 355 |\u001b[39m\n     \u001b[90m 356 |\u001b[39m     it(\u001b[32m'should handle provider unavailable'\u001b[39m\u001b[33m,\u001b[39m \u001b[36masync\u001b[39m () \u001b[33m=>\u001b[39m {\u001b[0m\n\n      at Object.error (src/features/scanner/__tests__/services/ocrService.test.ts:353:21)\n\n  ● AIOCRService › error scenarios › should handle provider unavailable\n\n    TypeError: Cannot read properties of undefined (reading 'error')\n\n    \u001b[0m \u001b[90m 365 |\u001b[39m       \u001b[36mconst\u001b[39m result \u001b[33m=\u001b[39m \u001b[36mawait\u001b[39m service\u001b[33m.\u001b[39mextractText(mockBlob)\u001b[33m;\u001b[39m\n     \u001b[90m 366 |\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 367 |\u001b[39m       expect(result\u001b[33m.\u001b[39merror\u001b[33m?\u001b[39m\u001b[33m.\u001b[39mcode)\u001b[33m.\u001b[39mtoBe(\u001b[32m'ALL_PROVIDERS_FAILED'\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                     \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 368 |\u001b[39m     })\u001b[33m;\u001b[39m\n     \u001b[90m 369 |\u001b[39m   })\u001b[33m;\u001b[39m\n     \u001b[90m 370 |\u001b[39m\u001b[0m\n\n      at Object.error (src/features/scanner/__tests__/services/ocrService.test.ts:367:21)\n\n  ● AIOCRService › caching behavior › should skip caching on cache service failure\n\n    expect(received).toEqual(expected) // deep equality\n\n    Expected: {\"blocks\": [{\"bounds\": {\"height\": 20, \"width\": 100, \"x\": 0, \"y\": 0}, \"confidence\": 0.95, \"text\": \"Extracted text content\"}], \"confidence\": 0.95, \"processingTime\": 1500, \"provider\": \"openai\", \"text\": \"Extracted text content\"}\n    Received: undefined\n\n    \u001b[0m \u001b[90m 387 |\u001b[39m\n     \u001b[90m 388 |\u001b[39m       \u001b[90m// Should still return result even if caching fails\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 389 |\u001b[39m       expect(result)\u001b[33m.\u001b[39mtoEqual(mockOCRResult)\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                      \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 390 |\u001b[39m     })\u001b[33m;\u001b[39m\n     \u001b[90m 391 |\u001b[39m   })\u001b[33m;\u001b[39m\n     \u001b[90m 392 |\u001b[39m\u001b[0m\n\n      at Object.toEqual (src/features/scanner/__tests__/services/ocrService.test.ts:389:22)\n\nFAIL src/features/scanner/__tests__/integration/errorHandlingRecovery.test.ts\n  ● Test suite failed to run\n\n    Missing Supabase environment variables - check deployment configuration\n\n    \u001b[0m \u001b[90m 38 |\u001b[39m\n     \u001b[90m 39 |\u001b[39m   \u001b[33mLogger\u001b[39m\u001b[33m.\u001b[39merror(errorMessage)\u001b[33m;\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 40 |\u001b[39m   \u001b[36mthrow\u001b[39m \u001b[36mnew\u001b[39m \u001b[33mError\u001b[39m(\u001b[32m'Missing Supabase environment variables - check deployment configuration'\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m    |\u001b[39m         \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 41 |\u001b[39m }\n     \u001b[90m 42 |\u001b[39m\n     \u001b[90m 43 |\u001b[39m \u001b[90m// Regular client with anon key\u001b[39m\u001b[0m\n\n      at Object.<anonymous> (src/lib/supabaseClient.js:40:9)\n      at Object.require (src/features/scanner/services/documentStorageService.ts:2:1)\n      at Object.require (src/features/scanner/services/index.ts:7:1)\n      at Object.require (src/features/scanner/__tests__/integration/errorHandlingRecovery.test.ts:1:1)\n\nFAIL src/features/scanner/__tests__/services/imageProcessingService.test.ts\n  ● Test suite failed to run\n\n    Missing Supabase environment variables - check deployment configuration\n\n    \u001b[0m \u001b[90m 38 |\u001b[39m\n     \u001b[90m 39 |\u001b[39m   \u001b[33mLogger\u001b[39m\u001b[33m.\u001b[39merror(errorMessage)\u001b[33m;\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 40 |\u001b[39m   \u001b[36mthrow\u001b[39m \u001b[36mnew\u001b[39m \u001b[33mError\u001b[39m(\u001b[32m'Missing Supabase environment variables - check deployment configuration'\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m    |\u001b[39m         \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 41 |\u001b[39m }\n     \u001b[90m 42 |\u001b[39m\n     \u001b[90m 43 |\u001b[39m \u001b[90m// Regular client with anon key\u001b[39m\u001b[0m\n\n      at Object.<anonymous> (src/lib/supabaseClient.js:40:9)\n      at Object.require (src/features/scanner/services/documentStorageService.ts:2:1)\n      at Object.require (src/features/scanner/services/index.ts:7:1)\n      at Object.require (src/features/scanner/__tests__/services/imageProcessingService.test.ts:1:1)\n\nFAIL src/features/scanner/__tests__/integration/documentScannerFlow.test.ts\n  ● Test suite failed to run\n\n    Missing Supabase environment variables - check deployment configuration\n\n    \u001b[0m \u001b[90m 38 |\u001b[39m\n     \u001b[90m 39 |\u001b[39m   \u001b[33mLogger\u001b[39m\u001b[33m.\u001b[39merror(errorMessage)\u001b[33m;\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 40 |\u001b[39m   \u001b[36mthrow\u001b[39m \u001b[36mnew\u001b[39m \u001b[33mError\u001b[39m(\u001b[32m'Missing Supabase environment variables - check deployment configuration'\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m    |\u001b[39m         \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 41 |\u001b[39m }\n     \u001b[90m 42 |\u001b[39m\n     \u001b[90m 43 |\u001b[39m \u001b[90m// Regular client with anon key\u001b[39m\u001b[0m\n\n      at Object.<anonymous> (src/lib/supabaseClient.js:40:9)\n      at Object.require (src/features/scanner/services/documentStorageService.ts:2:1)\n      at Object.require (src/features/scanner/services/index.ts:7:1)\n      at Object.require (src/features/scanner/__tests__/integration/documentScannerFlow.test.ts:1:1)\n\nFAIL src/features/financial/components/QuoteEmailSender.test.jsx\n  ● Test suite failed to run\n\n    Cannot find module '../lib/emailService' from 'src/features/financial/components/QuoteEmailSender.test.jsx'\n\n    \u001b[0m \u001b[90m  5 |\u001b[39m\n     \u001b[90m  6 |\u001b[39m \u001b[90m// Mock emailService\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m  7 |\u001b[39m jest\u001b[33m.\u001b[39mmock(\u001b[32m'../lib/emailService'\u001b[39m\u001b[33m,\u001b[39m () \u001b[33m=>\u001b[39m ({\n     \u001b[90m    |\u001b[39m      \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m  8 |\u001b[39m   isValidEmail\u001b[33m:\u001b[39m email \u001b[33m=>\u001b[39m \u001b[35m/^[^\\s@]+@[^\\s@]+\\.[^\\s@]+$/\u001b[39m\u001b[33m.\u001b[39mtest(email)\u001b[33m,\u001b[39m\n     \u001b[90m  9 |\u001b[39m   sendQuoteEmail\u001b[33m:\u001b[39m jest\u001b[33m.\u001b[39mfn(() \u001b[33m=>\u001b[39m\n     \u001b[90m 10 |\u001b[39m     \u001b[33mPromise\u001b[39m\u001b[33m.\u001b[39mresolve({\u001b[0m\n\n      at Resolver._throwModNotFoundError (../node_modules/jest-resolve/build/index.js:863:11)\n      at Object.mock (src/features/financial/components/QuoteEmailSender.test.jsx:7:6)\n\nFAIL src/features/email/components/__tests__/EmailSearchDashboard.test.jsx\n  ● Test suite failed to run\n\n    Jest encountered an unexpected token\n\n    Jest failed to parse a file. This happens e.g. when your code or its dependencies use non-standard JavaScript syntax, or when Jest is not configured to support such syntax.\n\n    Out of the box Jest supports Babel, which will be used to transform your files into valid JS based on your Babel configuration.\n\n    By default \"node_modules\" folder is ignored by transformers.\n\n    Here's what you can do:\n     • If you are trying to use ECMAScript Modules, see https://jestjs.io/docs/ecmascript-modules for how to enable it.\n     • If you are trying to use TypeScript, see https://jestjs.io/docs/getting-started#using-typescript\n     • To have some of your \"node_modules\" files transformed, you can specify a custom \"transformIgnorePatterns\" in your config.\n     • If you need a custom transformation, specify a \"transform\" option in your config.\n     • If you simply want to mock your non-JS modules (e.g. binary assets) you can stub them out with the \"moduleNameMapper\" config option.\n\n    You'll find more details and examples of these config options in the docs:\n    https://jestjs.io/docs/configuration\n    For information about custom transformations, see:\n    https://jestjs.io/docs/code-transformation\n\n    Details:\n\n    SyntaxError: E:\\AlexVenturesStudio\\Nexa_Manager_whit_Task_Master\\web-app\\src\\features\\email\\components\\__tests__\\EmailSearchDashboard.test.jsx: Bad character escape sequence. (119:50)\n\n    \u001b[0m \u001b[90m 117 |\u001b[39m\n     \u001b[90m 118 |\u001b[39m \u001b[90m// Import the mocked hooks\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 119 |\u001b[39m \u001b[36mimport\u001b[39m { useEmailSearch } \u001b[36mfrom\u001b[39m \u001b[32m'@/features\\hooks\\useEmailSearch'\u001b[39m\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                                                   \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 120 |\u001b[39m \u001b[36mimport\u001b[39m { useEmails } \u001b[36mfrom\u001b[39m \u001b[32m'@/features\\hooks\\useEmails'\u001b[39m\u001b[33m;\u001b[39m\n     \u001b[90m 121 |\u001b[39m\n     \u001b[90m 122 |\u001b[39m describe(\u001b[32m'EmailSearchDashboard'\u001b[39m\u001b[33m,\u001b[39m () \u001b[33m=>\u001b[39m {\u001b[0m\n\n      at constructor (../node_modules/@babel/parser/src/parse-error.ts:95:45)\n      at JSXParserMixin.toParseError [as raise] (../node_modules/@babel/parser/src/tokenizer/index.ts:1503:19)\n      at Object.raise [as invalidEscapeSequence] (../node_modules/@babel/parser/src/tokenizer/index.ts:1576:12)\n      at invalidEscapeSequence (../node_modules/@babel/babel-helper-string-parser/src/index.ts:293:14)\n      at readHexChar (../node_modules/@babel/babel-helper-string-parser/src/index.ts:449:22)\n      at readCodePoint (../node_modules/@babel/babel-helper-string-parser/src/index.ts:191:24)\n      at readEscapedChar (../node_modules/@babel/babel-helper-string-parser/src/index.ts:80:19)\n      at JSXParserMixin.readStringContents [as readString] (../node_modules/@babel/parser/src/tokenizer/index.ts:1336:46)\n      at JSXParserMixin.readString (../node_modules/@babel/parser/src/tokenizer/index.ts:991:14)\n      at JSXParserMixin.getTokenFromCode (../node_modules/@babel/parser/src/plugins/jsx/index.ts:631:13)\n      at JSXParserMixin.getTokenFromCode [as nextToken] (../node_modules/@babel/parser/src/tokenizer/index.ts:278:10)\n      at JSXParserMixin.nextToken [as next] (../node_modules/@babel/parser/src/tokenizer/index.ts:121:10)\n      at JSXParserMixin.next [as eatContextual] (../node_modules/@babel/parser/src/parser/util.ts:98:12)\n      at JSXParserMixin.eatContextual [as expectContextual] (../node_modules/@babel/parser/src/parser/util.ts:110:15)\n      at JSXParserMixin.expectContextual [as parseImportSpecifiersAndAfter] (../node_modules/@babel/parser/src/parser/statement.ts:3174:10)\n      at JSXParserMixin.parseImportSpecifiersAndAfter [as parseImport] (../node_modules/@babel/parser/src/parser/statement.ts:3142:17)\n      at JSXParserMixin.parseImport [as parseStatementContent] (../node_modules/@babel/parser/src/parser/statement.ts:642:25)\n      at JSXParserMixin.parseStatementContent [as parseStatementLike] (../node_modules/@babel/parser/src/parser/statement.ts:477:17)\n      at JSXParserMixin.parseStatementLike [as parseModuleItem] (../node_modules/@babel/parser/src/parser/statement.ts:414:17)\n      at JSXParserMixin.parseModuleItem [as parseBlockOrModuleBlockBody] (../node_modules/@babel/parser/src/parser/statement.ts:1438:16)\n      at JSXParserMixin.parseBlockOrModuleBlockBody [as parseBlockBody] (../node_modules/@babel/parser/src/parser/statement.ts:1412:10)\n      at JSXParserMixin.parseBlockBody [as parseProgram] (../node_modules/@babel/parser/src/parser/statement.ts:229:10)\n      at JSXParserMixin.parseProgram [as parseTopLevel] (../node_modules/@babel/parser/src/parser/statement.ts:203:25)\n      at JSXParserMixin.parseTopLevel [as parse] (../node_modules/@babel/parser/src/parser/index.ts:93:10)\n      at parse (../node_modules/@babel/parser/src/index.ts:92:38)\n      at parser (../node_modules/@babel/core/src/parser/index.ts:28:19)\n          at parser.next (<anonymous>)\n      at normalizeFile (../node_modules/@babel/core/src/transformation/normalize-file.ts:49:24)\n          at normalizeFile.next (<anonymous>)\n      at run (../node_modules/@babel/core/src/transformation/index.ts:40:36)\n          at run.next (<anonymous>)\n      at transform (../node_modules/@babel/core/src/transform.ts:29:20)\n          at transform.next (<anonymous>)\n      at evaluateSync (../node_modules/gensync/index.js:251:28)\n      at sync (../node_modules/gensync/index.js:89:14)\n      at fn (../node_modules/@babel/core/src/errors/rewrite-stack-trace.ts:99:14)\n      at transformSync (../node_modules/@babel/core/src/transform.ts:66:52)\n      at ScriptTransformer.transformSource (../node_modules/@jest/transform/build/index.js:422:31)\n      at ScriptTransformer._transformAndBuildScript (../node_modules/@jest/transform/build/index.js:519:40)\n      at ScriptTransformer.transform (../node_modules/@jest/transform/build/index.js:558:19)\n\nFAIL src/features/analytics/components/ComparativeAnalytics.test.jsx\n  ● Test suite failed to run\n\n    Configuration error:\n\n    Could not locate module @lib/financialService mapped as:\n    E:\\AlexVenturesStudio\\Nexa_Manager_whit_Task_Master\\web-app\\src\\lib\\$1.\n\n    Please check your configuration for these entries:\n    {\n      \"moduleNameMapper\": {\n        \"/^@lib\\/(.*)$/\": \"E:\\AlexVenturesStudio\\Nexa_Manager_whit_Task_Master\\web-app\\src\\lib\\$1\"\n      },\n      \"resolver\": undefined\n    }\n\n    \u001b[0m \u001b[90m  6 |\u001b[39m\n     \u001b[90m  7 |\u001b[39m \u001b[90m// Mock the services\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m  8 |\u001b[39m jest\u001b[33m.\u001b[39mmock(\u001b[32m'@lib/financialService'\u001b[39m\u001b[33m,\u001b[39m () \u001b[33m=>\u001b[39m ({\n     \u001b[90m    |\u001b[39m      \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m  9 |\u001b[39m   getFinancialOverview\u001b[33m:\u001b[39m jest\u001b[33m.\u001b[39mfn(() \u001b[33m=>\u001b[39m\n     \u001b[90m 10 |\u001b[39m     \u001b[33mPromise\u001b[39m\u001b[33m.\u001b[39mresolve({\n     \u001b[90m 11 |\u001b[39m       success\u001b[33m:\u001b[39m \u001b[36mtrue\u001b[39m\u001b[33m,\u001b[39m\u001b[0m\n\n      at createNoMappedModuleFoundError (../node_modules/jest-resolve/build/index.js:1117:17)\n      at Object.mock (src/features/analytics/components/ComparativeAnalytics.test.jsx:8:6)\n\nFAIL src/features/analytics/components/ClientAnalyticsWidgets.test.jsx\n  ● Test suite failed to run\n\n    Configuration error:\n\n    Could not locate module @lib/clientService mapped as:\n    E:\\AlexVenturesStudio\\Nexa_Manager_whit_Task_Master\\web-app\\src\\lib\\$1.\n\n    Please check your configuration for these entries:\n    {\n      \"moduleNameMapper\": {\n        \"/^@lib\\/(.*)$/\": \"E:\\AlexVenturesStudio\\Nexa_Manager_whit_Task_Master\\web-app\\src\\lib\\$1\"\n      },\n      \"resolver\": undefined\n    }\n\n    \u001b[0m \u001b[90m  6 |\u001b[39m\n     \u001b[90m  7 |\u001b[39m \u001b[90m// Mock the services\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m  8 |\u001b[39m jest\u001b[33m.\u001b[39mmock(\u001b[32m'@lib/clientService'\u001b[39m\u001b[33m,\u001b[39m () \u001b[33m=>\u001b[39m ({\n     \u001b[90m    |\u001b[39m      \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m  9 |\u001b[39m   getClients\u001b[33m:\u001b[39m jest\u001b[33m.\u001b[39mfn(() \u001b[33m=>\u001b[39m\n     \u001b[90m 10 |\u001b[39m     \u001b[33mPromise\u001b[39m\u001b[33m.\u001b[39mresolve({\n     \u001b[90m 11 |\u001b[39m       data\u001b[33m:\u001b[39m [\u001b[0m\n\n      at createNoMappedModuleFoundError (../node_modules/jest-resolve/build/index.js:1117:17)\n      at Object.mock (src/features/analytics/components/ClientAnalyticsWidgets.test.jsx:8:6)\n\nFAIL src/features/scanner/__tests__/services/batchProcessingService.test.ts\n  ● Test suite failed to run\n\n    Missing Supabase environment variables - check deployment configuration\n\n    \u001b[0m \u001b[90m 38 |\u001b[39m\n     \u001b[90m 39 |\u001b[39m   \u001b[33mLogger\u001b[39m\u001b[33m.\u001b[39merror(errorMessage)\u001b[33m;\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 40 |\u001b[39m   \u001b[36mthrow\u001b[39m \u001b[36mnew\u001b[39m \u001b[33mError\u001b[39m(\u001b[32m'Missing Supabase environment variables - check deployment configuration'\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m    |\u001b[39m         \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 41 |\u001b[39m }\n     \u001b[90m 42 |\u001b[39m\n     \u001b[90m 43 |\u001b[39m \u001b[90m// Regular client with anon key\u001b[39m\u001b[0m\n\n      at Object.<anonymous> (src/lib/supabaseClient.js:40:9)\n      at Object.require (src/features/scanner/services/documentStorageService.ts:2:1)\n      at Object.require (src/features/scanner/services/index.ts:7:1)\n      at Object.require (src/features/scanner/__tests__/services/batchProcessingService.test.ts:1:1)\n\nFAIL src/__tests__/architecture/structure-validation.test.js\n  ● Test suite failed to run\n\n    Jest encountered an unexpected token\n\n    Jest failed to parse a file. This happens e.g. when your code or its dependencies use non-standard JavaScript syntax, or when Jest is not configured to support such syntax.\n\n    Out of the box Jest supports Babel, which will be used to transform your files into valid JS based on your Babel configuration.\n\n    By default \"node_modules\" folder is ignored by transformers.\n\n    Here's what you can do:\n     • If you are trying to use ECMAScript Modules, see https://jestjs.io/docs/ecmascript-modules for how to enable it.\n     • If you are trying to use TypeScript, see https://jestjs.io/docs/getting-started#using-typescript\n     • To have some of your \"node_modules\" files transformed, you can specify a custom \"transformIgnorePatterns\" in your config.\n     • If you need a custom transformation, specify a \"transform\" option in your config.\n     • If you simply want to mock your non-JS modules (e.g. binary assets) you can stub them out with the \"moduleNameMapper\" config option.\n\n    You'll find more details and examples of these config options in the docs:\n    https://jestjs.io/docs/configuration\n    For information about custom transformations, see:\n    https://jestjs.io/docs/code-transformation\n\n    Details:\n\n    E:\\AlexVenturesStudio\\Nexa_Manager_whit_Task_Master\\web-app\\src\\__tests__\\architecture\\structure-validation.test.js:14\n    const _filename = (0, _url.fileURLToPath)(import.meta.url);\n                                                     ^^^^\n\n    SyntaxError: Cannot use 'import.meta' outside a module\n\n      at Runtime.createScriptFromCode (../node_modules/jest-runtime/build/index.js:1314:40)\n\nFAIL src/components/notifications/NotificationCenter.test.jsx\n  ● NotificationCenter › renders notification bell with unread count\n\n    No QueryClient set, use QueryClientProvider to set one\n\n    \u001b[0m \u001b[90m 26 |\u001b[39m   \u001b[36mconst\u001b[39m [connectionError\u001b[33m,\u001b[39m setConnectionError] \u001b[33m=\u001b[39m useState(\u001b[36mnull\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m 27 |\u001b[39m   \u001b[36mconst\u001b[39m [lastMessage\u001b[33m,\u001b[39m setLastMessage] \u001b[33m=\u001b[39m useState(\u001b[36mnull\u001b[39m)\u001b[33m;\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 28 |\u001b[39m   \u001b[36mconst\u001b[39m queryClient \u001b[33m=\u001b[39m useQueryClient()\u001b[33m;\u001b[39m\n     \u001b[90m    |\u001b[39m                                     \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 29 |\u001b[39m   \u001b[36mconst\u001b[39m listenersRef \u001b[33m=\u001b[39m useRef(\u001b[36mnew\u001b[39m \u001b[33mMap\u001b[39m())\u001b[33m;\u001b[39m\n     \u001b[90m 30 |\u001b[39m\n     \u001b[90m 31 |\u001b[39m   \u001b[90m/**\u001b[39m\u001b[0m\n\n      at useQueryClient (../node_modules/@tanstack/react-query/src/QueryClientProvider.tsx:18:11)\n      at useWebSocket (src/hooks/useWebSocket.js:28:37)\n      at useRealtimeNotifications (src/hooks/useRealtimeNotifications.js:20:63)\n      at NotificationCenter (src/components/notifications/NotificationCenter.jsx:39:31)\n      at Object.react-stack-bottom-frame (../node_modules/react-dom/cjs/react-dom-client.development.js:23863:20)\n      at renderWithHooks (../node_modules/react-dom/cjs/react-dom-client.development.js:5529:22)\n      at updateFunctionComponent (../node_modules/react-dom/cjs/react-dom-client.development.js:8897:19)\n      at beginWork (../node_modules/react-dom/cjs/react-dom-client.development.js:10522:18)\n      at runWithFiberInDEV (../node_modules/react-dom/cjs/react-dom-client.development.js:1522:13)\n      at performUnitOfWork (../node_modules/react-dom/cjs/react-dom-client.development.js:15140:22)\n      at workLoopSync (../node_modules/react-dom/cjs/react-dom-client.development.js:14956:41)\n      at renderRootSync (../node_modules/react-dom/cjs/react-dom-client.development.js:14936:11)\n      at performWorkOnRoot (../node_modules/react-dom/cjs/react-dom-client.development.js:14462:44)\n      at performWorkOnRootViaSchedulerTask (../node_modules/react-dom/cjs/react-dom-client.development.js:16216:7)\n      at flushActQueue (../node_modules/react/cjs/react.development.js:566:34)\n      at process.env.NODE_ENV.exports.act (../node_modules/react/cjs/react.development.js:859:10)\n      at ../node_modules/@testing-library/react/dist/act-compat.js:47:25\n      at renderRoot (../node_modules/@testing-library/react/dist/pure.js:190:26)\n      at render (../node_modules/@testing-library/react/dist/pure.js:292:10)\n      at Object.<anonymous> (src/components/notifications/NotificationCenter.test.jsx:61:11)\n\n  ● NotificationCenter › opens notification panel when bell is clicked\n\n    No QueryClient set, use QueryClientProvider to set one\n\n    \u001b[0m \u001b[90m 26 |\u001b[39m   \u001b[36mconst\u001b[39m [connectionError\u001b[33m,\u001b[39m setConnectionError] \u001b[33m=\u001b[39m useState(\u001b[36mnull\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m 27 |\u001b[39m   \u001b[36mconst\u001b[39m [lastMessage\u001b[33m,\u001b[39m setLastMessage] \u001b[33m=\u001b[39m useState(\u001b[36mnull\u001b[39m)\u001b[33m;\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 28 |\u001b[39m   \u001b[36mconst\u001b[39m queryClient \u001b[33m=\u001b[39m useQueryClient()\u001b[33m;\u001b[39m\n     \u001b[90m    |\u001b[39m                                     \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 29 |\u001b[39m   \u001b[36mconst\u001b[39m listenersRef \u001b[33m=\u001b[39m useRef(\u001b[36mnew\u001b[39m \u001b[33mMap\u001b[39m())\u001b[33m;\u001b[39m\n     \u001b[90m 30 |\u001b[39m\n     \u001b[90m 31 |\u001b[39m   \u001b[90m/**\u001b[39m\u001b[0m\n\n      at useQueryClient (../node_modules/@tanstack/react-query/src/QueryClientProvider.tsx:18:11)\n      at useWebSocket (src/hooks/useWebSocket.js:28:37)\n      at useRealtimeNotifications (src/hooks/useRealtimeNotifications.js:20:63)\n      at NotificationCenter (src/components/notifications/NotificationCenter.jsx:39:31)\n      at Object.react-stack-bottom-frame (../node_modules/react-dom/cjs/react-dom-client.development.js:23863:20)\n      at renderWithHooks (../node_modules/react-dom/cjs/react-dom-client.development.js:5529:22)\n      at updateFunctionComponent (../node_modules/react-dom/cjs/react-dom-client.development.js:8897:19)\n      at beginWork (../node_modules/react-dom/cjs/react-dom-client.development.js:10522:18)\n      at runWithFiberInDEV (../node_modules/react-dom/cjs/react-dom-client.development.js:1522:13)\n      at performUnitOfWork (../node_modules/react-dom/cjs/react-dom-client.development.js:15140:22)\n      at workLoopSync (../node_modules/react-dom/cjs/react-dom-client.development.js:14956:41)\n      at renderRootSync (../node_modules/react-dom/cjs/react-dom-client.development.js:14936:11)\n      at performWorkOnRoot (../node_modules/react-dom/cjs/react-dom-client.development.js:14462:44)\n      at performWorkOnRootViaSchedulerTask (../node_modules/react-dom/cjs/react-dom-client.development.js:16216:7)\n      at flushActQueue (../node_modules/react/cjs/react.development.js:566:34)\n      at process.env.NODE_ENV.exports.act (../node_modules/react/cjs/react.development.js:859:10)\n      at ../node_modules/@testing-library/react/dist/act-compat.js:47:25\n      at renderRoot (../node_modules/@testing-library/react/dist/pure.js:190:26)\n      at render (../node_modules/@testing-library/react/dist/pure.js:292:10)\n      at Object.<anonymous> (src/components/notifications/NotificationCenter.test.jsx:71:11)\n\n  ● NotificationCenter › displays correct number of notifications\n\n    No QueryClient set, use QueryClientProvider to set one\n\n    \u001b[0m \u001b[90m 26 |\u001b[39m   \u001b[36mconst\u001b[39m [connectionError\u001b[33m,\u001b[39m setConnectionError] \u001b[33m=\u001b[39m useState(\u001b[36mnull\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m 27 |\u001b[39m   \u001b[36mconst\u001b[39m [lastMessage\u001b[33m,\u001b[39m setLastMessage] \u001b[33m=\u001b[39m useState(\u001b[36mnull\u001b[39m)\u001b[33m;\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 28 |\u001b[39m   \u001b[36mconst\u001b[39m queryClient \u001b[33m=\u001b[39m useQueryClient()\u001b[33m;\u001b[39m\n     \u001b[90m    |\u001b[39m                                     \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 29 |\u001b[39m   \u001b[36mconst\u001b[39m listenersRef \u001b[33m=\u001b[39m useRef(\u001b[36mnew\u001b[39m \u001b[33mMap\u001b[39m())\u001b[33m;\u001b[39m\n     \u001b[90m 30 |\u001b[39m\n     \u001b[90m 31 |\u001b[39m   \u001b[90m/**\u001b[39m\u001b[0m\n\n      at useQueryClient (../node_modules/@tanstack/react-query/src/QueryClientProvider.tsx:18:11)\n      at useWebSocket (src/hooks/useWebSocket.js:28:37)\n      at useRealtimeNotifications (src/hooks/useRealtimeNotifications.js:20:63)\n      at NotificationCenter (src/components/notifications/NotificationCenter.jsx:39:31)\n      at Object.react-stack-bottom-frame (../node_modules/react-dom/cjs/react-dom-client.development.js:23863:20)\n      at renderWithHooks (../node_modules/react-dom/cjs/react-dom-client.development.js:5529:22)\n      at updateFunctionComponent (../node_modules/react-dom/cjs/react-dom-client.development.js:8897:19)\n      at beginWork (../node_modules/react-dom/cjs/react-dom-client.development.js:10522:18)\n      at runWithFiberInDEV (../node_modules/react-dom/cjs/react-dom-client.development.js:1522:13)\n      at performUnitOfWork (../node_modules/react-dom/cjs/react-dom-client.development.js:15140:22)\n      at workLoopSync (../node_modules/react-dom/cjs/react-dom-client.development.js:14956:41)\n      at renderRootSync (../node_modules/react-dom/cjs/react-dom-client.development.js:14936:11)\n      at performWorkOnRoot (../node_modules/react-dom/cjs/react-dom-client.development.js:14462:44)\n      at performWorkOnRootViaSchedulerTask (../node_modules/react-dom/cjs/react-dom-client.development.js:16216:7)\n      at flushActQueue (../node_modules/react/cjs/react.development.js:566:34)\n      at process.env.NODE_ENV.exports.act (../node_modules/react/cjs/react.development.js:859:10)\n      at ../node_modules/@testing-library/react/dist/act-compat.js:47:25\n      at renderRoot (../node_modules/@testing-library/react/dist/pure.js:190:26)\n      at render (../node_modules/@testing-library/react/dist/pure.js:292:10)\n      at Object.<anonymous> (src/components/notifications/NotificationCenter.test.jsx:81:11)\n\n  ● NotificationCenter › filters notifications by type\n\n    No QueryClient set, use QueryClientProvider to set one\n\n    \u001b[0m \u001b[90m 26 |\u001b[39m   \u001b[36mconst\u001b[39m [connectionError\u001b[33m,\u001b[39m setConnectionError] \u001b[33m=\u001b[39m useState(\u001b[36mnull\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m 27 |\u001b[39m   \u001b[36mconst\u001b[39m [lastMessage\u001b[33m,\u001b[39m setLastMessage] \u001b[33m=\u001b[39m useState(\u001b[36mnull\u001b[39m)\u001b[33m;\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 28 |\u001b[39m   \u001b[36mconst\u001b[39m queryClient \u001b[33m=\u001b[39m useQueryClient()\u001b[33m;\u001b[39m\n     \u001b[90m    |\u001b[39m                                     \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 29 |\u001b[39m   \u001b[36mconst\u001b[39m listenersRef \u001b[33m=\u001b[39m useRef(\u001b[36mnew\u001b[39m \u001b[33mMap\u001b[39m())\u001b[33m;\u001b[39m\n     \u001b[90m 30 |\u001b[39m\n     \u001b[90m 31 |\u001b[39m   \u001b[90m/**\u001b[39m\u001b[0m\n\n      at useQueryClient (../node_modules/@tanstack/react-query/src/QueryClientProvider.tsx:18:11)\n      at useWebSocket (src/hooks/useWebSocket.js:28:37)\n      at useRealtimeNotifications (src/hooks/useRealtimeNotifications.js:20:63)\n      at NotificationCenter (src/components/notifications/NotificationCenter.jsx:39:31)\n      at Object.react-stack-bottom-frame (../node_modules/react-dom/cjs/react-dom-client.development.js:23863:20)\n      at renderWithHooks (../node_modules/react-dom/cjs/react-dom-client.development.js:5529:22)\n      at updateFunctionComponent (../node_modules/react-dom/cjs/react-dom-client.development.js:8897:19)\n      at beginWork (../node_modules/react-dom/cjs/react-dom-client.development.js:10522:18)\n      at runWithFiberInDEV (../node_modules/react-dom/cjs/react-dom-client.development.js:1522:13)\n      at performUnitOfWork (../node_modules/react-dom/cjs/react-dom-client.development.js:15140:22)\n      at workLoopSync (../node_modules/react-dom/cjs/react-dom-client.development.js:14956:41)\n      at renderRootSync (../node_modules/react-dom/cjs/react-dom-client.development.js:14936:11)\n      at performWorkOnRoot (../node_modules/react-dom/cjs/react-dom-client.development.js:14462:44)\n      at performWorkOnRootViaSchedulerTask (../node_modules/react-dom/cjs/react-dom-client.development.js:16216:7)\n      at flushActQueue (../node_modules/react/cjs/react.development.js:566:34)\n      at process.env.NODE_ENV.exports.act (../node_modules/react/cjs/react.development.js:859:10)\n      at ../node_modules/@testing-library/react/dist/act-compat.js:47:25\n      at renderRoot (../node_modules/@testing-library/react/dist/pure.js:190:26)\n      at render (../node_modules/@testing-library/react/dist/pure.js:292:10)\n      at Object.<anonymous> (src/components/notifications/NotificationCenter.test.jsx:91:11)\n\n  ● NotificationCenter › filters unread notifications\n\n    No QueryClient set, use QueryClientProvider to set one\n\n    \u001b[0m \u001b[90m 26 |\u001b[39m   \u001b[36mconst\u001b[39m [connectionError\u001b[33m,\u001b[39m setConnectionError] \u001b[33m=\u001b[39m useState(\u001b[36mnull\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m 27 |\u001b[39m   \u001b[36mconst\u001b[39m [lastMessage\u001b[33m,\u001b[39m setLastMessage] \u001b[33m=\u001b[39m useState(\u001b[36mnull\u001b[39m)\u001b[33m;\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 28 |\u001b[39m   \u001b[36mconst\u001b[39m queryClient \u001b[33m=\u001b[39m useQueryClient()\u001b[33m;\u001b[39m\n     \u001b[90m    |\u001b[39m                                     \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 29 |\u001b[39m   \u001b[36mconst\u001b[39m listenersRef \u001b[33m=\u001b[39m useRef(\u001b[36mnew\u001b[39m \u001b[33mMap\u001b[39m())\u001b[33m;\u001b[39m\n     \u001b[90m 30 |\u001b[39m\n     \u001b[90m 31 |\u001b[39m   \u001b[90m/**\u001b[39m\u001b[0m\n\n      at useQueryClient (../node_modules/@tanstack/react-query/src/QueryClientProvider.tsx:18:11)\n      at useWebSocket (src/hooks/useWebSocket.js:28:37)\n      at useRealtimeNotifications (src/hooks/useRealtimeNotifications.js:20:63)\n      at NotificationCenter (src/components/notifications/NotificationCenter.jsx:39:31)\n      at Object.react-stack-bottom-frame (../node_modules/react-dom/cjs/react-dom-client.development.js:23863:20)\n      at renderWithHooks (../node_modules/react-dom/cjs/react-dom-client.development.js:5529:22)\n      at updateFunctionComponent (../node_modules/react-dom/cjs/react-dom-client.development.js:8897:19)\n      at beginWork (../node_modules/react-dom/cjs/react-dom-client.development.js:10522:18)\n      at runWithFiberInDEV (../node_modules/react-dom/cjs/react-dom-client.development.js:1522:13)\n      at performUnitOfWork (../node_modules/react-dom/cjs/react-dom-client.development.js:15140:22)\n      at workLoopSync (../node_modules/react-dom/cjs/react-dom-client.development.js:14956:41)\n      at renderRootSync (../node_modules/react-dom/cjs/react-dom-client.development.js:14936:11)\n      at performWorkOnRoot (../node_modules/react-dom/cjs/react-dom-client.development.js:14462:44)\n      at performWorkOnRootViaSchedulerTask (../node_modules/react-dom/cjs/react-dom-client.development.js:16216:7)\n      at flushActQueue (../node_modules/react/cjs/react.development.js:566:34)\n      at process.env.NODE_ENV.exports.act (../node_modules/react/cjs/react.development.js:859:10)\n      at ../node_modules/@testing-library/react/dist/act-compat.js:47:25\n      at renderRoot (../node_modules/@testing-library/react/dist/pure.js:190:26)\n      at render (../node_modules/@testing-library/react/dist/pure.js:292:10)\n      at Object.<anonymous> (src/components/notifications/NotificationCenter.test.jsx:107:11)\n\n  ● NotificationCenter › marks notification as read when clicked\n\n    No QueryClient set, use QueryClientProvider to set one\n\n    \u001b[0m \u001b[90m 26 |\u001b[39m   \u001b[36mconst\u001b[39m [connectionError\u001b[33m,\u001b[39m setConnectionError] \u001b[33m=\u001b[39m useState(\u001b[36mnull\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m 27 |\u001b[39m   \u001b[36mconst\u001b[39m [lastMessage\u001b[33m,\u001b[39m setLastMessage] \u001b[33m=\u001b[39m useState(\u001b[36mnull\u001b[39m)\u001b[33m;\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 28 |\u001b[39m   \u001b[36mconst\u001b[39m queryClient \u001b[33m=\u001b[39m useQueryClient()\u001b[33m;\u001b[39m\n     \u001b[90m    |\u001b[39m                                     \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 29 |\u001b[39m   \u001b[36mconst\u001b[39m listenersRef \u001b[33m=\u001b[39m useRef(\u001b[36mnew\u001b[39m \u001b[33mMap\u001b[39m())\u001b[33m;\u001b[39m\n     \u001b[90m 30 |\u001b[39m\n     \u001b[90m 31 |\u001b[39m   \u001b[90m/**\u001b[39m\u001b[0m\n\n      at useQueryClient (../node_modules/@tanstack/react-query/src/QueryClientProvider.tsx:18:11)\n      at useWebSocket (src/hooks/useWebSocket.js:28:37)\n      at useRealtimeNotifications (src/hooks/useRealtimeNotifications.js:20:63)\n      at NotificationCenter (src/components/notifications/NotificationCenter.jsx:39:31)\n      at Object.react-stack-bottom-frame (../node_modules/react-dom/cjs/react-dom-client.development.js:23863:20)\n      at renderWithHooks (../node_modules/react-dom/cjs/react-dom-client.development.js:5529:22)\n      at updateFunctionComponent (../node_modules/react-dom/cjs/react-dom-client.development.js:8897:19)\n      at beginWork (../node_modules/react-dom/cjs/react-dom-client.development.js:10522:18)\n      at runWithFiberInDEV (../node_modules/react-dom/cjs/react-dom-client.development.js:1522:13)\n      at performUnitOfWork (../node_modules/react-dom/cjs/react-dom-client.development.js:15140:22)\n      at workLoopSync (../node_modules/react-dom/cjs/react-dom-client.development.js:14956:41)\n      at renderRootSync (../node_modules/react-dom/cjs/react-dom-client.development.js:14936:11)\n      at performWorkOnRoot (../node_modules/react-dom/cjs/react-dom-client.development.js:14462:44)\n      at performWorkOnRootViaSchedulerTask (../node_modules/react-dom/cjs/react-dom-client.development.js:16216:7)\n      at flushActQueue (../node_modules/react/cjs/react.development.js:566:34)\n      at process.env.NODE_ENV.exports.act (../node_modules/react/cjs/react.development.js:859:10)\n      at ../node_modules/@testing-library/react/dist/act-compat.js:47:25\n      at renderRoot (../node_modules/@testing-library/react/dist/pure.js:190:26)\n      at render (../node_modules/@testing-library/react/dist/pure.js:292:10)\n      at Object.<anonymous> (src/components/notifications/NotificationCenter.test.jsx:122:11)\n\n  ● NotificationCenter › marks all notifications as read\n\n    No QueryClient set, use QueryClientProvider to set one\n\n    \u001b[0m \u001b[90m 26 |\u001b[39m   \u001b[36mconst\u001b[39m [connectionError\u001b[33m,\u001b[39m setConnectionError] \u001b[33m=\u001b[39m useState(\u001b[36mnull\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m 27 |\u001b[39m   \u001b[36mconst\u001b[39m [lastMessage\u001b[33m,\u001b[39m setLastMessage] \u001b[33m=\u001b[39m useState(\u001b[36mnull\u001b[39m)\u001b[33m;\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 28 |\u001b[39m   \u001b[36mconst\u001b[39m queryClient \u001b[33m=\u001b[39m useQueryClient()\u001b[33m;\u001b[39m\n     \u001b[90m    |\u001b[39m                                     \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 29 |\u001b[39m   \u001b[36mconst\u001b[39m listenersRef \u001b[33m=\u001b[39m useRef(\u001b[36mnew\u001b[39m \u001b[33mMap\u001b[39m())\u001b[33m;\u001b[39m\n     \u001b[90m 30 |\u001b[39m\n     \u001b[90m 31 |\u001b[39m   \u001b[90m/**\u001b[39m\u001b[0m\n\n      at useQueryClient (../node_modules/@tanstack/react-query/src/QueryClientProvider.tsx:18:11)\n      at useWebSocket (src/hooks/useWebSocket.js:28:37)\n      at useRealtimeNotifications (src/hooks/useRealtimeNotifications.js:20:63)\n      at NotificationCenter (src/components/notifications/NotificationCenter.jsx:39:31)\n      at Object.react-stack-bottom-frame (../node_modules/react-dom/cjs/react-dom-client.development.js:23863:20)\n      at renderWithHooks (../node_modules/react-dom/cjs/react-dom-client.development.js:5529:22)\n      at updateFunctionComponent (../node_modules/react-dom/cjs/react-dom-client.development.js:8897:19)\n      at beginWork (../node_modules/react-dom/cjs/react-dom-client.development.js:10522:18)\n      at runWithFiberInDEV (../node_modules/react-dom/cjs/react-dom-client.development.js:1522:13)\n      at performUnitOfWork (../node_modules/react-dom/cjs/react-dom-client.development.js:15140:22)\n      at workLoopSync (../node_modules/react-dom/cjs/react-dom-client.development.js:14956:41)\n      at renderRootSync (../node_modules/react-dom/cjs/react-dom-client.development.js:14936:11)\n      at performWorkOnRoot (../node_modules/react-dom/cjs/react-dom-client.development.js:14462:44)\n      at performWorkOnRootViaSchedulerTask (../node_modules/react-dom/cjs/react-dom-client.development.js:16216:7)\n      at flushActQueue (../node_modules/react/cjs/react.development.js:566:34)\n      at process.env.NODE_ENV.exports.act (../node_modules/react/cjs/react.development.js:859:10)\n      at ../node_modules/@testing-library/react/dist/act-compat.js:47:25\n      at renderRoot (../node_modules/@testing-library/react/dist/pure.js:190:26)\n      at render (../node_modules/@testing-library/react/dist/pure.js:292:10)\n      at Object.<anonymous> (src/components/notifications/NotificationCenter.test.jsx:134:11)\n\n  ● NotificationCenter › removes notification when delete button is clicked\n\n    No QueryClient set, use QueryClientProvider to set one\n\n    \u001b[0m \u001b[90m 26 |\u001b[39m   \u001b[36mconst\u001b[39m [connectionError\u001b[33m,\u001b[39m setConnectionError] \u001b[33m=\u001b[39m useState(\u001b[36mnull\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m 27 |\u001b[39m   \u001b[36mconst\u001b[39m [lastMessage\u001b[33m,\u001b[39m setLastMessage] \u001b[33m=\u001b[39m useState(\u001b[36mnull\u001b[39m)\u001b[33m;\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 28 |\u001b[39m   \u001b[36mconst\u001b[39m queryClient \u001b[33m=\u001b[39m useQueryClient()\u001b[33m;\u001b[39m\n     \u001b[90m    |\u001b[39m                                     \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 29 |\u001b[39m   \u001b[36mconst\u001b[39m listenersRef \u001b[33m=\u001b[39m useRef(\u001b[36mnew\u001b[39m \u001b[33mMap\u001b[39m())\u001b[33m;\u001b[39m\n     \u001b[90m 30 |\u001b[39m\n     \u001b[90m 31 |\u001b[39m   \u001b[90m/**\u001b[39m\u001b[0m\n\n      at useQueryClient (../node_modules/@tanstack/react-query/src/QueryClientProvider.tsx:18:11)\n      at useWebSocket (src/hooks/useWebSocket.js:28:37)\n      at useRealtimeNotifications (src/hooks/useRealtimeNotifications.js:20:63)\n      at NotificationCenter (src/components/notifications/NotificationCenter.jsx:39:31)\n      at Object.react-stack-bottom-frame (../node_modules/react-dom/cjs/react-dom-client.development.js:23863:20)\n      at renderWithHooks (../node_modules/react-dom/cjs/react-dom-client.development.js:5529:22)\n      at updateFunctionComponent (../node_modules/react-dom/cjs/react-dom-client.development.js:8897:19)\n      at beginWork (../node_modules/react-dom/cjs/react-dom-client.development.js:10522:18)\n      at runWithFiberInDEV (../node_modules/react-dom/cjs/react-dom-client.development.js:1522:13)\n      at performUnitOfWork (../node_modules/react-dom/cjs/react-dom-client.development.js:15140:22)\n      at workLoopSync (../node_modules/react-dom/cjs/react-dom-client.development.js:14956:41)\n      at renderRootSync (../node_modules/react-dom/cjs/react-dom-client.development.js:14936:11)\n      at performWorkOnRoot (../node_modules/react-dom/cjs/react-dom-client.development.js:14462:44)\n      at performWorkOnRootViaSchedulerTask (../node_modules/react-dom/cjs/react-dom-client.development.js:16216:7)\n      at flushActQueue (../node_modules/react/cjs/react.development.js:566:34)\n      at process.env.NODE_ENV.exports.act (../node_modules/react/cjs/react.development.js:859:10)\n      at ../node_modules/@testing-library/react/dist/act-compat.js:47:25\n      at renderRoot (../node_modules/@testing-library/react/dist/pure.js:190:26)\n      at render (../node_modules/@testing-library/react/dist/pure.js:292:10)\n      at Object.<anonymous> (src/components/notifications/NotificationCenter.test.jsx:146:11)\n\n  ● NotificationCenter › clears all notifications\n\n    No QueryClient set, use QueryClientProvider to set one\n\n    \u001b[0m \u001b[90m 26 |\u001b[39m   \u001b[36mconst\u001b[39m [connectionError\u001b[33m,\u001b[39m setConnectionError] \u001b[33m=\u001b[39m useState(\u001b[36mnull\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m 27 |\u001b[39m   \u001b[36mconst\u001b[39m [lastMessage\u001b[33m,\u001b[39m setLastMessage] \u001b[33m=\u001b[39m useState(\u001b[36mnull\u001b[39m)\u001b[33m;\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 28 |\u001b[39m   \u001b[36mconst\u001b[39m queryClient \u001b[33m=\u001b[39m useQueryClient()\u001b[33m;\u001b[39m\n     \u001b[90m    |\u001b[39m                                     \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 29 |\u001b[39m   \u001b[36mconst\u001b[39m listenersRef \u001b[33m=\u001b[39m useRef(\u001b[36mnew\u001b[39m \u001b[33mMap\u001b[39m())\u001b[33m;\u001b[39m\n     \u001b[90m 30 |\u001b[39m\n     \u001b[90m 31 |\u001b[39m   \u001b[90m/**\u001b[39m\u001b[0m\n\n      at useQueryClient (../node_modules/@tanstack/react-query/src/QueryClientProvider.tsx:18:11)\n      at useWebSocket (src/hooks/useWebSocket.js:28:37)\n      at useRealtimeNotifications (src/hooks/useRealtimeNotifications.js:20:63)\n      at NotificationCenter (src/components/notifications/NotificationCenter.jsx:39:31)\n      at Object.react-stack-bottom-frame (../node_modules/react-dom/cjs/react-dom-client.development.js:23863:20)\n      at renderWithHooks (../node_modules/react-dom/cjs/react-dom-client.development.js:5529:22)\n      at updateFunctionComponent (../node_modules/react-dom/cjs/react-dom-client.development.js:8897:19)\n      at beginWork (../node_modules/react-dom/cjs/react-dom-client.development.js:10522:18)\n      at runWithFiberInDEV (../node_modules/react-dom/cjs/react-dom-client.development.js:1522:13)\n      at performUnitOfWork (../node_modules/react-dom/cjs/react-dom-client.development.js:15140:22)\n      at workLoopSync (../node_modules/react-dom/cjs/react-dom-client.development.js:14956:41)\n      at renderRootSync (../node_modules/react-dom/cjs/react-dom-client.development.js:14936:11)\n      at performWorkOnRoot (../node_modules/react-dom/cjs/react-dom-client.development.js:14462:44)\n      at performWorkOnRootViaSchedulerTask (../node_modules/react-dom/cjs/react-dom-client.development.js:16216:7)\n      at flushActQueue (../node_modules/react/cjs/react.development.js:566:34)\n      at process.env.NODE_ENV.exports.act (../node_modules/react/cjs/react.development.js:859:10)\n      at ../node_modules/@testing-library/react/dist/act-compat.js:47:25\n      at renderRoot (../node_modules/@testing-library/react/dist/pure.js:190:26)\n      at render (../node_modules/@testing-library/react/dist/pure.js:292:10)\n      at Object.<anonymous> (src/components/notifications/NotificationCenter.test.jsx:158:11)\n\n  ● NotificationCenter › displays correct notification icons\n\n    No QueryClient set, use QueryClientProvider to set one\n\n    \u001b[0m \u001b[90m 26 |\u001b[39m   \u001b[36mconst\u001b[39m [connectionError\u001b[33m,\u001b[39m setConnectionError] \u001b[33m=\u001b[39m useState(\u001b[36mnull\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m 27 |\u001b[39m   \u001b[36mconst\u001b[39m [lastMessage\u001b[33m,\u001b[39m setLastMessage] \u001b[33m=\u001b[39m useState(\u001b[36mnull\u001b[39m)\u001b[33m;\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 28 |\u001b[39m   \u001b[36mconst\u001b[39m queryClient \u001b[33m=\u001b[39m useQueryClient()\u001b[33m;\u001b[39m\n     \u001b[90m    |\u001b[39m                                     \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 29 |\u001b[39m   \u001b[36mconst\u001b[39m listenersRef \u001b[33m=\u001b[39m useRef(\u001b[36mnew\u001b[39m \u001b[33mMap\u001b[39m())\u001b[33m;\u001b[39m\n     \u001b[90m 30 |\u001b[39m\n     \u001b[90m 31 |\u001b[39m   \u001b[90m/**\u001b[39m\u001b[0m\n\n      at useQueryClient (../node_modules/@tanstack/react-query/src/QueryClientProvider.tsx:18:11)\n      at useWebSocket (src/hooks/useWebSocket.js:28:37)\n      at useRealtimeNotifications (src/hooks/useRealtimeNotifications.js:20:63)\n      at NotificationCenter (src/components/notifications/NotificationCenter.jsx:39:31)\n      at Object.react-stack-bottom-frame (../node_modules/react-dom/cjs/react-dom-client.development.js:23863:20)\n      at renderWithHooks (../node_modules/react-dom/cjs/react-dom-client.development.js:5529:22)\n      at updateFunctionComponent (../node_modules/react-dom/cjs/react-dom-client.development.js:8897:19)\n      at beginWork (../node_modules/react-dom/cjs/react-dom-client.development.js:10522:18)\n      at runWithFiberInDEV (../node_modules/react-dom/cjs/react-dom-client.development.js:1522:13)\n      at performUnitOfWork (../node_modules/react-dom/cjs/react-dom-client.development.js:15140:22)\n      at workLoopSync (../node_modules/react-dom/cjs/react-dom-client.development.js:14956:41)\n      at renderRootSync (../node_modules/react-dom/cjs/react-dom-client.development.js:14936:11)\n      at performWorkOnRoot (../node_modules/react-dom/cjs/react-dom-client.development.js:14462:44)\n      at performWorkOnRootViaSchedulerTask (../node_modules/react-dom/cjs/react-dom-client.development.js:16216:7)\n      at flushActQueue (../node_modules/react/cjs/react.development.js:566:34)\n      at process.env.NODE_ENV.exports.act (../node_modules/react/cjs/react.development.js:859:10)\n      at ../node_modules/@testing-library/react/dist/act-compat.js:47:25\n      at renderRoot (../node_modules/@testing-library/react/dist/pure.js:190:26)\n      at render (../node_modules/@testing-library/react/dist/pure.js:292:10)\n      at Object.<anonymous> (src/components/notifications/NotificationCenter.test.jsx:170:11)\n\n  ● NotificationCenter › displays relative time correctly\n\n    No QueryClient set, use QueryClientProvider to set one\n\n    \u001b[0m \u001b[90m 26 |\u001b[39m   \u001b[36mconst\u001b[39m [connectionError\u001b[33m,\u001b[39m setConnectionError] \u001b[33m=\u001b[39m useState(\u001b[36mnull\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m 27 |\u001b[39m   \u001b[36mconst\u001b[39m [lastMessage\u001b[33m,\u001b[39m setLastMessage] \u001b[33m=\u001b[39m useState(\u001b[36mnull\u001b[39m)\u001b[33m;\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 28 |\u001b[39m   \u001b[36mconst\u001b[39m queryClient \u001b[33m=\u001b[39m useQueryClient()\u001b[33m;\u001b[39m\n     \u001b[90m    |\u001b[39m                                     \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 29 |\u001b[39m   \u001b[36mconst\u001b[39m listenersRef \u001b[33m=\u001b[39m useRef(\u001b[36mnew\u001b[39m \u001b[33mMap\u001b[39m())\u001b[33m;\u001b[39m\n     \u001b[90m 30 |\u001b[39m\n     \u001b[90m 31 |\u001b[39m   \u001b[90m/**\u001b[39m\u001b[0m\n\n      at useQueryClient (../node_modules/@tanstack/react-query/src/QueryClientProvider.tsx:18:11)\n      at useWebSocket (src/hooks/useWebSocket.js:28:37)\n      at useRealtimeNotifications (src/hooks/useRealtimeNotifications.js:20:63)\n      at NotificationCenter (src/components/notifications/NotificationCenter.jsx:39:31)\n      at Object.react-stack-bottom-frame (../node_modules/react-dom/cjs/react-dom-client.development.js:23863:20)\n      at renderWithHooks (../node_modules/react-dom/cjs/react-dom-client.development.js:5529:22)\n      at updateFunctionComponent (../node_modules/react-dom/cjs/react-dom-client.development.js:8897:19)\n      at beginWork (../node_modules/react-dom/cjs/react-dom-client.development.js:10522:18)\n      at runWithFiberInDEV (../node_modules/react-dom/cjs/react-dom-client.development.js:1522:13)\n      at performUnitOfWork (../node_modules/react-dom/cjs/react-dom-client.development.js:15140:22)\n      at workLoopSync (../node_modules/react-dom/cjs/react-dom-client.development.js:14956:41)\n      at renderRootSync (../node_modules/react-dom/cjs/react-dom-client.development.js:14936:11)\n      at performWorkOnRoot (../node_modules/react-dom/cjs/react-dom-client.development.js:14462:44)\n      at performWorkOnRootViaSchedulerTask (../node_modules/react-dom/cjs/react-dom-client.development.js:16216:7)\n      at flushActQueue (../node_modules/react/cjs/react.development.js:566:34)\n      at process.env.NODE_ENV.exports.act (../node_modules/react/cjs/react.development.js:859:10)\n      at ../node_modules/@testing-library/react/dist/act-compat.js:47:25\n      at renderRoot (../node_modules/@testing-library/react/dist/pure.js:190:26)\n      at render (../node_modules/@testing-library/react/dist/pure.js:292:10)\n      at Object.<anonymous> (src/components/notifications/NotificationCenter.test.jsx:182:11)\n\n  ● NotificationCenter › shows empty state when no notifications\n\n    No QueryClient set, use QueryClientProvider to set one\n\n    \u001b[0m \u001b[90m 26 |\u001b[39m   \u001b[36mconst\u001b[39m [connectionError\u001b[33m,\u001b[39m setConnectionError] \u001b[33m=\u001b[39m useState(\u001b[36mnull\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m 27 |\u001b[39m   \u001b[36mconst\u001b[39m [lastMessage\u001b[33m,\u001b[39m setLastMessage] \u001b[33m=\u001b[39m useState(\u001b[36mnull\u001b[39m)\u001b[33m;\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 28 |\u001b[39m   \u001b[36mconst\u001b[39m queryClient \u001b[33m=\u001b[39m useQueryClient()\u001b[33m;\u001b[39m\n     \u001b[90m    |\u001b[39m                                     \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 29 |\u001b[39m   \u001b[36mconst\u001b[39m listenersRef \u001b[33m=\u001b[39m useRef(\u001b[36mnew\u001b[39m \u001b[33mMap\u001b[39m())\u001b[33m;\u001b[39m\n     \u001b[90m 30 |\u001b[39m\n     \u001b[90m 31 |\u001b[39m   \u001b[90m/**\u001b[39m\u001b[0m\n\n      at useQueryClient (../node_modules/@tanstack/react-query/src/QueryClientProvider.tsx:18:11)\n      at useWebSocket (src/hooks/useWebSocket.js:28:37)\n      at useRealtimeNotifications (src/hooks/useRealtimeNotifications.js:20:63)\n      at NotificationCenter (src/components/notifications/NotificationCenter.jsx:39:31)\n      at Object.react-stack-bottom-frame (../node_modules/react-dom/cjs/react-dom-client.development.js:23863:20)\n      at renderWithHooks (../node_modules/react-dom/cjs/react-dom-client.development.js:5529:22)\n      at updateFunctionComponent (../node_modules/react-dom/cjs/react-dom-client.development.js:8897:19)\n      at beginWork (../node_modules/react-dom/cjs/react-dom-client.development.js:10522:18)\n      at runWithFiberInDEV (../node_modules/react-dom/cjs/react-dom-client.development.js:1522:13)\n      at performUnitOfWork (../node_modules/react-dom/cjs/react-dom-client.development.js:15140:22)\n      at workLoopSync (../node_modules/react-dom/cjs/react-dom-client.development.js:14956:41)\n      at renderRootSync (../node_modules/react-dom/cjs/react-dom-client.development.js:14936:11)\n      at performWorkOnRoot (../node_modules/react-dom/cjs/react-dom-client.development.js:14462:44)\n      at performWorkOnRootViaSchedulerTask (../node_modules/react-dom/cjs/react-dom-client.development.js:16216:7)\n      at flushActQueue (../node_modules/react/cjs/react.development.js:566:34)\n      at process.env.NODE_ENV.exports.act (../node_modules/react/cjs/react.development.js:859:10)\n      at ../node_modules/@testing-library/react/dist/act-compat.js:47:25\n      at renderRoot (../node_modules/@testing-library/react/dist/pure.js:190:26)\n      at render (../node_modules/@testing-library/react/dist/pure.js:292:10)\n      at Object.<anonymous> (src/components/notifications/NotificationCenter.test.jsx:199:11)\n\n  ● NotificationCenter › closes panel when clicking outside\n\n    No QueryClient set, use QueryClientProvider to set one\n\n    \u001b[0m \u001b[90m 26 |\u001b[39m   \u001b[36mconst\u001b[39m [connectionError\u001b[33m,\u001b[39m setConnectionError] \u001b[33m=\u001b[39m useState(\u001b[36mnull\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m 27 |\u001b[39m   \u001b[36mconst\u001b[39m [lastMessage\u001b[33m,\u001b[39m setLastMessage] \u001b[33m=\u001b[39m useState(\u001b[36mnull\u001b[39m)\u001b[33m;\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 28 |\u001b[39m   \u001b[36mconst\u001b[39m queryClient \u001b[33m=\u001b[39m useQueryClient()\u001b[33m;\u001b[39m\n     \u001b[90m    |\u001b[39m                                     \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 29 |\u001b[39m   \u001b[36mconst\u001b[39m listenersRef \u001b[33m=\u001b[39m useRef(\u001b[36mnew\u001b[39m \u001b[33mMap\u001b[39m())\u001b[33m;\u001b[39m\n     \u001b[90m 30 |\u001b[39m\n     \u001b[90m 31 |\u001b[39m   \u001b[90m/**\u001b[39m\u001b[0m\n\n      at useQueryClient (../node_modules/@tanstack/react-query/src/QueryClientProvider.tsx:18:11)\n      at useWebSocket (src/hooks/useWebSocket.js:28:37)\n      at useRealtimeNotifications (src/hooks/useRealtimeNotifications.js:20:63)\n      at NotificationCenter (src/components/notifications/NotificationCenter.jsx:39:31)\n      at Object.react-stack-bottom-frame (../node_modules/react-dom/cjs/react-dom-client.development.js:23863:20)\n      at renderWithHooks (../node_modules/react-dom/cjs/react-dom-client.development.js:5529:22)\n      at updateFunctionComponent (../node_modules/react-dom/cjs/react-dom-client.development.js:8897:19)\n      at beginWork (../node_modules/react-dom/cjs/react-dom-client.development.js:10522:18)\n      at runWithFiberInDEV (../node_modules/react-dom/cjs/react-dom-client.development.js:1522:13)\n      at performUnitOfWork (../node_modules/react-dom/cjs/react-dom-client.development.js:15140:22)\n      at workLoopSync (../node_modules/react-dom/cjs/react-dom-client.development.js:14956:41)\n      at renderRootSync (../node_modules/react-dom/cjs/react-dom-client.development.js:14936:11)\n      at performWorkOnRoot (../node_modules/react-dom/cjs/react-dom-client.development.js:14462:44)\n      at performWorkOnRootViaSchedulerTask (../node_modules/react-dom/cjs/react-dom-client.development.js:16216:7)\n      at flushActQueue (../node_modules/react/cjs/react.development.js:566:34)\n      at process.env.NODE_ENV.exports.act (../node_modules/react/cjs/react.development.js:859:10)\n      at ../node_modules/@testing-library/react/dist/act-compat.js:47:25\n      at renderRoot (../node_modules/@testing-library/react/dist/pure.js:190:26)\n      at render (../node_modules/@testing-library/react/dist/pure.js:292:10)\n      at Object.<anonymous> (src/components/notifications/NotificationCenter.test.jsx:208:11)\n\n  ● NotificationCenter › handles keyboard navigation\n\n    No QueryClient set, use QueryClientProvider to set one\n\n    \u001b[0m \u001b[90m 26 |\u001b[39m   \u001b[36mconst\u001b[39m [connectionError\u001b[33m,\u001b[39m setConnectionError] \u001b[33m=\u001b[39m useState(\u001b[36mnull\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m 27 |\u001b[39m   \u001b[36mconst\u001b[39m [lastMessage\u001b[33m,\u001b[39m setLastMessage] \u001b[33m=\u001b[39m useState(\u001b[36mnull\u001b[39m)\u001b[33m;\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 28 |\u001b[39m   \u001b[36mconst\u001b[39m queryClient \u001b[33m=\u001b[39m useQueryClient()\u001b[33m;\u001b[39m\n     \u001b[90m    |\u001b[39m                                     \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 29 |\u001b[39m   \u001b[36mconst\u001b[39m listenersRef \u001b[33m=\u001b[39m useRef(\u001b[36mnew\u001b[39m \u001b[33mMap\u001b[39m())\u001b[33m;\u001b[39m\n     \u001b[90m 30 |\u001b[39m\n     \u001b[90m 31 |\u001b[39m   \u001b[90m/**\u001b[39m\u001b[0m\n\n      at useQueryClient (../node_modules/@tanstack/react-query/src/QueryClientProvider.tsx:18:11)\n      at useWebSocket (src/hooks/useWebSocket.js:28:37)\n      at useRealtimeNotifications (src/hooks/useRealtimeNotifications.js:20:63)\n      at NotificationCenter (src/components/notifications/NotificationCenter.jsx:39:31)\n      at Object.react-stack-bottom-frame (../node_modules/react-dom/cjs/react-dom-client.development.js:23863:20)\n      at renderWithHooks (../node_modules/react-dom/cjs/react-dom-client.development.js:5529:22)\n      at updateFunctionComponent (../node_modules/react-dom/cjs/react-dom-client.development.js:8897:19)\n      at beginWork (../node_modules/react-dom/cjs/react-dom-client.development.js:10522:18)\n      at runWithFiberInDEV (../node_modules/react-dom/cjs/react-dom-client.development.js:1522:13)\n      at performUnitOfWork (../node_modules/react-dom/cjs/react-dom-client.development.js:15140:22)\n      at workLoopSync (../node_modules/react-dom/cjs/react-dom-client.development.js:14956:41)\n      at renderRootSync (../node_modules/react-dom/cjs/react-dom-client.development.js:14936:11)\n      at performWorkOnRoot (../node_modules/react-dom/cjs/react-dom-client.development.js:14462:44)\n      at performWorkOnRootViaSchedulerTask (../node_modules/react-dom/cjs/react-dom-client.development.js:16216:7)\n      at flushActQueue (../node_modules/react/cjs/react.development.js:566:34)\n      at process.env.NODE_ENV.exports.act (../node_modules/react/cjs/react.development.js:859:10)\n      at ../node_modules/@testing-library/react/dist/act-compat.js:47:25\n      at renderRoot (../node_modules/@testing-library/react/dist/pure.js:190:26)\n      at render (../node_modules/@testing-library/react/dist/pure.js:292:10)\n      at Object.<anonymous> (src/components/notifications/NotificationCenter.test.jsx:227:11)\n\n  ● NotificationCenter › applies correct CSS classes for read/unread notifications\n\n    No QueryClient set, use QueryClientProvider to set one\n\n    \u001b[0m \u001b[90m 26 |\u001b[39m   \u001b[36mconst\u001b[39m [connectionError\u001b[33m,\u001b[39m setConnectionError] \u001b[33m=\u001b[39m useState(\u001b[36mnull\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m 27 |\u001b[39m   \u001b[36mconst\u001b[39m [lastMessage\u001b[33m,\u001b[39m setLastMessage] \u001b[33m=\u001b[39m useState(\u001b[36mnull\u001b[39m)\u001b[33m;\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 28 |\u001b[39m   \u001b[36mconst\u001b[39m queryClient \u001b[33m=\u001b[39m useQueryClient()\u001b[33m;\u001b[39m\n     \u001b[90m    |\u001b[39m                                     \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 29 |\u001b[39m   \u001b[36mconst\u001b[39m listenersRef \u001b[33m=\u001b[39m useRef(\u001b[36mnew\u001b[39m \u001b[33mMap\u001b[39m())\u001b[33m;\u001b[39m\n     \u001b[90m 30 |\u001b[39m\n     \u001b[90m 31 |\u001b[39m   \u001b[90m/**\u001b[39m\u001b[0m\n\n      at useQueryClient (../node_modules/@tanstack/react-query/src/QueryClientProvider.tsx:18:11)\n      at useWebSocket (src/hooks/useWebSocket.js:28:37)\n      at useRealtimeNotifications (src/hooks/useRealtimeNotifications.js:20:63)\n      at NotificationCenter (src/components/notifications/NotificationCenter.jsx:39:31)\n      at Object.react-stack-bottom-frame (../node_modules/react-dom/cjs/react-dom-client.development.js:23863:20)\n      at renderWithHooks (../node_modules/react-dom/cjs/react-dom-client.development.js:5529:22)\n      at updateFunctionComponent (../node_modules/react-dom/cjs/react-dom-client.development.js:8897:19)\n      at beginWork (../node_modules/react-dom/cjs/react-dom-client.development.js:10522:18)\n      at runWithFiberInDEV (../node_modules/react-dom/cjs/react-dom-client.development.js:1522:13)\n      at performUnitOfWork (../node_modules/react-dom/cjs/react-dom-client.development.js:15140:22)\n      at workLoopSync (../node_modules/react-dom/cjs/react-dom-client.development.js:14956:41)\n      at renderRootSync (../node_modules/react-dom/cjs/react-dom-client.development.js:14936:11)\n      at performWorkOnRoot (../node_modules/react-dom/cjs/react-dom-client.development.js:14462:44)\n      at performWorkOnRootViaSchedulerTask (../node_modules/react-dom/cjs/react-dom-client.development.js:16216:7)\n      at flushActQueue (../node_modules/react/cjs/react.development.js:566:34)\n      at process.env.NODE_ENV.exports.act (../node_modules/react/cjs/react.development.js:859:10)\n      at ../node_modules/@testing-library/react/dist/act-compat.js:47:25\n      at renderRoot (../node_modules/@testing-library/react/dist/pure.js:190:26)\n      at render (../node_modules/@testing-library/react/dist/pure.js:292:10)\n      at Object.<anonymous> (src/components/notifications/NotificationCenter.test.jsx:241:11)\n\n  ● NotificationCenter › displays correct priority colors\n\n    No QueryClient set, use QueryClientProvider to set one\n\n    \u001b[0m \u001b[90m 26 |\u001b[39m   \u001b[36mconst\u001b[39m [connectionError\u001b[33m,\u001b[39m setConnectionError] \u001b[33m=\u001b[39m useState(\u001b[36mnull\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m 27 |\u001b[39m   \u001b[36mconst\u001b[39m [lastMessage\u001b[33m,\u001b[39m setLastMessage] \u001b[33m=\u001b[39m useState(\u001b[36mnull\u001b[39m)\u001b[33m;\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 28 |\u001b[39m   \u001b[36mconst\u001b[39m queryClient \u001b[33m=\u001b[39m useQueryClient()\u001b[33m;\u001b[39m\n     \u001b[90m    |\u001b[39m                                     \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 29 |\u001b[39m   \u001b[36mconst\u001b[39m listenersRef \u001b[33m=\u001b[39m useRef(\u001b[36mnew\u001b[39m \u001b[33mMap\u001b[39m())\u001b[33m;\u001b[39m\n     \u001b[90m 30 |\u001b[39m\n     \u001b[90m 31 |\u001b[39m   \u001b[90m/**\u001b[39m\u001b[0m\n\n      at useQueryClient (../node_modules/@tanstack/react-query/src/QueryClientProvider.tsx:18:11)\n      at useWebSocket (src/hooks/useWebSocket.js:28:37)\n      at useRealtimeNotifications (src/hooks/useRealtimeNotifications.js:20:63)\n      at NotificationCenter (src/components/notifications/NotificationCenter.jsx:39:31)\n      at Object.react-stack-bottom-frame (../node_modules/react-dom/cjs/react-dom-client.development.js:23863:20)\n      at renderWithHooks (../node_modules/react-dom/cjs/react-dom-client.development.js:5529:22)\n      at updateFunctionComponent (../node_modules/react-dom/cjs/react-dom-client.development.js:8897:19)\n      at beginWork (../node_modules/react-dom/cjs/react-dom-client.development.js:10522:18)\n      at runWithFiberInDEV (../node_modules/react-dom/cjs/react-dom-client.development.js:1522:13)\n      at performUnitOfWork (../node_modules/react-dom/cjs/react-dom-client.development.js:15140:22)\n      at workLoopSync (../node_modules/react-dom/cjs/react-dom-client.development.js:14956:41)\n      at renderRootSync (../node_modules/react-dom/cjs/react-dom-client.development.js:14936:11)\n      at performWorkOnRoot (../node_modules/react-dom/cjs/react-dom-client.development.js:14462:44)\n      at performWorkOnRootViaSchedulerTask (../node_modules/react-dom/cjs/react-dom-client.development.js:16216:7)\n      at flushActQueue (../node_modules/react/cjs/react.development.js:566:34)\n      at process.env.NODE_ENV.exports.act (../node_modules/react/cjs/react.development.js:859:10)\n      at ../node_modules/@testing-library/react/dist/act-compat.js:47:25\n      at renderRoot (../node_modules/@testing-library/react/dist/pure.js:190:26)\n      at render (../node_modules/@testing-library/react/dist/pure.js:292:10)\n      at Object.<anonymous> (src/components/notifications/NotificationCenter.test.jsx:254:11)\n\n  ● NotificationCenter › handles long notification messages\n\n    No QueryClient set, use QueryClientProvider to set one\n\n    \u001b[0m \u001b[90m 26 |\u001b[39m   \u001b[36mconst\u001b[39m [connectionError\u001b[33m,\u001b[39m setConnectionError] \u001b[33m=\u001b[39m useState(\u001b[36mnull\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m 27 |\u001b[39m   \u001b[36mconst\u001b[39m [lastMessage\u001b[33m,\u001b[39m setLastMessage] \u001b[33m=\u001b[39m useState(\u001b[36mnull\u001b[39m)\u001b[33m;\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 28 |\u001b[39m   \u001b[36mconst\u001b[39m queryClient \u001b[33m=\u001b[39m useQueryClient()\u001b[33m;\u001b[39m\n     \u001b[90m    |\u001b[39m                                     \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 29 |\u001b[39m   \u001b[36mconst\u001b[39m listenersRef \u001b[33m=\u001b[39m useRef(\u001b[36mnew\u001b[39m \u001b[33mMap\u001b[39m())\u001b[33m;\u001b[39m\n     \u001b[90m 30 |\u001b[39m\n     \u001b[90m 31 |\u001b[39m   \u001b[90m/**\u001b[39m\u001b[0m\n\n      at useQueryClient (../node_modules/@tanstack/react-query/src/QueryClientProvider.tsx:18:11)\n      at useWebSocket (src/hooks/useWebSocket.js:28:37)\n      at useRealtimeNotifications (src/hooks/useRealtimeNotifications.js:20:63)\n      at NotificationCenter (src/components/notifications/NotificationCenter.jsx:39:31)\n      at Object.react-stack-bottom-frame (../node_modules/react-dom/cjs/react-dom-client.development.js:23863:20)\n      at renderWithHooks (../node_modules/react-dom/cjs/react-dom-client.development.js:5529:22)\n      at updateFunctionComponent (../node_modules/react-dom/cjs/react-dom-client.development.js:8897:19)\n      at beginWork (../node_modules/react-dom/cjs/react-dom-client.development.js:10522:18)\n      at runWithFiberInDEV (../node_modules/react-dom/cjs/react-dom-client.development.js:1522:13)\n      at performUnitOfWork (../node_modules/react-dom/cjs/react-dom-client.development.js:15140:22)\n      at workLoopSync (../node_modules/react-dom/cjs/react-dom-client.development.js:14956:41)\n      at renderRootSync (../node_modules/react-dom/cjs/react-dom-client.development.js:14936:11)\n      at performWorkOnRoot (../node_modules/react-dom/cjs/react-dom-client.development.js:14462:44)\n      at performWorkOnRootViaSchedulerTask (../node_modules/react-dom/cjs/react-dom-client.development.js:16216:7)\n      at flushActQueue (../node_modules/react/cjs/react.development.js:566:34)\n      at process.env.NODE_ENV.exports.act (../node_modules/react/cjs/react.development.js:859:10)\n      at ../node_modules/@testing-library/react/dist/act-compat.js:47:25\n      at renderRoot (../node_modules/@testing-library/react/dist/pure.js:190:26)\n      at render (../node_modules/@testing-library/react/dist/pure.js:292:10)\n      at Object.<anonymous> (src/components/notifications/NotificationCenter.test.jsx:274:11)\n\n  ● NotificationCenter › updates unread count when notifications change\n\n    No QueryClient set, use QueryClientProvider to set one\n\n    \u001b[0m \u001b[90m 26 |\u001b[39m   \u001b[36mconst\u001b[39m [connectionError\u001b[33m,\u001b[39m setConnectionError] \u001b[33m=\u001b[39m useState(\u001b[36mnull\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m 27 |\u001b[39m   \u001b[36mconst\u001b[39m [lastMessage\u001b[33m,\u001b[39m setLastMessage] \u001b[33m=\u001b[39m useState(\u001b[36mnull\u001b[39m)\u001b[33m;\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 28 |\u001b[39m   \u001b[36mconst\u001b[39m queryClient \u001b[33m=\u001b[39m useQueryClient()\u001b[33m;\u001b[39m\n     \u001b[90m    |\u001b[39m                                     \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 29 |\u001b[39m   \u001b[36mconst\u001b[39m listenersRef \u001b[33m=\u001b[39m useRef(\u001b[36mnew\u001b[39m \u001b[33mMap\u001b[39m())\u001b[33m;\u001b[39m\n     \u001b[90m 30 |\u001b[39m\n     \u001b[90m 31 |\u001b[39m   \u001b[90m/**\u001b[39m\u001b[0m\n\n      at useQueryClient (../node_modules/@tanstack/react-query/src/QueryClientProvider.tsx:18:11)\n      at useWebSocket (src/hooks/useWebSocket.js:28:37)\n      at useRealtimeNotifications (src/hooks/useRealtimeNotifications.js:20:63)\n      at NotificationCenter (src/components/notifications/NotificationCenter.jsx:39:31)\n      at Object.react-stack-bottom-frame (../node_modules/react-dom/cjs/react-dom-client.development.js:23863:20)\n      at renderWithHooks (../node_modules/react-dom/cjs/react-dom-client.development.js:5529:22)\n      at updateFunctionComponent (../node_modules/react-dom/cjs/react-dom-client.development.js:8897:19)\n      at beginWork (../node_modules/react-dom/cjs/react-dom-client.development.js:10522:18)\n      at runWithFiberInDEV (../node_modules/react-dom/cjs/react-dom-client.development.js:1522:13)\n      at performUnitOfWork (../node_modules/react-dom/cjs/react-dom-client.development.js:15140:22)\n      at workLoopSync (../node_modules/react-dom/cjs/react-dom-client.development.js:14956:41)\n      at renderRootSync (../node_modules/react-dom/cjs/react-dom-client.development.js:14936:11)\n      at performWorkOnRoot (../node_modules/react-dom/cjs/react-dom-client.development.js:14462:44)\n      at performWorkOnRootViaSchedulerTask (../node_modules/react-dom/cjs/react-dom-client.development.js:16216:7)\n      at flushActQueue (../node_modules/react/cjs/react.development.js:566:34)\n      at process.env.NODE_ENV.exports.act (../node_modules/react/cjs/react.development.js:859:10)\n      at ../node_modules/@testing-library/react/dist/act-compat.js:47:25\n      at renderRoot (../node_modules/@testing-library/react/dist/pure.js:190:26)\n      at render (../node_modules/@testing-library/react/dist/pure.js:292:10)\n      at Object.<anonymous> (src/components/notifications/NotificationCenter.test.jsx:284:32)\n\n  ● NotificationCenter › handles notification with missing data gracefully\n\n    No QueryClient set, use QueryClientProvider to set one\n\n    \u001b[0m \u001b[90m 26 |\u001b[39m   \u001b[36mconst\u001b[39m [connectionError\u001b[33m,\u001b[39m setConnectionError] \u001b[33m=\u001b[39m useState(\u001b[36mnull\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m 27 |\u001b[39m   \u001b[36mconst\u001b[39m [lastMessage\u001b[33m,\u001b[39m setLastMessage] \u001b[33m=\u001b[39m useState(\u001b[36mnull\u001b[39m)\u001b[33m;\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 28 |\u001b[39m   \u001b[36mconst\u001b[39m queryClient \u001b[33m=\u001b[39m useQueryClient()\u001b[33m;\u001b[39m\n     \u001b[90m    |\u001b[39m                                     \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 29 |\u001b[39m   \u001b[36mconst\u001b[39m listenersRef \u001b[33m=\u001b[39m useRef(\u001b[36mnew\u001b[39m \u001b[33mMap\u001b[39m())\u001b[33m;\u001b[39m\n     \u001b[90m 30 |\u001b[39m\n     \u001b[90m 31 |\u001b[39m   \u001b[90m/**\u001b[39m\u001b[0m\n\n      at useQueryClient (../node_modules/@tanstack/react-query/src/QueryClientProvider.tsx:18:11)\n      at useWebSocket (src/hooks/useWebSocket.js:28:37)\n      at useRealtimeNotifications (src/hooks/useRealtimeNotifications.js:20:63)\n      at NotificationCenter (src/components/notifications/NotificationCenter.jsx:39:31)\n      at Object.react-stack-bottom-frame (../node_modules/react-dom/cjs/react-dom-client.development.js:23863:20)\n      at renderWithHooks (../node_modules/react-dom/cjs/react-dom-client.development.js:5529:22)\n      at updateFunctionComponent (../node_modules/react-dom/cjs/react-dom-client.development.js:8897:19)\n      at beginWork (../node_modules/react-dom/cjs/react-dom-client.development.js:10522:18)\n      at runWithFiberInDEV (../node_modules/react-dom/cjs/react-dom-client.development.js:1522:13)\n      at performUnitOfWork (../node_modules/react-dom/cjs/react-dom-client.development.js:15140:22)\n      at workLoopSync (../node_modules/react-dom/cjs/react-dom-client.development.js:14956:41)\n      at renderRootSync (../node_modules/react-dom/cjs/react-dom-client.development.js:14936:11)\n      at performWorkOnRoot (../node_modules/react-dom/cjs/react-dom-client.development.js:14462:44)\n      at performWorkOnRootViaSchedulerTask (../node_modules/react-dom/cjs/react-dom-client.development.js:16216:7)\n      at flushActQueue (../node_modules/react/cjs/react.development.js:566:34)\n      at process.env.NODE_ENV.exports.act (../node_modules/react/cjs/react.development.js:859:10)\n      at ../node_modules/@testing-library/react/dist/act-compat.js:47:25\n      at renderRoot (../node_modules/@testing-library/react/dist/pure.js:190:26)\n      at render (../node_modules/@testing-library/react/dist/pure.js:292:10)\n      at Object.<anonymous> (src/components/notifications/NotificationCenter.test.jsx:314:11)\n\n  ● NotificationCenter Integration › integrates correctly with useRealtimeNotifications hook\n\n    No QueryClient set, use QueryClientProvider to set one\n\n    \u001b[0m \u001b[90m 26 |\u001b[39m   \u001b[36mconst\u001b[39m [connectionError\u001b[33m,\u001b[39m setConnectionError] \u001b[33m=\u001b[39m useState(\u001b[36mnull\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m 27 |\u001b[39m   \u001b[36mconst\u001b[39m [lastMessage\u001b[33m,\u001b[39m setLastMessage] \u001b[33m=\u001b[39m useState(\u001b[36mnull\u001b[39m)\u001b[33m;\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 28 |\u001b[39m   \u001b[36mconst\u001b[39m queryClient \u001b[33m=\u001b[39m useQueryClient()\u001b[33m;\u001b[39m\n     \u001b[90m    |\u001b[39m                                     \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 29 |\u001b[39m   \u001b[36mconst\u001b[39m listenersRef \u001b[33m=\u001b[39m useRef(\u001b[36mnew\u001b[39m \u001b[33mMap\u001b[39m())\u001b[33m;\u001b[39m\n     \u001b[90m 30 |\u001b[39m\n     \u001b[90m 31 |\u001b[39m   \u001b[90m/**\u001b[39m\u001b[0m\n\n      at useQueryClient (../node_modules/@tanstack/react-query/src/QueryClientProvider.tsx:18:11)\n      at useWebSocket (src/hooks/useWebSocket.js:28:37)\n      at useRealtimeNotifications (src/hooks/useRealtimeNotifications.js:20:63)\n      at NotificationCenter (src/components/notifications/NotificationCenter.jsx:39:31)\n      at Object.react-stack-bottom-frame (../node_modules/react-dom/cjs/react-dom-client.development.js:23863:20)\n      at renderWithHooks (../node_modules/react-dom/cjs/react-dom-client.development.js:5529:22)\n      at updateFunctionComponent (../node_modules/react-dom/cjs/react-dom-client.development.js:8897:19)\n      at beginWork (../node_modules/react-dom/cjs/react-dom-client.development.js:10522:18)\n      at runWithFiberInDEV (../node_modules/react-dom/cjs/react-dom-client.development.js:1522:13)\n      at performUnitOfWork (../node_modules/react-dom/cjs/react-dom-client.development.js:15140:22)\n      at workLoopSync (../node_modules/react-dom/cjs/react-dom-client.development.js:14956:41)\n      at renderRootSync (../node_modules/react-dom/cjs/react-dom-client.development.js:14936:11)\n      at performWorkOnRoot (../node_modules/react-dom/cjs/react-dom-client.development.js:14462:44)\n      at performWorkOnRootViaSchedulerTask (../node_modules/react-dom/cjs/react-dom-client.development.js:16216:7)\n      at flushActQueue (../node_modules/react/cjs/react.development.js:566:34)\n      at process.env.NODE_ENV.exports.act (../node_modules/react/cjs/react.development.js:859:10)\n      at ../node_modules/@testing-library/react/dist/act-compat.js:47:25\n      at renderRoot (../node_modules/@testing-library/react/dist/pure.js:190:26)\n      at render (../node_modules/@testing-library/react/dist/pure.js:292:10)\n      at Object.<anonymous> (src/components/notifications/NotificationCenter.test.jsx:326:11)\n\n  ● NotificationCenter Integration › passes correct parameters to hook functions\n\n    No QueryClient set, use QueryClientProvider to set one\n\n    \u001b[0m \u001b[90m 26 |\u001b[39m   \u001b[36mconst\u001b[39m [connectionError\u001b[33m,\u001b[39m setConnectionError] \u001b[33m=\u001b[39m useState(\u001b[36mnull\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m 27 |\u001b[39m   \u001b[36mconst\u001b[39m [lastMessage\u001b[33m,\u001b[39m setLastMessage] \u001b[33m=\u001b[39m useState(\u001b[36mnull\u001b[39m)\u001b[33m;\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 28 |\u001b[39m   \u001b[36mconst\u001b[39m queryClient \u001b[33m=\u001b[39m useQueryClient()\u001b[33m;\u001b[39m\n     \u001b[90m    |\u001b[39m                                     \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 29 |\u001b[39m   \u001b[36mconst\u001b[39m listenersRef \u001b[33m=\u001b[39m useRef(\u001b[36mnew\u001b[39m \u001b[33mMap\u001b[39m())\u001b[33m;\u001b[39m\n     \u001b[90m 30 |\u001b[39m\n     \u001b[90m 31 |\u001b[39m   \u001b[90m/**\u001b[39m\u001b[0m\n\n      at useQueryClient (../node_modules/@tanstack/react-query/src/QueryClientProvider.tsx:18:11)\n      at useWebSocket (src/hooks/useWebSocket.js:28:37)\n      at useRealtimeNotifications (src/hooks/useRealtimeNotifications.js:20:63)\n      at NotificationCenter (src/components/notifications/NotificationCenter.jsx:39:31)\n      at Object.react-stack-bottom-frame (../node_modules/react-dom/cjs/react-dom-client.development.js:23863:20)\n      at renderWithHooks (../node_modules/react-dom/cjs/react-dom-client.development.js:5529:22)\n      at updateFunctionComponent (../node_modules/react-dom/cjs/react-dom-client.development.js:8897:19)\n      at beginWork (../node_modules/react-dom/cjs/react-dom-client.development.js:10522:18)\n      at runWithFiberInDEV (../node_modules/react-dom/cjs/react-dom-client.development.js:1522:13)\n      at performUnitOfWork (../node_modules/react-dom/cjs/react-dom-client.development.js:15140:22)\n      at workLoopSync (../node_modules/react-dom/cjs/react-dom-client.development.js:14956:41)\n      at renderRootSync (../node_modules/react-dom/cjs/react-dom-client.development.js:14936:11)\n      at performWorkOnRoot (../node_modules/react-dom/cjs/react-dom-client.development.js:14462:44)\n      at performWorkOnRootViaSchedulerTask (../node_modules/react-dom/cjs/react-dom-client.development.js:16216:7)\n      at flushActQueue (../node_modules/react/cjs/react.development.js:566:34)\n      at process.env.NODE_ENV.exports.act (../node_modules/react/cjs/react.development.js:859:10)\n      at ../node_modules/@testing-library/react/dist/act-compat.js:47:25\n      at renderRoot (../node_modules/@testing-library/react/dist/pure.js:190:26)\n      at render (../node_modules/@testing-library/react/dist/pure.js:292:10)\n      at Object.<anonymous> (src/components/notifications/NotificationCenter.test.jsx:332:11)\n\nFAIL src/utils/__tests__/env.test.js\n  ● Test suite failed to run\n\n    Jest encountered an unexpected token\n\n    Jest failed to parse a file. This happens e.g. when your code or its dependencies use non-standard JavaScript syntax, or when Jest is not configured to support such syntax.\n\n    Out of the box Jest supports Babel, which will be used to transform your files into valid JS based on your Babel configuration.\n\n    By default \"node_modules\" folder is ignored by transformers.\n\n    Here's what you can do:\n     • If you are trying to use ECMAScript Modules, see https://jestjs.io/docs/ecmascript-modules for how to enable it.\n     • If you are trying to use TypeScript, see https://jestjs.io/docs/getting-started#using-typescript\n     • To have some of your \"node_modules\" files transformed, you can specify a custom \"transformIgnorePatterns\" in your config.\n     • If you need a custom transformation, specify a \"transform\" option in your config.\n     • If you simply want to mock your non-JS modules (e.g. binary assets) you can stub them out with the \"moduleNameMapper\" config option.\n\n    You'll find more details and examples of these config options in the docs:\n    https://jestjs.io/docs/configuration\n    For information about custom transformations, see:\n    https://jestjs.io/docs/code-transformation\n\n    Details:\n\n    E:\\AlexVenturesStudio\\Nexa_Manager_whit_Task_Master\\web-app\\src\\utils\\env.ts:23\n      if (typeof import.meta !== 'undefined' && import.meta.env) {\n                        ^^^^\n\n    SyntaxError: Cannot use 'import.meta' outside a module\n\n    \u001b[0m\u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 1 |\u001b[39m \u001b[36mconst\u001b[39m { getEnvVar\u001b[33m,\u001b[39m isDevelopment\u001b[33m,\u001b[39m isProduction } \u001b[33m=\u001b[39m require(\u001b[32m'../env'\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m   |\u001b[39m                                                    \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 2 |\u001b[39m\n     \u001b[90m 3 |\u001b[39m describe(\u001b[32m'Environment Utility'\u001b[39m\u001b[33m,\u001b[39m () \u001b[33m=>\u001b[39m {\n     \u001b[90m 4 |\u001b[39m   beforeEach(() \u001b[33m=>\u001b[39m {\u001b[0m\n\n      at Runtime.createScriptFromCode (../node_modules/jest-runtime/build/index.js:1314:40)\n      at Object.require (src/utils/__tests__/env.test.js:1:52)\n\nFAIL src/lib/__tests__/taxCalculationService.test.js\n  ● Test suite failed to run\n\n    Configuration error:\n\n    Could not locate module @lib/taxCalculationService mapped as:\n    E:\\AlexVenturesStudio\\Nexa_Manager_whit_Task_Master\\web-app\\src\\lib\\$1.\n\n    Please check your configuration for these entries:\n    {\n      \"moduleNameMapper\": {\n        \"/^@lib\\/(.*)$/\": \"E:\\AlexVenturesStudio\\Nexa_Manager_whit_Task_Master\\web-app\\src\\lib\\$1\"\n      },\n      \"resolver\": undefined\n    }\n\n    \u001b[0m\u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 1 |\u001b[39m \u001b[36mimport\u001b[39m {\n     \u001b[90m   |\u001b[39m \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 2 |\u001b[39m   \u001b[33mTaxCalculationService\u001b[39m\u001b[33m,\u001b[39m\n     \u001b[90m 3 |\u001b[39m   \u001b[33mIVA_RATES\u001b[39m\u001b[33m,\u001b[39m\n     \u001b[90m 4 |\u001b[39m   \u001b[33mWITHHOLDING_RATES\u001b[39m\u001b[33m,\u001b[39m\u001b[0m\n\n      at createNoMappedModuleFoundError (../node_modules/jest-resolve/build/index.js:1117:17)\n      at Object.require (src/lib/__tests__/taxCalculationService.test.js:1:1)\n\nFAIL src/services/__tests__/reportingService.test.js\n  ● Test suite failed to run\n\n    Cannot find module 'vitest' from 'src/services/__tests__/reportingService.test.js'\n\n    \u001b[0m\u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 1 |\u001b[39m \u001b[36mimport\u001b[39m { vi } \u001b[36mfrom\u001b[39m \u001b[32m'vitest'\u001b[39m\u001b[33m;\u001b[39m\n     \u001b[90m   |\u001b[39m \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 2 |\u001b[39m \u001b[36mimport\u001b[39m \u001b[33m*\u001b[39m \u001b[36mas\u001b[39m reportingService \u001b[36mfrom\u001b[39m \u001b[32m'../reportingService'\u001b[39m\u001b[33m;\u001b[39m\n     \u001b[90m 3 |\u001b[39m \u001b[36mimport\u001b[39m { supabase } \u001b[36mfrom\u001b[39m \u001b[32m'../supabase'\u001b[39m\u001b[33m;\u001b[39m\n     \u001b[90m 4 |\u001b[39m\u001b[0m\n\n      at Resolver._throwModNotFoundError (../node_modules/jest-resolve/build/index.js:863:11)\n      at Object.require (src/services/__tests__/reportingService.test.js:1:1)\n\nFAIL src/lib/__tests__/financialService.test.js\n  ● Test suite failed to run\n\n    Cannot find module '../incomeService' from 'src/lib/__tests__/financialService.test.js'\n\n    \u001b[0m \u001b[90m 28 |\u001b[39m\n     \u001b[90m 29 |\u001b[39m \u001b[90m// Mock incomeService and expenseService\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 30 |\u001b[39m jest\u001b[33m.\u001b[39mmock(\u001b[32m'../incomeService'\u001b[39m\u001b[33m,\u001b[39m () \u001b[33m=>\u001b[39m ({\n     \u001b[90m    |\u001b[39m      \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 31 |\u001b[39m   getIncomeStats\u001b[33m:\u001b[39m jest\u001b[33m.\u001b[39mfn()\u001b[33m,\u001b[39m\n     \u001b[90m 32 |\u001b[39m   getIncomeTrend\u001b[33m:\u001b[39m jest\u001b[33m.\u001b[39mfn()\u001b[33m,\u001b[39m\n     \u001b[90m 33 |\u001b[39m }))\u001b[33m;\u001b[39m\u001b[0m\n\n      at Resolver._throwModNotFoundError (../node_modules/jest-resolve/build/index.js:863:11)\n      at Object.mock (src/lib/__tests__/financialService.test.js:30:6)\n\nFAIL src/lib/__tests__/emailSearchService.test.js\n  ● Test suite failed to run\n\n    Cannot find module '../emailSearchService' from 'src/lib/__tests__/emailSearchService.test.js'\n\n    \u001b[0m \u001b[90m 3 |\u001b[39m \u001b[90m */\u001b[39m\n     \u001b[90m 4 |\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 5 |\u001b[39m \u001b[36mimport\u001b[39m emailSearchService \u001b[36mfrom\u001b[39m \u001b[32m'../emailSearchService'\u001b[39m\u001b[33m;\u001b[39m\n     \u001b[90m   |\u001b[39m \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 6 |\u001b[39m \u001b[36mimport\u001b[39m { supabase } \u001b[36mfrom\u001b[39m \u001b[32m'../supabaseClient'\u001b[39m\u001b[33m;\u001b[39m\n     \u001b[90m 7 |\u001b[39m \u001b[36mimport\u001b[39m \u001b[33mLogger\u001b[39m \u001b[36mfrom\u001b[39m \u001b[32m'@utils/Logger'\u001b[39m\u001b[33m;\u001b[39m\n     \u001b[90m 8 |\u001b[39m\u001b[0m\n\n      at Resolver._throwModNotFoundError (../node_modules/jest-resolve/build/index.js:863:11)\n      at Object.require (src/lib/__tests__/emailSearchService.test.js:5:1)\n\nFAIL src/components/reports/__tests__/Reports.test.jsx\n  ● Test suite failed to run\n\n    Configuration error:\n\n    Could not locate module @lib/invoiceAnalyticsService mapped as:\n    E:\\AlexVenturesStudio\\Nexa_Manager_whit_Task_Master\\web-app\\src\\lib\\$1.\n\n    Please check your configuration for these entries:\n    {\n      \"moduleNameMapper\": {\n        \"/^@lib\\/(.*)$/\": \"E:\\AlexVenturesStudio\\Nexa_Manager_whit_Task_Master\\web-app\\src\\lib\\$1\"\n      },\n      \"resolver\": undefined\n    }\n\n    \u001b[0m \u001b[90m 25 |\u001b[39m\n     \u001b[90m 26 |\u001b[39m \u001b[90m// Mock other aliases\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 27 |\u001b[39m jest\u001b[33m.\u001b[39mmock(\u001b[32m'@lib/invoiceAnalyticsService'\u001b[39m\u001b[33m,\u001b[39m () \u001b[33m=>\u001b[39m ({\n     \u001b[90m    |\u001b[39m      \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 28 |\u001b[39m   \u001b[36mdefault\u001b[39m\u001b[33m:\u001b[39m {\n     \u001b[90m 29 |\u001b[39m     getRevenueAnalytics\u001b[33m:\u001b[39m jest\u001b[33m.\u001b[39mfn()\u001b[33m,\u001b[39m\n     \u001b[90m 30 |\u001b[39m     getClientAnalytics\u001b[33m:\u001b[39m jest\u001b[33m.\u001b[39mfn()\u001b[33m,\u001b[39m\u001b[0m\n\n      at createNoMappedModuleFoundError (../node_modules/jest-resolve/build/index.js:1117:17)\n      at Object.mock (src/components/reports/__tests__/Reports.test.jsx:27:6)\n\nFAIL src/lib/__tests__/emailStorageService.test.js\n  ● Test suite failed to run\n\n    Cannot find module '../emailStorageService' from 'src/lib/__tests__/emailStorageService.test.js'\n\n    \u001b[0m \u001b[90m 3 |\u001b[39m \u001b[90m */\u001b[39m\n     \u001b[90m 4 |\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 5 |\u001b[39m \u001b[36mimport\u001b[39m emailStorageService \u001b[36mfrom\u001b[39m \u001b[32m'../emailStorageService'\u001b[39m\u001b[33m;\u001b[39m\n     \u001b[90m   |\u001b[39m \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 6 |\u001b[39m \u001b[36mimport\u001b[39m { supabase } \u001b[36mfrom\u001b[39m \u001b[32m'../supabaseClient'\u001b[39m\u001b[33m;\u001b[39m\n     \u001b[90m 7 |\u001b[39m \u001b[36mimport\u001b[39m \u001b[33mLogger\u001b[39m \u001b[36mfrom\u001b[39m \u001b[32m'@utils/Logger'\u001b[39m\u001b[33m;\u001b[39m\n     \u001b[90m 8 |\u001b[39m\u001b[0m\n\n      at Resolver._throwModNotFoundError (../node_modules/jest-resolve/build/index.js:863:11)\n      at Object.require (src/lib/__tests__/emailStorageService.test.js:5:1)\n\nFAIL src/lib/__tests__/emailService.test.js\n  ● Test suite failed to run\n\n    Cannot find module '../quotePdfService' from 'src/lib/__tests__/emailService.test.js'\n\n    \u001b[0m \u001b[90m 10 |\u001b[39m\n     \u001b[90m 11 |\u001b[39m \u001b[90m// Mock quotePdfService completely\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 12 |\u001b[39m jest\u001b[33m.\u001b[39mmock(\u001b[32m'../quotePdfService'\u001b[39m\u001b[33m,\u001b[39m () \u001b[33m=>\u001b[39m ({\n     \u001b[90m    |\u001b[39m      \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 13 |\u001b[39m   \u001b[36mdefault\u001b[39m\u001b[33m:\u001b[39m {\n     \u001b[90m 14 |\u001b[39m     generateBlob\u001b[33m:\u001b[39m jest\u001b[33m.\u001b[39mfn()\u001b[33m.\u001b[39mmockResolvedValue(\u001b[36mnew\u001b[39m \u001b[33mBlob\u001b[39m([\u001b[32m'mock-pdf'\u001b[39m]\u001b[33m,\u001b[39m { type\u001b[33m:\u001b[39m \u001b[32m'application/pdf'\u001b[39m }))\u001b[33m,\u001b[39m\n     \u001b[90m 15 |\u001b[39m   }\u001b[33m,\u001b[39m\u001b[0m\n\n      at Resolver._throwModNotFoundError (../node_modules/jest-resolve/build/index.js:863:11)\n      at Object.mock (src/lib/__tests__/emailService.test.js:12:6)\n\nFAIL src/lib/__tests__/emailTemplateService.test.js\n  ● Test suite failed to run\n\n    Cannot find module '../emailTemplateService' from 'src/lib/__tests__/emailTemplateService.test.js'\n\n    \u001b[0m\u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 1 |\u001b[39m \u001b[36mimport\u001b[39m emailTemplateService \u001b[36mfrom\u001b[39m \u001b[32m'../emailTemplateService'\u001b[39m\u001b[33m;\u001b[39m\n     \u001b[90m   |\u001b[39m \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 2 |\u001b[39m\n     \u001b[90m 3 |\u001b[39m \u001b[90m// Mock Supabase\u001b[39m\n     \u001b[90m 4 |\u001b[39m \u001b[36mconst\u001b[39m mockSupabase \u001b[33m=\u001b[39m {\u001b[0m\n\n      at Resolver._throwModNotFoundError (../node_modules/jest-resolve/build/index.js:863:11)\n      at Object.require (src/lib/__tests__/emailTemplateService.test.js:1:1)\n\nFAIL src/features/email/components/__tests__/EmailAttachmentManager.test.jsx\n  ● Test suite failed to run\n\n    Configuration error:\n\n    Could not locate module @lib/emailAttachmentService mapped as:\n    E:\\AlexVenturesStudio\\Nexa_Manager_whit_Task_Master\\web-app\\src\\lib\\$1.\n\n    Please check your configuration for these entries:\n    {\n      \"moduleNameMapper\": {\n        \"/^@lib\\/(.*)$/\": \"E:\\AlexVenturesStudio\\Nexa_Manager_whit_Task_Master\\web-app\\src\\lib\\$1\"\n      },\n      \"resolver\": undefined\n    }\n\n    \u001b[0m \u001b[90m 19 |\u001b[39m\n     \u001b[90m 20 |\u001b[39m \u001b[36mimport\u001b[39m \u001b[33mEmailAttachmentManager\u001b[39m \u001b[36mfrom\u001b[39m \u001b[32m'../EmailAttachmentManager'\u001b[39m\u001b[33m;\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 21 |\u001b[39m \u001b[36mimport\u001b[39m emailAttachmentService \u001b[36mfrom\u001b[39m \u001b[32m'@lib/emailAttachmentService'\u001b[39m\u001b[33m;\u001b[39m\n     \u001b[90m    |\u001b[39m \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 22 |\u001b[39m \u001b[36mimport\u001b[39m { \u001b[33mLogger\u001b[39m } \u001b[36mfrom\u001b[39m \u001b[32m'@utils/Logger'\u001b[39m\u001b[33m;\u001b[39m\n     \u001b[90m 23 |\u001b[39m\n     \u001b[90m 24 |\u001b[39m \u001b[90m// Setup user-event with clipboard disabled to avoid conflicts\u001b[39m\u001b[0m\n\n      at createNoMappedModuleFoundError (../node_modules/jest-resolve/build/index.js:1117:17)\n      at Object.require (src/features/email/components/__tests__/EmailAttachmentManager.test.jsx:21:1)\n\nFAIL src/lib/__tests__/emailRecoveryService.test.js\n  ● Test suite failed to run\n\n    Cannot find module '../emailRecoveryService' from 'src/lib/__tests__/emailRecoveryService.test.js'\n\n    \u001b[0m \u001b[90m 3 |\u001b[39m \u001b[90m */\u001b[39m\n     \u001b[90m 4 |\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 5 |\u001b[39m \u001b[36mimport\u001b[39m emailRecoveryService \u001b[36mfrom\u001b[39m \u001b[32m'../emailRecoveryService'\u001b[39m\u001b[33m;\u001b[39m\n     \u001b[90m   |\u001b[39m \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 6 |\u001b[39m \u001b[36mimport\u001b[39m { supabase } \u001b[36mfrom\u001b[39m \u001b[32m'../supabaseClient'\u001b[39m\u001b[33m;\u001b[39m\n     \u001b[90m 7 |\u001b[39m \u001b[36mimport\u001b[39m \u001b[33mLogger\u001b[39m \u001b[36mfrom\u001b[39m \u001b[32m'@utils/Logger'\u001b[39m\u001b[33m;\u001b[39m\n     \u001b[90m 8 |\u001b[39m\u001b[0m\n\n      at Resolver._throwModNotFoundError (../node_modules/jest-resolve/build/index.js:863:11)\n      at Object.require (src/lib/__tests__/emailRecoveryService.test.js:5:1)\n\nFAIL src/lib/__tests__/emailSettingsService.test.js\n  ● Test suite failed to run\n\n    Cannot find module '../emailSettingsService' from 'src/lib/__tests__/emailSettingsService.test.js'\n\n    \u001b[0m \u001b[90m 3 |\u001b[39m \u001b[90m */\u001b[39m\n     \u001b[90m 4 |\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 5 |\u001b[39m \u001b[36mimport\u001b[39m emailSettingsService \u001b[36mfrom\u001b[39m \u001b[32m'../emailSettingsService'\u001b[39m\u001b[33m;\u001b[39m\n     \u001b[90m   |\u001b[39m \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 6 |\u001b[39m \u001b[36mimport\u001b[39m { supabase } \u001b[36mfrom\u001b[39m \u001b[32m'../supabaseClient'\u001b[39m\u001b[33m;\u001b[39m\n     \u001b[90m 7 |\u001b[39m \u001b[36mimport\u001b[39m \u001b[33mLogger\u001b[39m \u001b[36mfrom\u001b[39m \u001b[32m'@utils/Logger'\u001b[39m\u001b[33m;\u001b[39m\n     \u001b[90m 8 |\u001b[39m\u001b[0m\n\n      at Resolver._throwModNotFoundError (../node_modules/jest-resolve/build/index.js:863:11)\n      at Object.require (src/lib/__tests__/emailSettingsService.test.js:5:1)\n\nFAIL src/features/documents/components/__tests__/ArchiveDocumentsModal.test.jsx\n  ● Test suite failed to run\n\n    Configuration error:\n\n    Could not locate module @/featuresi18n mapped as:\n    E:\\AlexVenturesStudio\\Nexa_Manager_whit_Task_Master\\web-app\\src\\$1.\n\n    Please check your configuration for these entries:\n    {\n      \"moduleNameMapper\": {\n        \"/^@\\/(.*)$/\": \"E:\\AlexVenturesStudio\\Nexa_Manager_whit_Task_Master\\web-app\\src\\$1\"\n      },\n      \"resolver\": undefined\n    }\n\n    \u001b[0m \u001b[90m 2 |\u001b[39m \u001b[36mimport\u001b[39m { render\u001b[33m,\u001b[39m screen\u001b[33m,\u001b[39m fireEvent\u001b[33m,\u001b[39m waitFor } \u001b[36mfrom\u001b[39m \u001b[32m'@testing-library/react'\u001b[39m\u001b[33m;\u001b[39m\n     \u001b[90m 3 |\u001b[39m \u001b[36mimport\u001b[39m { \u001b[33mI18nextProvider\u001b[39m } \u001b[36mfrom\u001b[39m \u001b[32m'react-i18next'\u001b[39m\u001b[33m;\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 4 |\u001b[39m \u001b[36mimport\u001b[39m i18n \u001b[36mfrom\u001b[39m \u001b[32m'@/features\\i18n'\u001b[39m\u001b[33m;\u001b[39m\n     \u001b[90m   |\u001b[39m \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 5 |\u001b[39m \u001b[36mimport\u001b[39m \u001b[33mArchiveDocumentsModal\u001b[39m \u001b[36mfrom\u001b[39m \u001b[32m'../ArchiveDocumentsModal'\u001b[39m\u001b[33m;\u001b[39m\n     \u001b[90m 6 |\u001b[39m\n     \u001b[90m 7 |\u001b[39m \u001b[90m// Mock documents data\u001b[39m\u001b[0m\n\n      at createNoMappedModuleFoundError (../node_modules/jest-resolve/build/index.js:1117:17)\n      at Object.require (src/features/documents/components/__tests__/ArchiveDocumentsModal.test.jsx:4:1)\n\nFAIL src/lib/__tests__/emailProviderService.test.js\n  ● Test suite failed to run\n\n    Cannot find module '../emailProviderService' from 'src/lib/__tests__/emailProviderService.test.js'\n\n    \u001b[0m \u001b[90m 3 |\u001b[39m \u001b[90m */\u001b[39m\n     \u001b[90m 4 |\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 5 |\u001b[39m \u001b[36mimport\u001b[39m emailProviderService \u001b[36mfrom\u001b[39m \u001b[32m'../emailProviderService'\u001b[39m\u001b[33m;\u001b[39m\n     \u001b[90m   |\u001b[39m \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 6 |\u001b[39m \u001b[36mimport\u001b[39m { supabase } \u001b[36mfrom\u001b[39m \u001b[32m'../supabaseClient'\u001b[39m\u001b[33m;\u001b[39m\n     \u001b[90m 7 |\u001b[39m \u001b[36mimport\u001b[39m \u001b[33mLogger\u001b[39m \u001b[36mfrom\u001b[39m \u001b[32m'@utils/Logger'\u001b[39m\u001b[33m;\u001b[39m\n     \u001b[90m 8 |\u001b[39m\u001b[0m\n\n      at Resolver._throwModNotFoundError (../node_modules/jest-resolve/build/index.js:863:11)\n      at Object.require (src/lib/__tests__/emailProviderService.test.js:5:1)\n\nFAIL src/lib/__tests__/emailManagementService.test.js\n  ● Test suite failed to run\n\n    Cannot find module '../emailStorageService' from 'src/lib/__tests__/emailManagementService.test.js'\n\n    \u001b[0m \u001b[90m 4 |\u001b[39m\n     \u001b[90m 5 |\u001b[39m \u001b[90m// Mock the dependencies\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 6 |\u001b[39m jest\u001b[33m.\u001b[39mmock(\u001b[32m'../emailStorageService'\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m   |\u001b[39m      \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 7 |\u001b[39m jest\u001b[33m.\u001b[39mmock(\u001b[32m'../emailProviderService'\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m 8 |\u001b[39m jest\u001b[33m.\u001b[39mmock(\u001b[32m'../supabaseClient'\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m 9 |\u001b[39m\u001b[0m\n\n      at Resolver._throwModNotFoundError (../node_modules/jest-resolve/build/index.js:863:11)\n      at Object.mock (src/lib/__tests__/emailManagementService.test.js:6:6)\n\nFAIL src/lib/__tests__/emailAttachmentService.test.js\n  ● Test suite failed to run\n\n    Cannot find module '../emailAttachmentService' from 'src/lib/__tests__/emailAttachmentService.test.js'\n\n    \u001b[0m \u001b[90m 3 |\u001b[39m \u001b[90m */\u001b[39m\n     \u001b[90m 4 |\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 5 |\u001b[39m \u001b[36mimport\u001b[39m emailAttachmentService \u001b[36mfrom\u001b[39m \u001b[32m'../emailAttachmentService'\u001b[39m\u001b[33m;\u001b[39m\n     \u001b[90m   |\u001b[39m \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 6 |\u001b[39m \u001b[36mimport\u001b[39m { supabase } \u001b[36mfrom\u001b[39m \u001b[32m'../supabaseClient'\u001b[39m\u001b[33m;\u001b[39m\n     \u001b[90m 7 |\u001b[39m \u001b[36mimport\u001b[39m \u001b[33mLogger\u001b[39m \u001b[36mfrom\u001b[39m \u001b[32m'@utils/Logger'\u001b[39m\u001b[33m;\u001b[39m\n     \u001b[90m 8 |\u001b[39m\u001b[0m\n\n      at Resolver._throwModNotFoundError (../node_modules/jest-resolve/build/index.js:863:11)\n      at Object.require (src/lib/__tests__/emailAttachmentService.test.js:5:1)\n\nFAIL src/lib/__tests__/businessEmailIntegration.test.js\n  ● Test suite failed to run\n\n    Cannot find module '../businessEmailIntegration.js' from 'src/lib/__tests__/businessEmailIntegration.test.js'\n\n    \u001b[0m \u001b[90m 3 |\u001b[39m \u001b[90m */\u001b[39m\n     \u001b[90m 4 |\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 5 |\u001b[39m \u001b[36mimport\u001b[39m businessEmailIntegration \u001b[36mfrom\u001b[39m \u001b[32m'../businessEmailIntegration.js'\u001b[39m\u001b[33m;\u001b[39m\n     \u001b[90m   |\u001b[39m \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 6 |\u001b[39m \u001b[36mimport\u001b[39m { \u001b[33mInvoiceService\u001b[39m } \u001b[36mfrom\u001b[39m \u001b[32m'../invoiceService.js'\u001b[39m\u001b[33m;\u001b[39m\n     \u001b[90m 7 |\u001b[39m \u001b[36mimport\u001b[39m { \u001b[33mQuoteService\u001b[39m } \u001b[36mfrom\u001b[39m \u001b[32m'../quoteService.js'\u001b[39m\u001b[33m;\u001b[39m\n     \u001b[90m 8 |\u001b[39m \u001b[36mimport\u001b[39m clientEmailService \u001b[36mfrom\u001b[39m \u001b[32m'../clientEmailService.js'\u001b[39m\u001b[33m;\u001b[39m\u001b[0m\n\n      at Resolver._throwModNotFoundError (../node_modules/jest-resolve/build/index.js:863:11)\n      at Object.require (src/lib/__tests__/businessEmailIntegration.test.js:5:1)\n\nFAIL src/lib/__tests__/authService.test.js\n  ● Test suite failed to run\n\n    Configuration error:\n\n    Could not locate module @lib/authService mapped as:\n    E:\\AlexVenturesStudio\\Nexa_Manager_whit_Task_Master\\web-app\\src\\lib\\$1.\n\n    Please check your configuration for these entries:\n    {\n      \"moduleNameMapper\": {\n        \"/^@lib\\/(.*)$/\": \"E:\\AlexVenturesStudio\\Nexa_Manager_whit_Task_Master\\web-app\\src\\lib\\$1\"\n      },\n      \"resolver\": undefined\n    }\n\n    \u001b[0m\u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 1 |\u001b[39m \u001b[36mimport\u001b[39m { \u001b[33mAuthService\u001b[39m } \u001b[36mfrom\u001b[39m \u001b[32m'@lib/authService'\u001b[39m\u001b[33m;\u001b[39m\n     \u001b[90m   |\u001b[39m \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 2 |\u001b[39m \u001b[36mimport\u001b[39m { supabase } \u001b[36mfrom\u001b[39m \u001b[32m'@lib/supabaseClient'\u001b[39m\u001b[33m;\u001b[39m\n     \u001b[90m 3 |\u001b[39m \u001b[36mimport\u001b[39m \u001b[33mLogger\u001b[39m \u001b[36mfrom\u001b[39m \u001b[32m'@utils/Logger'\u001b[39m\u001b[33m;\u001b[39m\n     \u001b[90m 4 |\u001b[39m\u001b[0m\n\n      at createNoMappedModuleFoundError (../node_modules/jest-resolve/build/index.js:1117:17)\n      at Object.require (src/lib/__tests__/authService.test.js:1:1)\n\nFAIL src/lib/__tests__/emailAnalyticsService.test.js\n  ● Test suite failed to run\n\n    Cannot find module 'vitest' from 'src/lib/__tests__/emailAnalyticsService.test.js'\n\n    \u001b[0m\u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 1 |\u001b[39m \u001b[36mimport\u001b[39m { describe\u001b[33m,\u001b[39m it\u001b[33m,\u001b[39m expect\u001b[33m,\u001b[39m beforeEach\u001b[33m,\u001b[39m afterEach\u001b[33m,\u001b[39m vi } \u001b[36mfrom\u001b[39m \u001b[32m'vitest'\u001b[39m\u001b[33m;\u001b[39m\n     \u001b[90m   |\u001b[39m \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 2 |\u001b[39m \u001b[36mimport\u001b[39m emailAnalyticsService \u001b[36mfrom\u001b[39m \u001b[32m'@lib/emailAnalyticsService'\u001b[39m\u001b[33m;\u001b[39m\n     \u001b[90m 3 |\u001b[39m \u001b[36mimport\u001b[39m emailErrorHandler \u001b[36mfrom\u001b[39m \u001b[32m'@features/email'\u001b[39m\u001b[33m;\u001b[39m\n     \u001b[90m 4 |\u001b[39m \u001b[36mimport\u001b[39m { supabase } \u001b[36mfrom\u001b[39m \u001b[32m'@lib/supabaseClient'\u001b[39m\u001b[33m;\u001b[39m\u001b[0m\n\n      at Resolver._throwModNotFoundError (../node_modules/jest-resolve/build/index.js:863:11)\n      at Object.require (src/lib/__tests__/emailAnalyticsService.test.js:1:1)\n\nFAIL src/components/reports/__tests__/ReportGenerator.test.jsx\n  ● Test suite failed to run\n\n    Cannot find module '../ReportGenerator' from 'src/components/reports/__tests__/ReportGenerator.test.jsx'\n\n    \u001b[0m \u001b[90m 3 |\u001b[39m \u001b[36mimport\u001b[39m userEvent \u001b[36mfrom\u001b[39m \u001b[32m'@testing-library/user-event'\u001b[39m\u001b[33m;\u001b[39m\n     \u001b[90m 4 |\u001b[39m \u001b[36mimport\u001b[39m { \u001b[33mQueryClient\u001b[39m\u001b[33m,\u001b[39m \u001b[33mQueryProvider\u001b[39m } \u001b[36mfrom\u001b[39m \u001b[32m'@tanstack/react-query'\u001b[39m\u001b[33m;\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 5 |\u001b[39m \u001b[36mimport\u001b[39m \u001b[33mReportGenerator\u001b[39m \u001b[36mfrom\u001b[39m \u001b[32m'../ReportGenerator'\u001b[39m\u001b[33m;\u001b[39m\n     \u001b[90m   |\u001b[39m \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 6 |\u001b[39m \u001b[36mimport\u001b[39m \u001b[33m*\u001b[39m \u001b[36mas\u001b[39m reportingService \u001b[36mfrom\u001b[39m \u001b[32m'@/services\\reportingService'\u001b[39m\u001b[33m;\u001b[39m\n     \u001b[90m 7 |\u001b[39m\n     \u001b[90m 8 |\u001b[39m \u001b[90m// Mock services\u001b[39m\u001b[0m\n\n      at Resolver._throwModNotFoundError (../node_modules/jest-resolve/build/index.js:863:11)\n      at Object.require (src/components/reports/__tests__/ReportGenerator.test.jsx:5:1)\n\nFAIL src/components/__tests__/EmailAnalyticsDashboard.test.jsx\n  ● Test suite failed to run\n\n    Cannot find module 'vitest' from 'src/components/__tests__/EmailAnalyticsDashboard.test.jsx'\n\n    \u001b[0m\u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 1 |\u001b[39m \u001b[36mimport\u001b[39m { describe\u001b[33m,\u001b[39m it\u001b[33m,\u001b[39m expect\u001b[33m,\u001b[39m beforeEach\u001b[33m,\u001b[39m afterEach\u001b[33m,\u001b[39m vi } \u001b[36mfrom\u001b[39m \u001b[32m'vitest'\u001b[39m\u001b[33m;\u001b[39m\n     \u001b[90m   |\u001b[39m \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 2 |\u001b[39m \u001b[36mimport\u001b[39m { render\u001b[33m,\u001b[39m screen\u001b[33m,\u001b[39m fireEvent\u001b[33m,\u001b[39m waitFor } \u001b[36mfrom\u001b[39m \u001b[32m'@testing-library/react'\u001b[39m\u001b[33m;\u001b[39m\n     \u001b[90m 3 |\u001b[39m \u001b[36mimport\u001b[39m { \u001b[33mBrowserRouter\u001b[39m } \u001b[36mfrom\u001b[39m \u001b[32m'react-router-dom'\u001b[39m\u001b[33m;\u001b[39m\n     \u001b[90m 4 |\u001b[39m \u001b[36mimport\u001b[39m \u001b[33mEmailAnalyticsDashboard\u001b[39m \u001b[36mfrom\u001b[39m \u001b[32m'@components/EmailAnalyticsDashboard'\u001b[39m\u001b[33m;\u001b[39m\u001b[0m\n\n      at Resolver._throwModNotFoundError (../node_modules/jest-resolve/build/index.js:863:11)\n      at Object.require (src/components/__tests__/EmailAnalyticsDashboard.test.jsx:1:1)\n\nFAIL src/hooks/__tests__/useReports.test.js\n  ● Test suite failed to run\n\n    Cannot find module '../useReports' from 'src/hooks/__tests__/useReports.test.js'\n\n    \u001b[0m \u001b[90m 1 |\u001b[39m \u001b[36mimport\u001b[39m { renderHook\u001b[33m,\u001b[39m waitFor } \u001b[36mfrom\u001b[39m \u001b[32m'@testing-library/react'\u001b[39m\u001b[33m;\u001b[39m\n     \u001b[90m 2 |\u001b[39m \u001b[36mimport\u001b[39m { \u001b[33mQueryClient\u001b[39m\u001b[33m,\u001b[39m \u001b[33mQueryProvider\u001b[39m } \u001b[36mfrom\u001b[39m \u001b[32m'@tanstack/react-query'\u001b[39m\u001b[33m;\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 3 |\u001b[39m \u001b[36mimport\u001b[39m { useReports\u001b[33m,\u001b[39m useReportMetrics\u001b[33m,\u001b[39m useReportGeneration\u001b[33m,\u001b[39m useScheduledReports } \u001b[36mfrom\u001b[39m \u001b[32m'../useReports'\u001b[39m\u001b[33m;\u001b[39m\n     \u001b[90m   |\u001b[39m \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 4 |\u001b[39m \u001b[36mimport\u001b[39m \u001b[33m*\u001b[39m \u001b[36mas\u001b[39m reportingService \u001b[36mfrom\u001b[39m \u001b[32m'../../services/reportingService'\u001b[39m\u001b[33m;\u001b[39m\n     \u001b[90m 5 |\u001b[39m\n     \u001b[90m 6 |\u001b[39m \u001b[90m// Mock services\u001b[39m\u001b[0m\n\n      at Resolver._throwModNotFoundError (../node_modules/jest-resolve/build/index.js:863:11)\n      at Object.require (src/hooks/__tests__/useReports.test.js:3:1)\n\nFAIL src/components/reports/__tests__/ReportScheduler.test.jsx\n  ● Test suite failed to run\n\n    Cannot find module '@/services\r    eportingService' from 'src/components/reports/__tests__/ReportScheduler.test.jsx'\n\n    \u001b[0m \u001b[90m 4 |\u001b[39m \u001b[36mimport\u001b[39m { \u001b[33mQueryClient\u001b[39m\u001b[33m,\u001b[39m \u001b[33mQueryProvider\u001b[39m } \u001b[36mfrom\u001b[39m \u001b[32m'@tanstack/react-query'\u001b[39m\u001b[33m;\u001b[39m\n     \u001b[90m 5 |\u001b[39m \u001b[36mimport\u001b[39m \u001b[33mReportScheduler\u001b[39m \u001b[36mfrom\u001b[39m \u001b[32m'../ReportScheduler'\u001b[39m\u001b[33m;\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 6 |\u001b[39m \u001b[36mimport\u001b[39m \u001b[33m*\u001b[39m \u001b[36mas\u001b[39m reportingService \u001b[36mfrom\u001b[39m \u001b[32m'@/services\\reportingService'\u001b[39m\u001b[33m;\u001b[39m\n     \u001b[90m   |\u001b[39m \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 7 |\u001b[39m\n     \u001b[90m 8 |\u001b[39m \u001b[90m// Mock services\u001b[39m\n     \u001b[90m 9 |\u001b[39m jest\u001b[33m.\u001b[39mmock(\u001b[32m'../../../services/reportingService'\u001b[39m)\u001b[33m;\u001b[39m\u001b[0m\n\n      at Resolver._throwModNotFoundError (../node_modules/jest-resolve/build/index.js:863:11)\n      at Object.require (src/components/reports/__tests__/ReportScheduler.test.jsx:6:1)\n\nFAIL src/hooks/__tests__/useEmails.test.js\n  ● Test suite failed to run\n\n    Cannot find module '../useEmails' from 'src/hooks/__tests__/useEmails.test.js'\n\n    \u001b[0m \u001b[90m 1 |\u001b[39m \u001b[36mimport\u001b[39m { renderHook\u001b[33m,\u001b[39m act } \u001b[36mfrom\u001b[39m \u001b[32m'@testing-library/react'\u001b[39m\u001b[33m;\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 2 |\u001b[39m \u001b[36mimport\u001b[39m { useEmails } \u001b[36mfrom\u001b[39m \u001b[32m'../useEmails'\u001b[39m\u001b[33m;\u001b[39m\n     \u001b[90m   |\u001b[39m \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 3 |\u001b[39m \u001b[36mimport\u001b[39m { \u001b[33mEmailProvider\u001b[39m\u001b[33m,\u001b[39m \u001b[33mAuthProvider\u001b[39m } \u001b[36mfrom\u001b[39m \u001b[32m'@/shared/state/providers'\u001b[39m\u001b[33m;\u001b[39m\n     \u001b[90m 4 |\u001b[39m \u001b[36mimport\u001b[39m { \u001b[33mWebSocketProvider\u001b[39m } \u001b[36mfrom\u001b[39m \u001b[32m'@providers/WebSocketProvider'\u001b[39m\u001b[33m;\u001b[39m\n     \u001b[90m 5 |\u001b[39m \u001b[36mimport\u001b[39m emailManagementService \u001b[36mfrom\u001b[39m \u001b[32m'@features/email'\u001b[39m\u001b[33m;\u001b[39m\u001b[0m\n\n      at Resolver._throwModNotFoundError (../node_modules/jest-resolve/build/index.js:863:11)\n      at Object.require (src/hooks/__tests__/useEmails.test.js:2:1)\n\nFAIL src/features/scanner/__tests__/services/rateLimitingService.test.ts\n  ● Test suite failed to run\n\n    Jest worker encountered 4 child process exceptions, exceeding retry limit\n\n      at ChildProcessWorker.initialize (../node_modules/jest-worker/build/index.js:805:21)\n\nFAIL src/features/scanner/__tests__/integration/ocrProviderFallback.test.ts (71.558 s)\n  ● OCR Provider Fallback Integration Tests › Provider Availability and Fallback Chain › should fallback to secondary provider when primary fails\n\n    thrown: \"Exceeded timeout of 10000 ms for a test.\n    Add a timeout value to this test to increase the timeout, if this is a long-running test. See https://jestjs.io/docs/api#testname-fn-timeout.\"\n\n    \u001b[0m \u001b[90m 136 |\u001b[39m     })\u001b[33m;\u001b[39m\n     \u001b[90m 137 |\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 138 |\u001b[39m     it(\u001b[32m'should fallback to secondary provider when primary fails'\u001b[39m\u001b[33m,\u001b[39m \u001b[36masync\u001b[39m () \u001b[33m=>\u001b[39m {\n     \u001b[90m     |\u001b[39m     \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 139 |\u001b[39m       \u001b[36mconst\u001b[39m mockOpenAIProvider \u001b[33m=\u001b[39m {\n     \u001b[90m 140 |\u001b[39m         isAvailable\u001b[33m:\u001b[39m jest\u001b[33m.\u001b[39mfn(() \u001b[33m=>\u001b[39m \u001b[36mtrue\u001b[39m)\u001b[33m,\u001b[39m\n     \u001b[90m 141 |\u001b[39m         extractText\u001b[33m:\u001b[39m jest\u001b[33m.\u001b[39mfn()\u001b[33m.\u001b[39mmockRejectedValue(\u001b[36mnew\u001b[39m \u001b[33mError\u001b[39m(\u001b[32m'OpenAI API error'\u001b[39m))\u001b[33m,\u001b[39m\u001b[0m\n\n      at it (src/features/scanner/__tests__/integration/ocrProviderFallback.test.ts:138:5)\n      at describe (src/features/scanner/__tests__/integration/ocrProviderFallback.test.ts:108:3)\n      at Object.describe (src/features/scanner/__tests__/integration/ocrProviderFallback.test.ts:47:1)\n\n  ● OCR Provider Fallback Integration Tests › Provider Availability and Fallback Chain › should use manual fallback when all AI providers fail\n\n    thrown: \"Exceeded timeout of 10000 ms for a test.\n    Add a timeout value to this test to increase the timeout, if this is a long-running test. See https://jestjs.io/docs/api#testname-fn-timeout.\"\n\n    \u001b[0m \u001b[90m 188 |\u001b[39m     })\u001b[33m;\u001b[39m\n     \u001b[90m 189 |\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 190 |\u001b[39m     it(\u001b[32m'should use manual fallback when all AI providers fail'\u001b[39m\u001b[33m,\u001b[39m \u001b[36masync\u001b[39m () \u001b[33m=>\u001b[39m {\n     \u001b[90m     |\u001b[39m     \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 191 |\u001b[39m       \u001b[36mconst\u001b[39m mockFailingProvider \u001b[33m=\u001b[39m {\n     \u001b[90m 192 |\u001b[39m         isAvailable\u001b[33m:\u001b[39m jest\u001b[33m.\u001b[39mfn(() \u001b[33m=>\u001b[39m \u001b[36mtrue\u001b[39m)\u001b[33m,\u001b[39m\n     \u001b[90m 193 |\u001b[39m         extractText\u001b[33m:\u001b[39m jest\u001b[33m.\u001b[39mfn()\u001b[33m.\u001b[39mmockRejectedValue(\u001b[36mnew\u001b[39m \u001b[33mError\u001b[39m(\u001b[32m'Provider failed'\u001b[39m))\u001b[33m,\u001b[39m\u001b[0m\n\n      at it (src/features/scanner/__tests__/integration/ocrProviderFallback.test.ts:190:5)\n      at describe (src/features/scanner/__tests__/integration/ocrProviderFallback.test.ts:108:3)\n      at Object.describe (src/features/scanner/__tests__/integration/ocrProviderFallback.test.ts:47:1)\n\n  ● OCR Provider Fallback Integration Tests › Rate Limiting Integration › should respect rate limits and queue requests\n\n    thrown: \"Exceeded timeout of 10000 ms for a test.\n    Add a timeout value to this test to increase the timeout, if this is a long-running test. See https://jestjs.io/docs/api#testname-fn-timeout.\"\n\n    \u001b[0m \u001b[90m 271 |\u001b[39m\n     \u001b[90m 272 |\u001b[39m   describe(\u001b[32m'Rate Limiting Integration'\u001b[39m\u001b[33m,\u001b[39m () \u001b[33m=>\u001b[39m {\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 273 |\u001b[39m     it(\u001b[32m'should respect rate limits and queue requests'\u001b[39m\u001b[33m,\u001b[39m \u001b[36masync\u001b[39m () \u001b[33m=>\u001b[39m {\n     \u001b[90m     |\u001b[39m     \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 274 |\u001b[39m       \u001b[90m// Mock rate limiting\u001b[39m\n     \u001b[90m 275 |\u001b[39m       \u001b[36mlet\u001b[39m rateLimitCallCount \u001b[33m=\u001b[39m \u001b[35m0\u001b[39m\u001b[33m;\u001b[39m\n     \u001b[90m 276 |\u001b[39m       jest\u001b[33m.\u001b[39mspyOn(rateLimitingService\u001b[33m,\u001b[39m \u001b[32m'checkRateLimit'\u001b[39m)\u001b[33m.\u001b[39mmockImplementation(\u001b[36masync\u001b[39m () \u001b[33m=>\u001b[39m {\u001b[0m\n\n      at it (src/features/scanner/__tests__/integration/ocrProviderFallback.test.ts:273:5)\n      at describe (src/features/scanner/__tests__/integration/ocrProviderFallback.test.ts:272:3)\n      at Object.describe (src/features/scanner/__tests__/integration/ocrProviderFallback.test.ts:47:1)\n\n  ● OCR Provider Fallback Integration Tests › Error Recovery and Retry Logic › should retry failed requests with exponential backoff\n\n    thrown: \"Exceeded timeout of 10000 ms for a test.\n    Add a timeout value to this test to increase the timeout, if this is a long-running test. See https://jestjs.io/docs/api#testname-fn-timeout.\"\n\n    \u001b[0m \u001b[90m 367 |\u001b[39m\n     \u001b[90m 368 |\u001b[39m   describe(\u001b[32m'Error Recovery and Retry Logic'\u001b[39m\u001b[33m,\u001b[39m () \u001b[33m=>\u001b[39m {\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 369 |\u001b[39m     it(\u001b[32m'should retry failed requests with exponential backoff'\u001b[39m\u001b[33m,\u001b[39m \u001b[36masync\u001b[39m () \u001b[33m=>\u001b[39m {\n     \u001b[90m     |\u001b[39m     \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 370 |\u001b[39m       \u001b[36mlet\u001b[39m attemptCount \u001b[33m=\u001b[39m \u001b[35m0\u001b[39m\u001b[33m;\u001b[39m\n     \u001b[90m 371 |\u001b[39m       \u001b[36mconst\u001b[39m mockProvider \u001b[33m=\u001b[39m {\n     \u001b[90m 372 |\u001b[39m         isAvailable\u001b[33m:\u001b[39m jest\u001b[33m.\u001b[39mfn(() \u001b[33m=>\u001b[39m \u001b[36mtrue\u001b[39m)\u001b[33m,\u001b[39m\u001b[0m\n\n      at it (src/features/scanner/__tests__/integration/ocrProviderFallback.test.ts:369:5)\n      at describe (src/features/scanner/__tests__/integration/ocrProviderFallback.test.ts:368:3)\n      at Object.describe (src/features/scanner/__tests__/integration/ocrProviderFallback.test.ts:47:1)\n\n  ● OCR Provider Fallback Integration Tests › Error Recovery and Retry Logic › should handle timeout errors with appropriate fallback\n\n    thrown: \"Exceeded timeout of 10000 ms for a test.\n    Add a timeout value to this test to increase the timeout, if this is a long-running test. See https://jestjs.io/docs/api#testname-fn-timeout.\"\n\n    \u001b[0m \u001b[90m 402 |\u001b[39m     })\u001b[33m;\u001b[39m\n     \u001b[90m 403 |\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 404 |\u001b[39m     it(\u001b[32m'should handle timeout errors with appropriate fallback'\u001b[39m\u001b[33m,\u001b[39m \u001b[36masync\u001b[39m () \u001b[33m=>\u001b[39m {\n     \u001b[90m     |\u001b[39m     \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 405 |\u001b[39m       \u001b[36mconst\u001b[39m mockTimeoutProvider \u001b[33m=\u001b[39m {\n     \u001b[90m 406 |\u001b[39m         isAvailable\u001b[33m:\u001b[39m jest\u001b[33m.\u001b[39mfn(() \u001b[33m=>\u001b[39m \u001b[36mtrue\u001b[39m)\u001b[33m,\u001b[39m\n     \u001b[90m 407 |\u001b[39m         extractText\u001b[33m:\u001b[39m jest\u001b[33m.\u001b[39mfn()\u001b[33m.\u001b[39mmockImplementation(\u001b[36masync\u001b[39m () \u001b[33m=>\u001b[39m {\u001b[0m\n\n      at it (src/features/scanner/__tests__/integration/ocrProviderFallback.test.ts:404:5)\n      at describe (src/features/scanner/__tests__/integration/ocrProviderFallback.test.ts:368:3)\n      at Object.describe (src/features/scanner/__tests__/integration/ocrProviderFallback.test.ts:47:1)\n\n  ● OCR Provider Fallback Integration Tests › Error Recovery and Retry Logic › should handle network connectivity issues\n\n    thrown: \"Exceeded timeout of 10000 ms for a test.\n    Add a timeout value to this test to increase the timeout, if this is a long-running test. See https://jestjs.io/docs/api#testname-fn-timeout.\"\n\n    \u001b[0m \u001b[90m 449 |\u001b[39m     })\u001b[33m;\u001b[39m\n     \u001b[90m 450 |\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 451 |\u001b[39m     it(\u001b[32m'should handle network connectivity issues'\u001b[39m\u001b[33m,\u001b[39m \u001b[36masync\u001b[39m () \u001b[33m=>\u001b[39m {\n     \u001b[90m     |\u001b[39m     \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 452 |\u001b[39m       \u001b[36mconst\u001b[39m mockNetworkErrorProvider \u001b[33m=\u001b[39m {\n     \u001b[90m 453 |\u001b[39m         isAvailable\u001b[33m:\u001b[39m jest\u001b[33m.\u001b[39mfn(() \u001b[33m=>\u001b[39m \u001b[36mtrue\u001b[39m)\u001b[33m,\u001b[39m\n     \u001b[90m 454 |\u001b[39m         extractText\u001b[33m:\u001b[39m jest\u001b[33m.\u001b[39mfn()\u001b[33m.\u001b[39mmockRejectedValue(\u001b[36mnew\u001b[39m \u001b[33mError\u001b[39m(\u001b[32m'Network error: ECONNREFUSED'\u001b[39m))\u001b[33m,\u001b[39m\u001b[0m\n\n      at it (src/features/scanner/__tests__/integration/ocrProviderFallback.test.ts:451:5)\n      at describe (src/features/scanner/__tests__/integration/ocrProviderFallback.test.ts:368:3)\n      at Object.describe (src/features/scanner/__tests__/integration/ocrProviderFallback.test.ts:47:1)\n\n  ● OCR Provider Fallback Integration Tests › Provider Health Monitoring › should monitor provider health and adjust fallback strategy\n\n    expect(received).toBe(expected) // Object.is equality\n\n    Expected: true\n    Received: false\n\n    \u001b[0m \u001b[90m 509 |\u001b[39m       \u001b[36mconst\u001b[39m healthCheck \u001b[33m=\u001b[39m \u001b[36mawait\u001b[39m fallbackService\u001b[33m.\u001b[39mhealthCheck()\u001b[33m;\u001b[39m\n     \u001b[90m 510 |\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 511 |\u001b[39m       expect(healthCheck\u001b[33m.\u001b[39mhealthy)\u001b[33m.\u001b[39mtoBe(\u001b[36mtrue\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                                   \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 512 |\u001b[39m       expect(healthCheck\u001b[33m.\u001b[39mavailableProviders)\u001b[33m.\u001b[39mtoContain(\u001b[33mOCRProvider\u001b[39m\u001b[33m.\u001b[39m\u001b[33mOpenAI\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m 513 |\u001b[39m       expect(healthCheck\u001b[33m.\u001b[39mavailableProviders)\u001b[33m.\u001b[39mtoContain(\u001b[33mOCRProvider\u001b[39m\u001b[33m.\u001b[39m\u001b[33mFallback\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m 514 |\u001b[39m       expect(healthCheck\u001b[33m.\u001b[39mavailableProviders)\u001b[33m.\u001b[39mnot\u001b[33m.\u001b[39mtoContain(\u001b[33mOCRProvider\u001b[39m\u001b[33m.\u001b[39m\u001b[33mQwen\u001b[39m)\u001b[33m;\u001b[39m\u001b[0m\n\n      at Object.toBe (src/features/scanner/__tests__/integration/ocrProviderFallback.test.ts:511:35)\n\n  ● OCR Provider Fallback Integration Tests › Provider Health Monitoring › should detect unhealthy system state\n\n    expect(received).toContain(expected) // indexOf\n\n    Expected value: \"Only fallback provider available\"\n    Received array: [\"Provider openai is not available: Unknown reason\", \"Provider qwen is not available: Unknown reason\"]\n\n    \u001b[0m \u001b[90m 547 |\u001b[39m       expect(healthCheck\u001b[33m.\u001b[39mhealthy)\u001b[33m.\u001b[39mtoBe(\u001b[36mfalse\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m 548 |\u001b[39m       expect(healthCheck\u001b[33m.\u001b[39mavailableProviders)\u001b[33m.\u001b[39mtoEqual([\u001b[33mOCRProvider\u001b[39m\u001b[33m.\u001b[39m\u001b[33mFallback\u001b[39m])\u001b[33m;\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 549 |\u001b[39m       expect(healthCheck\u001b[33m.\u001b[39missues)\u001b[33m.\u001b[39mtoContain(\u001b[32m'Only fallback provider available'\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                                  \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 550 |\u001b[39m       expect(healthCheck\u001b[33m.\u001b[39missues)\u001b[33m.\u001b[39mtoContain(\u001b[32m'OpenAI provider is rate limited or unavailable'\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m 551 |\u001b[39m       expect(healthCheck\u001b[33m.\u001b[39missues)\u001b[33m.\u001b[39mtoContain(\u001b[32m'Qwen provider is rate limited or unavailable'\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m 552 |\u001b[39m     })\u001b[33m;\u001b[39m\u001b[0m\n\n      at Object.toContain (src/features/scanner/__tests__/integration/ocrProviderFallback.test.ts:549:34)\n\n  ● OCR Provider Fallback Integration Tests › Integration with Main OCR Service › should integrate fallback mechanism with main OCR service\n\n    expect(received).toEqual(expected) // deep equality\n\n    - Expected  - 1\n    + Received  + 4\n\n    @@ -10,9 +10,12 @@\n            \"confidence\": 0.95,\n            \"text\": \"Successfully extracted text content\",\n          },\n        ],\n        \"confidence\": 0.95,\n    -   \"processingTime\": 1500,\n    +   \"error\": undefined,\n    +   \"processingTime\": 0,\n        \"provider\": \"openai\",\n    +   \"rawResponse\": undefined,\n    +   \"tables\": undefined,\n        \"text\": \"Successfully extracted text content\",\n      }\n\n    \u001b[0m \u001b[90m 624 |\u001b[39m       \u001b[36mconst\u001b[39m result \u001b[33m=\u001b[39m \u001b[36mawait\u001b[39m ocrService\u001b[33m.\u001b[39mextractText(imageBlob)\u001b[33m;\u001b[39m\n     \u001b[90m 625 |\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 626 |\u001b[39m       expect(result)\u001b[33m.\u001b[39mtoEqual(mockSuccessResult)\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                      \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 627 |\u001b[39m       expect(\u001b[33mOCRProviderFactory\u001b[39m\u001b[33m.\u001b[39minitialize)\u001b[33m.\u001b[39mtoHaveBeenCalled()\u001b[33m;\u001b[39m\n     \u001b[90m 628 |\u001b[39m       expect(mockProvider\u001b[33m.\u001b[39mextractText)\u001b[33m.\u001b[39mtoHaveBeenCalledWith(imageBlob\u001b[33m,\u001b[39m undefined)\u001b[33m;\u001b[39m\n     \u001b[90m 629 |\u001b[39m     })\u001b[33m;\u001b[39m\u001b[0m\n\n      at Object.toEqual (src/features/scanner/__tests__/integration/ocrProviderFallback.test.ts:626:22)\n\n  ● OCR Provider Fallback Integration Tests › Integration with Main OCR Service › should handle service initialization failures gracefully\n\n    expect(received).rejects.toThrow()\n\n    Received promise resolved instead of rejected\n    Resolved to value: {\"blocks\": [{\"bounds\": {\"height\": 30, \"width\": 200, \"x\": 0, \"y\": 0}, \"confidence\": 0.95, \"text\": \"Successfully extracted text content\"}], \"confidence\": 0.95, \"error\": undefined, \"processingTime\": 0, \"provider\": \"openai\", \"rawResponse\": undefined, \"tables\": undefined, \"text\": \"Successfully extracted text content\"}\n\n    \u001b[0m \u001b[90m 636 |\u001b[39m       \u001b[36mconst\u001b[39m imageBlob \u001b[33m=\u001b[39m createMockBlob()\u001b[33m;\u001b[39m\n     \u001b[90m 637 |\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 638 |\u001b[39m       \u001b[36mawait\u001b[39m expect(ocrService\u001b[33m.\u001b[39mextractText(imageBlob))\n     \u001b[90m     |\u001b[39m             \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 639 |\u001b[39m         \u001b[33m.\u001b[39mrejects\u001b[33m.\u001b[39mtoThrow(\u001b[32m'OCR service initialization failed'\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m 640 |\u001b[39m     })\u001b[33m;\u001b[39m\n     \u001b[90m 641 |\u001b[39m   })\u001b[33m;\u001b[39m\u001b[0m\n\n      at expect (../node_modules/expect/build/index.js:2113:15)\n      at Object.expect (src/features/scanner/__tests__/integration/ocrProviderFallback.test.ts:638:13)\n\n  ● OCR Provider Fallback Integration Tests › Performance Under Load › should handle concurrent requests with proper fallback\n\n    thrown: \"Exceeded timeout of 10000 ms for a test.\n    Add a timeout value to this test to increase the timeout, if this is a long-running test. See https://jestjs.io/docs/api#testname-fn-timeout.\"\n\n    \u001b[0m \u001b[90m 642 |\u001b[39m\n     \u001b[90m 643 |\u001b[39m   describe(\u001b[32m'Performance Under Load'\u001b[39m\u001b[33m,\u001b[39m () \u001b[33m=>\u001b[39m {\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 644 |\u001b[39m     it(\u001b[32m'should handle concurrent requests with proper fallback'\u001b[39m\u001b[33m,\u001b[39m \u001b[36masync\u001b[39m () \u001b[33m=>\u001b[39m {\n     \u001b[90m     |\u001b[39m     \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 645 |\u001b[39m       \u001b[36mlet\u001b[39m requestCount \u001b[33m=\u001b[39m \u001b[35m0\u001b[39m\u001b[33m;\u001b[39m\n     \u001b[90m 646 |\u001b[39m       \u001b[36mconst\u001b[39m mockProvider \u001b[33m=\u001b[39m {\n     \u001b[90m 647 |\u001b[39m         isAvailable\u001b[33m:\u001b[39m jest\u001b[33m.\u001b[39mfn(() \u001b[33m=>\u001b[39m \u001b[36mtrue\u001b[39m)\u001b[33m,\u001b[39m\u001b[0m\n\n      at it (src/features/scanner/__tests__/integration/ocrProviderFallback.test.ts:644:5)\n      at describe (src/features/scanner/__tests__/integration/ocrProviderFallback.test.ts:643:3)\n      at Object.describe (src/features/scanner/__tests__/integration/ocrProviderFallback.test.ts:47:1)\n\n  ● OCR Provider Fallback Integration Tests › Performance Under Load › should handle concurrent requests with proper fallback\n\n    OCR service initialization failed\n\n    \u001b[0m \u001b[90m 44 |\u001b[39m     } \u001b[36mcatch\u001b[39m (error) {\n     \u001b[90m 45 |\u001b[39m       console\u001b[33m.\u001b[39merror(\u001b[32m'Failed to initialize OCR service:'\u001b[39m\u001b[33m,\u001b[39m error)\u001b[33m;\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 46 |\u001b[39m       \u001b[36mthrow\u001b[39m \u001b[36mnew\u001b[39m \u001b[33mError\u001b[39m(\u001b[32m'OCR service initialization failed'\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m    |\u001b[39m             \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 47 |\u001b[39m     }\n     \u001b[90m 48 |\u001b[39m   }\n     \u001b[90m 49 |\u001b[39m\u001b[0m\n\n      at AIOCRService.initialize (src/features/scanner/services/ocrService.ts:46:13)\n\n  ● OCR Provider Fallback Integration Tests › Performance Under Load › should handle concurrent requests with proper fallback\n\n    OCR service initialization failed\n\n    \u001b[0m \u001b[90m 44 |\u001b[39m     } \u001b[36mcatch\u001b[39m (error) {\n     \u001b[90m 45 |\u001b[39m       console\u001b[33m.\u001b[39merror(\u001b[32m'Failed to initialize OCR service:'\u001b[39m\u001b[33m,\u001b[39m error)\u001b[33m;\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 46 |\u001b[39m       \u001b[36mthrow\u001b[39m \u001b[36mnew\u001b[39m \u001b[33mError\u001b[39m(\u001b[32m'OCR service initialization failed'\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m    |\u001b[39m             \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 47 |\u001b[39m     }\n     \u001b[90m 48 |\u001b[39m   }\n     \u001b[90m 49 |\u001b[39m\u001b[0m\n\n      at AIOCRService.initialize (src/features/scanner/services/ocrService.ts:46:13)\n\n  ● OCR Provider Fallback Integration Tests › Performance Under Load › should handle concurrent requests with proper fallback\n\n    OCR service initialization failed\n\n    \u001b[0m \u001b[90m 44 |\u001b[39m     } \u001b[36mcatch\u001b[39m (error) {\n     \u001b[90m 45 |\u001b[39m       console\u001b[33m.\u001b[39merror(\u001b[32m'Failed to initialize OCR service:'\u001b[39m\u001b[33m,\u001b[39m error)\u001b[33m;\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 46 |\u001b[39m       \u001b[36mthrow\u001b[39m \u001b[36mnew\u001b[39m \u001b[33mError\u001b[39m(\u001b[32m'OCR service initialization failed'\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m    |\u001b[39m             \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 47 |\u001b[39m     }\n     \u001b[90m 48 |\u001b[39m   }\n     \u001b[90m 49 |\u001b[39m\u001b[0m\n\n      at AIOCRService.initialize (src/features/scanner/services/ocrService.ts:46:13)\n\n\nTest Suites: 55 failed, 6 passed, 61 total\nTests:       60 failed, 194 passed, 254 total\nSnapshots:   0 total\nTime:        77.942 s\nnpm error Lifecycle script `test:coverage` failed with error:\nnpm error code 1\nnpm error path E:\\AlexVenturesStudio\\Nexa_Manager_whit_Task_Master\\web-app\nnpm error workspace web-app@0.0.0\nnpm error location E:\\AlexVenturesStudio\\Nexa_Manager_whit_Task_Master\\web-app\nnpm error command failed\nnpm error command C:\\WINDOWS\\system32\\cmd.exe /d /s /c jest --config ../.config/jest/jest.config.cjs --coverage --silent\n"
      }
    },
    {
      "name": "Build Health",
      "critical": true,
      "status": "failed",
      "startTime": 1753584589167,
      "endTime": 1753584593848,
      "duration": 4681,
      "result": {
        "status": "failed",
        "details": {
          "buildSucceeded": false,
          "error": "Build failed",
          "message": "Command failed: npm run build\nnpm error Lifecycle script `build` failed with error:\nnpm error code 2\nnpm error path E:\\AlexVenturesStudio\\Nexa_Manager_whit_Task_Master\\web-app\nnpm error workspace web-app@0.0.0\nnpm error location E:\\AlexVenturesStudio\\Nexa_Manager_whit_Task_Master\\web-app\nnpm error command failed\nnpm error command C:\\WINDOWS\\system32\\cmd.exe /d /s /c tsc && vite build\n"
        }
      },
      "error": null,
      "details": {
        "buildSucceeded": false,
        "error": "Build failed",
        "message": "Command failed: npm run build\nnpm error Lifecycle script `build` failed with error:\nnpm error code 2\nnpm error path E:\\AlexVenturesStudio\\Nexa_Manager_whit_Task_Master\\web-app\nnpm error workspace web-app@0.0.0\nnpm error location E:\\AlexVenturesStudio\\Nexa_Manager_whit_Task_Master\\web-app\nnpm error command failed\nnpm error command C:\\WINDOWS\\system32\\cmd.exe /d /s /c tsc && vite build\n"
      }
    },
    {
      "name": "Architecture",
      "critical": false,
      "status": "passed",
      "startTime": 1753584593848,
      "endTime": 1753584594016,
      "duration": 168,
      "result": {
        "status": "passed",
        "details": {
          "healthScore": 100,
          "violations": 0,
          "warnings": 0,
          "features": 9,
          "sharedModules": 7
        }
      },
      "error": null,
      "details": {
        "healthScore": 100,
        "violations": 0,
        "warnings": 0,
        "features": 9,
        "sharedModules": 7
      }
    },
    {
      "name": "Performance",
      "critical": false,
      "status": "failed",
      "startTime": 1753584594016,
      "endTime": 1753584598980,
      "duration": 4964,
      "result": {
        "status": "failed",
        "details": {
          "error": "Performance check failed",
          "message": "Command failed: npm run build\nnpm error Lifecycle script `build` failed with error:\nnpm error code 2\nnpm error path E:\\AlexVenturesStudio\\Nexa_Manager_whit_Task_Master\\web-app\nnpm error workspace web-app@0.0.0\nnpm error location E:\\AlexVenturesStudio\\Nexa_Manager_whit_Task_Master\\web-app\nnpm error command failed\nnpm error command C:\\WINDOWS\\system32\\cmd.exe /d /s /c tsc && vite build\n"
        }
      },
      "error": null,
      "details": {
        "error": "Performance check failed",
        "message": "Command failed: npm run build\nnpm error Lifecycle script `build` failed with error:\nnpm error code 2\nnpm error path E:\\AlexVenturesStudio\\Nexa_Manager_whit_Task_Master\\web-app\nnpm error workspace web-app@0.0.0\nnpm error location E:\\AlexVenturesStudio\\Nexa_Manager_whit_Task_Master\\web-app\nnpm error command failed\nnpm error command C:\\WINDOWS\\system32\\cmd.exe /d /s /c tsc && vite build\n"
      }
    }
  ],
  "summary": {
    "total": 8,
    "passed": 2,
    "failed": 4,
    "warnings": 2
  },
  "overallHealth": 0,
  "recommendations": [
    "Fix missing project directories",
    "Fix TypeScript errors and ESLint violations",
    "Fix build issues and optimize bundle size",
    "Optimize build performance and startup time"
  ]
}